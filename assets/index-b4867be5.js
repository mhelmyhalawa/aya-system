var bN=Object.defineProperty;var wN=(e,t,r)=>t in e?bN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Po=(e,t,r)=>(wN(e,typeof t!="symbol"?t+"":t,r),r),xh=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var oe=(e,t,r)=>(xh(e,t,"read from private field"),r?r.call(e):t.get(e)),bt=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Ze=(e,t,r,n)=>(xh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);var $c=(e,t,r,n)=>({set _(a){Ze(e,t,a,r)},get _(){return oe(e,t,n)}}),xr=(e,t,r)=>(xh(e,t,"access private method"),r);function jN(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var mn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Gv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Kv={exports:{}},wu={},Yv={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc=Symbol.for("react.element"),_N=Symbol.for("react.portal"),NN=Symbol.for("react.fragment"),SN=Symbol.for("react.strict_mode"),kN=Symbol.for("react.profiler"),CN=Symbol.for("react.provider"),EN=Symbol.for("react.context"),TN=Symbol.for("react.forward_ref"),PN=Symbol.for("react.suspense"),ON=Symbol.for("react.memo"),AN=Symbol.for("react.lazy"),Gg=Symbol.iterator;function DN(e){return e===null||typeof e!="object"?null:(e=Gg&&e[Gg]||e["@@iterator"],typeof e=="function"?e:null)}var Qv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jv=Object.assign,Xv={};function Li(e,t,r){this.props=e,this.context=t,this.refs=Xv,this.updater=r||Qv}Li.prototype.isReactComponent={};Li.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Li.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Zv(){}Zv.prototype=Li.prototype;function Xm(e,t,r){this.props=e,this.context=t,this.refs=Xv,this.updater=r||Qv}var Zm=Xm.prototype=new Zv;Zm.constructor=Xm;Jv(Zm,Li.prototype);Zm.isPureReactComponent=!0;var Kg=Array.isArray,ey=Object.prototype.hasOwnProperty,e0={current:null},ty={key:!0,ref:!0,__self:!0,__source:!0};function ry(e,t,r){var n,a={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)ey.call(t,n)&&!ty.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:gc,type:e,key:o,ref:i,props:a,_owner:e0.current}}function MN(e,t){return{$$typeof:gc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function t0(e){return typeof e=="object"&&e!==null&&e.$$typeof===gc}function RN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Yg=/\/+/g;function vh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RN(""+e.key):t.toString(36)}function wd(e,t,r,n,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case gc:case _N:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+vh(i,0):n,Kg(a)?(r="",e!=null&&(r=e.replace(Yg,"$&/")+"/"),wd(a,t,r,"",function(d){return d})):a!=null&&(t0(a)&&(a=MN(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Yg,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",Kg(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+vh(o,l);i+=wd(o,t,r,c,a)}else if(c=DN(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+vh(o,l++),i+=wd(o,t,r,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Lc(e,t,r){if(e==null)return e;var n=[],a=0;return wd(e,n,"","",function(o){return t.call(r,o,a++)}),n}function IN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fr={current:null},jd={transition:null},$N={ReactCurrentDispatcher:Fr,ReactCurrentBatchConfig:jd,ReactCurrentOwner:e0};function ny(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:Lc,forEach:function(e,t,r){Lc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Lc(e,function(){t++}),t},toArray:function(e){return Lc(e,function(t){return t})||[]},only:function(e){if(!t0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ct.Component=Li;ct.Fragment=NN;ct.Profiler=kN;ct.PureComponent=Xm;ct.StrictMode=SN;ct.Suspense=PN;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$N;ct.act=ny;ct.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Jv({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=e0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ey.call(t,c)&&!ty.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:gc,type:e.type,key:a,ref:o,props:n,_owner:i}};ct.createContext=function(e){return e={$$typeof:EN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:CN,_context:e},e.Consumer=e};ct.createElement=ry;ct.createFactory=function(e){var t=ry.bind(null,e);return t.type=e,t};ct.createRef=function(){return{current:null}};ct.forwardRef=function(e){return{$$typeof:TN,render:e}};ct.isValidElement=t0;ct.lazy=function(e){return{$$typeof:AN,_payload:{_status:-1,_result:e},_init:IN}};ct.memo=function(e,t){return{$$typeof:ON,type:e,compare:t===void 0?null:t}};ct.startTransition=function(e){var t=jd.transition;jd.transition={};try{e()}finally{jd.transition=t}};ct.unstable_act=ny;ct.useCallback=function(e,t){return Fr.current.useCallback(e,t)};ct.useContext=function(e){return Fr.current.useContext(e)};ct.useDebugValue=function(){};ct.useDeferredValue=function(e){return Fr.current.useDeferredValue(e)};ct.useEffect=function(e,t){return Fr.current.useEffect(e,t)};ct.useId=function(){return Fr.current.useId()};ct.useImperativeHandle=function(e,t,r){return Fr.current.useImperativeHandle(e,t,r)};ct.useInsertionEffect=function(e,t){return Fr.current.useInsertionEffect(e,t)};ct.useLayoutEffect=function(e,t){return Fr.current.useLayoutEffect(e,t)};ct.useMemo=function(e,t){return Fr.current.useMemo(e,t)};ct.useReducer=function(e,t,r){return Fr.current.useReducer(e,t,r)};ct.useRef=function(e){return Fr.current.useRef(e)};ct.useState=function(e){return Fr.current.useState(e)};ct.useSyncExternalStore=function(e,t,r){return Fr.current.useSyncExternalStore(e,t,r)};ct.useTransition=function(){return Fr.current.useTransition()};ct.version="18.3.1";Yv.exports=ct;var h=Yv.exports;const he=qv(h),sy=jN({__proto__:null,default:he},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LN=h,FN=Symbol.for("react.element"),zN=Symbol.for("react.fragment"),BN=Object.prototype.hasOwnProperty,UN=LN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WN={key:!0,ref:!0,__self:!0,__source:!0};function ay(e,t,r){var n,a={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)BN.call(t,n)&&!WN.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:FN,type:e,key:o,ref:i,props:a,_owner:UN.current}}wu.Fragment=zN;wu.jsx=ay;wu.jsxs=ay;Kv.exports=wu;var s=Kv.exports,oy={exports:{}},pn={},iy={exports:{}},ly={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,z){var Y=R.length;R.push(z);e:for(;0<Y;){var W=Y-1>>>1,Z=R[W];if(0<a(Z,z))R[W]=z,R[Y]=Z,Y=W;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var z=R[0],Y=R.pop();if(Y!==z){R[0]=Y;e:for(var W=0,Z=R.length,B=Z>>>1;W<B;){var X=2*(W+1)-1,K=R[X],ae=X+1,te=R[ae];if(0>a(K,Y))ae<Z&&0>a(te,K)?(R[W]=te,R[ae]=Y,W=ae):(R[W]=K,R[X]=Y,W=X);else if(ae<Z&&0>a(te,Y))R[W]=te,R[ae]=Y,W=ae;else break e}}return z}function a(R,z){var Y=R.sortIndex-z.sortIndex;return Y!==0?Y:R.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,m=null,f=3,x=!1,y=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var z=r(d);z!==null;){if(z.callback===null)n(d);else if(z.startTime<=R)n(d),z.sortIndex=z.expirationTime,t(c,z);else break;z=r(d)}}function N(R){if(g=!1,b(R),!y)if(r(c)!==null)y=!0,A(S);else{var z=r(d);z!==null&&F(N,z.startTime-R)}}function S(R,z){y=!1,g&&(g=!1,v(I),I=-1),x=!0;var Y=f;try{for(b(z),m=r(c);m!==null&&(!(m.expirationTime>z)||R&&!T());){var W=m.callback;if(typeof W=="function"){m.callback=null,f=m.priorityLevel;var Z=W(m.expirationTime<=z);z=e.unstable_now(),typeof Z=="function"?m.callback=Z:m===r(c)&&n(c),b(z)}else n(c);m=r(c)}if(m!==null)var B=!0;else{var X=r(d);X!==null&&F(N,X.startTime-z),B=!1}return B}finally{m=null,f=Y,x=!1}}var E=!1,D=null,I=-1,ee=5,J=-1;function T(){return!(e.unstable_now()-J<ee)}function _(){if(D!==null){var R=e.unstable_now();J=R;var z=!0;try{z=D(!0,R)}finally{z?O():(E=!1,D=null)}}else E=!1}var O;if(typeof p=="function")O=function(){p(_)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,k=j.port2;j.port1.onmessage=_,O=function(){k.postMessage(null)}}else O=function(){w(_,0)};function A(R){D=R,E||(E=!0,O())}function F(R,z){I=w(function(){R(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,A(S))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var Y=f;f=z;try{return R()}finally{f=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,z){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Y=f;f=R;try{return z()}finally{f=Y}},e.unstable_scheduleCallback=function(R,z,Y){var W=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?W+Y:W):Y=W,R){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=Y+Z,R={id:u++,callback:z,priorityLevel:R,startTime:Y,expirationTime:Z,sortIndex:-1},Y>W?(R.sortIndex=Y,t(d,R),r(c)===null&&R===r(d)&&(g?(v(I),I=-1):g=!0,F(N,Y-W))):(R.sortIndex=Z,t(c,R),y||x||(y=!0,A(S))),R},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(R){var z=f;return function(){var Y=f;f=z;try{return R.apply(this,arguments)}finally{f=Y}}}})(ly);iy.exports=ly;var VN=iy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HN=h,gn=VN;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cy=new Set,Ll={};function jo(e,t){Si(e,t),Si(e+"Capture",t)}function Si(e,t){for(Ll[e]=t,e=0;e<t.length;e++)cy.add(t[e])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vf=Object.prototype.hasOwnProperty,qN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qg={},Jg={};function GN(e){return vf.call(Jg,e)?!0:vf.call(Qg,e)?!1:qN.test(e)?Jg[e]=!0:(Qg[e]=!0,!1)}function KN(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function YN(e,t,r,n){if(t===null||typeof t>"u"||KN(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function zr(e,t,r,n,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fr[e]=new zr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fr[t]=new zr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fr[e]=new zr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fr[e]=new zr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fr[e]=new zr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fr[e]=new zr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fr[e]=new zr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fr[e]=new zr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fr[e]=new zr(e,5,!1,e.toLowerCase(),null,!1,!1)});var r0=/[\-:]([a-z])/g;function n0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(r0,n0);fr[t]=new zr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(r0,n0);fr[t]=new zr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(r0,n0);fr[t]=new zr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fr[e]=new zr(e,1,!1,e.toLowerCase(),null,!1,!1)});fr.xlinkHref=new zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fr[e]=new zr(e,1,!1,e.toLowerCase(),null,!0,!0)});function s0(e,t,r,n){var a=fr.hasOwnProperty(t)?fr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(YN(t,r,a,n)&&(r=null),n||a===null?GN(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Fs=HN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fc=Symbol.for("react.element"),Vo=Symbol.for("react.portal"),Ho=Symbol.for("react.fragment"),a0=Symbol.for("react.strict_mode"),yf=Symbol.for("react.profiler"),dy=Symbol.for("react.provider"),uy=Symbol.for("react.context"),o0=Symbol.for("react.forward_ref"),bf=Symbol.for("react.suspense"),wf=Symbol.for("react.suspense_list"),i0=Symbol.for("react.memo"),ta=Symbol.for("react.lazy"),hy=Symbol.for("react.offscreen"),Xg=Symbol.iterator;function el(e){return e===null||typeof e!="object"?null:(e=Xg&&e[Xg]||e["@@iterator"],typeof e=="function"?e:null)}var Vt=Object.assign,yh;function gl(e){if(yh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);yh=t&&t[1]||""}return`
`+yh+e}var bh=!1;function wh(e,t){if(!e||bh)return"";bh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),o=n.stack.split(`
`),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==o[l]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{bh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?gl(e):""}function QN(e){switch(e.tag){case 5:return gl(e.type);case 16:return gl("Lazy");case 13:return gl("Suspense");case 19:return gl("SuspenseList");case 0:case 2:case 15:return e=wh(e.type,!1),e;case 11:return e=wh(e.type.render,!1),e;case 1:return e=wh(e.type,!0),e;default:return""}}function jf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ho:return"Fragment";case Vo:return"Portal";case yf:return"Profiler";case a0:return"StrictMode";case bf:return"Suspense";case wf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uy:return(e.displayName||"Context")+".Consumer";case dy:return(e._context.displayName||"Context")+".Provider";case o0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case i0:return t=e.displayName||null,t!==null?t:jf(e.type)||"Memo";case ta:t=e._payload,e=e._init;try{return jf(e(t))}catch{}}return null}function JN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jf(t);case 8:return t===a0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ja(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function XN(e){var t=fy(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zc(e){e._valueTracker||(e._valueTracker=XN(e))}function my(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=fy(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ld(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _f(e,t){var r=t.checked;return Vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Zg(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ja(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gy(e,t){t=t.checked,t!=null&&s0(e,"checked",t,!1)}function Nf(e,t){gy(e,t);var r=ja(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Sf(e,t.type,r):t.hasOwnProperty("defaultValue")&&Sf(e,t.type,ja(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ep(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Sf(e,t,r){(t!=="number"||Ld(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var pl=Array.isArray;function ni(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ja(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function kf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tp(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ce(92));if(pl(r)){if(1<r.length)throw Error(ce(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ja(r)}}function py(e,t){var r=ja(t.value),n=ja(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function rp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bc,vy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bc=Bc||document.createElement("div"),Bc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZN=["Webkit","ms","Moz","O"];Object.keys(Nl).forEach(function(e){ZN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nl[t]=Nl[e]})});function yy(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Nl.hasOwnProperty(e)&&Nl[e]?(""+t).trim():t+"px"}function by(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=yy(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var eS=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ef(e,t){if(t){if(eS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function Tf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pf=null;function l0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Of=null,si=null,ai=null;function np(e){if(e=vc(e)){if(typeof Of!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=ku(t),Of(e.stateNode,e.type,t))}}function wy(e){si?ai?ai.push(e):ai=[e]:si=e}function jy(){if(si){var e=si,t=ai;if(ai=si=null,np(e),t)for(e=0;e<t.length;e++)np(t[e])}}function _y(e,t){return e(t)}function Ny(){}var jh=!1;function Sy(e,t,r){if(jh)return e(t,r);jh=!0;try{return _y(e,t,r)}finally{jh=!1,(si!==null||ai!==null)&&(Ny(),jy())}}function zl(e,t){var r=e.stateNode;if(r===null)return null;var n=ku(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ce(231,t,typeof r));return r}var Af=!1;if(As)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){Af=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{Af=!1}function tS(e,t,r,n,a,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Sl=!1,Fd=null,zd=!1,Df=null,rS={onError:function(e){Sl=!0,Fd=e}};function nS(e,t,r,n,a,o,i,l,c){Sl=!1,Fd=null,tS.apply(rS,arguments)}function sS(e,t,r,n,a,o,i,l,c){if(nS.apply(this,arguments),Sl){if(Sl){var d=Fd;Sl=!1,Fd=null}else throw Error(ce(198));zd||(zd=!0,Df=d)}}function _o(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ky(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sp(e){if(_o(e)!==e)throw Error(ce(188))}function aS(e){var t=e.alternate;if(!t){if(t=_o(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return sp(a),e;if(o===n)return sp(a),t;o=o.sibling}throw Error(ce(188))}if(r.return!==n.return)r=a,n=o;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,n=o;break}if(l===n){i=!0,n=a,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=a;break}if(l===n){i=!0,n=o,r=a;break}l=l.sibling}if(!i)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(r.tag!==3)throw Error(ce(188));return r.stateNode.current===r?e:t}function Cy(e){return e=aS(e),e!==null?Ey(e):null}function Ey(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ey(e);if(t!==null)return t;e=e.sibling}return null}var Ty=gn.unstable_scheduleCallback,ap=gn.unstable_cancelCallback,oS=gn.unstable_shouldYield,iS=gn.unstable_requestPaint,Yt=gn.unstable_now,lS=gn.unstable_getCurrentPriorityLevel,c0=gn.unstable_ImmediatePriority,Py=gn.unstable_UserBlockingPriority,Bd=gn.unstable_NormalPriority,cS=gn.unstable_LowPriority,Oy=gn.unstable_IdlePriority,ju=null,os=null;function dS(e){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(ju,e,void 0,(e.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:fS,uS=Math.log,hS=Math.LN2;function fS(e){return e>>>=0,e===0?32:31-(uS(e)/hS|0)|0}var Uc=64,Wc=4194304;function xl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ud(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?n=xl(l):(o&=i,o!==0&&(n=xl(o)))}else i=r&~a,i!==0?n=xl(i):o!==0&&(n=xl(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Un(t),a=1<<r,n|=e[r],t&=~a;return n}function mS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gS(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Un(o),l=1<<i,c=a[i];c===-1?(!(l&r)||l&n)&&(a[i]=mS(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function Mf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ay(){var e=Uc;return Uc<<=1,!(Uc&4194240)&&(Uc=64),e}function _h(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function pc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Un(t),e[t]=r}function pS(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Un(r),o=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~o}}function d0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Un(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var St=0;function Dy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var My,u0,Ry,Iy,$y,Rf=!1,Vc=[],ma=null,ga=null,pa=null,Bl=new Map,Ul=new Map,na=[],xS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function op(e,t){switch(e){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":Bl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(t.pointerId)}}function rl(e,t,r,n,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},t!==null&&(t=vc(t),t!==null&&u0(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function vS(e,t,r,n,a){switch(t){case"focusin":return ma=rl(ma,e,t,r,n,a),!0;case"dragenter":return ga=rl(ga,e,t,r,n,a),!0;case"mouseover":return pa=rl(pa,e,t,r,n,a),!0;case"pointerover":var o=a.pointerId;return Bl.set(o,rl(Bl.get(o)||null,e,t,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,Ul.set(o,rl(Ul.get(o)||null,e,t,r,n,a)),!0}return!1}function Ly(e){var t=Za(e.target);if(t!==null){var r=_o(t);if(r!==null){if(t=r.tag,t===13){if(t=ky(r),t!==null){e.blockedOn=t,$y(e.priority,function(){Ry(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _d(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=If(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Pf=n,r.target.dispatchEvent(n),Pf=null}else return t=vc(r),t!==null&&u0(t),e.blockedOn=r,!1;t.shift()}return!0}function ip(e,t,r){_d(e)&&r.delete(t)}function yS(){Rf=!1,ma!==null&&_d(ma)&&(ma=null),ga!==null&&_d(ga)&&(ga=null),pa!==null&&_d(pa)&&(pa=null),Bl.forEach(ip),Ul.forEach(ip)}function nl(e,t){e.blockedOn===t&&(e.blockedOn=null,Rf||(Rf=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,yS)))}function Wl(e){function t(a){return nl(a,e)}if(0<Vc.length){nl(Vc[0],e);for(var r=1;r<Vc.length;r++){var n=Vc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ma!==null&&nl(ma,e),ga!==null&&nl(ga,e),pa!==null&&nl(pa,e),Bl.forEach(t),Ul.forEach(t),r=0;r<na.length;r++)n=na[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<na.length&&(r=na[0],r.blockedOn===null);)Ly(r),r.blockedOn===null&&na.shift()}var oi=Fs.ReactCurrentBatchConfig,Wd=!0;function bS(e,t,r,n){var a=St,o=oi.transition;oi.transition=null;try{St=1,h0(e,t,r,n)}finally{St=a,oi.transition=o}}function wS(e,t,r,n){var a=St,o=oi.transition;oi.transition=null;try{St=4,h0(e,t,r,n)}finally{St=a,oi.transition=o}}function h0(e,t,r,n){if(Wd){var a=If(e,t,r,n);if(a===null)Dh(e,t,n,Vd,r),op(e,n);else if(vS(a,e,t,r,n))n.stopPropagation();else if(op(e,n),t&4&&-1<xS.indexOf(e)){for(;a!==null;){var o=vc(a);if(o!==null&&My(o),o=If(e,t,r,n),o===null&&Dh(e,t,n,Vd,r),o===a)break;a=o}a!==null&&n.stopPropagation()}else Dh(e,t,n,null,r)}}var Vd=null;function If(e,t,r,n){if(Vd=null,e=l0(n),e=Za(e),e!==null)if(t=_o(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ky(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vd=e,null}function Fy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lS()){case c0:return 1;case Py:return 4;case Bd:case cS:return 16;case Oy:return 536870912;default:return 16}default:return 16}}var ha=null,f0=null,Nd=null;function zy(){if(Nd)return Nd;var e,t=f0,r=t.length,n,a="value"in ha?ha.value:ha.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[o-n];n++);return Nd=a.slice(e,1<n?1-n:void 0)}function Sd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hc(){return!0}function lp(){return!1}function xn(e){function t(r,n,a,o,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Hc:lp,this.isPropagationStopped=lp,this}return Vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hc)},persist:function(){},isPersistent:Hc}),t}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},m0=xn(Fi),xc=Vt({},Fi,{view:0,detail:0}),jS=xn(xc),Nh,Sh,sl,_u=Vt({},xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:g0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sl&&(sl&&e.type==="mousemove"?(Nh=e.screenX-sl.screenX,Sh=e.screenY-sl.screenY):Sh=Nh=0,sl=e),Nh)},movementY:function(e){return"movementY"in e?e.movementY:Sh}}),cp=xn(_u),_S=Vt({},_u,{dataTransfer:0}),NS=xn(_S),SS=Vt({},xc,{relatedTarget:0}),kh=xn(SS),kS=Vt({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),CS=xn(kS),ES=Vt({},Fi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),TS=xn(ES),PS=Vt({},Fi,{data:0}),dp=xn(PS),OS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DS[e])?!!t[e]:!1}function g0(){return MS}var RS=Vt({},xc,{key:function(e){if(e.key){var t=OS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Sd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?AS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:g0,charCode:function(e){return e.type==="keypress"?Sd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),IS=xn(RS),$S=Vt({},_u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),up=xn($S),LS=Vt({},xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:g0}),FS=xn(LS),zS=Vt({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),BS=xn(zS),US=Vt({},_u,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WS=xn(US),VS=[9,13,27,32],p0=As&&"CompositionEvent"in window,kl=null;As&&"documentMode"in document&&(kl=document.documentMode);var HS=As&&"TextEvent"in window&&!kl,By=As&&(!p0||kl&&8<kl&&11>=kl),hp=String.fromCharCode(32),fp=!1;function Uy(e,t){switch(e){case"keyup":return VS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qo=!1;function qS(e,t){switch(e){case"compositionend":return Wy(t);case"keypress":return t.which!==32?null:(fp=!0,hp);case"textInput":return e=t.data,e===hp&&fp?null:e;default:return null}}function GS(e,t){if(qo)return e==="compositionend"||!p0&&Uy(e,t)?(e=zy(),Nd=f0=ha=null,qo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return By&&t.locale!=="ko"?null:t.data;default:return null}}var KS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!KS[e.type]:t==="textarea"}function Vy(e,t,r,n){wy(n),t=Hd(t,"onChange"),0<t.length&&(r=new m0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Cl=null,Vl=null;function YS(e){tb(e,0)}function Nu(e){var t=Yo(e);if(my(t))return e}function QS(e,t){if(e==="change")return t}var Hy=!1;if(As){var Ch;if(As){var Eh="oninput"in document;if(!Eh){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),Eh=typeof gp.oninput=="function"}Ch=Eh}else Ch=!1;Hy=Ch&&(!document.documentMode||9<document.documentMode)}function pp(){Cl&&(Cl.detachEvent("onpropertychange",qy),Vl=Cl=null)}function qy(e){if(e.propertyName==="value"&&Nu(Vl)){var t=[];Vy(t,Vl,e,l0(e)),Sy(YS,t)}}function JS(e,t,r){e==="focusin"?(pp(),Cl=t,Vl=r,Cl.attachEvent("onpropertychange",qy)):e==="focusout"&&pp()}function XS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nu(Vl)}function ZS(e,t){if(e==="click")return Nu(t)}function ek(e,t){if(e==="input"||e==="change")return Nu(t)}function tk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hn=typeof Object.is=="function"?Object.is:tk;function Hl(e,t){if(Hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!vf.call(t,a)||!Hn(e[a],t[a]))return!1}return!0}function xp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vp(e,t){var r=xp(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xp(r)}}function Gy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ky(){for(var e=window,t=Ld();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ld(e.document)}return t}function x0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rk(e){var t=Ky(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Gy(r.ownerDocument.documentElement,r)){if(n!==null&&x0(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=n.end===void 0?o:Math.min(n.end,a),!e.extend&&o>n&&(a=n,n=o,o=a),a=vp(r,o);var i=vp(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nk=As&&"documentMode"in document&&11>=document.documentMode,Go=null,$f=null,El=null,Lf=!1;function yp(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lf||Go==null||Go!==Ld(n)||(n=Go,"selectionStart"in n&&x0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),El&&Hl(El,n)||(El=n,n=Hd($f,"onSelect"),0<n.length&&(t=new m0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Go)))}function qc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ko={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},Th={},Yy={};As&&(Yy=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function Su(e){if(Th[e])return Th[e];if(!Ko[e])return e;var t=Ko[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Yy)return Th[e]=t[r];return e}var Qy=Su("animationend"),Jy=Su("animationiteration"),Xy=Su("animationstart"),Zy=Su("transitionend"),eb=new Map,bp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ra(e,t){eb.set(e,t),jo(t,[e])}for(var Ph=0;Ph<bp.length;Ph++){var Oh=bp[Ph],sk=Oh.toLowerCase(),ak=Oh[0].toUpperCase()+Oh.slice(1);Ra(sk,"on"+ak)}Ra(Qy,"onAnimationEnd");Ra(Jy,"onAnimationIteration");Ra(Xy,"onAnimationStart");Ra("dblclick","onDoubleClick");Ra("focusin","onFocus");Ra("focusout","onBlur");Ra(Zy,"onTransitionEnd");Si("onMouseEnter",["mouseout","mouseover"]);Si("onMouseLeave",["mouseout","mouseover"]);Si("onPointerEnter",["pointerout","pointerover"]);Si("onPointerLeave",["pointerout","pointerover"]);jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ok=new Set("cancel close invalid load scroll toggle".split(" ").concat(vl));function wp(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,sS(n,t,void 0,e),e.currentTarget=null}function tb(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;wp(a,l,d),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;wp(a,l,d),o=c}}}if(zd)throw e=Df,zd=!1,Df=null,e}function Mt(e,t){var r=t[Wf];r===void 0&&(r=t[Wf]=new Set);var n=e+"__bubble";r.has(n)||(rb(t,e,2,!1),r.add(n))}function Ah(e,t,r){var n=0;t&&(n|=4),rb(r,e,n,t)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function ql(e){if(!e[Gc]){e[Gc]=!0,cy.forEach(function(r){r!=="selectionchange"&&(ok.has(r)||Ah(r,!1,e),Ah(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gc]||(t[Gc]=!0,Ah("selectionchange",!1,t))}}function rb(e,t,r,n){switch(Fy(t)){case 1:var a=bS;break;case 4:a=wS;break;default:a=h0}r=a.bind(null,t,r,e),a=void 0,!Af||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Dh(e,t,r,n,a){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=Za(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}Sy(function(){var d=o,u=l0(r),m=[];e:{var f=eb.get(e);if(f!==void 0){var x=m0,y=e;switch(e){case"keypress":if(Sd(r)===0)break e;case"keydown":case"keyup":x=IS;break;case"focusin":y="focus",x=kh;break;case"focusout":y="blur",x=kh;break;case"beforeblur":case"afterblur":x=kh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=NS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=FS;break;case Qy:case Jy:case Xy:x=CS;break;case Zy:x=BS;break;case"scroll":x=jS;break;case"wheel":x=WS;break;case"copy":case"cut":case"paste":x=TS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=up}var g=(t&4)!==0,w=!g&&e==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var p=d,b;p!==null;){b=p;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,v!==null&&(N=zl(p,v),N!=null&&g.push(Gl(p,N,b)))),w)break;p=p.return}0<g.length&&(f=new x(f,y,null,r,u),m.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",f&&r!==Pf&&(y=r.relatedTarget||r.fromElement)&&(Za(y)||y[Ds]))break e;if((x||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,x?(y=r.relatedTarget||r.toElement,x=d,y=y?Za(y):null,y!==null&&(w=_o(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=d),x!==y)){if(g=cp,N="onMouseLeave",v="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(g=up,N="onPointerLeave",v="onPointerEnter",p="pointer"),w=x==null?f:Yo(x),b=y==null?f:Yo(y),f=new g(N,p+"leave",x,r,u),f.target=w,f.relatedTarget=b,N=null,Za(u)===d&&(g=new g(v,p+"enter",y,r,u),g.target=b,g.relatedTarget=w,N=g),w=N,x&&y)t:{for(g=x,v=y,p=0,b=g;b;b=Oo(b))p++;for(b=0,N=v;N;N=Oo(N))b++;for(;0<p-b;)g=Oo(g),p--;for(;0<b-p;)v=Oo(v),b--;for(;p--;){if(g===v||v!==null&&g===v.alternate)break t;g=Oo(g),v=Oo(v)}g=null}else g=null;x!==null&&jp(m,f,x,g,!1),y!==null&&w!==null&&jp(m,w,y,g,!0)}}e:{if(f=d?Yo(d):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var S=QS;else if(mp(f))if(Hy)S=ek;else{S=XS;var E=JS}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=ZS);if(S&&(S=S(e,d))){Vy(m,S,r,u);break e}E&&E(e,f,d),e==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Sf(f,"number",f.value)}switch(E=d?Yo(d):window,e){case"focusin":(mp(E)||E.contentEditable==="true")&&(Go=E,$f=d,El=null);break;case"focusout":El=$f=Go=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,yp(m,r,u);break;case"selectionchange":if(nk)break;case"keydown":case"keyup":yp(m,r,u)}var D;if(p0)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else qo?Uy(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(By&&r.locale!=="ko"&&(qo||I!=="onCompositionStart"?I==="onCompositionEnd"&&qo&&(D=zy()):(ha=u,f0="value"in ha?ha.value:ha.textContent,qo=!0)),E=Hd(d,I),0<E.length&&(I=new dp(I,e,null,r,u),m.push({event:I,listeners:E}),D?I.data=D:(D=Wy(r),D!==null&&(I.data=D)))),(D=HS?qS(e,r):GS(e,r))&&(d=Hd(d,"onBeforeInput"),0<d.length&&(u=new dp("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=D))}tb(m,t)})}function Gl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hd(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=zl(e,r),o!=null&&n.unshift(Gl(e,o,a)),o=zl(e,t),o!=null&&n.push(Gl(e,o,a))),e=e.return}return n}function Oo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jp(e,t,r,n,a){for(var o=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=zl(r,o),c!=null&&i.unshift(Gl(r,c,l))):a||(c=zl(r,o),c!=null&&i.push(Gl(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var ik=/\r\n?/g,lk=/\u0000|\uFFFD/g;function _p(e){return(typeof e=="string"?e:""+e).replace(ik,`
`).replace(lk,"")}function Kc(e,t,r){if(t=_p(t),_p(e)!==t&&r)throw Error(ce(425))}function qd(){}var Ff=null,zf=null;function Bf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uf=typeof setTimeout=="function"?setTimeout:void 0,ck=typeof clearTimeout=="function"?clearTimeout:void 0,Np=typeof Promise=="function"?Promise:void 0,dk=typeof queueMicrotask=="function"?queueMicrotask:typeof Np<"u"?function(e){return Np.resolve(null).then(e).catch(uk)}:Uf;function uk(e){setTimeout(function(){throw e})}function Mh(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Wl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Wl(t)}function xa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Sp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var zi=Math.random().toString(36).slice(2),rs="__reactFiber$"+zi,Kl="__reactProps$"+zi,Ds="__reactContainer$"+zi,Wf="__reactEvents$"+zi,hk="__reactListeners$"+zi,fk="__reactHandles$"+zi;function Za(e){var t=e[rs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ds]||r[rs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Sp(e);e!==null;){if(r=e[rs])return r;e=Sp(e)}return t}e=r,r=e.parentNode}return null}function vc(e){return e=e[rs]||e[Ds],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function ku(e){return e[Kl]||null}var Vf=[],Qo=-1;function Ia(e){return{current:e}}function It(e){0>Qo||(e.current=Vf[Qo],Vf[Qo]=null,Qo--)}function Tt(e,t){Qo++,Vf[Qo]=e.current,e.current=t}var _a={},kr=Ia(_a),Jr=Ia(!1),ho=_a;function ki(e,t){var r=e.type.contextTypes;if(!r)return _a;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Xr(e){return e=e.childContextTypes,e!=null}function Gd(){It(Jr),It(kr)}function kp(e,t,r){if(kr.current!==_a)throw Error(ce(168));Tt(kr,t),Tt(Jr,r)}function nb(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ce(108,JN(e)||"Unknown",a));return Vt({},r,n)}function Kd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_a,ho=kr.current,Tt(kr,e),Tt(Jr,Jr.current),!0}function Cp(e,t,r){var n=e.stateNode;if(!n)throw Error(ce(169));r?(e=nb(e,t,ho),n.__reactInternalMemoizedMergedChildContext=e,It(Jr),It(kr),Tt(kr,e)):It(Jr),Tt(Jr,r)}var _s=null,Cu=!1,Rh=!1;function sb(e){_s===null?_s=[e]:_s.push(e)}function mk(e){Cu=!0,sb(e)}function $a(){if(!Rh&&_s!==null){Rh=!0;var e=0,t=St;try{var r=_s;for(St=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}_s=null,Cu=!1}catch(a){throw _s!==null&&(_s=_s.slice(e+1)),Ty(c0,$a),a}finally{St=t,Rh=!1}}return null}var Jo=[],Xo=0,Yd=null,Qd=0,bn=[],wn=0,fo=null,Ss=1,ks="";function qa(e,t){Jo[Xo++]=Qd,Jo[Xo++]=Yd,Yd=e,Qd=t}function ab(e,t,r){bn[wn++]=Ss,bn[wn++]=ks,bn[wn++]=fo,fo=e;var n=Ss;e=ks;var a=32-Un(n)-1;n&=~(1<<a),r+=1;var o=32-Un(t)+a;if(30<o){var i=a-a%5;o=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Ss=1<<32-Un(t)+a|r<<a|n,ks=o+e}else Ss=1<<o|r<<a|n,ks=e}function v0(e){e.return!==null&&(qa(e,1),ab(e,1,0))}function y0(e){for(;e===Yd;)Yd=Jo[--Xo],Jo[Xo]=null,Qd=Jo[--Xo],Jo[Xo]=null;for(;e===fo;)fo=bn[--wn],bn[wn]=null,ks=bn[--wn],bn[wn]=null,Ss=bn[--wn],bn[wn]=null}var hn=null,un=null,Ft=!1,zn=null;function ob(e,t){var r=_n(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ep(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,hn=e,un=xa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,hn=e,un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=fo!==null?{id:Ss,overflow:ks}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=_n(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,hn=e,un=null,!0):!1;default:return!1}}function Hf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qf(e){if(Ft){var t=un;if(t){var r=t;if(!Ep(e,t)){if(Hf(e))throw Error(ce(418));t=xa(r.nextSibling);var n=hn;t&&Ep(e,t)?ob(n,r):(e.flags=e.flags&-4097|2,Ft=!1,hn=e)}}else{if(Hf(e))throw Error(ce(418));e.flags=e.flags&-4097|2,Ft=!1,hn=e}}}function Tp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;hn=e}function Yc(e){if(e!==hn)return!1;if(!Ft)return Tp(e),Ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bf(e.type,e.memoizedProps)),t&&(t=un)){if(Hf(e))throw ib(),Error(ce(418));for(;t;)ob(e,t),t=xa(t.nextSibling)}if(Tp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){un=xa(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}un=null}}else un=hn?xa(e.stateNode.nextSibling):null;return!0}function ib(){for(var e=un;e;)e=xa(e.nextSibling)}function Ci(){un=hn=null,Ft=!1}function b0(e){zn===null?zn=[e]:zn.push(e)}var gk=Fs.ReactCurrentBatchConfig;function al(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,e));var a=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=a.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(ce(284));if(!r._owner)throw Error(ce(290,e))}return e}function Qc(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pp(e){var t=e._init;return t(e._payload)}function lb(e){function t(v,p){if(e){var b=v.deletions;b===null?(v.deletions=[p],v.flags|=16):b.push(p)}}function r(v,p){if(!e)return null;for(;p!==null;)t(v,p),p=p.sibling;return null}function n(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function a(v,p){return v=wa(v,p),v.index=0,v.sibling=null,v}function o(v,p,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<p?(v.flags|=2,p):b):(v.flags|=2,p)):(v.flags|=1048576,p)}function i(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,p,b,N){return p===null||p.tag!==6?(p=Uh(b,v.mode,N),p.return=v,p):(p=a(p,b),p.return=v,p)}function c(v,p,b,N){var S=b.type;return S===Ho?u(v,p,b.props.children,N,b.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ta&&Pp(S)===p.type)?(N=a(p,b.props),N.ref=al(v,p,b),N.return=v,N):(N=Ad(b.type,b.key,b.props,null,v.mode,N),N.ref=al(v,p,b),N.return=v,N)}function d(v,p,b,N){return p===null||p.tag!==4||p.stateNode.containerInfo!==b.containerInfo||p.stateNode.implementation!==b.implementation?(p=Wh(b,v.mode,N),p.return=v,p):(p=a(p,b.children||[]),p.return=v,p)}function u(v,p,b,N,S){return p===null||p.tag!==7?(p=uo(b,v.mode,N,S),p.return=v,p):(p=a(p,b),p.return=v,p)}function m(v,p,b){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Uh(""+p,v.mode,b),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Fc:return b=Ad(p.type,p.key,p.props,null,v.mode,b),b.ref=al(v,null,p),b.return=v,b;case Vo:return p=Wh(p,v.mode,b),p.return=v,p;case ta:var N=p._init;return m(v,N(p._payload),b)}if(pl(p)||el(p))return p=uo(p,v.mode,b,null),p.return=v,p;Qc(v,p)}return null}function f(v,p,b,N){var S=p!==null?p.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(v,p,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fc:return b.key===S?c(v,p,b,N):null;case Vo:return b.key===S?d(v,p,b,N):null;case ta:return S=b._init,f(v,p,S(b._payload),N)}if(pl(b)||el(b))return S!==null?null:u(v,p,b,N,null);Qc(v,b)}return null}function x(v,p,b,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(b)||null,l(p,v,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Fc:return v=v.get(N.key===null?b:N.key)||null,c(p,v,N,S);case Vo:return v=v.get(N.key===null?b:N.key)||null,d(p,v,N,S);case ta:var E=N._init;return x(v,p,b,E(N._payload),S)}if(pl(N)||el(N))return v=v.get(b)||null,u(p,v,N,S,null);Qc(p,N)}return null}function y(v,p,b,N){for(var S=null,E=null,D=p,I=p=0,ee=null;D!==null&&I<b.length;I++){D.index>I?(ee=D,D=null):ee=D.sibling;var J=f(v,D,b[I],N);if(J===null){D===null&&(D=ee);break}e&&D&&J.alternate===null&&t(v,D),p=o(J,p,I),E===null?S=J:E.sibling=J,E=J,D=ee}if(I===b.length)return r(v,D),Ft&&qa(v,I),S;if(D===null){for(;I<b.length;I++)D=m(v,b[I],N),D!==null&&(p=o(D,p,I),E===null?S=D:E.sibling=D,E=D);return Ft&&qa(v,I),S}for(D=n(v,D);I<b.length;I++)ee=x(D,v,I,b[I],N),ee!==null&&(e&&ee.alternate!==null&&D.delete(ee.key===null?I:ee.key),p=o(ee,p,I),E===null?S=ee:E.sibling=ee,E=ee);return e&&D.forEach(function(T){return t(v,T)}),Ft&&qa(v,I),S}function g(v,p,b,N){var S=el(b);if(typeof S!="function")throw Error(ce(150));if(b=S.call(b),b==null)throw Error(ce(151));for(var E=S=null,D=p,I=p=0,ee=null,J=b.next();D!==null&&!J.done;I++,J=b.next()){D.index>I?(ee=D,D=null):ee=D.sibling;var T=f(v,D,J.value,N);if(T===null){D===null&&(D=ee);break}e&&D&&T.alternate===null&&t(v,D),p=o(T,p,I),E===null?S=T:E.sibling=T,E=T,D=ee}if(J.done)return r(v,D),Ft&&qa(v,I),S;if(D===null){for(;!J.done;I++,J=b.next())J=m(v,J.value,N),J!==null&&(p=o(J,p,I),E===null?S=J:E.sibling=J,E=J);return Ft&&qa(v,I),S}for(D=n(v,D);!J.done;I++,J=b.next())J=x(D,v,I,J.value,N),J!==null&&(e&&J.alternate!==null&&D.delete(J.key===null?I:J.key),p=o(J,p,I),E===null?S=J:E.sibling=J,E=J);return e&&D.forEach(function(_){return t(v,_)}),Ft&&qa(v,I),S}function w(v,p,b,N){if(typeof b=="object"&&b!==null&&b.type===Ho&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Fc:e:{for(var S=b.key,E=p;E!==null;){if(E.key===S){if(S=b.type,S===Ho){if(E.tag===7){r(v,E.sibling),p=a(E,b.props.children),p.return=v,v=p;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ta&&Pp(S)===E.type){r(v,E.sibling),p=a(E,b.props),p.ref=al(v,E,b),p.return=v,v=p;break e}r(v,E);break}else t(v,E);E=E.sibling}b.type===Ho?(p=uo(b.props.children,v.mode,N,b.key),p.return=v,v=p):(N=Ad(b.type,b.key,b.props,null,v.mode,N),N.ref=al(v,p,b),N.return=v,v=N)}return i(v);case Vo:e:{for(E=b.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===b.containerInfo&&p.stateNode.implementation===b.implementation){r(v,p.sibling),p=a(p,b.children||[]),p.return=v,v=p;break e}else{r(v,p);break}else t(v,p);p=p.sibling}p=Wh(b,v.mode,N),p.return=v,v=p}return i(v);case ta:return E=b._init,w(v,p,E(b._payload),N)}if(pl(b))return y(v,p,b,N);if(el(b))return g(v,p,b,N);Qc(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,p!==null&&p.tag===6?(r(v,p.sibling),p=a(p,b),p.return=v,v=p):(r(v,p),p=Uh(b,v.mode,N),p.return=v,v=p),i(v)):r(v,p)}return w}var Ei=lb(!0),cb=lb(!1),Jd=Ia(null),Xd=null,Zo=null,w0=null;function j0(){w0=Zo=Xd=null}function _0(e){var t=Jd.current;It(Jd),e._currentValue=t}function Gf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ii(e,t){Xd=e,w0=Zo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Kr=!0),e.firstContext=null)}function kn(e){var t=e._currentValue;if(w0!==e)if(e={context:e,memoizedValue:t,next:null},Zo===null){if(Xd===null)throw Error(ce(308));Zo=e,Xd.dependencies={lanes:0,firstContext:e}}else Zo=Zo.next=e;return t}var eo=null;function N0(e){eo===null?eo=[e]:eo.push(e)}function db(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,N0(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ms(e,n)}function Ms(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ra=!1;function S0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ub(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function va(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ms(e,r)}return a=n.interleaved,a===null?(t.next=t,N0(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ms(e,r)}function kd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,d0(e,r)}}function Op(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Zd(e,t,r,n){var a=e.updateQueue;ra=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var m=a.baseState;i=0,u=d=c=null,l=o;do{var f=l.lane,x=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,g=l;switch(f=t,x=r,g.tag){case 1:if(y=g.payload,typeof y=="function"){m=y.call(x,m,f);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(x,m,f):y,f==null)break e;m=Vt({},m,f);break e;case 2:ra=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else x={eventTime:x,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=x,c=m):u=u.next=x,i|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(1);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);go|=i,e.lanes=i,e.memoizedState=m}}function Ap(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ce(191,a));a.call(n)}}}var yc={},is=Ia(yc),Yl=Ia(yc),Ql=Ia(yc);function to(e){if(e===yc)throw Error(ce(174));return e}function k0(e,t){switch(Tt(Ql,t),Tt(Yl,e),Tt(is,yc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cf(t,e)}It(is),Tt(is,t)}function Ti(){It(is),It(Yl),It(Ql)}function hb(e){to(Ql.current);var t=to(is.current),r=Cf(t,e.type);t!==r&&(Tt(Yl,e),Tt(is,r))}function C0(e){Yl.current===e&&(It(is),It(Yl))}var Ut=Ia(0);function eu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ih=[];function E0(){for(var e=0;e<Ih.length;e++)Ih[e]._workInProgressVersionPrimary=null;Ih.length=0}var Cd=Fs.ReactCurrentDispatcher,$h=Fs.ReactCurrentBatchConfig,mo=0,Wt=null,er=null,sr=null,tu=!1,Tl=!1,Jl=0,pk=0;function vr(){throw Error(ce(321))}function T0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Hn(e[r],t[r]))return!1;return!0}function P0(e,t,r,n,a,o){if(mo=o,Wt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cd.current=e===null||e.memoizedState===null?bk:wk,e=r(n,a),Tl){o=0;do{if(Tl=!1,Jl=0,25<=o)throw Error(ce(301));o+=1,sr=er=null,t.updateQueue=null,Cd.current=jk,e=r(n,a)}while(Tl)}if(Cd.current=ru,t=er!==null&&er.next!==null,mo=0,sr=er=Wt=null,tu=!1,t)throw Error(ce(300));return e}function O0(){var e=Jl!==0;return Jl=0,e}function Xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?Wt.memoizedState=sr=e:sr=sr.next=e,sr}function Cn(){if(er===null){var e=Wt.alternate;e=e!==null?e.memoizedState:null}else e=er.next;var t=sr===null?Wt.memoizedState:sr.next;if(t!==null)sr=t,er=e;else{if(e===null)throw Error(ce(310));er=e,e={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},sr===null?Wt.memoizedState=sr=e:sr=sr.next=e}return sr}function Xl(e,t){return typeof t=="function"?t(e):t}function Lh(e){var t=Cn(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=er,a=n.baseQueue,o=r.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}n.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,n=n.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((mo&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,i=n):c=c.next=m,Wt.lanes|=u,go|=u}d=d.next}while(d!==null&&d!==o);c===null?i=n:c.next=l,Hn(n,t.memoizedState)||(Kr=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do o=a.lane,Wt.lanes|=o,go|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Fh(e){var t=Cn(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);Hn(o,t.memoizedState)||(Kr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function fb(){}function mb(e,t){var r=Wt,n=Cn(),a=t(),o=!Hn(n.memoizedState,a);if(o&&(n.memoizedState=a,Kr=!0),n=n.queue,A0(xb.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||sr!==null&&sr.memoizedState.tag&1){if(r.flags|=2048,Zl(9,pb.bind(null,r,n,a,t),void 0,null),ar===null)throw Error(ce(349));mo&30||gb(r,t,a)}return a}function gb(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Wt.updateQueue,t===null?(t={lastEffect:null,stores:null},Wt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function pb(e,t,r,n){t.value=r,t.getSnapshot=n,vb(t)&&yb(e)}function xb(e,t,r){return r(function(){vb(t)&&yb(e)})}function vb(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Hn(e,r)}catch{return!0}}function yb(e){var t=Ms(e,1);t!==null&&Wn(t,e,1,-1)}function Dp(e){var t=Xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xl,lastRenderedState:e},t.queue=e,e=e.dispatch=yk.bind(null,Wt,e),[t.memoizedState,e]}function Zl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Wt.updateQueue,t===null?(t={lastEffect:null,stores:null},Wt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function bb(){return Cn().memoizedState}function Ed(e,t,r,n){var a=Xn();Wt.flags|=e,a.memoizedState=Zl(1|t,r,void 0,n===void 0?null:n)}function Eu(e,t,r,n){var a=Cn();n=n===void 0?null:n;var o=void 0;if(er!==null){var i=er.memoizedState;if(o=i.destroy,n!==null&&T0(n,i.deps)){a.memoizedState=Zl(t,r,o,n);return}}Wt.flags|=e,a.memoizedState=Zl(1|t,r,o,n)}function Mp(e,t){return Ed(8390656,8,e,t)}function A0(e,t){return Eu(2048,8,e,t)}function wb(e,t){return Eu(4,2,e,t)}function jb(e,t){return Eu(4,4,e,t)}function _b(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Nb(e,t,r){return r=r!=null?r.concat([e]):null,Eu(4,4,_b.bind(null,t,e),r)}function D0(){}function Sb(e,t){var r=Cn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&T0(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function kb(e,t){var r=Cn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&T0(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Cb(e,t,r){return mo&21?(Hn(r,t)||(r=Ay(),Wt.lanes|=r,go|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Kr=!0),e.memoizedState=r)}function xk(e,t){var r=St;St=r!==0&&4>r?r:4,e(!0);var n=$h.transition;$h.transition={};try{e(!1),t()}finally{St=r,$h.transition=n}}function Eb(){return Cn().memoizedState}function vk(e,t,r){var n=ba(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Tb(e))Pb(t,r);else if(r=db(e,t,r,n),r!==null){var a=$r();Wn(r,e,n,a),Ob(r,t,n)}}function yk(e,t,r){var n=ba(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Tb(e))Pb(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,r);if(a.hasEagerState=!0,a.eagerState=l,Hn(l,i)){var c=t.interleaved;c===null?(a.next=a,N0(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=db(e,t,a,n),r!==null&&(a=$r(),Wn(r,e,n,a),Ob(r,t,n))}}function Tb(e){var t=e.alternate;return e===Wt||t!==null&&t===Wt}function Pb(e,t){Tl=tu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ob(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,d0(e,r)}}var ru={readContext:kn,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},bk={readContext:kn,useCallback:function(e,t){return Xn().memoizedState=[e,t===void 0?null:t],e},useContext:kn,useEffect:Mp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ed(4194308,4,_b.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ed(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ed(4,2,e,t)},useMemo:function(e,t){var r=Xn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Xn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=vk.bind(null,Wt,e),[n.memoizedState,e]},useRef:function(e){var t=Xn();return e={current:e},t.memoizedState=e},useState:Dp,useDebugValue:D0,useDeferredValue:function(e){return Xn().memoizedState=e},useTransition:function(){var e=Dp(!1),t=e[0];return e=xk.bind(null,e[1]),Xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Wt,a=Xn();if(Ft){if(r===void 0)throw Error(ce(407));r=r()}else{if(r=t(),ar===null)throw Error(ce(349));mo&30||gb(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,Mp(xb.bind(null,n,o,e),[e]),n.flags|=2048,Zl(9,pb.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Xn(),t=ar.identifierPrefix;if(Ft){var r=ks,n=Ss;r=(n&~(1<<32-Un(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Jl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=pk++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wk={readContext:kn,useCallback:Sb,useContext:kn,useEffect:A0,useImperativeHandle:Nb,useInsertionEffect:wb,useLayoutEffect:jb,useMemo:kb,useReducer:Lh,useRef:bb,useState:function(){return Lh(Xl)},useDebugValue:D0,useDeferredValue:function(e){var t=Cn();return Cb(t,er.memoizedState,e)},useTransition:function(){var e=Lh(Xl)[0],t=Cn().memoizedState;return[e,t]},useMutableSource:fb,useSyncExternalStore:mb,useId:Eb,unstable_isNewReconciler:!1},jk={readContext:kn,useCallback:Sb,useContext:kn,useEffect:A0,useImperativeHandle:Nb,useInsertionEffect:wb,useLayoutEffect:jb,useMemo:kb,useReducer:Fh,useRef:bb,useState:function(){return Fh(Xl)},useDebugValue:D0,useDeferredValue:function(e){var t=Cn();return er===null?t.memoizedState=e:Cb(t,er.memoizedState,e)},useTransition:function(){var e=Fh(Xl)[0],t=Cn().memoizedState;return[e,t]},useMutableSource:fb,useSyncExternalStore:mb,useId:Eb,unstable_isNewReconciler:!1};function Mn(e,t){if(e&&e.defaultProps){t=Vt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Kf(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Vt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Tu={isMounted:function(e){return(e=e._reactInternals)?_o(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=$r(),a=ba(e),o=Cs(n,a);o.payload=t,r!=null&&(o.callback=r),t=va(e,o,a),t!==null&&(Wn(t,e,a,n),kd(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=$r(),a=ba(e),o=Cs(n,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=va(e,o,a),t!==null&&(Wn(t,e,a,n),kd(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=$r(),n=ba(e),a=Cs(r,n);a.tag=2,t!=null&&(a.callback=t),t=va(e,a,n),t!==null&&(Wn(t,e,n,r),kd(t,e,n))}};function Rp(e,t,r,n,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!Hl(r,n)||!Hl(a,o):!0}function Ab(e,t,r){var n=!1,a=_a,o=t.contextType;return typeof o=="object"&&o!==null?o=kn(o):(a=Xr(t)?ho:kr.current,n=t.contextTypes,o=(n=n!=null)?ki(e,a):_a),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ip(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Tu.enqueueReplaceState(t,t.state,null)}function Yf(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},S0(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=kn(o):(o=Xr(t)?ho:kr.current,a.context=ki(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Kf(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Tu.enqueueReplaceState(a,a.state,null),Zd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Pi(e,t){try{var r="",n=t;do r+=QN(n),n=n.return;while(n);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function zh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Qf(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var _k=typeof WeakMap=="function"?WeakMap:Map;function Db(e,t,r){r=Cs(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){su||(su=!0,om=n),Qf(e,t)},r}function Mb(e,t,r){r=Cs(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Qf(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Qf(e,t),typeof n!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function $p(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new _k;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=$k.bind(null,e,t,r),t.then(e,e))}function Lp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fp(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Cs(-1,1),t.tag=2,va(r,t,1))),r.lanes|=1),e)}var Nk=Fs.ReactCurrentOwner,Kr=!1;function Or(e,t,r,n){t.child=e===null?cb(t,null,r,n):Ei(t,e.child,r,n)}function zp(e,t,r,n,a){r=r.render;var o=t.ref;return ii(t,a),n=P0(e,t,r,n,o,a),r=O0(),e!==null&&!Kr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rs(e,t,a)):(Ft&&r&&v0(t),t.flags|=1,Or(e,t,n,a),t.child)}function Bp(e,t,r,n,a){if(e===null){var o=r.type;return typeof o=="function"&&!B0(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Rb(e,t,o,n,a)):(e=Ad(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Hl,r(i,n)&&e.ref===t.ref)return Rs(e,t,a)}return t.flags|=1,e=wa(o,n),e.ref=t.ref,e.return=t,t.child=e}function Rb(e,t,r,n,a){if(e!==null){var o=e.memoizedProps;if(Hl(o,n)&&e.ref===t.ref)if(Kr=!1,t.pendingProps=n=o,(e.lanes&a)!==0)e.flags&131072&&(Kr=!0);else return t.lanes=e.lanes,Rs(e,t,a)}return Jf(e,t,r,n,a)}function Ib(e,t,r){var n=t.pendingProps,a=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(ti,cn),cn|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tt(ti,cn),cn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Tt(ti,cn),cn|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Tt(ti,cn),cn|=n;return Or(e,t,a,r),t.child}function $b(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Jf(e,t,r,n,a){var o=Xr(r)?ho:kr.current;return o=ki(t,o),ii(t,a),r=P0(e,t,r,n,o,a),n=O0(),e!==null&&!Kr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rs(e,t,a)):(Ft&&n&&v0(t),t.flags|=1,Or(e,t,r,a),t.child)}function Up(e,t,r,n,a){if(Xr(r)){var o=!0;Kd(t)}else o=!1;if(ii(t,a),t.stateNode===null)Td(e,t),Ab(t,r,n),Yf(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=kn(d):(d=Xr(r)?ho:kr.current,d=ki(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Ip(t,i,n,d),ra=!1;var f=t.memoizedState;i.state=f,Zd(t,n,i,a),c=t.memoizedState,l!==n||f!==c||Jr.current||ra?(typeof u=="function"&&(Kf(t,r,u,n),c=t.memoizedState),(l=ra||Rp(t,r,l,n,f,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,ub(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Mn(t.type,l),i.props=d,m=t.pendingProps,f=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=kn(c):(c=Xr(r)?ho:kr.current,c=ki(t,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||f!==c)&&Ip(t,i,n,c),ra=!1,f=t.memoizedState,i.state=f,Zd(t,n,i,a);var y=t.memoizedState;l!==m||f!==y||Jr.current||ra?(typeof x=="function"&&(Kf(t,r,x,n),y=t.memoizedState),(d=ra||Rp(t,r,d,n,f,y,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),i.props=n,i.state=y,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Xf(e,t,r,n,o,a)}function Xf(e,t,r,n,a,o){$b(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&Cp(t,r,!1),Rs(e,t,o);n=t.stateNode,Nk.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Ei(t,e.child,null,o),t.child=Ei(t,null,l,o)):Or(e,t,l,o),t.memoizedState=n.state,a&&Cp(t,r,!0),t.child}function Lb(e){var t=e.stateNode;t.pendingContext?kp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kp(e,t.context,!1),k0(e,t.containerInfo)}function Wp(e,t,r,n,a){return Ci(),b0(a),t.flags|=256,Or(e,t,r,n),t.child}var Zf={dehydrated:null,treeContext:null,retryLane:0};function em(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fb(e,t,r){var n=t.pendingProps,a=Ut.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Tt(Ut,a&1),e===null)return qf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Au(i,n,0,null),e=uo(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=em(r),t.memoizedState=Zf,e):M0(t,i));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Sk(e,t,i,n,l,a,r);if(o){o=n.fallback,i=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=wa(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=wa(l,o):(o=uo(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?em(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=Zf,n}return o=e.child,e=o.sibling,n=wa(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function M0(e,t){return t=Au({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jc(e,t,r,n){return n!==null&&b0(n),Ei(t,e.child,null,r),e=M0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sk(e,t,r,n,a,o,i){if(r)return t.flags&256?(t.flags&=-257,n=zh(Error(ce(422))),Jc(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=Au({mode:"visible",children:n.children},a,0,null),o=uo(o,a,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Ei(t,e.child,null,i),t.child.memoizedState=em(i),t.memoizedState=Zf,o);if(!(t.mode&1))return Jc(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(ce(419)),n=zh(o,n,void 0),Jc(e,t,i,n)}if(l=(i&e.childLanes)!==0,Kr||l){if(n=ar,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Ms(e,a),Wn(n,e,a,-1))}return z0(),n=zh(Error(ce(421))),Jc(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Lk.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,un=xa(a.nextSibling),hn=t,Ft=!0,zn=null,e!==null&&(bn[wn++]=Ss,bn[wn++]=ks,bn[wn++]=fo,Ss=e.id,ks=e.overflow,fo=t),t=M0(t,n.children),t.flags|=4096,t)}function Vp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Gf(e.return,t,r)}function Bh(e,t,r,n,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function zb(e,t,r){var n=t.pendingProps,a=n.revealOrder,o=n.tail;if(Or(e,t,n.children,r),n=Ut.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vp(e,r,t);else if(e.tag===19)Vp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Tt(Ut,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&eu(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Bh(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&eu(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Bh(t,!0,r,null,o);break;case"together":Bh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Td(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),go|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,r=wa(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wa(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function kk(e,t,r){switch(t.tag){case 3:Lb(t),Ci();break;case 5:hb(t);break;case 1:Xr(t.type)&&Kd(t);break;case 4:k0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Tt(Jd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Tt(Ut,Ut.current&1),t.flags|=128,null):r&t.child.childLanes?Fb(e,t,r):(Tt(Ut,Ut.current&1),e=Rs(e,t,r),e!==null?e.sibling:null);Tt(Ut,Ut.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return zb(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Tt(Ut,Ut.current),n)break;return null;case 22:case 23:return t.lanes=0,Ib(e,t,r)}return Rs(e,t,r)}var Bb,tm,Ub,Wb;Bb=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tm=function(){};Ub=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,to(is.current);var o=null;switch(r){case"input":a=_f(e,a),n=_f(e,n),o=[];break;case"select":a=Vt({},a,{value:void 0}),n=Vt({},n,{value:void 0}),o=[];break;case"textarea":a=kf(e,a),n=kf(e,n),o=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=qd)}Ef(r,n);var i;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ll.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ll.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Mt("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Wb=function(e,t,r,n){r!==n&&(t.flags|=4)};function ol(e,t){if(!Ft)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function yr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ck(e,t,r){var n=t.pendingProps;switch(y0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(t),null;case 1:return Xr(t.type)&&Gd(),yr(t),null;case 3:return n=t.stateNode,Ti(),It(Jr),It(kr),E0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Yc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zn!==null&&(cm(zn),zn=null))),tm(e,t),yr(t),null;case 5:C0(t);var a=to(Ql.current);if(r=t.type,e!==null&&t.stateNode!=null)Ub(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ce(166));return yr(t),null}if(e=to(is.current),Yc(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[rs]=t,n[Kl]=o,e=(t.mode&1)!==0,r){case"dialog":Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":case"embed":Mt("load",n);break;case"video":case"audio":for(a=0;a<vl.length;a++)Mt(vl[a],n);break;case"source":Mt("error",n);break;case"img":case"image":case"link":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"input":Zg(n,o),Mt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Mt("invalid",n);break;case"textarea":tp(n,o),Mt("invalid",n)}Ef(r,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&Kc(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Kc(n.textContent,l,e),a=["children",""+l]):Ll.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Mt("scroll",n)}switch(r){case"input":zc(n),ep(n,o,!0);break;case"textarea":zc(n),rp(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=qd)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xy(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[rs]=t,e[Kl]=n,Bb(e,t,!1,!1),t.stateNode=e;e:{switch(i=Tf(r,n),r){case"dialog":Mt("cancel",e),Mt("close",e),a=n;break;case"iframe":case"object":case"embed":Mt("load",e),a=n;break;case"video":case"audio":for(a=0;a<vl.length;a++)Mt(vl[a],e);a=n;break;case"source":Mt("error",e),a=n;break;case"img":case"image":case"link":Mt("error",e),Mt("load",e),a=n;break;case"details":Mt("toggle",e),a=n;break;case"input":Zg(e,n),a=_f(e,n),Mt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Vt({},n,{value:void 0}),Mt("invalid",e);break;case"textarea":tp(e,n),a=kf(e,n),Mt("invalid",e);break;default:a=n}Ef(r,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?by(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vy(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Fl(e,c):typeof c=="number"&&Fl(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ll.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Mt("scroll",e):c!=null&&s0(e,o,c,i))}switch(r){case"input":zc(e),ep(e,n,!1);break;case"textarea":zc(e),rp(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ja(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?ni(e,!!n.multiple,o,!1):n.defaultValue!=null&&ni(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=qd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yr(t),null;case 6:if(e&&t.stateNode!=null)Wb(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ce(166));if(r=to(Ql.current),to(is.current),Yc(t)){if(n=t.stateNode,r=t.memoizedProps,n[rs]=t,(o=n.nodeValue!==r)&&(e=hn,e!==null))switch(e.tag){case 3:Kc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Kc(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[rs]=t,t.stateNode=n}return yr(t),null;case 13:if(It(Ut),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ft&&un!==null&&t.mode&1&&!(t.flags&128))ib(),Ci(),t.flags|=98560,o=!1;else if(o=Yc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(ce(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ce(317));o[rs]=t}else Ci(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yr(t),o=!1}else zn!==null&&(cm(zn),zn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ut.current&1?tr===0&&(tr=3):z0())),t.updateQueue!==null&&(t.flags|=4),yr(t),null);case 4:return Ti(),tm(e,t),e===null&&ql(t.stateNode.containerInfo),yr(t),null;case 10:return _0(t.type._context),yr(t),null;case 17:return Xr(t.type)&&Gd(),yr(t),null;case 19:if(It(Ut),o=t.memoizedState,o===null)return yr(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)ol(o,!1);else{if(tr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=eu(e),i!==null){for(t.flags|=128,ol(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Tt(Ut,Ut.current&1|2),t.child}e=e.sibling}o.tail!==null&&Yt()>Oi&&(t.flags|=128,n=!0,ol(o,!1),t.lanes=4194304)}else{if(!n)if(e=eu(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ol(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Ft)return yr(t),null}else 2*Yt()-o.renderingStartTime>Oi&&r!==1073741824&&(t.flags|=128,n=!0,ol(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Yt(),t.sibling=null,r=Ut.current,Tt(Ut,n?r&1|2:r&1),t):(yr(t),null);case 22:case 23:return F0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?cn&1073741824&&(yr(t),t.subtreeFlags&6&&(t.flags|=8192)):yr(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function Ek(e,t){switch(y0(t),t.tag){case 1:return Xr(t.type)&&Gd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ti(),It(Jr),It(kr),E0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return C0(t),null;case 13:if(It(Ut),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));Ci()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return It(Ut),null;case 4:return Ti(),null;case 10:return _0(t.type._context),null;case 22:case 23:return F0(),null;case 24:return null;default:return null}}var Xc=!1,_r=!1,Tk=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function ei(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){qt(e,t,n)}else r.current=null}function rm(e,t,r){try{r()}catch(n){qt(e,t,n)}}var Hp=!1;function Pk(e,t){if(Ff=Wd,e=Ky(),x0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,m=e,f=null;t:for(;;){for(var x;m!==r||a!==0&&m.nodeType!==3||(l=i+a),m!==o||n!==0&&m.nodeType!==3||(c=i+n),m.nodeType===3&&(i+=m.nodeValue.length),(x=m.firstChild)!==null;)f=m,m=x;for(;;){if(m===e)break t;if(f===r&&++d===a&&(l=i),f===o&&++u===n&&(c=i),(x=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=x}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(zf={focusedElem:e,selectionRange:r},Wd=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,w=y.memoizedState,v=t.stateNode,p=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Mn(t.type,g),w);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(N){qt(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return y=Hp,Hp=!1,y}function Pl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&rm(t,r,o)}a=a.next}while(a!==n)}}function Pu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function nm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Vb(e){var t=e.alternate;t!==null&&(e.alternate=null,Vb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rs],delete t[Kl],delete t[Wf],delete t[hk],delete t[fk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hb(e){return e.tag===5||e.tag===3||e.tag===4}function qp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=qd));else if(n!==4&&(e=e.child,e!==null))for(sm(e,t,r),e=e.sibling;e!==null;)sm(e,t,r),e=e.sibling}function am(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(am(e,t,r),e=e.sibling;e!==null;)am(e,t,r),e=e.sibling}var or=null,$n=!1;function Ws(e,t,r){for(r=r.child;r!==null;)qb(e,t,r),r=r.sibling}function qb(e,t,r){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(ju,r)}catch{}switch(r.tag){case 5:_r||ei(r,t);case 6:var n=or,a=$n;or=null,Ws(e,t,r),or=n,$n=a,or!==null&&($n?(e=or,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):or.removeChild(r.stateNode));break;case 18:or!==null&&($n?(e=or,r=r.stateNode,e.nodeType===8?Mh(e.parentNode,r):e.nodeType===1&&Mh(e,r),Wl(e)):Mh(or,r.stateNode));break;case 4:n=or,a=$n,or=r.stateNode.containerInfo,$n=!0,Ws(e,t,r),or=n,$n=a;break;case 0:case 11:case 14:case 15:if(!_r&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&rm(r,t,i),a=a.next}while(a!==n)}Ws(e,t,r);break;case 1:if(!_r&&(ei(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){qt(r,t,l)}Ws(e,t,r);break;case 21:Ws(e,t,r);break;case 22:r.mode&1?(_r=(n=_r)||r.memoizedState!==null,Ws(e,t,r),_r=n):Ws(e,t,r);break;default:Ws(e,t,r)}}function Gp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Tk),t.forEach(function(n){var a=Fk.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Pn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:or=l.stateNode,$n=!1;break e;case 3:or=l.stateNode.containerInfo,$n=!0;break e;case 4:or=l.stateNode.containerInfo,$n=!0;break e}l=l.return}if(or===null)throw Error(ce(160));qb(o,i,a),or=null,$n=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){qt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Gb(t,e),t=t.sibling}function Gb(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pn(t,e),Jn(e),n&4){try{Pl(3,e,e.return),Pu(3,e)}catch(g){qt(e,e.return,g)}try{Pl(5,e,e.return)}catch(g){qt(e,e.return,g)}}break;case 1:Pn(t,e),Jn(e),n&512&&r!==null&&ei(r,r.return);break;case 5:if(Pn(t,e),Jn(e),n&512&&r!==null&&ei(r,r.return),e.flags&32){var a=e.stateNode;try{Fl(a,"")}catch(g){qt(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&gy(a,o),Tf(l,i);var d=Tf(l,o);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];u==="style"?by(a,m):u==="dangerouslySetInnerHTML"?vy(a,m):u==="children"?Fl(a,m):s0(a,u,m,d)}switch(l){case"input":Nf(a,o);break;case"textarea":py(a,o);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?ni(a,!!o.multiple,x,!1):f!==!!o.multiple&&(o.defaultValue!=null?ni(a,!!o.multiple,o.defaultValue,!0):ni(a,!!o.multiple,o.multiple?[]:"",!1))}a[Kl]=o}catch(g){qt(e,e.return,g)}}break;case 6:if(Pn(t,e),Jn(e),n&4){if(e.stateNode===null)throw Error(ce(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(g){qt(e,e.return,g)}}break;case 3:if(Pn(t,e),Jn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Wl(t.containerInfo)}catch(g){qt(e,e.return,g)}break;case 4:Pn(t,e),Jn(e);break;case 13:Pn(t,e),Jn(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||($0=Yt())),n&4&&Gp(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(_r=(d=_r)||u,Pn(t,e),_r=d):Pn(t,e),Jn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ce=e,u=e.child;u!==null;){for(m=Ce=u;Ce!==null;){switch(f=Ce,x=f.child,f.tag){case 0:case 11:case 14:case 15:Pl(4,f,f.return);break;case 1:ei(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){qt(n,r,g)}}break;case 5:ei(f,f.return);break;case 22:if(f.memoizedState!==null){Yp(m);continue}}x!==null?(x.return=f,Ce=x):Yp(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=yy("display",i))}catch(g){qt(e,e.return,g)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(g){qt(e,e.return,g)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Pn(t,e),Jn(e),n&4&&Gp(e);break;case 21:break;default:Pn(t,e),Jn(e)}}function Jn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Hb(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Fl(a,""),n.flags&=-33);var o=qp(e);am(e,o,a);break;case 3:case 4:var i=n.stateNode.containerInfo,l=qp(e);sm(e,l,i);break;default:throw Error(ce(161))}}catch(c){qt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ok(e,t,r){Ce=e,Kb(e)}function Kb(e,t,r){for(var n=(e.mode&1)!==0;Ce!==null;){var a=Ce,o=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||Xc;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||_r;l=Xc;var d=_r;if(Xc=i,(_r=c)&&!d)for(Ce=a;Ce!==null;)i=Ce,c=i.child,i.tag===22&&i.memoizedState!==null?Qp(a):c!==null?(c.return=i,Ce=c):Qp(a);for(;o!==null;)Ce=o,Kb(o),o=o.sibling;Ce=a,Xc=l,_r=d}Kp(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,Ce=o):Kp(e)}}function Kp(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_r||Pu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!_r)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Mn(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ap(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ap(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Wl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}_r||t.flags&512&&nm(t)}catch(f){qt(t,t.return,f)}}if(t===e){Ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function Yp(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function Qp(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Pu(4,t)}catch(c){qt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){qt(t,a,c)}}var o=t.return;try{nm(t)}catch(c){qt(t,o,c)}break;case 5:var i=t.return;try{nm(t)}catch(c){qt(t,i,c)}}}catch(c){qt(t,t.return,c)}if(t===e){Ce=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ce=l;break}Ce=t.return}}var Ak=Math.ceil,nu=Fs.ReactCurrentDispatcher,R0=Fs.ReactCurrentOwner,Nn=Fs.ReactCurrentBatchConfig,pt=0,ar=null,Jt=null,hr=0,cn=0,ti=Ia(0),tr=0,ec=null,go=0,Ou=0,I0=0,Ol=null,Hr=null,$0=0,Oi=1/0,bs=null,su=!1,om=null,ya=null,Zc=!1,fa=null,au=0,Al=0,im=null,Pd=-1,Od=0;function $r(){return pt&6?Yt():Pd!==-1?Pd:Pd=Yt()}function ba(e){return e.mode&1?pt&2&&hr!==0?hr&-hr:gk.transition!==null?(Od===0&&(Od=Ay()),Od):(e=St,e!==0||(e=window.event,e=e===void 0?16:Fy(e.type)),e):1}function Wn(e,t,r,n){if(50<Al)throw Al=0,im=null,Error(ce(185));pc(e,r,n),(!(pt&2)||e!==ar)&&(e===ar&&(!(pt&2)&&(Ou|=r),tr===4&&sa(e,hr)),Zr(e,n),r===1&&pt===0&&!(t.mode&1)&&(Oi=Yt()+500,Cu&&$a()))}function Zr(e,t){var r=e.callbackNode;gS(e,t);var n=Ud(e,e===ar?hr:0);if(n===0)r!==null&&ap(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&ap(r),t===1)e.tag===0?mk(Jp.bind(null,e)):sb(Jp.bind(null,e)),dk(function(){!(pt&6)&&$a()}),r=null;else{switch(Dy(n)){case 1:r=c0;break;case 4:r=Py;break;case 16:r=Bd;break;case 536870912:r=Oy;break;default:r=Bd}r=rw(r,Yb.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Yb(e,t){if(Pd=-1,Od=0,pt&6)throw Error(ce(327));var r=e.callbackNode;if(li()&&e.callbackNode!==r)return null;var n=Ud(e,e===ar?hr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ou(e,n);else{t=n;var a=pt;pt|=2;var o=Jb();(ar!==e||hr!==t)&&(bs=null,Oi=Yt()+500,co(e,t));do try{Rk();break}catch(l){Qb(e,l)}while(1);j0(),nu.current=o,pt=a,Jt!==null?t=0:(ar=null,hr=0,t=tr)}if(t!==0){if(t===2&&(a=Mf(e),a!==0&&(n=a,t=lm(e,a))),t===1)throw r=ec,co(e,0),sa(e,n),Zr(e,Yt()),r;if(t===6)sa(e,n);else{if(a=e.current.alternate,!(n&30)&&!Dk(a)&&(t=ou(e,n),t===2&&(o=Mf(e),o!==0&&(n=o,t=lm(e,o))),t===1))throw r=ec,co(e,0),sa(e,n),Zr(e,Yt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ce(345));case 2:Ga(e,Hr,bs);break;case 3:if(sa(e,n),(n&130023424)===n&&(t=$0+500-Yt(),10<t)){if(Ud(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){$r(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Uf(Ga.bind(null,e,Hr,bs),t);break}Ga(e,Hr,bs);break;case 4:if(sa(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-Un(n);o=1<<i,i=t[i],i>a&&(a=i),n&=~o}if(n=a,n=Yt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ak(n/1960))-n,10<n){e.timeoutHandle=Uf(Ga.bind(null,e,Hr,bs),n);break}Ga(e,Hr,bs);break;case 5:Ga(e,Hr,bs);break;default:throw Error(ce(329))}}}return Zr(e,Yt()),e.callbackNode===r?Yb.bind(null,e):null}function lm(e,t){var r=Ol;return e.current.memoizedState.isDehydrated&&(co(e,t).flags|=256),e=ou(e,t),e!==2&&(t=Hr,Hr=r,t!==null&&cm(t)),e}function cm(e){Hr===null?Hr=e:Hr.push.apply(Hr,e)}function Dk(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!Hn(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sa(e,t){for(t&=~I0,t&=~Ou,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Un(t),n=1<<r;e[r]=-1,t&=~n}}function Jp(e){if(pt&6)throw Error(ce(327));li();var t=Ud(e,0);if(!(t&1))return Zr(e,Yt()),null;var r=ou(e,t);if(e.tag!==0&&r===2){var n=Mf(e);n!==0&&(t=n,r=lm(e,n))}if(r===1)throw r=ec,co(e,0),sa(e,t),Zr(e,Yt()),r;if(r===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ga(e,Hr,bs),Zr(e,Yt()),null}function L0(e,t){var r=pt;pt|=1;try{return e(t)}finally{pt=r,pt===0&&(Oi=Yt()+500,Cu&&$a())}}function po(e){fa!==null&&fa.tag===0&&!(pt&6)&&li();var t=pt;pt|=1;var r=Nn.transition,n=St;try{if(Nn.transition=null,St=1,e)return e()}finally{St=n,Nn.transition=r,pt=t,!(pt&6)&&$a()}}function F0(){cn=ti.current,It(ti)}function co(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ck(r)),Jt!==null)for(r=Jt.return;r!==null;){var n=r;switch(y0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Gd();break;case 3:Ti(),It(Jr),It(kr),E0();break;case 5:C0(n);break;case 4:Ti();break;case 13:It(Ut);break;case 19:It(Ut);break;case 10:_0(n.type._context);break;case 22:case 23:F0()}r=r.return}if(ar=e,Jt=e=wa(e.current,null),hr=cn=t,tr=0,ec=null,I0=Ou=go=0,Hr=Ol=null,eo!==null){for(t=0;t<eo.length;t++)if(r=eo[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=a,n.next=i}r.pending=n}eo=null}return e}function Qb(e,t){do{var r=Jt;try{if(j0(),Cd.current=ru,tu){for(var n=Wt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}tu=!1}if(mo=0,sr=er=Wt=null,Tl=!1,Jl=0,R0.current=null,r===null||r.return===null){tr=1,ec=t,Jt=null;break}e:{var o=e,i=r.return,l=r,c=t;if(t=hr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=Lp(i);if(x!==null){x.flags&=-257,Fp(x,i,l,o,t),x.mode&1&&$p(o,d,t),t=x,c=d;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){$p(o,d,t),z0();break e}c=Error(ce(426))}}else if(Ft&&l.mode&1){var w=Lp(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Fp(w,i,l,o,t),b0(Pi(c,l));break e}}o=c=Pi(c,l),tr!==4&&(tr=2),Ol===null?Ol=[o]:Ol.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=Db(o,c,t);Op(o,v);break e;case 1:l=c;var p=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ya===null||!ya.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var N=Mb(o,l,t);Op(o,N);break e}}o=o.return}while(o!==null)}Zb(r)}catch(S){t=S,Jt===r&&r!==null&&(Jt=r=r.return);continue}break}while(1)}function Jb(){var e=nu.current;return nu.current=ru,e===null?ru:e}function z0(){(tr===0||tr===3||tr===2)&&(tr=4),ar===null||!(go&268435455)&&!(Ou&268435455)||sa(ar,hr)}function ou(e,t){var r=pt;pt|=2;var n=Jb();(ar!==e||hr!==t)&&(bs=null,co(e,t));do try{Mk();break}catch(a){Qb(e,a)}while(1);if(j0(),pt=r,nu.current=n,Jt!==null)throw Error(ce(261));return ar=null,hr=0,tr}function Mk(){for(;Jt!==null;)Xb(Jt)}function Rk(){for(;Jt!==null&&!oS();)Xb(Jt)}function Xb(e){var t=tw(e.alternate,e,cn);e.memoizedProps=e.pendingProps,t===null?Zb(e):Jt=t,R0.current=null}function Zb(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ek(r,t),r!==null){r.flags&=32767,Jt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tr=6,Jt=null;return}}else if(r=Ck(r,t,cn),r!==null){Jt=r;return}if(t=t.sibling,t!==null){Jt=t;return}Jt=t=e}while(t!==null);tr===0&&(tr=5)}function Ga(e,t,r){var n=St,a=Nn.transition;try{Nn.transition=null,St=1,Ik(e,t,r,n)}finally{Nn.transition=a,St=n}return null}function Ik(e,t,r,n){do li();while(fa!==null);if(pt&6)throw Error(ce(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(pS(e,o),e===ar&&(Jt=ar=null,hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zc||(Zc=!0,rw(Bd,function(){return li(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Nn.transition,Nn.transition=null;var i=St;St=1;var l=pt;pt|=4,R0.current=null,Pk(e,r),Gb(r,e),rk(zf),Wd=!!Ff,zf=Ff=null,e.current=r,Ok(r),iS(),pt=l,St=i,Nn.transition=o}else e.current=r;if(Zc&&(Zc=!1,fa=e,au=a),o=e.pendingLanes,o===0&&(ya=null),dS(r.stateNode),Zr(e,Yt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(su)throw su=!1,e=om,om=null,e;return au&1&&e.tag!==0&&li(),o=e.pendingLanes,o&1?e===im?Al++:(Al=0,im=e):Al=0,$a(),null}function li(){if(fa!==null){var e=Dy(au),t=Nn.transition,r=St;try{if(Nn.transition=null,St=16>e?16:e,fa===null)var n=!1;else{if(e=fa,fa=null,au=0,pt&6)throw Error(ce(331));var a=pt;for(pt|=4,Ce=e.current;Ce!==null;){var o=Ce,i=o.child;if(Ce.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ce=d;Ce!==null;){var u=Ce;switch(u.tag){case 0:case 11:case 15:Pl(8,u,o)}var m=u.child;if(m!==null)m.return=u,Ce=m;else for(;Ce!==null;){u=Ce;var f=u.sibling,x=u.return;if(Vb(u),u===d){Ce=null;break}if(f!==null){f.return=x,Ce=f;break}Ce=x}}}var y=o.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ce=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Ce=i;else e:for(;Ce!==null;){if(o=Ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Pl(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,Ce=v;break e}Ce=o.return}}var p=e.current;for(Ce=p;Ce!==null;){i=Ce;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Ce=b;else e:for(i=p;Ce!==null;){if(l=Ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pu(9,l)}}catch(S){qt(l,l.return,S)}if(l===i){Ce=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Ce=N;break e}Ce=l.return}}if(pt=a,$a(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(ju,e)}catch{}n=!0}return n}finally{St=r,Nn.transition=t}}return!1}function Xp(e,t,r){t=Pi(r,t),t=Db(e,t,1),e=va(e,t,1),t=$r(),e!==null&&(pc(e,1,t),Zr(e,t))}function qt(e,t,r){if(e.tag===3)Xp(e,e,r);else for(;t!==null;){if(t.tag===3){Xp(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ya===null||!ya.has(n))){e=Pi(r,e),e=Mb(t,e,1),t=va(t,e,1),e=$r(),t!==null&&(pc(t,1,e),Zr(t,e));break}}t=t.return}}function $k(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=$r(),e.pingedLanes|=e.suspendedLanes&r,ar===e&&(hr&r)===r&&(tr===4||tr===3&&(hr&130023424)===hr&&500>Yt()-$0?co(e,0):I0|=r),Zr(e,t)}function ew(e,t){t===0&&(e.mode&1?(t=Wc,Wc<<=1,!(Wc&130023424)&&(Wc=4194304)):t=1);var r=$r();e=Ms(e,t),e!==null&&(pc(e,t,r),Zr(e,r))}function Lk(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ew(e,r)}function Fk(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(t),ew(e,r)}var tw;tw=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Jr.current)Kr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Kr=!1,kk(e,t,r);Kr=!!(e.flags&131072)}else Kr=!1,Ft&&t.flags&1048576&&ab(t,Qd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Td(e,t),e=t.pendingProps;var a=ki(t,kr.current);ii(t,r),a=P0(null,t,n,e,a,r);var o=O0();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xr(n)?(o=!0,Kd(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,S0(t),a.updater=Tu,t.stateNode=a,a._reactInternals=t,Yf(t,n,e,r),t=Xf(null,t,n,!0,o,r)):(t.tag=0,Ft&&o&&v0(t),Or(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Td(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Bk(n),e=Mn(n,e),a){case 0:t=Jf(null,t,n,e,r);break e;case 1:t=Up(null,t,n,e,r);break e;case 11:t=zp(null,t,n,e,r);break e;case 14:t=Bp(null,t,n,Mn(n.type,e),r);break e}throw Error(ce(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Mn(n,a),Jf(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Mn(n,a),Up(e,t,n,a,r);case 3:e:{if(Lb(t),e===null)throw Error(ce(387));n=t.pendingProps,o=t.memoizedState,a=o.element,ub(e,t),Zd(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Pi(Error(ce(423)),t),t=Wp(e,t,n,r,a);break e}else if(n!==a){a=Pi(Error(ce(424)),t),t=Wp(e,t,n,r,a);break e}else for(un=xa(t.stateNode.containerInfo.firstChild),hn=t,Ft=!0,zn=null,r=cb(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ci(),n===a){t=Rs(e,t,r);break e}Or(e,t,n,r)}t=t.child}return t;case 5:return hb(t),e===null&&qf(t),n=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,Bf(n,a)?i=null:o!==null&&Bf(n,o)&&(t.flags|=32),$b(e,t),Or(e,t,i,r),t.child;case 6:return e===null&&qf(t),null;case 13:return Fb(e,t,r);case 4:return k0(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ei(t,null,n,r):Or(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Mn(n,a),zp(e,t,n,a,r);case 7:return Or(e,t,t.pendingProps,r),t.child;case 8:return Or(e,t,t.pendingProps.children,r),t.child;case 12:return Or(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,Tt(Jd,n._currentValue),n._currentValue=i,o!==null)if(Hn(o.value,i)){if(o.children===a.children&&!Jr.current){t=Rs(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=Cs(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Gf(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(ce(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Gf(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Or(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ii(t,r),a=kn(a),n=n(a),t.flags|=1,Or(e,t,n,r),t.child;case 14:return n=t.type,a=Mn(n,t.pendingProps),a=Mn(n.type,a),Bp(e,t,n,a,r);case 15:return Rb(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Mn(n,a),Td(e,t),t.tag=1,Xr(n)?(e=!0,Kd(t)):e=!1,ii(t,r),Ab(t,n,a),Yf(t,n,a,r),Xf(null,t,n,!0,e,r);case 19:return zb(e,t,r);case 22:return Ib(e,t,r)}throw Error(ce(156,t.tag))};function rw(e,t){return Ty(e,t)}function zk(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(e,t,r,n){return new zk(e,t,r,n)}function B0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bk(e){if(typeof e=="function")return B0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===o0)return 11;if(e===i0)return 14}return 2}function wa(e,t){var r=e.alternate;return r===null?(r=_n(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ad(e,t,r,n,a,o){var i=2;if(n=e,typeof e=="function")B0(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Ho:return uo(r.children,a,o,t);case a0:i=8,a|=8;break;case yf:return e=_n(12,r,t,a|2),e.elementType=yf,e.lanes=o,e;case bf:return e=_n(13,r,t,a),e.elementType=bf,e.lanes=o,e;case wf:return e=_n(19,r,t,a),e.elementType=wf,e.lanes=o,e;case hy:return Au(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dy:i=10;break e;case uy:i=9;break e;case o0:i=11;break e;case i0:i=14;break e;case ta:i=16,n=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=_n(i,r,t,a),t.elementType=e,t.type=n,t.lanes=o,t}function uo(e,t,r,n){return e=_n(7,e,n,t),e.lanes=r,e}function Au(e,t,r,n){return e=_n(22,e,n,t),e.elementType=hy,e.lanes=r,e.stateNode={isHidden:!1},e}function Uh(e,t,r){return e=_n(6,e,null,t),e.lanes=r,e}function Wh(e,t,r){return t=_n(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uk(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_h(0),this.expirationTimes=_h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_h(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function U0(e,t,r,n,a,o,i,l,c){return e=new Uk(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=_n(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},S0(o),e}function Wk(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function nw(e){if(!e)return _a;e=e._reactInternals;e:{if(_o(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var r=e.type;if(Xr(r))return nb(e,r,t)}return t}function sw(e,t,r,n,a,o,i,l,c){return e=U0(r,n,!0,e,a,o,i,l,c),e.context=nw(null),r=e.current,n=$r(),a=ba(r),o=Cs(n,a),o.callback=t??null,va(r,o,a),e.current.lanes=a,pc(e,a,n),Zr(e,n),e}function Du(e,t,r,n){var a=t.current,o=$r(),i=ba(a);return r=nw(r),t.context===null?t.context=r:t.pendingContext=r,t=Cs(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=va(a,t,i),e!==null&&(Wn(e,a,i,o),kd(e,a,i)),i}function iu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function W0(e,t){Zp(e,t),(e=e.alternate)&&Zp(e,t)}function Vk(){return null}var aw=typeof reportError=="function"?reportError:function(e){console.error(e)};function V0(e){this._internalRoot=e}Mu.prototype.render=V0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));Du(e,t,null,null)};Mu.prototype.unmount=V0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;po(function(){Du(null,e,null,null)}),t[Ds]=null}};function Mu(e){this._internalRoot=e}Mu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Iy();e={blockedOn:null,target:e,priority:t};for(var r=0;r<na.length&&t!==0&&t<na[r].priority;r++);na.splice(r,0,e),r===0&&Ly(e)}};function H0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ru(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ex(){}function Hk(e,t,r,n,a){if(a){if(typeof n=="function"){var o=n;n=function(){var d=iu(i);o.call(d)}}var i=sw(t,n,e,0,null,!1,!1,"",ex);return e._reactRootContainer=i,e[Ds]=i.current,ql(e.nodeType===8?e.parentNode:e),po(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=iu(c);l.call(d)}}var c=U0(e,0,!1,null,null,!1,!1,"",ex);return e._reactRootContainer=c,e[Ds]=c.current,ql(e.nodeType===8?e.parentNode:e),po(function(){Du(t,c,r,n)}),c}function Iu(e,t,r,n,a){var o=r._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var l=a;a=function(){var c=iu(i);l.call(c)}}Du(t,i,e,a)}else i=Hk(r,t,e,a,n);return iu(i)}My=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xl(t.pendingLanes);r!==0&&(d0(t,r|1),Zr(t,Yt()),!(pt&6)&&(Oi=Yt()+500,$a()))}break;case 13:po(function(){var n=Ms(e,1);if(n!==null){var a=$r();Wn(n,e,1,a)}}),W0(e,1)}};u0=function(e){if(e.tag===13){var t=Ms(e,134217728);if(t!==null){var r=$r();Wn(t,e,134217728,r)}W0(e,134217728)}};Ry=function(e){if(e.tag===13){var t=ba(e),r=Ms(e,t);if(r!==null){var n=$r();Wn(r,e,t,n)}W0(e,t)}};Iy=function(){return St};$y=function(e,t){var r=St;try{return St=e,t()}finally{St=r}};Of=function(e,t,r){switch(t){case"input":if(Nf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ku(n);if(!a)throw Error(ce(90));my(n),Nf(n,a)}}}break;case"textarea":py(e,r);break;case"select":t=r.value,t!=null&&ni(e,!!r.multiple,t,!1)}};_y=L0;Ny=po;var qk={usingClientEntryPoint:!1,Events:[vc,Yo,ku,wy,jy,L0]},il={findFiberByHostInstance:Za,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gk={bundleType:il.bundleType,version:il.version,rendererPackageName:il.rendererPackageName,rendererConfig:il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Cy(e),e===null?null:e.stateNode},findFiberByHostInstance:il.findFiberByHostInstance||Vk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{ju=ed.inject(Gk),os=ed}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qk;pn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H0(t))throw Error(ce(200));return Wk(e,t,null,r)};pn.createRoot=function(e,t){if(!H0(e))throw Error(ce(299));var r=!1,n="",a=aw;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=U0(e,1,!1,null,null,r,!1,n,a),e[Ds]=t.current,ql(e.nodeType===8?e.parentNode:e),new V0(t)};pn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=Cy(t),e=e===null?null:e.stateNode,e};pn.flushSync=function(e){return po(e)};pn.hydrate=function(e,t,r){if(!Ru(t))throw Error(ce(200));return Iu(null,e,t,!0,r)};pn.hydrateRoot=function(e,t,r){if(!H0(e))throw Error(ce(405));var n=r!=null&&r.hydratedSources||null,a=!1,o="",i=aw;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=sw(t,null,e,1,r??null,a,!1,o,i),e[Ds]=t.current,ql(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Mu(t)};pn.render=function(e,t,r){if(!Ru(t))throw Error(ce(200));return Iu(null,e,t,!1,r)};pn.unmountComponentAtNode=function(e){if(!Ru(e))throw Error(ce(40));return e._reactRootContainer?(po(function(){Iu(null,null,e,!1,function(){e._reactRootContainer=null,e[Ds]=null})}),!0):!1};pn.unstable_batchedUpdates=L0;pn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ru(r))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return Iu(e,t,r,!1,n)};pn.version="18.3.1-next-f1338f8080-20240426";function ow(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ow)}catch(e){console.error(e)}}ow(),oy.exports=pn;var No=oy.exports;const iw=qv(No);var lw,tx=No;lw=tx.createRoot,tx.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lu(){return lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lu.apply(this,arguments)}var ro;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ro||(ro={}));const rx="popstate";function Kk(e){e===void 0&&(e={});function t(n,a){let{pathname:o,search:i,hash:l}=n.location;return dm("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:dw(a)}return Qk(t,r,null,e)}function cw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Yk(){return Math.random().toString(36).substr(2,8)}function nx(e,t){return{usr:e.state,key:e.key,idx:t}}function dm(e,t,r,n){return r===void 0&&(r=null),lu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?uw(t):t,{state:r,key:t&&t.key||n||Yk()})}function dw(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function uw(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Qk(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:o=!1}=n,i=a.history,l=ro.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(lu({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function m(){l=ro.Pop;let w=u(),v=w==null?null:w-d;d=w,c&&c({action:l,location:g.location,delta:v})}function f(w,v){l=ro.Push;let p=dm(g.location,w,v);r&&r(p,w),d=u()+1;let b=nx(p,d),N=g.createHref(p);try{i.pushState(b,"",N)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(N)}o&&c&&c({action:l,location:g.location,delta:1})}function x(w,v){l=ro.Replace;let p=dm(g.location,w,v);r&&r(p,w),d=u();let b=nx(p,d),N=g.createHref(p);i.replaceState(b,"",N),o&&c&&c({action:l,location:g.location,delta:0})}function y(w){let v=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof w=="string"?w:dw(w);return p=p.replace(/ $/,"%20"),cw(v,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,v)}let g={get action(){return l},get location(){return e(a,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(rx,m),c=w,()=>{a.removeEventListener(rx,m),c=null}},createHref(w){return t(a,w)},createURL:y,encodeLocation(w){let v=y(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:x,go(w){return i.go(w)}};return g}var sx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sx||(sx={}));function Jk(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const hw=["post","put","patch","delete"];new Set(hw);const Xk=["get",...hw];new Set(Xk);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(this,arguments)}const Zk=h.createContext(null),fw=h.createContext(null);function eC(){return h.useContext(fw)!=null}function tC(e){let{basename:t="/",children:r=null,location:n,navigationType:a=ro.Pop,navigator:o,static:i=!1,future:l}=e;eC()&&cw(!1);let c=t.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:o,static:i,future:um({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof n=="string"&&(n=uw(n));let{pathname:u="/",search:m="",hash:f="",state:x=null,key:y="default"}=n,g=h.useMemo(()=>{let w=Jk(u,c);return w==null?null:{location:{pathname:w,search:m,hash:f,state:x,key:y},navigationType:a}},[c,u,m,f,x,y,a]);return g==null?null:h.createElement(Zk.Provider,{value:d},h.createElement(fw.Provider,{children:r,value:g}))}new Promise(()=>{});/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const rC="6";try{window.__reactRouterVersion=rC}catch{}const nC="startTransition",ax=sy[nC];function sC(e){let{basename:t,children:r,future:n,window:a}=e,o=h.useRef();o.current==null&&(o.current=Kk({window:a,v5Compat:!0}));let i=o.current,[l,c]=h.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},u=h.useCallback(m=>{d&&ax?ax(()=>c(m)):c(m)},[c,d]);return h.useLayoutEffect(()=>i.listen(u),[i,u]),h.createElement(tC,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}var ox;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ox||(ox={}));var ix;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ix||(ix={}));const aC=1,oC=1e6;let Vh=0;function iC(){return Vh=(Vh+1)%Number.MAX_SAFE_INTEGER,Vh.toString()}const Hh=new Map,lx=e=>{if(Hh.has(e))return;const t=setTimeout(()=>{Hh.delete(e),Dl({type:"REMOVE_TOAST",toastId:e})},oC);Hh.set(e,t)},lC=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,aC)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?lx(r):e.toasts.forEach(n=>{lx(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Dd=[];let Md={toasts:[]};function Dl(e){Md=lC(Md,e),Dd.forEach(t=>{t(Md)})}function cC({...e}){const t=iC(),r=a=>Dl({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Dl({type:"DISMISS_TOAST",toastId:t});return Dl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function Tn(){const[e,t]=h.useState(Md);return h.useEffect(()=>(Dd.push(t),()=>{const r=Dd.indexOf(t);r>-1&&Dd.splice(r,1)}),[e]),{...e,toast:cC,dismiss:r=>Dl({type:"DISMISS_TOAST",toastId:r})}}function De(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function dC(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function mw(...e){return t=>e.forEach(r=>dC(r,t))}function jt(...e){return h.useCallback(mw(...e),e)}function uC(e,t=[]){let r=[];function n(o,i){const l=h.createContext(i),c=r.length;r=[...r,i];function d(m){const{scope:f,children:x,...y}=m,g=(f==null?void 0:f[e][c])||l,w=h.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:w,children:x})}function u(m,f){const x=(f==null?void 0:f[e][c])||l,y=h.useContext(x);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=r.map(i=>h.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,hC(a,...t)]}function hC(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var Na=h.forwardRef((e,t)=>{const{children:r,...n}=e,a=h.Children.toArray(r),o=a.find(fC);if(o){const i=o.props.children,l=a.map(c=>c===o?h.Children.count(i)>1?h.Children.only(null):h.isValidElement(i)?i.props.children:null:c);return s.jsx(hm,{...n,ref:t,children:h.isValidElement(i)?h.cloneElement(i,void 0,l):null})}return s.jsx(hm,{...n,ref:t,children:r})});Na.displayName="Slot";var hm=h.forwardRef((e,t)=>{const{children:r,...n}=e;if(h.isValidElement(r)){const a=gC(r);return h.cloneElement(r,{...mC(n,r.props),ref:t?mw(t,a):a})}return h.Children.count(r)>1?h.Children.only(null):null});hm.displayName="SlotClone";var q0=({children:e})=>s.jsx(s.Fragment,{children:e});function fC(e){return h.isValidElement(e)&&e.type===q0}function mC(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...l)=>{o(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function gC(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function G0(e){const t=e+"CollectionProvider",[r,n]=uC(t),[a,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:y,children:g}=x,w=he.useRef(null),v=he.useRef(new Map).current;return s.jsx(a,{scope:y,itemMap:v,collectionRef:w,children:g})};i.displayName=t;const l=e+"CollectionSlot",c=he.forwardRef((x,y)=>{const{scope:g,children:w}=x,v=o(l,g),p=jt(y,v.collectionRef);return s.jsx(Na,{ref:p,children:w})});c.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",m=he.forwardRef((x,y)=>{const{scope:g,children:w,...v}=x,p=he.useRef(null),b=jt(y,p),N=o(d,g);return he.useEffect(()=>(N.itemMap.set(p,{ref:p,...v}),()=>void N.itemMap.delete(p))),s.jsx(Na,{[u]:"",ref:b,children:w})});m.displayName=d;function f(x){const y=o(e+"CollectionConsumer",x);return he.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(y.itemMap.values()).sort((N,S)=>v.indexOf(N.ref.current)-v.indexOf(S.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:c,ItemSlot:m},f,n]}function pC(e,t){const r=h.createContext(t),n=o=>{const{children:i,...l}=o,c=h.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:i})};n.displayName=e+"Provider";function a(o){const i=h.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,a]}function So(e,t=[]){let r=[];function n(o,i){const l=h.createContext(i),c=r.length;r=[...r,i];const d=m=>{var v;const{scope:f,children:x,...y}=m,g=((v=f==null?void 0:f[e])==null?void 0:v[c])||l,w=h.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:w,children:x})};d.displayName=o+"Provider";function u(m,f){var g;const x=((g=f==null?void 0:f[e])==null?void 0:g[c])||l,y=h.useContext(x);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,u]}const a=()=>{const o=r.map(i=>h.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,xC(a,...t)]}function xC(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var vC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=vC.reduce((e,t)=>{const r=h.forwardRef((n,a)=>{const{asChild:o,...i}=n,l=o?Na:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...i,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function gw(e,t){e&&No.flushSync(()=>e.dispatchEvent(t))}function en(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function yC(e,t=globalThis==null?void 0:globalThis.document){const r=en(e);h.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var bC="DismissableLayer",fm="dismissableLayer.update",wC="dismissableLayer.pointerDownOutside",jC="dismissableLayer.focusOutside",cx,pw=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Bi=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=h.useContext(pw),[u,m]=h.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=h.useState({}),y=jt(t,D=>m(D)),g=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),p=u?g.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,N=p>=v,S=NC(D=>{const I=D.target,ee=[...d.branches].some(J=>J.contains(I));!N||ee||(a==null||a(D),i==null||i(D),D.defaultPrevented||l==null||l())},f),E=SC(D=>{const I=D.target;[...d.branches].some(J=>J.contains(I))||(o==null||o(D),i==null||i(D),D.defaultPrevented||l==null||l())},f);return yC(D=>{p===d.layers.size-1&&(n==null||n(D),!D.defaultPrevented&&l&&(D.preventDefault(),l()))},f),h.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(cx=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),dx(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=cx)}},[u,f,r,d]),h.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),dx())},[u,d]),h.useEffect(()=>{const D=()=>x({});return document.addEventListener(fm,D),()=>document.removeEventListener(fm,D)},[]),s.jsx(Je.div,{...c,ref:y,style:{pointerEvents:b?N?"auto":"none":void 0,...e.style},onFocusCapture:De(e.onFocusCapture,E.onFocusCapture),onBlurCapture:De(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:De(e.onPointerDownCapture,S.onPointerDownCapture)})});Bi.displayName=bC;var _C="DismissableLayerBranch",xw=h.forwardRef((e,t)=>{const r=h.useContext(pw),n=h.useRef(null),a=jt(t,n);return h.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),s.jsx(Je.div,{...e,ref:a})});xw.displayName=_C;function NC(e,t=globalThis==null?void 0:globalThis.document){const r=en(e),n=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){vw(wC,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function SC(e,t=globalThis==null?void 0:globalThis.document){const r=en(e),n=h.useRef(!1);return h.useEffect(()=>{const a=o=>{o.target&&!n.current&&vw(jC,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function dx(){const e=new CustomEvent(fm);document.dispatchEvent(e)}function vw(e,t,r,{discrete:n}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?gw(a,o):a.dispatchEvent(o)}var kC=Bi,CC=xw,Cr=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},EC="Portal",bc=h.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,o]=h.useState(!1);Cr(()=>o(!0),[]);const i=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?iw.createPortal(s.jsx(Je.div,{...n,ref:t}),i):null});bc.displayName=EC;function TC(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var zs=e=>{const{present:t,children:r}=e,n=PC(t),a=typeof r=="function"?r({present:n.isPresent}):h.Children.only(r),o=jt(n.ref,OC(a));return typeof r=="function"||n.isPresent?h.cloneElement(a,{ref:o}):null};zs.displayName="Presence";function PC(e){const[t,r]=h.useState(),n=h.useRef({}),a=h.useRef(e),o=h.useRef("none"),i=e?"mounted":"unmounted",[l,c]=TC(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=td(n.current);o.current=l==="mounted"?d:"none"},[l]),Cr(()=>{const d=n.current,u=a.current;if(u!==e){const f=o.current,x=td(d);e?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Cr(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=x=>{const g=td(n.current).includes(x.animationName);if(x.target===t&&g&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},f=x=>{x.target===t&&(o.current=td(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function td(e){return(e==null?void 0:e.animationName)||"none"}function OC(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function xo({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=AC({defaultProp:t,onChange:r}),o=e!==void 0,i=o?e:n,l=en(r),c=h.useCallback(d=>{if(o){const m=typeof d=="function"?d(e):d;m!==e&&l(m)}else a(d)},[o,e,a,l]);return[i,c]}function AC({defaultProp:e,onChange:t}){const r=h.useState(e),[n]=r,a=h.useRef(n),o=en(t);return h.useEffect(()=>{a.current!==n&&(o(n),a.current=n)},[n,a,o]),r}var DC="VisuallyHidden",wc=h.forwardRef((e,t)=>s.jsx(Je.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));wc.displayName=DC;var MC=wc,K0="ToastProvider",[Y0,RC,IC]=G0("Toast"),[yw,zM]=So("Toast",[IC]),[$C,$u]=yw(K0),bw=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=e,[l,c]=h.useState(null),[d,u]=h.useState(0),m=h.useRef(!1),f=h.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${K0}\`. Expected non-empty \`string\`.`),s.jsx(Y0.Provider,{scope:t,children:s.jsx($C,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>u(x=>x+1),[]),onToastRemove:h.useCallback(()=>u(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:f,children:i})})};bw.displayName=K0;var ww="ToastViewport",LC=["F8"],mm="toast.viewportPause",gm="toast.viewportResume",jw=h.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=LC,label:a="Notifications ({hotkey})",...o}=e,i=$u(ww,r),l=RC(r),c=h.useRef(null),d=h.useRef(null),u=h.useRef(null),m=h.useRef(null),f=jt(t,m,i.onViewportChange),x=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=i.toastCount>0;h.useEffect(()=>{const w=v=>{var b;n.length!==0&&n.every(N=>v[N]||v.code===N)&&((b=m.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),h.useEffect(()=>{const w=c.current,v=m.current;if(y&&w&&v){const p=()=>{if(!i.isClosePausedRef.current){const E=new CustomEvent(mm);v.dispatchEvent(E),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const E=new CustomEvent(gm);v.dispatchEvent(E),i.isClosePausedRef.current=!1}},N=E=>{!w.contains(E.relatedTarget)&&b()},S=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",p),w.addEventListener("focusout",N),w.addEventListener("pointermove",p),w.addEventListener("pointerleave",S),window.addEventListener("blur",p),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",p),w.removeEventListener("focusout",N),w.removeEventListener("pointermove",p),w.removeEventListener("pointerleave",S),window.removeEventListener("blur",p),window.removeEventListener("focus",b)}}},[y,i.isClosePausedRef]);const g=h.useCallback(({tabbingDirection:w})=>{const p=l().map(b=>{const N=b.ref.current,S=[N,...JC(N)];return w==="forwards"?S:S.reverse()});return(w==="forwards"?p.reverse():p).flat()},[l]);return h.useEffect(()=>{const w=m.current;if(w){const v=p=>{var S,E,D;const b=p.altKey||p.ctrlKey||p.metaKey;if(p.key==="Tab"&&!b){const I=document.activeElement,ee=p.shiftKey;if(p.target===w&&ee){(S=d.current)==null||S.focus();return}const _=g({tabbingDirection:ee?"backwards":"forwards"}),O=_.findIndex(j=>j===I);qh(_.slice(O+1))?p.preventDefault():ee?(E=d.current)==null||E.focus():(D=u.current)==null||D.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[l,g]),s.jsxs(CC,{ref:c,role:"region","aria-label":a.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&s.jsx(pm,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});qh(w)}}),s.jsx(Y0.Slot,{scope:r,children:s.jsx(Je.ol,{tabIndex:-1,...o,ref:f})}),y&&s.jsx(pm,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});qh(w)}})]})});jw.displayName=ww;var _w="ToastFocusProxy",pm=h.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,o=$u(_w,r);return s.jsx(wc,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&n()}})});pm.displayName=_w;var Lu="Toast",FC="toast.swipeStart",zC="toast.swipeMove",BC="toast.swipeCancel",UC="toast.swipeEnd",Nw=h.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:o,...i}=e,[l=!0,c]=xo({prop:n,defaultProp:a,onChange:o});return s.jsx(zs,{present:r||l,children:s.jsx(HC,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:en(e.onPause),onResume:en(e.onResume),onSwipeStart:De(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:De(e.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:De(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:De(e.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});Nw.displayName=Lu;var[WC,VC]=yw(Lu,{onClose(){}}),HC=h.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:f,onSwipeEnd:x,...y}=e,g=$u(Lu,r),[w,v]=h.useState(null),p=jt(t,j=>v(j)),b=h.useRef(null),N=h.useRef(null),S=a||g.duration,E=h.useRef(0),D=h.useRef(S),I=h.useRef(0),{onToastAdd:ee,onToastRemove:J}=g,T=en(()=>{var k;(w==null?void 0:w.contains(document.activeElement))&&((k=g.viewport)==null||k.focus()),i()}),_=h.useCallback(j=>{!j||j===1/0||(window.clearTimeout(I.current),E.current=new Date().getTime(),I.current=window.setTimeout(T,j))},[T]);h.useEffect(()=>{const j=g.viewport;if(j){const k=()=>{_(D.current),d==null||d()},A=()=>{const F=new Date().getTime()-E.current;D.current=D.current-F,window.clearTimeout(I.current),c==null||c()};return j.addEventListener(mm,A),j.addEventListener(gm,k),()=>{j.removeEventListener(mm,A),j.removeEventListener(gm,k)}}},[g.viewport,S,c,d,_]),h.useEffect(()=>{o&&!g.isClosePausedRef.current&&_(S)},[o,S,g.isClosePausedRef,_]),h.useEffect(()=>(ee(),()=>J()),[ee,J]);const O=h.useMemo(()=>w?Ow(w):null,[w]);return g.viewport?s.jsxs(s.Fragment,{children:[O&&s.jsx(qC,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),s.jsx(WC,{scope:r,onClose:T,children:No.createPortal(s.jsx(Y0.ItemSlot,{scope:r,children:s.jsx(kC,{asChild:!0,onEscapeKeyDown:De(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:p,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:De(e.onKeyDown,j=>{j.key==="Escape"&&(l==null||l(j.nativeEvent),j.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:De(e.onPointerDown,j=>{j.button===0&&(b.current={x:j.clientX,y:j.clientY})}),onPointerMove:De(e.onPointerMove,j=>{if(!b.current)return;const k=j.clientX-b.current.x,A=j.clientY-b.current.y,F=!!N.current,R=["left","right"].includes(g.swipeDirection),z=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Y=R?z(0,k):0,W=R?0:z(0,A),Z=j.pointerType==="touch"?10:2,B={x:Y,y:W},X={originalEvent:j,delta:B};F?(N.current=B,rd(zC,m,X,{discrete:!1})):ux(B,g.swipeDirection,Z)?(N.current=B,rd(FC,u,X,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(k)>Z||Math.abs(A)>Z)&&(b.current=null)}),onPointerUp:De(e.onPointerUp,j=>{const k=N.current,A=j.target;if(A.hasPointerCapture(j.pointerId)&&A.releasePointerCapture(j.pointerId),N.current=null,b.current=null,k){const F=j.currentTarget,R={originalEvent:j,delta:k};ux(k,g.swipeDirection,g.swipeThreshold)?rd(UC,x,R,{discrete:!0}):rd(BC,f,R,{discrete:!0}),F.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),qC=e=>{const{__scopeToast:t,children:r,...n}=e,a=$u(Lu,t),[o,i]=h.useState(!1),[l,c]=h.useState(!1);return YC(()=>i(!0)),h.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(bc,{asChild:!0,children:s.jsx(wc,{...n,children:o&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},GC="ToastTitle",Sw=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Je.div,{...n,ref:t})});Sw.displayName=GC;var KC="ToastDescription",kw=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Je.div,{...n,ref:t})});kw.displayName=KC;var Cw="ToastAction",Ew=h.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(Pw,{altText:r,asChild:!0,children:s.jsx(Q0,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Cw}\`. Expected non-empty \`string\`.`),null)});Ew.displayName=Cw;var Tw="ToastClose",Q0=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=VC(Tw,r);return s.jsx(Pw,{asChild:!0,children:s.jsx(Je.button,{type:"button",...n,ref:t,onClick:De(e.onClick,a.onClose)})})});Q0.displayName=Tw;var Pw=h.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function Ow(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),QC(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const i=n.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Ow(n))}}),t}function rd(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?gw(a,o):a.dispatchEvent(o)}var ux=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),o=n>a;return t==="left"||t==="right"?o&&n>r:!o&&a>r};function YC(e=()=>{}){const t=en(e);Cr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function QC(e){return e.nodeType===e.ELEMENT_NODE}function JC(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function qh(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var XC=bw,Aw=jw,Dw=Nw,Mw=Sw,Rw=kw,Iw=Ew,$w=Q0;function Lw(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Lw(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Fw(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Lw(e))&&(n&&(n+=" "),n+=t);return n}const hx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,fx=Fw,jc=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return fx(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],m=o==null?void 0:o[d];if(u===null)return null;const f=hx(u)||hx(m);return a[d][f]}),l=r&&Object.entries(r).reduce((d,u)=>{let[m,f]=u;return f===void 0||(d[m]=f),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:f,...x}=u;return Object.entries(x).every(y=>{let[g,w]=y;return Array.isArray(w)?w.includes({...o,...l}[g]):{...o,...l}[g]===w})?[...d,m,f]:d},[]);return fx(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zw=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:i,...l},c)=>h.createElement("svg",{ref:c,...e4,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:zw("lucide",a),...l},[...i.map(([d,u])=>h.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(e,t)=>{const r=h.forwardRef(({className:n,...a},o)=>h.createElement(t4,{ref:o,iconNode:t,className:zw(`lucide-${ZC(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=we("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=we("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=we("ArrowUpZA",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=we("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=we("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=we("BookOpenCheck",[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=we("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=we("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=we("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=we("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=we("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=we("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=we("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=we("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=we("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=we("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=we("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=we("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=we("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=we("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=we("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=we("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=we("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=we("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=we("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=we("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=we("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=we("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=we("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=we("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=we("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=we("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=we("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=we("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=we("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=we("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=we("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=we("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=we("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=we("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=we("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=we("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=we("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=we("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=we("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=we("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=we("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=we("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=we("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=we("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eg="-",P4=e=>{const t=A4(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const l=i.split(eg);return l[0]===""&&l.length!==1&&l.shift(),Xw(l,t)||O4(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},Xw=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?Xw(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(eg);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},vx=/^\[(.+)\]$/,O4=e=>{if(vx.test(e)){const t=vx.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},A4=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return M4(Object.entries(e.classGroups),r).forEach(([o,i])=>{ym(i,n,o,t)}),n},ym=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:yx(t,a);o.classGroupId=r;return}if(typeof a=="function"){if(D4(a)){ym(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,i])=>{ym(i,yx(t,o),r,n)})})},yx=(e,t)=>{let r=e;return t.split(eg).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},D4=e=>e.isThemeGetter,M4=(e,t)=>t?e.map(([r,n])=>{const a=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[r,a]}):e,R4=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(o,i)=>{r.set(o,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return a(o,i),i},set(o,i){r.has(o)?r.set(o,i):a(o,i)}}},Zw="!",I4=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],o=t.length,i=l=>{const c=[];let d=0,u=0,m;for(let w=0;w<l.length;w++){let v=l[w];if(d===0){if(v===a&&(n||l.slice(w,w+o)===t)){c.push(l.slice(u,w)),u=w+o;continue}if(v==="/"){m=w;continue}}v==="["?d++:v==="]"&&d--}const f=c.length===0?l:l.substring(u),x=f.startsWith(Zw),y=x?f.substring(1):f,g=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:y,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},$4=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},L4=e=>({cache:R4(e.cacheSize),parseClassName:I4(e),...P4(e)}),F4=/\s+/,z4=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,o=[],i=e.trim().split(F4);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:x}=r(d);let y=!!x,g=n(y?f.substring(0,x):f);if(!g){if(!y){l=d+(l.length>0?" "+l:l);continue}if(g=n(f),!g){l=d+(l.length>0?" "+l:l);continue}y=!1}const w=$4(u).join(":"),v=m?w+Zw:w,p=v+g;if(o.includes(p))continue;o.push(p);const b=a(g,y);for(let N=0;N<b.length;++N){const S=b[N];o.push(v+S)}l=d+(l.length>0?" "+l:l)}return l};function B4(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=e1(t))&&(n&&(n+=" "),n+=r);return n}const e1=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=e1(e[n]))&&(r&&(r+=" "),r+=t);return r};function U4(e,...t){let r,n,a,o=i;function i(c){const d=t.reduce((u,m)=>m(u),e());return r=L4(d),n=r.cache.get,a=r.cache.set,o=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=z4(c,r);return a(c,u),u}return function(){return o(B4.apply(null,arguments))}}const Dt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},t1=/^\[(?:([a-z-]+):)?(.+)\]$/i,W4=/^\d+\/\d+$/,V4=new Set(["px","full","screen"]),H4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,q4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,G4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,K4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Y4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xs=e=>di(e)||V4.has(e)||W4.test(e),Vs=e=>Ui(e,"length",n5),di=e=>!!e&&!Number.isNaN(Number(e)),Kh=e=>Ui(e,"number",di),ll=e=>!!e&&Number.isInteger(Number(e)),Q4=e=>e.endsWith("%")&&di(e.slice(0,-1)),Qe=e=>t1.test(e),Hs=e=>H4.test(e),J4=new Set(["length","size","percentage"]),X4=e=>Ui(e,J4,r1),Z4=e=>Ui(e,"position",r1),e5=new Set(["image","url"]),t5=e=>Ui(e,e5,a5),r5=e=>Ui(e,"",s5),cl=()=>!0,Ui=(e,t,r)=>{const n=t1.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},n5=e=>q4.test(e)&&!G4.test(e),r1=()=>!1,s5=e=>K4.test(e),a5=e=>Y4.test(e),o5=()=>{const e=Dt("colors"),t=Dt("spacing"),r=Dt("blur"),n=Dt("brightness"),a=Dt("borderColor"),o=Dt("borderRadius"),i=Dt("borderSpacing"),l=Dt("borderWidth"),c=Dt("contrast"),d=Dt("grayscale"),u=Dt("hueRotate"),m=Dt("invert"),f=Dt("gap"),x=Dt("gradientColorStops"),y=Dt("gradientColorStopPositions"),g=Dt("inset"),w=Dt("margin"),v=Dt("opacity"),p=Dt("padding"),b=Dt("saturate"),N=Dt("scale"),S=Dt("sepia"),E=Dt("skew"),D=Dt("space"),I=Dt("translate"),ee=()=>["auto","contain","none"],J=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",Qe,t],_=()=>[Qe,t],O=()=>["",xs,Vs],j=()=>["auto",di,Qe],k=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",Qe],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[di,Qe];return{cacheSize:500,separator:":",theme:{colors:[cl],spacing:[xs,Vs],blur:["none","",Hs,Qe],brightness:W(),borderColor:[e],borderRadius:["none","","full",Hs,Qe],borderSpacing:_(),borderWidth:O(),contrast:W(),grayscale:z(),hueRotate:W(),invert:z(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[Q4,Vs],inset:T(),margin:T(),opacity:W(),padding:_(),saturate:W(),scale:W(),sepia:z(),skew:W(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",Qe]}],container:["container"],columns:[{columns:[Hs]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...k(),Qe]}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:ee()}],"overscroll-x":[{"overscroll-x":ee()}],"overscroll-y":[{"overscroll-y":ee()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ll,Qe]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qe]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",ll,Qe]}],"grid-cols":[{"grid-cols":[cl]}],"col-start-end":[{col:["auto",{span:["full",ll,Qe]},Qe]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[cl]}],"row-start-end":[{row:["auto",{span:[ll,Qe]},Qe]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qe,t]}],"min-w":[{"min-w":[Qe,t,"min","max","fit"]}],"max-w":[{"max-w":[Qe,t,"none","full","min","max","fit","prose",{screen:[Hs]},Hs]}],h:[{h:[Qe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Hs,Vs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Kh]}],"font-family":[{font:[cl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qe]}],"line-clamp":[{"line-clamp":["none",di,Kh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xs,Qe]}],"list-image":[{"list-image":["none",Qe]}],"list-style-type":[{list:["none","disc","decimal",Qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xs,Vs]}],"underline-offset":[{"underline-offset":["auto",xs,Qe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...k(),Z4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",X4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},t5]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:A()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[xs,Qe]}],"outline-w":[{outline:[xs,Vs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[xs,Vs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Hs,r5]}],"shadow-color":[{shadow:[cl]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Hs,Qe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qe]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Qe]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[ll,Qe]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[xs,Vs,Kh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},i5=U4(o5);function Se(...e){return i5(Fw(e))}const l5=XC,n1=h.forwardRef(({className:e,...t},r)=>s.jsx(Aw,{ref:r,className:Se("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));n1.displayName=Aw.displayName;const c5=jc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),s1=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(Dw,{ref:n,className:Se(c5({variant:t}),e),...r}));s1.displayName=Dw.displayName;const d5=h.forwardRef(({className:e,...t},r)=>s.jsx(Iw,{ref:r,className:Se("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));d5.displayName=Iw.displayName;const a1=h.forwardRef(({className:e,...t},r)=>s.jsx($w,{ref:r,className:Se("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(vo,{className:"h-4 w-4"})}));a1.displayName=$w.displayName;const o1=h.forwardRef(({className:e,...t},r)=>s.jsx(Mw,{ref:r,className:Se("text-sm font-semibold",e),...t}));o1.displayName=Mw.displayName;const i1=h.forwardRef(({className:e,...t},r)=>s.jsx(Rw,{ref:r,className:Se("text-sm opacity-90",e),...t}));i1.displayName=Rw.displayName;function u5(){const{toasts:e}=Tn();return s.jsxs(l5,{children:[e.map(function({id:t,title:r,description:n,action:a,...o}){return s.jsxs(s1,{...o,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(o1,{children:r}),n&&s.jsx(i1,{children:n})]}),a,s.jsx(a1,{})]},t)}),s.jsx(n1,{})]})}var bx=["light","dark"],h5="(prefers-color-scheme: dark)",f5=h.createContext(void 0),m5={setTheme:e=>{},themes:[]},g5=()=>{var e;return(e=h.useContext(f5))!=null?e:m5};h.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:o,value:i,attrs:l,nonce:c})=>{let d=o==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,m=a?bx.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(y,g=!1,w=!0)=>{let v=i?i[y]:y,p=g?y+"|| ''":`'${v}'`,b="";return a&&w&&!g&&bx.includes(y)&&(b+=`d.style.colorScheme = '${y}';`),r==="class"?g||v?b+=`c.add(${p})`:b+="null":v&&(b+=`d[s](n,${p})`),b},x=e?`!function(){${u}${f(e)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${h5}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}${d?"":"else{"+f(o,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}else{${f(o,!1,!1)};}${m}}catch(t){}}();`;return h.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:x}})});var p5=e=>{switch(e){case"success":return y5;case"info":return w5;case"warning":return b5;case"error":return j5;default:return null}},x5=Array(12).fill(0),v5=({visible:e})=>he.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},he.createElement("div",{className:"sonner-spinner"},x5.map((t,r)=>he.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),y5=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),b5=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),w5=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),j5=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_5=()=>{let[e,t]=he.useState(document.hidden);return he.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},bm=1,N5=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:bm++,o=this.toasts.find(l=>l.id===a),i=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:i,title:r}):l):this.addToast({title:r,...n,dismissible:i,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0;return n.then(async o=>{if(k5(o)&&!o.ok){a=!1;let i=typeof t.error=="function"?await t.error(`HTTP error! status: ${o.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${o.status}`):t.description;this.create({id:r,type:"error",message:i,description:l})}else if(t.success!==void 0){a=!1;let i=typeof t.success=="function"?await t.success(o):t.success,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:r,type:"success",message:i,description:l})}}).catch(async o=>{if(t.error!==void 0){a=!1;let i=typeof t.error=="function"?await t.error(o):t.error,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:r,type:"error",message:i,description:l})}}).finally(()=>{var o;a&&(this.dismiss(r),r=void 0),(o=t.finally)==null||o.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||bm++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},ln=new N5,S5=(e,t)=>{let r=(t==null?void 0:t.id)||bm++;return ln.addToast({title:e,...t,id:r}),r},k5=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",C5=S5,E5=()=>ln.toasts;Object.assign(C5,{success:ln.success,info:ln.info,warning:ln.warning,error:ln.error,custom:ln.custom,message:ln.message,promise:ln.promise,dismiss:ln.dismiss,loading:ln.loading},{getHistory:E5});function T5(e,{insertAt:t}={}){if(!e||typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}T5(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function nd(e){return e.label!==void 0}var P5=3,O5="32px",A5=4e3,D5=356,M5=14,R5=20,I5=200;function $5(...e){return e.filter(Boolean).join(" ")}var L5=e=>{var t,r,n,a,o,i,l,c,d,u;let{invert:m,toast:f,unstyled:x,interacting:y,setHeights:g,visibleToasts:w,heights:v,index:p,toasts:b,expanded:N,removeToast:S,defaultRichColors:E,closeButton:D,style:I,cancelButtonStyle:ee,actionButtonStyle:J,className:T="",descriptionClassName:_="",duration:O,position:j,gap:k,loadingIcon:A,expandByDefault:F,classNames:R,icons:z,closeButtonAriaLabel:Y="Close toast",pauseWhenPageIsHidden:W,cn:Z}=e,[B,X]=he.useState(!1),[K,ae]=he.useState(!1),[te,me]=he.useState(!1),[je,V]=he.useState(!1),[Q,ie]=he.useState(0),[ne,le]=he.useState(0),Pe=he.useRef(null),He=he.useRef(null),qe=p===0,Ot=p+1<=w,q=f.type,_e=f.dismissible!==!1,Le=f.className||"",Ge=f.descriptionClassName||"",$t=he.useMemo(()=>v.findIndex(be=>be.toastId===f.id)||0,[v,f.id]),Kt=he.useMemo(()=>{var be;return(be=f.closeButton)!=null?be:D},[f.closeButton,D]),Ct=he.useMemo(()=>f.duration||O||A5,[f.duration,O]),Qt=he.useRef(0),xt=he.useRef(0),_t=he.useRef(0),Xe=he.useRef(null),[zt,Xt]=j.split("-"),M=he.useMemo(()=>v.reduce((be,Oe,Re)=>Re>=$t?be:be+Oe.height,0),[v,$t]),G=_5(),ge=f.invert||m,Me=q==="loading";xt.current=he.useMemo(()=>$t*k+M,[$t,M]),he.useEffect(()=>{X(!0)},[]),he.useLayoutEffect(()=>{if(!B)return;let be=He.current,Oe=be.style.height;be.style.height="auto";let Re=be.getBoundingClientRect().height;be.style.height=Oe,le(Re),g(ht=>ht.find(ft=>ft.toastId===f.id)?ht.map(ft=>ft.toastId===f.id?{...ft,height:Re}:ft):[{toastId:f.id,height:Re,position:f.position},...ht])},[B,f.title,f.description,g,f.id]);let Ve=he.useCallback(()=>{ae(!0),ie(xt.current),g(be=>be.filter(Oe=>Oe.toastId!==f.id)),setTimeout(()=>{S(f)},I5)},[f,S,g,xt]);he.useEffect(()=>{if(f.promise&&q==="loading"||f.duration===1/0||f.type==="loading")return;let be,Oe=Ct;return N||y||W&&G?(()=>{if(_t.current<Qt.current){let Re=new Date().getTime()-Qt.current;Oe=Oe-Re}_t.current=new Date().getTime()})():Oe!==1/0&&(Qt.current=new Date().getTime(),be=setTimeout(()=>{var Re;(Re=f.onAutoClose)==null||Re.call(f,f),Ve()},Oe)),()=>clearTimeout(be)},[N,y,F,f,Ct,Ve,f.promise,q,W,G]),he.useEffect(()=>{let be=He.current;if(be){let Oe=be.getBoundingClientRect().height;return le(Oe),g(Re=>[{toastId:f.id,height:Oe,position:f.position},...Re]),()=>g(Re=>Re.filter(ht=>ht.toastId!==f.id))}},[g,f.id]),he.useEffect(()=>{f.delete&&Ve()},[Ve,f.delete]);function Ie(){return z!=null&&z.loading?he.createElement("div",{className:"sonner-loader","data-visible":q==="loading"},z.loading):A?he.createElement("div",{className:"sonner-loader","data-visible":q==="loading"},A):he.createElement(v5,{visible:q==="loading"})}return he.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:He,className:Z(T,Le,R==null?void 0:R.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,R==null?void 0:R.default,R==null?void 0:R[q],(r=f==null?void 0:f.classNames)==null?void 0:r[q]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:E,"data-styled":!(f.jsx||f.unstyled||x),"data-mounted":B,"data-promise":!!f.promise,"data-removed":K,"data-visible":Ot,"data-y-position":zt,"data-x-position":Xt,"data-index":p,"data-front":qe,"data-swiping":te,"data-dismissible":_e,"data-type":q,"data-invert":ge,"data-swipe-out":je,"data-expanded":!!(N||F&&B),style:{"--index":p,"--toasts-before":p,"--z-index":b.length-p,"--offset":`${K?Q:xt.current}px`,"--initial-height":F?"auto":`${ne}px`,...I,...f.style},onPointerDown:be=>{Me||!_e||(Pe.current=new Date,ie(xt.current),be.target.setPointerCapture(be.pointerId),be.target.tagName!=="BUTTON"&&(me(!0),Xe.current={x:be.clientX,y:be.clientY}))},onPointerUp:()=>{var be,Oe,Re,ht;if(je||!_e)return;Xe.current=null;let ft=Number(((be=He.current)==null?void 0:be.style.getPropertyValue("--swipe-amount").replace("px",""))||0),re=new Date().getTime()-((Oe=Pe.current)==null?void 0:Oe.getTime()),Ee=Math.abs(ft)/re;if(Math.abs(ft)>=R5||Ee>.11){ie(xt.current),(Re=f.onDismiss)==null||Re.call(f,f),Ve(),V(!0);return}(ht=He.current)==null||ht.style.setProperty("--swipe-amount","0px"),me(!1)},onPointerMove:be=>{var Oe;if(!Xe.current||!_e)return;let Re=be.clientY-Xe.current.y,ht=be.clientX-Xe.current.x,ft=(zt==="top"?Math.min:Math.max)(0,Re),re=be.pointerType==="touch"?10:2;Math.abs(ft)>re?(Oe=He.current)==null||Oe.style.setProperty("--swipe-amount",`${Re}px`):Math.abs(ht)>re&&(Xe.current=null)}},Kt&&!f.jsx?he.createElement("button",{"aria-label":Y,"data-disabled":Me,"data-close-button":!0,onClick:Me||!_e?()=>{}:()=>{var be;Ve(),(be=f.onDismiss)==null||be.call(f,f)},className:Z(R==null?void 0:R.closeButton,(a=f==null?void 0:f.classNames)==null?void 0:a.closeButton)},he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},he.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),he.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||he.isValidElement(f.title)?f.jsx||f.title:he.createElement(he.Fragment,null,q||f.icon||f.promise?he.createElement("div",{"data-icon":"",className:Z(R==null?void 0:R.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Ie():null,f.type!=="loading"?f.icon||(z==null?void 0:z[q])||p5(q):null):null,he.createElement("div",{"data-content":"",className:Z(R==null?void 0:R.content,(i=f==null?void 0:f.classNames)==null?void 0:i.content)},he.createElement("div",{"data-title":"",className:Z(R==null?void 0:R.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},f.title),f.description?he.createElement("div",{"data-description":"",className:Z(_,Ge,R==null?void 0:R.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},f.description):null),he.isValidElement(f.cancel)?f.cancel:f.cancel&&nd(f.cancel)?he.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||ee,onClick:be=>{var Oe,Re;nd(f.cancel)&&_e&&((Re=(Oe=f.cancel).onClick)==null||Re.call(Oe,be),Ve())},className:Z(R==null?void 0:R.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,he.isValidElement(f.action)?f.action:f.action&&nd(f.action)?he.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||J,onClick:be=>{var Oe,Re;nd(f.action)&&(be.defaultPrevented||((Re=(Oe=f.action).onClick)==null||Re.call(Oe,be),Ve()))},className:Z(R==null?void 0:R.actionButton,(u=f==null?void 0:f.classNames)==null?void 0:u.actionButton)},f.action.label):null))};function wx(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var F5=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:a,closeButton:o,className:i,offset:l,theme:c="light",richColors:d,duration:u,style:m,visibleToasts:f=P5,toastOptions:x,dir:y=wx(),gap:g=M5,loadingIcon:w,icons:v,containerAriaLabel:p="Notifications",pauseWhenPageIsHidden:b,cn:N=$5}=e,[S,E]=he.useState([]),D=he.useMemo(()=>Array.from(new Set([r].concat(S.filter(W=>W.position).map(W=>W.position)))),[S,r]),[I,ee]=he.useState([]),[J,T]=he.useState(!1),[_,O]=he.useState(!1),[j,k]=he.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),A=he.useRef(null),F=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=he.useRef(null),z=he.useRef(!1),Y=he.useCallback(W=>{var Z;(Z=S.find(B=>B.id===W.id))!=null&&Z.delete||ln.dismiss(W.id),E(B=>B.filter(({id:X})=>X!==W.id))},[S]);return he.useEffect(()=>ln.subscribe(W=>{if(W.dismiss){E(Z=>Z.map(B=>B.id===W.id?{...B,delete:!0}:B));return}setTimeout(()=>{iw.flushSync(()=>{E(Z=>{let B=Z.findIndex(X=>X.id===W.id);return B!==-1?[...Z.slice(0,B),{...Z[B],...W},...Z.slice(B+1)]:[W,...Z]})})})}),[]),he.useEffect(()=>{if(c!=="system"){k(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?k("dark"):k("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:W})=>{k(W?"dark":"light")})},[c]),he.useEffect(()=>{S.length<=1&&T(!1)},[S]),he.useEffect(()=>{let W=Z=>{var B,X;n.every(K=>Z[K]||Z.code===K)&&(T(!0),(B=A.current)==null||B.focus()),Z.code==="Escape"&&(document.activeElement===A.current||(X=A.current)!=null&&X.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[n]),he.useEffect(()=>{if(A.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,z.current=!1)}},[A.current]),S.length?he.createElement("section",{"aria-label":`${p} ${F}`,tabIndex:-1},D.map((W,Z)=>{var B;let[X,K]=W.split("-");return he.createElement("ol",{key:W,dir:y==="auto"?wx():y,tabIndex:-1,ref:A,className:i,"data-sonner-toaster":!0,"data-theme":j,"data-y-position":X,"data-x-position":K,style:{"--front-toast-height":`${((B=I[0])==null?void 0:B.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||O5,"--width":`${D5}px`,"--gap":`${g}px`,...m},onBlur:ae=>{z.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(z.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||z.current||(z.current=!0,R.current=ae.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{_||T(!1)},onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},S.filter(ae=>!ae.position&&Z===0||ae.position===W).map((ae,te)=>{var me,je;return he.createElement(L5,{key:ae.id,icons:v,index:te,toast:ae,defaultRichColors:d,duration:(me=x==null?void 0:x.duration)!=null?me:u,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:t,visibleToasts:f,closeButton:(je=x==null?void 0:x.closeButton)!=null?je:o,interacting:_,position:W,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:Y,toasts:S.filter(V=>V.position==ae.position),heights:I.filter(V=>V.position==ae.position),setHeights:ee,expandByDefault:a,gap:g,loadingIcon:w,expanded:J,pauseWhenPageIsHidden:b,cn:N})}))})):null};const z5=({...e})=>{const{theme:t="system"}=g5();return s.jsx(F5,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var B5=sy["useId".toString()]||(()=>{}),U5=0;function Es(e){const[t,r]=h.useState(B5());return Cr(()=>{e||r(n=>n??String(U5++))},[e]),e||(t?`radix-${t}`:"")}const W5=["top","right","bottom","left"],Sa=Math.min,dn=Math.max,du=Math.round,sd=Math.floor,ka=e=>({x:e,y:e}),V5={left:"right",right:"left",bottom:"top",top:"bottom"},H5={start:"end",end:"start"};function wm(e,t,r){return dn(e,Sa(t,r))}function $s(e,t){return typeof e=="function"?e(t):e}function Ls(e){return e.split("-")[0]}function Wi(e){return e.split("-")[1]}function tg(e){return e==="x"?"y":"x"}function rg(e){return e==="y"?"height":"width"}function Ca(e){return["top","bottom"].includes(Ls(e))?"y":"x"}function ng(e){return tg(Ca(e))}function q5(e,t,r){r===void 0&&(r=!1);const n=Wi(e),a=ng(e),o=rg(a);let i=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=uu(i)),[i,uu(i)]}function G5(e){const t=uu(e);return[jm(e),t,jm(t)]}function jm(e){return e.replace(/start|end/g,t=>H5[t])}function K5(e,t,r){const n=["left","right"],a=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?o:i;default:return[]}}function Y5(e,t,r,n){const a=Wi(e);let o=K5(Ls(e),r==="start",n);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(jm)))),o}function uu(e){return e.replace(/left|right|bottom|top/g,t=>V5[t])}function Q5(e){return{top:0,right:0,bottom:0,left:0,...e}}function l1(e){return typeof e!="number"?Q5(e):{top:e,right:e,bottom:e,left:e}}function hu(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function jx(e,t,r){let{reference:n,floating:a}=e;const o=Ca(t),i=ng(t),l=rg(i),c=Ls(t),d=o==="y",u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,f=n[l]/2-a[l]/2;let x;switch(c){case"top":x={x:u,y:n.y-a.height};break;case"bottom":x={x:u,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:m};break;case"left":x={x:n.x-a.width,y:m};break;default:x={x:n.x,y:n.y}}switch(Wi(t)){case"start":x[i]-=f*(r&&d?-1:1);break;case"end":x[i]+=f*(r&&d?-1:1);break}return x}const J5=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:m}=jx(d,n,c),f=n,x={},y=0;for(let g=0;g<l.length;g++){const{name:w,fn:v}=l[g],{x:p,y:b,data:N,reset:S}=await v({x:u,y:m,initialPlacement:n,placement:f,strategy:a,middlewareData:x,rects:d,platform:i,elements:{reference:e,floating:t}});u=p??u,m=b??m,x={...x,[w]:{...x[w],...N}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(d=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:u,y:m}=jx(d,f,c)),g=-1)}return{x:u,y:m,placement:f,strategy:a,middlewareData:x}};async function nc(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:f=!1,padding:x=0}=$s(t,e),y=l1(x),w=l[f?m==="floating"?"reference":"floating":m],v=hu(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(w)))==null||r?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),p=m==="floating"?{x:n,y:a,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),N=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},S=hu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:p,offsetParent:b,strategy:c}):p);return{top:(v.top-S.top+y.top)/N.y,bottom:(S.bottom-v.bottom+y.bottom)/N.y,left:(v.left-S.left+y.left)/N.x,right:(S.right-v.right+y.right)/N.x}}const X5=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=$s(e,t)||{};if(d==null)return{};const m=l1(u),f={x:r,y:n},x=ng(a),y=rg(x),g=await i.getDimensions(d),w=x==="y",v=w?"top":"left",p=w?"bottom":"right",b=w?"clientHeight":"clientWidth",N=o.reference[y]+o.reference[x]-f[x]-o.floating[y],S=f[x]-o.reference[x],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let D=E?E[b]:0;(!D||!await(i.isElement==null?void 0:i.isElement(E)))&&(D=l.floating[b]||o.floating[y]);const I=N/2-S/2,ee=D/2-g[y]/2-1,J=Sa(m[v],ee),T=Sa(m[p],ee),_=J,O=D-g[y]-T,j=D/2-g[y]/2+I,k=wm(_,j,O),A=!c.arrow&&Wi(a)!=null&&j!==k&&o.reference[y]/2-(j<_?J:T)-g[y]/2<0,F=A?j<_?j-_:j-O:0;return{[x]:f[x]+F,data:{[x]:k,centerOffset:j-k-F,...A&&{alignmentOffset:F}},reset:A}}}),Z5=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:f,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...w}=$s(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const v=Ls(a),p=Ca(l),b=Ls(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=f||(b||!g?[uu(l)]:G5(l)),E=y!=="none";!f&&E&&S.push(...Y5(l,g,y,N));const D=[l,...S],I=await nc(t,w),ee=[];let J=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&ee.push(I[v]),m){const j=q5(a,i,N);ee.push(I[j[0]],I[j[1]])}if(J=[...J,{placement:a,overflows:ee}],!ee.every(j=>j<=0)){var T,_;const j=(((T=o.flip)==null?void 0:T.index)||0)+1,k=D[j];if(k)return{data:{index:j,overflows:J},reset:{placement:k}};let A=(_=J.filter(F=>F.overflows[0]<=0).sort((F,R)=>F.overflows[1]-R.overflows[1])[0])==null?void 0:_.placement;if(!A)switch(x){case"bestFit":{var O;const F=(O=J.filter(R=>{if(E){const z=Ca(R.placement);return z===p||z==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(z=>z>0).reduce((z,Y)=>z+Y,0)]).sort((R,z)=>R[1]-z[1])[0])==null?void 0:O[0];F&&(A=F);break}case"initialPlacement":A=l;break}if(a!==A)return{reset:{placement:A}}}return{}}}};function _x(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Nx(e){return W5.some(t=>e[t]>=0)}const e3=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=$s(e,t);switch(n){case"referenceHidden":{const o=await nc(t,{...a,elementContext:"reference"}),i=_x(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Nx(i)}}}case"escaped":{const o=await nc(t,{...a,altBoundary:!0}),i=_x(o,r.floating);return{data:{escapedOffsets:i,escaped:Nx(i)}}}default:return{}}}}};async function t3(e,t){const{placement:r,platform:n,elements:a}=e,o=await(n.isRTL==null?void 0:n.isRTL(a.floating)),i=Ls(r),l=Wi(r),c=Ca(r)==="y",d=["left","top"].includes(i)?-1:1,u=o&&c?-1:1,m=$s(t,e);let{mainAxis:f,crossAxis:x,alignmentAxis:y}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof y=="number"&&(x=l==="end"?y*-1:y),c?{x:x*u,y:f*d}:{x:f*d,y:x*u}}const r3=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:o,placement:i,middlewareData:l}=t,c=await t3(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},n3=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x:v,y:p}=w;return{x:v,y:p}}},...c}=$s(e,t),d={x:r,y:n},u=await nc(t,c),m=Ca(Ls(a)),f=tg(m);let x=d[f],y=d[m];if(o){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",p=x+u[w],b=x-u[v];x=wm(p,x,b)}if(i){const w=m==="y"?"top":"left",v=m==="y"?"bottom":"right",p=y+u[w],b=y-u[v];y=wm(p,y,b)}const g=l.fn({...t,[f]:x,[m]:y});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:o,[m]:i}}}}}},s3=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=$s(e,t),u={x:r,y:n},m=Ca(a),f=tg(m);let x=u[f],y=u[m];const g=$s(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=f==="y"?"height":"width",N=o.reference[f]-o.floating[b]+w.mainAxis,S=o.reference[f]+o.reference[b]-w.mainAxis;x<N?x=N:x>S&&(x=S)}if(d){var v,p;const b=f==="y"?"width":"height",N=["top","left"].includes(Ls(a)),S=o.reference[m]-o.floating[b]+(N&&((v=i.offset)==null?void 0:v[m])||0)+(N?0:w.crossAxis),E=o.reference[m]+o.reference[b]+(N?0:((p=i.offset)==null?void 0:p[m])||0)-(N?w.crossAxis:0);y<S?y=S:y>E&&(y=E)}return{[f]:x,[m]:y}}}},a3=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=$s(e,t),u=await nc(t,d),m=Ls(a),f=Wi(a),x=Ca(a)==="y",{width:y,height:g}=o.floating;let w,v;m==="top"||m==="bottom"?(w=m,v=f===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(v=m,w=f==="end"?"top":"bottom");const p=g-u.top-u.bottom,b=y-u.left-u.right,N=Sa(g-u[w],p),S=Sa(y-u[v],b),E=!t.middlewareData.shift;let D=N,I=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(I=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(D=p),E&&!f){const J=dn(u.left,0),T=dn(u.right,0),_=dn(u.top,0),O=dn(u.bottom,0);x?I=y-2*(J!==0||T!==0?J+T:dn(u.left,u.right)):D=g-2*(_!==0||O!==0?_+O:dn(u.top,u.bottom))}await c({...t,availableWidth:I,availableHeight:D});const ee=await i.getDimensions(l.floating);return y!==ee.width||g!==ee.height?{reset:{rects:!0}}:{}}}};function Bu(){return typeof window<"u"}function Vi(e){return c1(e)?(e.nodeName||"").toLowerCase():"#document"}function fn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ms(e){var t;return(t=(c1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function c1(e){return Bu()?e instanceof Node||e instanceof fn(e).Node:!1}function qn(e){return Bu()?e instanceof Element||e instanceof fn(e).Element:!1}function hs(e){return Bu()?e instanceof HTMLElement||e instanceof fn(e).HTMLElement:!1}function Sx(e){return!Bu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof fn(e).ShadowRoot}function _c(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Gn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function o3(e){return["table","td","th"].includes(Vi(e))}function Uu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function sg(e){const t=ag(),r=qn(e)?Gn(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function i3(e){let t=Ea(e);for(;hs(t)&&!Di(t);){if(sg(t))return t;if(Uu(t))return null;t=Ea(t)}return null}function ag(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Di(e){return["html","body","#document"].includes(Vi(e))}function Gn(e){return fn(e).getComputedStyle(e)}function Wu(e){return qn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ea(e){if(Vi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Sx(e)&&e.host||ms(e);return Sx(t)?t.host:t}function d1(e){const t=Ea(e);return Di(t)?e.ownerDocument?e.ownerDocument.body:e.body:hs(t)&&_c(t)?t:d1(t)}function sc(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=d1(e),o=a===((n=e.ownerDocument)==null?void 0:n.body),i=fn(a);if(o){const l=_m(i);return t.concat(i,i.visualViewport||[],_c(a)?a:[],l&&r?sc(l):[])}return t.concat(a,sc(a,[],r))}function _m(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function u1(e){const t=Gn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=hs(e),o=a?e.offsetWidth:r,i=a?e.offsetHeight:n,l=du(r)!==o||du(n)!==i;return l&&(r=o,n=i),{width:r,height:n,$:l}}function og(e){return qn(e)?e:e.contextElement}function ui(e){const t=og(e);if(!hs(t))return ka(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:o}=u1(t);let i=(o?du(r.width):r.width)/n,l=(o?du(r.height):r.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const l3=ka(0);function h1(e){const t=fn(e);return!ag()||!t.visualViewport?l3:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function c3(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==fn(e)?!1:t}function yo(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),o=og(e);let i=ka(1);t&&(n?qn(n)&&(i=ui(n)):i=ui(e));const l=c3(o,r,n)?h1(o):ka(0);let c=(a.left+l.x)/i.x,d=(a.top+l.y)/i.y,u=a.width/i.x,m=a.height/i.y;if(o){const f=fn(o),x=n&&qn(n)?fn(n):n;let y=f,g=_m(y);for(;g&&n&&x!==y;){const w=ui(g),v=g.getBoundingClientRect(),p=Gn(g),b=v.left+(g.clientLeft+parseFloat(p.paddingLeft))*w.x,N=v.top+(g.clientTop+parseFloat(p.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,m*=w.y,c+=b,d+=N,y=fn(g),g=_m(y)}}return hu({width:u,height:m,x:c,y:d})}function d3(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const o=a==="fixed",i=ms(n),l=t?Uu(t.floating):!1;if(n===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},d=ka(1);const u=ka(0),m=hs(n);if((m||!m&&!o)&&((Vi(n)!=="body"||_c(i))&&(c=Wu(n)),hs(n))){const f=yo(n);d=ui(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x,y:r.y*d.y-c.scrollTop*d.y+u.y}}function u3(e){return Array.from(e.getClientRects())}function Nm(e,t){const r=Wu(e).scrollLeft;return t?t.left+r:yo(ms(e)).left+r}function h3(e){const t=ms(e),r=Wu(e),n=e.ownerDocument.body,a=dn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=dn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Nm(e);const l=-r.scrollTop;return Gn(n).direction==="rtl"&&(i+=dn(t.clientWidth,n.clientWidth)-a),{width:a,height:o,x:i,y:l}}function f3(e,t){const r=fn(e),n=ms(e),a=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const d=ag();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:l,y:c}}function m3(e,t){const r=yo(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,o=hs(e)?ui(e):ka(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=a*o.x,d=n*o.y;return{width:i,height:l,x:c,y:d}}function kx(e,t,r){let n;if(t==="viewport")n=f3(e,r);else if(t==="document")n=h3(ms(e));else if(qn(t))n=m3(t,r);else{const a=h1(e);n={...t,x:t.x-a.x,y:t.y-a.y}}return hu(n)}function f1(e,t){const r=Ea(e);return r===t||!qn(r)||Di(r)?!1:Gn(r).position==="fixed"||f1(r,t)}function g3(e,t){const r=t.get(e);if(r)return r;let n=sc(e,[],!1).filter(l=>qn(l)&&Vi(l)!=="body"),a=null;const o=Gn(e).position==="fixed";let i=o?Ea(e):e;for(;qn(i)&&!Di(i);){const l=Gn(i),c=sg(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||_c(i)&&!c&&f1(e,i))?n=n.filter(u=>u!==i):a=l,i=Ea(i)}return t.set(e,n),n}function p3(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const i=[...r==="clippingAncestors"?Uu(t)?[]:g3(t,this._c):[].concat(r),n],l=i[0],c=i.reduce((d,u)=>{const m=kx(t,u,a);return d.top=dn(m.top,d.top),d.right=Sa(m.right,d.right),d.bottom=Sa(m.bottom,d.bottom),d.left=dn(m.left,d.left),d},kx(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function x3(e){const{width:t,height:r}=u1(e);return{width:t,height:r}}function v3(e,t,r){const n=hs(t),a=ms(t),o=r==="fixed",i=yo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=ka(0);if(n||!n&&!o)if((Vi(t)!=="body"||_c(a))&&(l=Wu(t)),n){const x=yo(t,!0,o,t);c.x=x.x+t.clientLeft,c.y=x.y+t.clientTop}else a&&(c.x=Nm(a));let d=0,u=0;if(a&&!n&&!o){const x=a.getBoundingClientRect();u=x.top+l.scrollTop,d=x.left+l.scrollLeft-Nm(a,x)}const m=i.left+l.scrollLeft-c.x-d,f=i.top+l.scrollTop-c.y-u;return{x:m,y:f,width:i.width,height:i.height}}function Yh(e){return Gn(e).position==="static"}function Cx(e,t){if(!hs(e)||Gn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ms(e)===r&&(r=r.ownerDocument.body),r}function m1(e,t){const r=fn(e);if(Uu(e))return r;if(!hs(e)){let a=Ea(e);for(;a&&!Di(a);){if(qn(a)&&!Yh(a))return a;a=Ea(a)}return r}let n=Cx(e,t);for(;n&&o3(n)&&Yh(n);)n=Cx(n,t);return n&&Di(n)&&Yh(n)&&!sg(n)?r:n||i3(e)||r}const y3=async function(e){const t=this.getOffsetParent||m1,r=this.getDimensions,n=await r(e.floating);return{reference:v3(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function b3(e){return Gn(e).direction==="rtl"}const w3={convertOffsetParentRelativeRectToViewportRelativeRect:d3,getDocumentElement:ms,getClippingRect:p3,getOffsetParent:m1,getElementRects:y3,getClientRects:u3,getDimensions:x3,getScale:ui,isElement:qn,isRTL:b3};function j3(e,t){let r=null,n;const a=ms(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const{left:d,top:u,width:m,height:f}=e.getBoundingClientRect();if(l||t(),!m||!f)return;const x=sd(u),y=sd(a.clientWidth-(d+m)),g=sd(a.clientHeight-(u+f)),w=sd(d),p={rootMargin:-x+"px "+-y+"px "+-g+"px "+-w+"px",threshold:dn(0,Sa(1,c))||1};let b=!0;function N(S){const E=S[0].intersectionRatio;if(E!==c){if(!b)return i();E?i(!1,E):n=setTimeout(()=>{i(!1,1e-7)},1e3)}b=!1}try{r=new IntersectionObserver(N,{...p,root:a.ownerDocument})}catch{r=new IntersectionObserver(N,p)}r.observe(e)}return i(!0),o}function _3(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=og(e),u=a||o?[...d?sc(d):[],...sc(t)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),o&&v.addEventListener("resize",r)});const m=d&&l?j3(d,r):null;let f=-1,x=null;i&&(x=new ResizeObserver(v=>{let[p]=v;p&&p.target===d&&x&&(x.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=x)==null||b.observe(t)})),r()}),d&&!c&&x.observe(d),x.observe(t));let y,g=c?yo(e):null;c&&w();function w(){const v=yo(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&r(),g=v,y=requestAnimationFrame(w)}return r(),()=>{var v;u.forEach(p=>{a&&p.removeEventListener("scroll",r),o&&p.removeEventListener("resize",r)}),m==null||m(),(v=x)==null||v.disconnect(),x=null,c&&cancelAnimationFrame(y)}}const N3=r3,S3=n3,k3=Z5,C3=a3,E3=e3,Ex=X5,T3=s3,P3=(e,t,r)=>{const n=new Map,a={platform:w3,...r},o={...a.platform,_c:n};return J5(e,t,{...a,platform:o})};var Rd=typeof document<"u"?h.useLayoutEffect:h.useEffect;function fu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!fu(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const o=a[n];if(!(o==="_owner"&&e.$$typeof)&&!fu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function g1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Tx(e,t){const r=g1(e);return Math.round(t*r)/r}function Qh(e){const t=h.useRef(e);return Rd(()=>{t.current=e}),t}function O3(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,m]=h.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,x]=h.useState(n);fu(f,n)||x(n);const[y,g]=h.useState(null),[w,v]=h.useState(null),p=h.useCallback(R=>{R!==E.current&&(E.current=R,g(R))},[]),b=h.useCallback(R=>{R!==D.current&&(D.current=R,v(R))},[]),N=o||y,S=i||w,E=h.useRef(null),D=h.useRef(null),I=h.useRef(u),ee=c!=null,J=Qh(c),T=Qh(a),_=Qh(d),O=h.useCallback(()=>{if(!E.current||!D.current)return;const R={placement:t,strategy:r,middleware:f};T.current&&(R.platform=T.current),P3(E.current,D.current,R).then(z=>{const Y={...z,isPositioned:_.current!==!1};j.current&&!fu(I.current,Y)&&(I.current=Y,No.flushSync(()=>{m(Y)}))})},[f,t,r,T,_]);Rd(()=>{d===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,m(R=>({...R,isPositioned:!1})))},[d]);const j=h.useRef(!1);Rd(()=>(j.current=!0,()=>{j.current=!1}),[]),Rd(()=>{if(N&&(E.current=N),S&&(D.current=S),N&&S){if(J.current)return J.current(N,S,O);O()}},[N,S,O,J,ee]);const k=h.useMemo(()=>({reference:E,floating:D,setReference:p,setFloating:b}),[p,b]),A=h.useMemo(()=>({reference:N,floating:S}),[N,S]),F=h.useMemo(()=>{const R={position:r,left:0,top:0};if(!A.floating)return R;const z=Tx(A.floating,u.x),Y=Tx(A.floating,u.y);return l?{...R,transform:"translate("+z+"px, "+Y+"px)",...g1(A.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:z,top:Y}},[r,l,A.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:O,refs:k,elements:A,floatingStyles:F}),[u,O,k,A,F])}const A3=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Ex({element:n.current,padding:a}).fn(r):{}:n?Ex({element:n,padding:a}).fn(r):{}}}},D3=(e,t)=>({...N3(e),options:[e,t]}),M3=(e,t)=>({...S3(e),options:[e,t]}),R3=(e,t)=>({...T3(e),options:[e,t]}),I3=(e,t)=>({...k3(e),options:[e,t]}),$3=(e,t)=>({...C3(e),options:[e,t]}),L3=(e,t)=>({...E3(e),options:[e,t]}),F3=(e,t)=>({...A3(e),options:[e,t]});var z3="Arrow",p1=h.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...o}=e;return s.jsx(Je.svg,{...o,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});p1.displayName=z3;var B3=p1;function U3(e,t=[]){let r=[];function n(o,i){const l=h.createContext(i),c=r.length;r=[...r,i];function d(m){const{scope:f,children:x,...y}=m,g=(f==null?void 0:f[e][c])||l,w=h.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:w,children:x})}function u(m,f){const x=(f==null?void 0:f[e][c])||l,y=h.useContext(x);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=r.map(i=>h.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,W3(a,...t)]}function W3(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function V3(e){const[t,r]=h.useState(void 0);return Cr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var ig="Popper",[x1,Hi]=U3(ig),[H3,v1]=x1(ig),y1=e=>{const{__scopePopper:t,children:r}=e,[n,a]=h.useState(null);return s.jsx(H3,{scope:t,anchor:n,onAnchorChange:a,children:r})};y1.displayName=ig;var b1="PopperAnchor",w1=h.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,o=v1(b1,r),i=h.useRef(null),l=jt(t,i);return h.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:s.jsx(Je.div,{...a,ref:l})});w1.displayName=b1;var lg="PopperContent",[q3,G3]=x1(lg),j1=h.forwardRef((e,t)=>{var te,me,je,V,Q,ie;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:f=!1,updatePositionStrategy:x="optimized",onPlaced:y,...g}=e,w=v1(lg,r),[v,p]=h.useState(null),b=jt(t,ne=>p(ne)),[N,S]=h.useState(null),E=V3(N),D=(E==null?void 0:E.width)??0,I=(E==null?void 0:E.height)??0,ee=n+(o!=="center"?"-"+o:""),J=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(d)?d:[d],_=T.length>0,O={padding:J,boundary:T.filter(Y3),altBoundary:_},{refs:j,floatingStyles:k,placement:A,isPositioned:F,middlewareData:R}=O3({strategy:"fixed",placement:ee,whileElementsMounted:(...ne)=>_3(...ne,{animationFrame:x==="always"}),elements:{reference:w.anchor},middleware:[D3({mainAxis:a+I,alignmentAxis:i}),c&&M3({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?R3():void 0,...O}),c&&I3({...O}),$3({...O,apply:({elements:ne,rects:le,availableWidth:Pe,availableHeight:He})=>{const{width:qe,height:Ot}=le.reference,q=ne.floating.style;q.setProperty("--radix-popper-available-width",`${Pe}px`),q.setProperty("--radix-popper-available-height",`${He}px`),q.setProperty("--radix-popper-anchor-width",`${qe}px`),q.setProperty("--radix-popper-anchor-height",`${Ot}px`)}}),N&&F3({element:N,padding:l}),Q3({arrowWidth:D,arrowHeight:I}),f&&L3({strategy:"referenceHidden",...O})]}),[z,Y]=S1(A),W=en(y);Cr(()=>{F&&(W==null||W())},[F,W]);const Z=(te=R.arrow)==null?void 0:te.x,B=(me=R.arrow)==null?void 0:me.y,X=((je=R.arrow)==null?void 0:je.centerOffset)!==0,[K,ae]=h.useState();return Cr(()=>{v&&ae(window.getComputedStyle(v).zIndex)},[v]),s.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:F?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(V=R.transformOrigin)==null?void 0:V.x,(Q=R.transformOrigin)==null?void 0:Q.y].join(" "),...((ie=R.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(q3,{scope:r,placedSide:z,onArrowChange:S,arrowX:Z,arrowY:B,shouldHideArrow:X,children:s.jsx(Je.div,{"data-side":z,"data-align":Y,...g,ref:b,style:{...g.style,animation:F?void 0:"none"}})})})});j1.displayName=lg;var _1="PopperArrow",K3={top:"bottom",right:"left",bottom:"top",left:"right"},N1=h.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,o=G3(_1,n),i=K3[o.placedSide];return s.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:s.jsx(B3,{...a,ref:r,style:{...a.style,display:"block"}})})});N1.displayName=_1;function Y3(e){return e!==null}var Q3=e=>({name:"transformOrigin",options:e,fn(t){var w,v,p;const{placement:r,rects:n,middlewareData:a}=t,i=((w=a.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,u]=S1(r),m={start:"0%",center:"50%",end:"100%"}[u],f=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,x=(((p=a.arrow)==null?void 0:p.y)??0)+c/2;let y="",g="";return d==="bottom"?(y=i?m:`${f}px`,g=`${-c}px`):d==="top"?(y=i?m:`${f}px`,g=`${n.floating.height+c}px`):d==="right"?(y=`${-c}px`,g=i?m:`${x}px`):d==="left"&&(y=`${n.floating.width+c}px`,g=i?m:`${x}px`),{data:{x:y,y:g}}}});function S1(e){const[t,r="center"]=e.split("-");return[t,r]}var k1=y1,Vu=w1,cg=j1,dg=N1,[Hu,BM]=So("Tooltip",[Hi]),ug=Hi(),C1="TooltipProvider",J3=700,Px="tooltip.open",[X3,E1]=Hu(C1),T1=e=>{const{__scopeTooltip:t,delayDuration:r=J3,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=e,[i,l]=h.useState(!0),c=h.useRef(!1),d=h.useRef(0);return h.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),s.jsx(X3,{scope:t,isOpenDelayed:i,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:h.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:h.useCallback(u=>{c.current=u},[]),disableHoverableContent:a,children:o})};T1.displayName=C1;var P1="Tooltip",[UM,qu]=Hu(P1),Sm="TooltipTrigger",Z3=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=qu(Sm,r),o=E1(Sm,r),i=ug(r),l=h.useRef(null),c=jt(t,l,a.onTriggerChange),d=h.useRef(!1),u=h.useRef(!1),m=h.useCallback(()=>d.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),s.jsx(Vu,{asChild:!0,...i,children:s.jsx(Je.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:De(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:De(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:De(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:De(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:De(e.onBlur,a.onClose),onClick:De(e.onClick,a.onClose)})})});Z3.displayName=Sm;var eE="TooltipPortal",[WM,tE]=Hu(eE,{forceMount:void 0}),Mi="TooltipContent",O1=h.forwardRef((e,t)=>{const r=tE(Mi,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=e,i=qu(Mi,e.__scopeTooltip);return s.jsx(zs,{present:n||i.open,children:i.disableHoverableContent?s.jsx(A1,{side:a,...o,ref:t}):s.jsx(rE,{side:a,...o,ref:t})})}),rE=h.forwardRef((e,t)=>{const r=qu(Mi,e.__scopeTooltip),n=E1(Mi,e.__scopeTooltip),a=h.useRef(null),o=jt(t,a),[i,l]=h.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:m}=n,f=h.useCallback(()=>{l(null),m(!1)},[m]),x=h.useCallback((y,g)=>{const w=y.currentTarget,v={x:y.clientX,y:y.clientY},p=oE(v,w.getBoundingClientRect()),b=iE(v,p),N=lE(g.getBoundingClientRect()),S=dE([...b,...N]);l(S),m(!0)},[m]);return h.useEffect(()=>()=>f(),[f]),h.useEffect(()=>{if(c&&u){const y=w=>x(w,u),g=w=>x(w,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",g)}}},[c,u,x,f]),h.useEffect(()=>{if(i){const y=g=>{const w=g.target,v={x:g.clientX,y:g.clientY},p=(c==null?void 0:c.contains(w))||(u==null?void 0:u.contains(w)),b=!cE(v,i);p?f():b&&(f(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,i,d,f]),s.jsx(A1,{...e,ref:o})}),[nE,sE]=Hu(P1,{isInside:!1}),A1=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=qu(Mi,r),d=ug(r),{onClose:u}=c;return h.useEffect(()=>(document.addEventListener(Px,u),()=>document.removeEventListener(Px,u)),[u]),h.useEffect(()=>{if(c.trigger){const m=f=>{const x=f.target;x!=null&&x.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),s.jsx(Bi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:s.jsxs(cg,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(q0,{children:n}),s.jsx(nE,{scope:r,isInside:!0,children:s.jsx(MC,{id:c.contentId,role:"tooltip",children:a||n})})]})})});O1.displayName=Mi;var D1="TooltipArrow",aE=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=ug(r);return sE(D1,r).isInside?null:s.jsx(dg,{...a,...n,ref:t})});aE.displayName=D1;function oE(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function iE(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function lE(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function cE(e,t){const{x:r,y:n}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o].x,c=t[o].y,d=t[i].x,u=t[i].y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}function dE(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),uE(t)}function uE(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var hE=T1,M1=O1;const fE=hE,mE=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(M1,{ref:n,sideOffset:t,className:Se("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));mE.displayName=M1.displayName;var Gu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ku=typeof window>"u"||"Deno"in globalThis;function Rn(){}function gE(e,t){return typeof e=="function"?e(t):e}function pE(e){return typeof e=="number"&&e>=0&&e!==1/0}function xE(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ox(e,t){return typeof e=="function"?e(t):e}function vE(e,t){return typeof e=="function"?e(t):e}function Ax(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:o,queryKey:i,stale:l}=e;if(i){if(n){if(t.queryHash!==hg(i,t.options))return!1}else if(!oc(t.queryKey,i))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||o&&!o(t))}function Dx(e,t){const{exact:r,status:n,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(ac(t.options.mutationKey)!==ac(o))return!1}else if(!oc(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function hg(e,t){return((t==null?void 0:t.queryKeyHashFn)||ac)(e)}function ac(e){return JSON.stringify(e,(t,r)=>km(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function oc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!oc(e[r],t[r])):!1}function R1(e,t){if(e===t)return e;const r=Mx(e)&&Mx(t);if(r||km(e)&&km(t)){const n=r?e:Object.keys(e),a=n.length,o=r?t:Object.keys(t),i=o.length,l=r?[]:{};let c=0;for(let d=0;d<i;d++){const u=r?d:o[d];(!r&&n.includes(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=R1(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===i&&c===a?e:l}return t}function Mx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function km(e){if(!Rx(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Rx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Rx(e){return Object.prototype.toString.call(e)==="[object Object]"}function yE(e){return new Promise(t=>{setTimeout(t,e)})}function bE(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?R1(e,t):t}function wE(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function jE(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var fg=Symbol();function I1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===fg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ao,ia,pi,Lv,_E=(Lv=class extends Gu{constructor(){super();bt(this,ao,void 0);bt(this,ia,void 0);bt(this,pi,void 0);Ze(this,pi,t=>{if(!Ku&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){oe(this,ia)||this.setEventListener(oe(this,pi))}onUnsubscribe(){var t;this.hasListeners()||((t=oe(this,ia))==null||t.call(this),Ze(this,ia,void 0))}setEventListener(t){var r;Ze(this,pi,t),(r=oe(this,ia))==null||r.call(this),Ze(this,ia,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){oe(this,ao)!==t&&(Ze(this,ao,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof oe(this,ao)=="boolean"?oe(this,ao):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ao=new WeakMap,ia=new WeakMap,pi=new WeakMap,Lv),$1=new _E,xi,la,vi,Fv,NE=(Fv=class extends Gu{constructor(){super();bt(this,xi,!0);bt(this,la,void 0);bt(this,vi,void 0);Ze(this,vi,t=>{if(!Ku&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){oe(this,la)||this.setEventListener(oe(this,vi))}onUnsubscribe(){var t;this.hasListeners()||((t=oe(this,la))==null||t.call(this),Ze(this,la,void 0))}setEventListener(t){var r;Ze(this,vi,t),(r=oe(this,la))==null||r.call(this),Ze(this,la,t(this.setOnline.bind(this)))}setOnline(t){oe(this,xi)!==t&&(Ze(this,xi,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return oe(this,xi)}},xi=new WeakMap,la=new WeakMap,vi=new WeakMap,Fv),mu=new NE;function SE(){let e,t;const r=new Promise((a,o)=>{e=a,t=o});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function kE(e){return Math.min(1e3*2**e,3e4)}function L1(e){return(e??"online")==="online"?mu.isOnline():!0}var F1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Jh(e){return e instanceof F1}function z1(e){let t=!1,r=0,n=!1,a;const o=SE(),i=g=>{var w;n||(f(new F1(g)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>$1.isFocused()&&(e.networkMode==="always"||mu.isOnline())&&e.canRun(),u=()=>L1(e.networkMode)&&e.canRun(),m=g=>{var w;n||(n=!0,(w=e.onSuccess)==null||w.call(e,g),a==null||a(),o.resolve(g))},f=g=>{var w;n||(n=!0,(w=e.onError)==null||w.call(e,g),a==null||a(),o.reject(g))},x=()=>new Promise(g=>{var w;a=v=>{(n||d())&&g(v)},(w=e.onPause)==null||w.call(e)}).then(()=>{var g;a=void 0,n||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(n)return;let g;const w=r===0?e.initialPromise:void 0;try{g=w??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(m).catch(v=>{var E;if(n)return;const p=e.retry??(Ku?0:3),b=e.retryDelay??kE,N=typeof b=="function"?b(r,v):b,S=p===!0||typeof p=="number"&&r<p||typeof p=="function"&&p(r,v);if(t||!S){f(v);return}r++,(E=e.onFail)==null||E.call(e,r,v),yE(N).then(()=>d()?void 0:x()).then(()=>{t?f(v):y()})})};return{promise:o,cancel:i,continue:()=>(a==null||a(),o),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():x().then(y),o)}}function CE(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=l=>setTimeout(l,0);const o=l=>{t?e.push(l):a(()=>{r(l)})},i=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Ar=CE(),oo,zv,B1=(zv=class{constructor(){bt(this,oo,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pE(this.gcTime)&&Ze(this,oo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ku?1/0:5*60*1e3))}clearGcTimeout(){oe(this,oo)&&(clearTimeout(oe(this,oo)),Ze(this,oo,void 0))}},oo=new WeakMap,zv),yi,bi,vn,wr,fc,io,In,vs,Bv,EE=(Bv=class extends B1{constructor(t){super();bt(this,In);bt(this,yi,void 0);bt(this,bi,void 0);bt(this,vn,void 0);bt(this,wr,void 0);bt(this,fc,void 0);bt(this,io,void 0);Ze(this,io,!1),Ze(this,fc,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ze(this,vn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ze(this,yi,PE(this.options)),this.state=t.state??oe(this,yi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=oe(this,wr))==null?void 0:t.promise}setOptions(t){this.options={...oe(this,fc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,vn).remove(this)}setData(t,r){const n=bE(this.state.data,t,this.options);return xr(this,In,vs).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){xr(this,In,vs).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=oe(this,wr))==null?void 0:n.promise;return(a=oe(this,wr))==null||a.cancel(t),r?r.then(Rn).catch(Rn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,yi))}isActive(){return this.observers.some(t=>vE(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!xE(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=oe(this,wr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=oe(this,wr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),oe(this,vn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(oe(this,wr)&&(oe(this,io)?oe(this,wr).cancel({revert:!0}):oe(this,wr).cancelRetry()),this.scheduleGc()),oe(this,vn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xr(this,In,vs).call(this,{type:"invalidate"})}fetch(t,r){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(oe(this,wr))return oe(this,wr).continueRetry(),oe(this,wr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(f=>f.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Ze(this,io,!0),n.signal)})},o=()=>{const m=I1(this.options,r),f={queryKey:this.queryKey,meta:this.meta};return a(f),Ze(this,io,!1),this.options.persister?this.options.persister(m,f,this):m(f)},i={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};a(i),(c=this.options.behavior)==null||c.onFetch(i,this),Ze(this,bi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=i.fetchOptions)==null?void 0:d.meta))&&xr(this,In,vs).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const l=m=>{var f,x,y,g;Jh(m)&&m.silent||xr(this,In,vs).call(this,{type:"error",error:m}),Jh(m)||((x=(f=oe(this,vn).config).onError)==null||x.call(f,m,this),(g=(y=oe(this,vn).config).onSettled)==null||g.call(y,this.state.data,m,this)),this.scheduleGc()};return Ze(this,wr,z1({initialPromise:r==null?void 0:r.initialPromise,fn:i.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var f,x,y,g;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(w){l(w);return}(x=(f=oe(this,vn).config).onSuccess)==null||x.call(f,m,this),(g=(y=oe(this,vn).config).onSettled)==null||g.call(y,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,f)=>{xr(this,In,vs).call(this,{type:"failed",failureCount:m,error:f})},onPause:()=>{xr(this,In,vs).call(this,{type:"pause"})},onContinue:()=>{xr(this,In,vs).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),oe(this,wr).start()}},yi=new WeakMap,bi=new WeakMap,vn=new WeakMap,wr=new WeakMap,fc=new WeakMap,io=new WeakMap,In=new WeakSet,vs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...TE(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Jh(a)&&a.revert&&oe(this,bi)?{...oe(this,bi),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Ar.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),oe(this,vn).notify({query:this,type:"updated",action:t})})},Bv);function TE(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:L1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function PE(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Zn,Uv,OE=(Uv=class extends Gu{constructor(t={}){super();bt(this,Zn,void 0);this.config=t,Ze(this,Zn,new Map)}build(t,r,n){const a=r.queryKey,o=r.queryHash??hg(a,r);let i=this.get(o);return i||(i=new EE({cache:this,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){oe(this,Zn).has(t.queryHash)||(oe(this,Zn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=oe(this,Zn).get(t.queryHash);r&&(t.destroy(),r===t&&oe(this,Zn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ar.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return oe(this,Zn).get(t)}getAll(){return[...oe(this,Zn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Ax(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Ax(t,n)):r}notify(t){Ar.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ar.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ar.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Zn=new WeakMap,Uv),es,Pr,lo,ts,Js,Wv,AE=(Wv=class extends B1{constructor(t){super();bt(this,ts);bt(this,es,void 0);bt(this,Pr,void 0);bt(this,lo,void 0);this.mutationId=t.mutationId,Ze(this,Pr,t.mutationCache),Ze(this,es,[]),this.state=t.state||DE(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){oe(this,es).includes(t)||(oe(this,es).push(t),this.clearGcTimeout(),oe(this,Pr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ze(this,es,oe(this,es).filter(r=>r!==t)),this.scheduleGc(),oe(this,Pr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){oe(this,es).length||(this.state.status==="pending"?this.scheduleGc():oe(this,Pr).remove(this))}continue(){var t;return((t=oe(this,lo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,i,l,c,d,u,m,f,x,y,g,w,v,p,b,N,S,E,D;Ze(this,lo,z1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,ee)=>{xr(this,ts,Js).call(this,{type:"failed",failureCount:I,error:ee})},onPause:()=>{xr(this,ts,Js).call(this,{type:"pause"})},onContinue:()=>{xr(this,ts,Js).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,Pr).canRun(this)}));const r=this.state.status==="pending",n=!oe(this,lo).canStart();try{if(!r){xr(this,ts,Js).call(this,{type:"pending",variables:t,isPaused:n}),await((o=(a=oe(this,Pr).config).onMutate)==null?void 0:o.call(a,t,this));const ee=await((l=(i=this.options).onMutate)==null?void 0:l.call(i,t));ee!==this.state.context&&xr(this,ts,Js).call(this,{type:"pending",context:ee,variables:t,isPaused:n})}const I=await oe(this,lo).start();return await((d=(c=oe(this,Pr).config).onSuccess)==null?void 0:d.call(c,I,t,this.state.context,this)),await((m=(u=this.options).onSuccess)==null?void 0:m.call(u,I,t,this.state.context)),await((x=(f=oe(this,Pr).config).onSettled)==null?void 0:x.call(f,I,null,this.state.variables,this.state.context,this)),await((g=(y=this.options).onSettled)==null?void 0:g.call(y,I,null,t,this.state.context)),xr(this,ts,Js).call(this,{type:"success",data:I}),I}catch(I){try{throw await((v=(w=oe(this,Pr).config).onError)==null?void 0:v.call(w,I,t,this.state.context,this)),await((b=(p=this.options).onError)==null?void 0:b.call(p,I,t,this.state.context)),await((S=(N=oe(this,Pr).config).onSettled)==null?void 0:S.call(N,void 0,I,this.state.variables,this.state.context,this)),await((D=(E=this.options).onSettled)==null?void 0:D.call(E,void 0,I,t,this.state.context)),I}finally{xr(this,ts,Js).call(this,{type:"error",error:I})}}finally{oe(this,Pr).runNext(this)}}},es=new WeakMap,Pr=new WeakMap,lo=new WeakMap,ts=new WeakSet,Js=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ar.batch(()=>{oe(this,es).forEach(n=>{n.onMutationUpdate(t)}),oe(this,Pr).notify({mutation:this,type:"updated",action:t})})},Wv);function DE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var on,mc,Vv,ME=(Vv=class extends Gu{constructor(t={}){super();bt(this,on,void 0);bt(this,mc,void 0);this.config=t,Ze(this,on,new Map),Ze(this,mc,Date.now())}build(t,r,n){const a=new AE({mutationCache:this,mutationId:++$c(this,mc)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){const r=ad(t),n=oe(this,on).get(r)??[];n.push(t),oe(this,on).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=ad(t);if(oe(this,on).has(r)){const a=(n=oe(this,on).get(r))==null?void 0:n.filter(o=>o!==t);a&&(a.length===0?oe(this,on).delete(r):oe(this,on).set(r,a))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=oe(this,on).get(ad(t)))==null?void 0:n.find(a=>a.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=oe(this,on).get(ad(t)))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Ar.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...oe(this,on).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Dx(r,n))}findAll(t={}){return this.getAll().filter(r=>Dx(t,r))}notify(t){Ar.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ar.batch(()=>Promise.all(t.map(r=>r.continue().catch(Rn))))}},on=new WeakMap,mc=new WeakMap,Vv);function ad(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Ix(e){return{onFetch:(t,r)=>{var u,m,f,x,y;const n=t.options,a=(f=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:f.direction,o=((x=t.state.data)==null?void 0:x.pages)||[],i=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=I1(t.options,t.fetchOptions),p=async(b,N,S)=>{if(g)return Promise.reject();if(N==null&&b.pages.length)return Promise.resolve(b);const E={queryKey:t.queryKey,pageParam:N,direction:S?"backward":"forward",meta:t.options.meta};w(E);const D=await v(E),{maxPages:I}=t.options,ee=S?jE:wE;return{pages:ee(b.pages,D,I),pageParams:ee(b.pageParams,N,I)}};if(a&&o.length){const b=a==="backward",N=b?RE:$x,S={pages:o,pageParams:i},E=N(n,S);l=await p(S,E,b)}else{const b=e??o.length;do{const N=c===0?i[0]??n.initialPageParam:$x(n,l);if(c>0&&N==null)break;l=await p(l,N),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,w;return(w=(g=t.options).persister)==null?void 0:w.call(g,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function $x(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function RE(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Ht,ca,da,wi,ji,ua,_i,Ni,Hv,IE=(Hv=class{constructor(e={}){bt(this,Ht,void 0);bt(this,ca,void 0);bt(this,da,void 0);bt(this,wi,void 0);bt(this,ji,void 0);bt(this,ua,void 0);bt(this,_i,void 0);bt(this,Ni,void 0);Ze(this,Ht,e.queryCache||new OE),Ze(this,ca,e.mutationCache||new ME),Ze(this,da,e.defaultOptions||{}),Ze(this,wi,new Map),Ze(this,ji,new Map),Ze(this,ua,0)}mount(){$c(this,ua)._++,oe(this,ua)===1&&(Ze(this,_i,$1.subscribe(async e=>{e&&(await this.resumePausedMutations(),oe(this,Ht).onFocus())})),Ze(this,Ni,mu.subscribe(async e=>{e&&(await this.resumePausedMutations(),oe(this,Ht).onOnline())})))}unmount(){var e,t;$c(this,ua)._--,oe(this,ua)===0&&((e=oe(this,_i))==null||e.call(this),Ze(this,_i,void 0),(t=oe(this,Ni))==null||t.call(this),Ze(this,Ni,void 0))}isFetching(e){return oe(this,Ht).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return oe(this,ca).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=oe(this,Ht).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=oe(this,Ht).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(Ox(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return oe(this,Ht).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=oe(this,Ht).get(n.queryHash),o=a==null?void 0:a.state.data,i=gE(t,o);if(i!==void 0)return oe(this,Ht).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return Ar.batch(()=>oe(this,Ht).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=oe(this,Ht).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=oe(this,Ht);Ar.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=oe(this,Ht),n={type:"active",...e};return Ar.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=Ar.batch(()=>oe(this,Ht).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Rn).catch(Rn)}invalidateQueries(e={},t={}){return Ar.batch(()=>{if(oe(this,Ht).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=Ar.batch(()=>oe(this,Ht).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(Rn)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Rn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=oe(this,Ht).build(this,t);return r.isStaleByTime(Ox(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Rn).catch(Rn)}fetchInfiniteQuery(e){return e.behavior=Ix(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Rn).catch(Rn)}ensureInfiniteQueryData(e){return e.behavior=Ix(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return mu.isOnline()?oe(this,ca).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,Ht)}getMutationCache(){return oe(this,ca)}getDefaultOptions(){return oe(this,da)}setDefaultOptions(e){Ze(this,da,e)}setQueryDefaults(e,t){oe(this,wi).set(ac(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...oe(this,wi).values()];let r={};return t.forEach(n=>{oc(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){oe(this,ji).set(ac(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...oe(this,ji).values()];let r={};return t.forEach(n=>{oc(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...oe(this,da).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===fg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...oe(this,da).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){oe(this,Ht).clear(),oe(this,ca).clear()}},Ht=new WeakMap,ca=new WeakMap,da=new WeakMap,wi=new WeakMap,ji=new WeakMap,ua=new WeakMap,_i=new WeakMap,Ni=new WeakMap,Hv),$E=h.createContext(void 0),LE=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx($E.Provider,{value:e,children:t}));const Yu=jc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-islamic-green hover:text-white",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-islamic-green hover:text-white",secondary:"bg-secondary text-secondary-foreground hover:bg-islamic-green hover:text-white",ghost:"hover:bg-islamic-green hover:text-white",link:"text-primary underline-offset-4 hover:underline hover:text-islamic-green"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=h.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},o)=>{const i=n?Na:"button";return s.jsx(i,{className:Se(Yu({variant:t,size:r,className:e})),ref:o,...a})});H.displayName="Button";const U1="/aya-system/assets/logo-57627ad7.png",FE="modulepreload",zE=function(e){return"/aya-system/"+e},Lx={},as=function(t,r,n){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=zE(o),o in Lx)return;Lx[o]=!0;const i=o.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!n)for(let u=a.length-1;u>=0;u--){const m=a[u];if(m.href===o&&(!i||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":FE,i||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),i)return new Promise((u,m)=>{d.addEventListener("load",u),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})},BE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>as(()=>Promise.resolve().then(()=>qi),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class mg extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class UE extends mg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fx extends mg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class zx extends mg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Cm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Cm||(Cm={}));var WE=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(m){i(m)}}function c(u){try{d(n.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class VE{constructor(t,{headers:r={},customFetch:n,region:a=Cm.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=BE(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return WE(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:i}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;i&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(l["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(l["Content-Type"]="application/json",u=JSON.stringify(i)));const m=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(g=>{throw new UE(g)}),f=m.headers.get("x-relay-error");if(f&&f==="true")throw new Fx(m);if(!m.ok)throw new zx(m);let x=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return x==="application/json"?y=yield m.json():x==="application/octet-stream"?y=yield m.blob():x==="text/event-stream"?y=m:x==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof zx||a instanceof Fx?a.context:void 0}}})}}var qr={},gg={},Qu={},Nc={},Ju={},Xu={},HE=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ri=HE();const qE=Ri.fetch,W1=Ri.fetch.bind(Ri),V1=Ri.Headers,GE=Ri.Request,KE=Ri.Response,qi=Object.freeze(Object.defineProperty({__proto__:null,Headers:V1,Request:GE,Response:KE,default:W1,fetch:qE},Symbol.toStringTag,{value:"Module"})),YE=Gv(qi);var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});let QE=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Zu.default=QE;var H1=mn&&mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xu,"__esModule",{value:!0});const JE=H1(YE),XE=H1(Zu);let ZE=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=JE.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c;let d=null,u=null,m=null,f=o.status,x=o.statusText;if(o.ok){if(this.method!=="HEAD"){const v=await o.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const g=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),w=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&w&&w.length>1&&(m=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,m=null,f=406,x="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await o.text();try{d=JSON.parse(g),Array.isArray(d)&&o.status===404&&(u=[],d=null,f=200,x="OK")}catch{o.status===404&&g===""?(f=204,x="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,x="OK"),d&&this.shouldThrowOnError)throw new XE.default(d)}return{error:d,data:u,count:m,status:f,statusText:x}});return this.shouldThrowOnError||(a=a.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Xu.default=ZE;var eT=mn&&mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ju,"__esModule",{value:!0});const tT=eT(Xu);let rT=class extends tT.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:o=a}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const o=typeof a>"u"?"offset":`${a}.offset`,i=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ju.default=rT;var nT=mn&&mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nc,"__esModule",{value:!0});const sT=nT(Ju);let aT=class extends sT.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${i}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Nc.default=aT;var oT=mn&&mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qu,"__esModule",{value:!0});const dl=oT(Nc);let iT=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new dl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new dl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:o=!0}={}){const i="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new dl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new dl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new dl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Qu.default=iT;var eh={},th={};Object.defineProperty(th,"__esModule",{value:!0});th.version=void 0;th.version="0.0.0-automated";Object.defineProperty(eh,"__esModule",{value:!0});eh.DEFAULT_HEADERS=void 0;const lT=th;eh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${lT.version}`};var q1=mn&&mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gg,"__esModule",{value:!0});const cT=q1(Qu),dT=q1(Nc),uT=eh;let hT=class G1{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},uT.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new cT.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new G1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:o}={}){let i;const l=new URL(`${this.url}/rpc/${t}`);let c;n||a?(i=n?"HEAD":"GET",Object.entries(r).filter(([u,m])=>m!==void 0).map(([u,m])=>[u,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([u,m])=>{l.searchParams.append(u,m)})):(i="POST",c=r);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new dT.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};gg.default=hT;var Gi=mn&&mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qr,"__esModule",{value:!0});qr.PostgrestError=qr.PostgrestBuilder=qr.PostgrestTransformBuilder=qr.PostgrestFilterBuilder=qr.PostgrestQueryBuilder=qr.PostgrestClient=void 0;const K1=Gi(gg);qr.PostgrestClient=K1.default;const Y1=Gi(Qu);qr.PostgrestQueryBuilder=Y1.default;const Q1=Gi(Nc);qr.PostgrestFilterBuilder=Q1.default;const J1=Gi(Ju);qr.PostgrestTransformBuilder=J1.default;const X1=Gi(Xu);qr.PostgrestBuilder=X1.default;const Z1=Gi(Zu);qr.PostgrestError=Z1.default;var fT=qr.default={PostgrestClient:K1.default,PostgrestQueryBuilder:Y1.default,PostgrestFilterBuilder:Q1.default,PostgrestTransformBuilder:J1.default,PostgrestBuilder:X1.default,PostgrestError:Z1.default};const{PostgrestClient:mT,PostgrestQueryBuilder:YM,PostgrestFilterBuilder:QM,PostgrestTransformBuilder:JM,PostgrestBuilder:XM,PostgrestError:ZM}=fT;function gT(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const pT=gT(),xT="2.11.15",vT=`realtime-js/${xT}`,yT="1.0.0",ej=1e4,bT=1e3;var Ml;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ml||(Ml={}));var br;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(br||(br={}));var Ln;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ln||(Ln={}));var Em;(function(e){e.websocket="websocket"})(Em||(Em={}));var Ja;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ja||(Ja={}));class wT{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(t.slice(i,i+a));i=i+a;const c=n.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class tj{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Et||(Et={}));const Bx=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,i)=>(o[i]=jT(i,e,t,a),o),{})},jT=(e,t,r,n)=>{const a=t.find(l=>l.name===e),o=a==null?void 0:a.type,i=r[e];return o&&!n.includes(o)?rj(o,i):Tm(i)},rj=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return kT(t,r)}switch(e){case Et.bool:return _T(t);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return NT(t);case Et.json:case Et.jsonb:return ST(t);case Et.timestamp:return CT(t);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return Tm(t);default:return Tm(t)}},Tm=e=>e,_T=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},NT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ST=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},kT=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>rj(t,l))}return e},CT=e=>typeof e=="string"?e.replace(" ","T"):e,nj=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Xh{constructor(t,r,n={},a=ej){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ux;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ux||(Ux={}));class Rl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rl.syncState(this.state,a,o,i),this.pendingDiffs.forEach(c=>{this.state=Rl.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Rl.syncDiff(this.state,a,o,i),l())}),this.onJoin((a,o,i)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:i})}),this.onLeave((a,o,i)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const o=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(o,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const m=o[d];if(m){const f=u.map(w=>w.presence_ref),x=m.map(w=>w.presence_ref),y=u.filter(w=>x.indexOf(w.presence_ref)<0),g=m.filter(w=>f.indexOf(w.presence_ref)<0);y.length>0&&(l[d]=y),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(o,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(o,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const m=t[l].map(x=>x.presence_ref),f=u.filter(x=>m.indexOf(x.presence_ref)<0);t[l].unshift(...f)}n(l,u,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Wx||(Wx={}));var Vx;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Vx||(Vx={}));var ws;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ws||(ws={}));class pg{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=br.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Xh(this,Ln.join,this.params,this.timeout),this.rejoinTimer=new tj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=br.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=br.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=br.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=br.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ln.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Rl(this),this.broadcastEndpointURL=nj(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==br.closed){const{config:{broadcast:o,presence:i,private:l}}=this.params;this._onError(u=>t==null?void 0:t(ws.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(ws.CLOSED));const c={},d={broadcast:o,presence:i,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var m;if(this.socket.setAuth(),u===void 0){t==null||t(ws.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,x=(m=f==null?void 0:f.length)!==null&&m!==void 0?m:0,y=[];for(let g=0;g<x;g++){const w=f[g],{filter:{event:v,schema:p,table:b,filter:N}}=w,S=u&&u[g];if(S&&S.event===v&&S.schema===p&&S.table===b&&S.filter===N)y.push(Object.assign(Object.assign({},w),{id:S.id}));else{this.unsubscribe(),this.state=br.errored,t==null||t(ws.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(ws.SUBSCRIBED);return}}).receive("error",u=>{this.state=br.errored,t==null||t(ws.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ws.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=br.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ln.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Xh(this,Ln.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const a=new AbortController,o=setTimeout(()=>a.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Xh(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Ln;if(n&&[l,c,d,u].indexOf(i)>=0&&n!==this._joinRef())return;let f=this._onMessage(i,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(x=>{var y,g,w;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(g=x.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(x=>x.callback(f,n)):(o=this.bindings[i])===null||o===void 0||o.filter(x=>{var y,g,w,v,p,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in x){const N=x.id,S=(y=x.filter)===null||y===void 0?void 0:y.event;return N&&((g=r.ids)===null||g===void 0?void 0:g.includes(N))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const N=(p=(v=x==null?void 0:x.filter)===null||v===void 0?void 0:v.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return N==="*"||N===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===i}).map(x=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:g,table:w,commit_timestamp:v,type:p,errors:b}=y;f=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:p,new:{},old:{},errors:b}),this._getPayloadRecords(y))}x.callback(f,n)})}_isClosed(){return this.state===br.closed}_isJoined(){return this.state===br.joined}_isJoining(){return this.state===br.joining}_isLeaving(){return this.state===br.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),o={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&pg.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ln.close,{},t)}_onError(t){this._on(Ln.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=br.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Bx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Bx(t.columns,t.old_record)),r}}const Hx=()=>{},ET=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class TT{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ej,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hx,this.ref=0,this.logger=Hx,this.conn=null,this.sendBuffer=[],this.serializer=new wT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...l)=>as(()=>Promise.resolve().then(()=>qi),void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${t}/${Em.websocket}`,this.httpEndpoint=nj(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,i)=>i(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new tj(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=pT),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yT}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ml.connecting:return Ja.Connecting;case Ml.open:return Ja.Open;case Ml.closing:return Ja.Closing;default:return Ja.Closed}}isConnected(){return this.connectionState()===Ja.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===n);if(a)return a;{const o=new pg(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:a,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,a),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:vT};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Ln.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(bT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:o,ref:i}=r;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${a} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,o,i)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ln.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ET],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class xg extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function nr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class PT extends xg{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pm extends xg{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var OT=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(m){i(m)}}function c(u){try{d(n.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const sj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>as(()=>Promise.resolve().then(()=>qi),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},AT=()=>OT(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield as(()=>Promise.resolve().then(()=>qi),void 0)).Response:Response}),Om=e=>{if(Array.isArray(e))return e.map(r=>Om(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=Om(n)}),t},DT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ko=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(m){i(m)}}function c(u){try{d(n.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const Zh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),MT=(e,t,r)=>ko(void 0,void 0,void 0,function*(){const n=yield AT();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const o=e.status||500,i=(a==null?void 0:a.statusCode)||o+"";t(new PT(Zh(a),o,i))}).catch(a=>{t(new Pm(Zh(a),a))}):t(new Pm(Zh(e),e))}),RT=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(DT(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r))};function Sc(e,t,r,n,a,o){return ko(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,RT(t,n,a,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>MT(c,l,n))})})}function gu(e,t,r,n){return ko(this,void 0,void 0,function*(){return Sc(e,"GET",t,r,n)})}function js(e,t,r,n,a){return ko(this,void 0,void 0,function*(){return Sc(e,"POST",t,n,a,r)})}function Am(e,t,r,n,a){return ko(this,void 0,void 0,function*(){return Sc(e,"PUT",t,n,a,r)})}function IT(e,t,r,n){return ko(this,void 0,void 0,function*(){return Sc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function aj(e,t,r,n,a){return ko(this,void 0,void 0,function*(){return Sc(e,"DELETE",t,n,a,r)})}var Ur=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(m){i(m)}}function c(u){try{d(n.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const $T={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class LT{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=sj(a)}uploadOrUpdate(t,r,n,a){return Ur(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},qx),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),m=yield(t=="PUT"?Am:js)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(o){if(nr(o))return{data:null,error:o};throw o}})}upload(t,r,n){return Ur(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Ur(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:qx.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield Am(this.fetch,l.toString(),c,{headers:u});return{data:{path:o,fullPath:m.Key},error:null}}catch(c){if(nr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ur(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield js(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new xg("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ur(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ur(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(nr(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Ur(this,void 0,void 0,function*(){try{return{data:{path:(yield js(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(nr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Ur(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),o=yield js(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(a){if(nr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Ur(this,void 0,void 0,function*(){try{const a=yield js(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(a){if(nr(a))return{data:null,error:a};throw a}})}download(t,r){return Ur(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield gu(this.fetch,`${this.url}/${a}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(nr(l))return{data:null,error:l};throw l}})}info(t){return Ur(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield gu(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Om(n),error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}})}exists(t){return Ur(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield IT(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(nr(n)&&n instanceof Pm){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return Ur(this,void 0,void 0,function*(){try{return{data:yield aj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ur(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},$T),r),{prefix:t||""});return{data:yield js(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(nr(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const FT="2.10.4",zT={"X-Client-Info":`storage-js/${FT}`};var Ao=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(m){i(m)}}function c(u){try{d(n.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class BT{constructor(t,r={},n,a){const o=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},zT),r),this.fetch=sj(n)}listBuckets(){return Ao(this,void 0,void 0,function*(){try{return{data:yield gu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(nr(t))return{data:null,error:t};throw t}})}getBucket(t){return Ao(this,void 0,void 0,function*(){try{return{data:yield gu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ao(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Ao(this,void 0,void 0,function*(){try{return{data:yield Am(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ao(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ao(this,void 0,void 0,function*(){try{return{data:yield aj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}})}}class UT extends BT{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new LT(this.url,this.headers,t,this.fetch)}}const WT="2.53.0";let wl="";typeof Deno<"u"?wl="deno":typeof document<"u"?wl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wl="react-native":wl="node";const VT={"X-Client-Info":`supabase-js-${wl}/${WT}`},HT={headers:VT},qT={schema:"public"},GT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},KT={};var YT=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(m){i(m)}}function c(u){try{d(n.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const QT=e=>{let t;return e?t=e:typeof fetch>"u"?t=W1:t=fetch,(...r)=>t(...r)},JT=()=>typeof Headers>"u"?V1:Headers,XT=(e,t,r)=>{const n=QT(r),a=JT();return(o,i)=>YT(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},i),{headers:d}))})};var ZT=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(m){i(m)}}function c(u){try{d(n.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};function e6(e){return e.endsWith("/")?e:e+"/"}function t6(e,t){var r,n;const{db:a,auth:o,realtime:i,global:l}=e,{db:c,auth:d,realtime:u,global:m}=t,f={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>ZT(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const oj="2.71.1",Bo=30*1e3,Dm=3,ef=Dm*Bo,r6="http://localhost:9999",n6="supabase.auth.token",s6={"X-Client-Info":`gotrue-js/${oj}`},Mm="X-Supabase-Api-Version",ij={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},a6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,o6=10*60*1e3;class vg extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ke(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class i6 extends vg{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function l6(e){return Ke(e)&&e.name==="AuthApiError"}class lj extends vg{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class La extends vg{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Xs extends La{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function c6(e){return Ke(e)&&e.name==="AuthSessionMissingError"}class od extends La{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class id extends La{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ld extends La{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function d6(e){return Ke(e)&&e.name==="AuthImplicitGrantRedirectError"}class Gx extends La{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rm extends La{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function tf(e){return Ke(e)&&e.name==="AuthRetryableFetchError"}class Kx extends La{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Im extends La{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const pu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yx=` 	
\r=`.split(""),u6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Yx.length;t+=1)e[Yx[t].charCodeAt(0)]=-2;for(let t=0;t<pu.length;t+=1)e[pu[t].charCodeAt(0)]=t;return e})();function Qx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(pu[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(pu[n]),t.queuedBits-=6}}function cj(e,t,r){const n=u6[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Jx(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=i=>{m6(i,n,r)};for(let i=0;i<e.length;i+=1)cj(e.charCodeAt(i),a,o);return t.join("")}function h6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function f6(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}h6(n,t)}}function m6(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function g6(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)cj(e.charCodeAt(a),r,n);return new Uint8Array(t)}function p6(e){const t=[];return f6(e,r=>t.push(r)),new Uint8Array(t)}function x6(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Qx(a,r,n)),Qx(null,r,n),t.join("")}function v6(e){return Math.round(Date.now()/1e3)+e}function y6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const An=()=>typeof window<"u"&&typeof document<"u",Va={tested:!1,writable:!1},dj=()=>{if(!An())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Va.tested)return Va.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Va.tested=!0,Va.writable=!0}catch{Va.tested=!0,Va.writable=!1}return Va.writable};function b6(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const uj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>as(()=>Promise.resolve().then(()=>qi),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},w6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Uo=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ha=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},qs=async(e,t)=>{await e.removeItem(t)};class rh{constructor(){this.promise=new rh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}rh.promiseConstructor=Promise;function rf(e){const t=e.split(".");if(t.length!==3)throw new Im("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!a6.test(t[n]))throw new Im("JWT not in base64url format");return{header:JSON.parse(Jx(t[0])),payload:JSON.parse(Jx(t[1])),signature:g6(t[2]),raw:{header:t[0],payload:t[1]}}}async function j6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function _6(e,t){return new Promise((n,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){n(i);return}}catch(i){if(!t(o,i)){a(i);return}}})()})}function N6(e){return("0"+e.toString(16)).substr(-2)}function S6(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,N6).join("")}async function k6(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function C6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await k6(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Do(e,t,r=!1){const n=S6();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Uo(e,`${t}-code-verifier`,a);const o=await C6(n);return[o,n===o?"plain":"s256"]}const E6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function T6(e){const t=e.headers.get(Mm);if(!t||!t.match(E6))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function P6(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function O6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const A6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mo(e){if(!A6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nf(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Xx(e){return JSON.parse(JSON.stringify(e))}var D6=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Ka=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),M6=[502,503,504];async function Zx(e){var t;if(!w6(e))throw new Rm(Ka(e),0);if(M6.includes(e.status))throw new Rm(Ka(e),e.status);let r;try{r=await e.json()}catch(o){throw new lj(Ka(o),o)}let n;const a=T6(e);if(a&&a.getTime()>=ij["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Kx(Ka(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Xs}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Kx(Ka(r),e.status,r.weak_password.reasons);throw new i6(Ka(r),e.status||500,n)}const R6=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function it(e,t,r,n){var a;const o=Object.assign({},n==null?void 0:n.headers);o[Mm]||(o[Mm]=ij["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await I6(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function I6(e,t,r,n,a,o){const i=R6(t,n,a,o);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new Rm(Ka(c),0)}if(l.ok||await Zx(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Zx(c)}}function ys(e){var t;let r=null;z6(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=v6(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function ev(e){const t=ys(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function aa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function $6(e){return{data:e,error:null}}function L6(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o}=e,i=D6(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function F6(e){return e}function z6(e){return e.access_token&&e.refresh_token&&e.expires_in}const sf=["global","local","others"];var B6=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class U6{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=uj(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=sf[0]){if(sf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sf.join(", ")}`);try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:aa})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=B6(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:L6,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ke(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:aa})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:F6});if(u.error)throw u.error;const m=await u.json(),f=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,x=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Ke(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Mo(t);try{return await it(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:aa})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Mo(t);try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:aa})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Mo(t);try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:aa})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Mo(t.userId);try{const{data:r,error:n}=await it(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Mo(t.userId),Mo(t.id);try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}function tv(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function W6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ro={debug:!!(globalThis&&dj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class V6 extends hj{}async function H6(e,t,r){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new V6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ro.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}W6();const q6={url:r6,storageKey:n6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:s6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function rv(e,t,r){return await r()}const Io={};class ic{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ic.nextInstanceID,ic.nextInstanceID+=1,this.instanceID>0&&An()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},q6),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new U6({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=uj(a.fetch),this.lock=a.lock||rv,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:An()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=H6:this.lock=rv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:dj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=tv(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=tv(this.memoryStorage)),An()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Io[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Io[this.storageKey]=Object.assign(Object.assign({},Io[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Io[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Io[this.storageKey]=Object.assign(Object.assign({},Io[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oj}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=b6(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),An()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),d6(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ke(r)?{error:r}:{error:new lj("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ys}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Ke(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,a;try{let o;if("email"in t){const{email:u,password:m,options:f}=t;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Do(this.storage,this.storageKey)),o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:m,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:x,code_challenge_method:y},xform:ys})}else if("phone"in t){const{phone:u,password:m,options:f}=t;o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ys})}else throw new id("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Ke(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:l}=t;r=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ev})}else if("phone"in t){const{phone:o,password:i,options:l}=t;r=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ev})}else throw new id("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new od}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,o,i,l,c,d,u,m,f,x;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{chain:w,wallet:v,statement:p,options:b}=t;let N;if(An())if(typeof v=="object")N=v;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))N=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=v}const S=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const E=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),p?{statement:p}:null));let D;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")D=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)D=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)y=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),g=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((m=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...b.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const E=await N.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=E}}try{const{data:w,error:v}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:x6(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ys});if(v)throw v;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new od}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:v})}catch(w){if(Ke(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const r=await Ha(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:o,error:i}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ys});if(await qs(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new od}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:i})}catch(o){if(Ke(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:o,nonce:i}=t,l=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ys}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new od}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,o,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Do(this.storage,this.storageKey));const{error:m}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new id("You must provide either an email or phone number.")}catch(l){if(Ke(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,o;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ys});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Do(this.storage,this.storageKey)),await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:$6})}catch(o){if(Ke(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Xs;const{error:a}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:o}=t,{error:i}=await it(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:a,options:o}=t,{data:i,error:l}=await it(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new id("You must provide either an email or phone number and a type")}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ha(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<ef:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await Ha(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=nf()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:aa}):await this._useSession(async r=>{var n,a,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xs}:await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:aa})})}catch(r){if(Ke(r))return c6(r)&&(await this._removeSession(),await qs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:o}=n;if(o)throw o;if(!a.session)throw new Xs;const i=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Do(this.storage,this.storageKey));const{data:d,error:u}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:aa});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Xs;const r=Date.now()/1e3;let n=r,a=!0,o=null;const{payload:i}=rf(t.access_token);if(i.exp&&(n=i.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(Ke(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Xs;const{session:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!An())throw new ld("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ld(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Gx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ld("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Gx("No code detected.");const{data:p,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!i||!d)throw new ld("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let f=u+m;c&&(f=parseInt(c));const x=f-u;x*1e3<=Bo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${m}s`);const y=f-m;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,u);const{data:g,error:w}=await this._getUser(o);if(w)throw w;const v={provider_token:n,provider_refresh_token:a,access_token:o,expires_in:m,expires_at:f,refresh_token:i,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(Ke(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ha(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return{error:o};const i=(n=a.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(l6(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await qs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=y6(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Do(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(Ke(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async o=>{var i,l,c,d,u;const{data:m,error:f}=o;if(f)throw f;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",x,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return An()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ke(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:o,error:i}=r;if(i)throw i;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await _6(async a=>(a>0&&await j6(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ys})),(a,o)=>{const i=200*Math.pow(2,a);return o&&tf(o)&&Date.now()+i-n<Bo})}catch(n){if(this._debug(r,"error",n),Ke(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),An()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Ha(this.storage,this.storageKey);if(a&&this.userStorage){let i=await Ha(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:a.user},await Uo(this.userStorage,this.storageKey+"-user",i)),a.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:nf()}else if(a&&!a.user&&!a.user){const i=await Ha(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(a.user=i.user,await qs(this.storage,this.storageKey+"-user"),await Uo(this.storage,this.storageKey,a)):a.user=nf()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ef;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${ef}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),tf(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(a.access_token);!l&&(i!=null&&i.user)?(a.user=i.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Xs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new rh;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new Xs;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(a,"error",o),Ke(o)){const i={session:null,error:o};return tf(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Uo(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=Xx(a);await Uo(this.storage,this.storageKey,o)}else{const a=Xx(r);await Uo(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await qs(this.storage,this.storageKey),await qs(this.storage,this.storageKey+"-code-verifier"),await qs(this.storage,this.storageKey+"-user"),this.userStorage&&await qs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&An()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Bo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Bo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Bo}ms, refresh threshold is ${Dm} ticks`),a<=Dm&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!An()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await Do(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);a.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;return o?{data:null,error:o}:await it(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await it(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return{data:null,error:o};const{data:i,error:l}=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;return o?{data:null,error:o}:await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:o}=t;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=rf(a.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+o6>a)return n;const{data:o,error:i}=await it(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,n=o.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:y}=await this.getSession();if(y||!x.session)return{data:null,error:y};n=x.session.access_token}const{header:a,payload:o,signature:i,raw:{header:l,payload:c}}=rf(n);r!=null&&r.allowExpired||P6(o.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:o,header:a,signature:i},error:null}}const u=O6(a.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,i,p6(`${l}.${c}`)))throw new Im("Invalid JWT signature");return{data:{claims:o,header:a,signature:i},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}ic.nextInstanceID=0;const G6=ic;class K6 extends G6{constructor(t){super(t)}}var Y6=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(m){i(m)}}function c(u){try{d(n.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class Q6{constructor(t,r,n){var a,o,i;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=e6(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:qT,realtime:KT,auth:Object.assign(Object.assign({},GT),{storageKey:d}),global:HT},m=t6(n??{},u);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(f,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=m.auth)!==null&&i!==void 0?i:{},this.headers,m.global.fetch),this.fetch=XT(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new mT(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new UT(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new VE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Y6(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:o,flowType:i,lock:l,debug:c},d,u){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new K6({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:i,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new TT(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const yg=(e,t,r)=>new Q6(e,t,r);function J6(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}J6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const gs="https://ikeicbxkjgdhhofuhehr.supabase.co",bg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlrZWljYnhramdkaGhvZnVoZWhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3ODQzNzQsImV4cCI6MjA2OTM2MDM3NH0.4Qv_Z37pH_clIOHBDnNg_e0qpJ4AAEU20YvP_ETxOGc",Kn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlrZWljYnhramdkaGhvZnVoZWhyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Mz";console.log("SupabaseKeys:   :",{url:gs,anonKey:`${bg.substring(0,10)}...`,serviceKey:`${Kn.substring(0,10)}...`});const lc=bg,hi=Kn;console.log("SUPABASE_URL:",gs);console.log("SUPABASE_KEY ( 15 ):",lc.substring(0,15)+"...");console.log("SUPABASE_SERVICE_KEY ( 15 ):",hi.substring(0,15)+"...");const de=yg(gs,lc,{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"ketama-auth-storage",detectSessionInUrl:!0}}),Gt=yg(gs,hi,{auth:{autoRefreshToken:!1,persistSession:!1},global:{headers:{apikey:hi,Authorization:`Bearer ${hi}`}}}),En="profiles",ls="guardians",Ta="students",Il="student_teacher_history",X6="sessions",Z6="session_students",eP="daily_followups",tP="monthly_exams",rP="student_monthly_result",Ki="circle_sessions";let $l=null;const Bn=e=>{$l=e;try{localStorage.setItem("ketama_user_jwt",e),console.log("  JWT token :",e.substring(0,15)+"...")}catch(t){console.error("   JWT token  localStorage:",t)}},nP=()=>{if(!$l)try{const e=localStorage.getItem("ketama_user_jwt");e&&($l=e,console.log("  JWT token  localStorage:",e.substring(0,15)+"..."))}catch(e){console.error("   JWT token  localStorage:",e)}return $l},sP=()=>{$l=null;try{localStorage.removeItem("ketama_user_jwt"),console.log("  JWT token ")}catch(e){console.error("   JWT token  localStorage:",e)}},aP=e=>(console.log("  Supabase  JWT token:",e.substring(0,15)+"..."),yg(gs,lc,{global:{headers:{apikey:lc,Authorization:`Bearer ${e}`}}})),nv=Object.freeze(Object.defineProperty({__proto__:null,CIRCLE_SESSIONS_TABLE:Ki,DAILY_FOLLOWUPS_TABLE:eP,GUARDIANS_TABLE:ls,MONTHLY_EXAMS_TABLE:tP,MONTHLY_RESULTS_VIEW:rP,PROFILES_TABLE:En,SESSIONS_TABLE:X6,SESSION_STUDENTS_TABLE:Z6,STUDENTS_TABLE:Ta,SUPABASE_KEY:lc,SUPABASE_SERVICE_KEY:hi,clearUserJWTToken:sP,createSupabaseClientWithToken:aP,default:de,getUserJWTToken:nP,setUserJWTToken:Bn,supabase:de,supabaseAdmin:Gt,teacher_HISTORY_TABLE:Il},Symbol.toStringTag,{value:"Module"}));function oP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fj={exports:{}};const iP={},lP=Object.freeze(Object.defineProperty({__proto__:null,default:iP},Symbol.toStringTag,{value:"Module"})),cP=Gv(lP);(function(e){/**
 * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bcrypt.js for details
 */(function(t,r){typeof oP=="function"&&e&&e.exports?e.exports=r():(t.dcodeIO=t.dcodeIO||{}).bcrypt=r()})(mn,function(){var t={},r=null;function n(T){if(e&&e.exports)try{return cP.randomBytes(T)}catch{}try{var _;return(self.crypto||self.msCrypto).getRandomValues(_=new Uint32Array(T)),Array.prototype.slice.call(_)}catch{}if(!r)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return r(T)}var a=!1;try{n(1),a=!0}catch{}r=null,t.setRandomFallback=function(T){r=T},t.genSaltSync=function(T,_){if(T=T||g,typeof T!="number")throw Error("Illegal arguments: "+typeof T+", "+typeof _);T<4?T=4:T>31&&(T=31);var O=[];return O.push("$2a$"),T<10&&O.push("0"),O.push(T.toString()),O.push("$"),O.push(m(n(y),y)),O.join("")},t.genSalt=function(T,_,O){if(typeof _=="function"&&(O=_,_=void 0),typeof T=="function"&&(O=T,T=void 0),typeof T>"u")T=g;else if(typeof T!="number")throw Error("illegal arguments: "+typeof T);function j(k){i(function(){try{k(null,t.genSaltSync(T))}catch(A){k(A)}})}if(O){if(typeof O!="function")throw Error("Illegal callback: "+typeof O);j(O)}else return new Promise(function(k,A){j(function(F,R){if(F){A(F);return}k(R)})})},t.hashSync=function(T,_){if(typeof _>"u"&&(_=g),typeof _=="number"&&(_=t.genSaltSync(_)),typeof T!="string"||typeof _!="string")throw Error("Illegal arguments: "+typeof T+", "+typeof _);return J(T,_)},t.hash=function(T,_,O,j){function k(A){typeof T=="string"&&typeof _=="number"?t.genSalt(_,function(F,R){J(T,R,A,j)}):typeof T=="string"&&typeof _=="string"?J(T,_,A,j):i(A.bind(this,Error("Illegal arguments: "+typeof T+", "+typeof _)))}if(O){if(typeof O!="function")throw Error("Illegal callback: "+typeof O);k(O)}else return new Promise(function(A,F){k(function(R,z){if(R){F(R);return}A(z)})})};function o(T,_){for(var O=0,j=0,k=0,A=T.length;k<A;++k)T.charCodeAt(k)===_.charCodeAt(k)?++O:++j;return O<0?!1:j===0}t.compareSync=function(T,_){if(typeof T!="string"||typeof _!="string")throw Error("Illegal arguments: "+typeof T+", "+typeof _);return _.length!==60?!1:o(t.hashSync(T,_.substr(0,_.length-31)),_)},t.compare=function(T,_,O,j){function k(A){if(typeof T!="string"||typeof _!="string"){i(A.bind(this,Error("Illegal arguments: "+typeof T+", "+typeof _)));return}if(_.length!==60){i(A.bind(this,null,!1));return}t.hash(T,_.substr(0,29),function(F,R){F?A(F):A(null,o(R,_))},j)}if(O){if(typeof O!="function")throw Error("Illegal callback: "+typeof O);k(O)}else return new Promise(function(A,F){k(function(R,z){if(R){F(R);return}A(z)})})},t.getRounds=function(T){if(typeof T!="string")throw Error("Illegal arguments: "+typeof T);return parseInt(T.split("$")[2],10)},t.getSalt=function(T){if(typeof T!="string")throw Error("Illegal arguments: "+typeof T);if(T.length!==60)throw Error("Illegal hash length: "+T.length+" != 60");return T.substring(0,29)};var i=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function l(T){var _=[],O=0;return x.encodeUTF16toUTF8(function(){return O>=T.length?null:T.charCodeAt(O++)},function(j){_.push(j)}),_}var c="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),d=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],u=String.fromCharCode;function m(T,_){var O=0,j=[],k,A;if(_<=0||_>T.length)throw Error("Illegal len: "+_);for(;O<_;){if(k=T[O++]&255,j.push(c[k>>2&63]),k=(k&3)<<4,O>=_){j.push(c[k&63]);break}if(A=T[O++]&255,k|=A>>4&15,j.push(c[k&63]),k=(A&15)<<2,O>=_){j.push(c[k&63]);break}A=T[O++]&255,k|=A>>6&3,j.push(c[k&63]),j.push(c[A&63])}return j.join("")}function f(T,_){var O=0,j=T.length,k=0,A=[],F,R,z,Y,W,Z;if(_<=0)throw Error("Illegal len: "+_);for(;O<j-1&&k<_&&(Z=T.charCodeAt(O++),F=Z<d.length?d[Z]:-1,Z=T.charCodeAt(O++),R=Z<d.length?d[Z]:-1,!(F==-1||R==-1||(W=F<<2>>>0,W|=(R&48)>>4,A.push(u(W)),++k>=_||O>=j)||(Z=T.charCodeAt(O++),z=Z<d.length?d[Z]:-1,z==-1)||(W=(R&15)<<4>>>0,W|=(z&60)>>2,A.push(u(W)),++k>=_||O>=j)));)Z=T.charCodeAt(O++),Y=Z<d.length?d[Z]:-1,W=(z&3)<<6>>>0,W|=Y,A.push(u(W)),++k;var B=[];for(O=0;O<k;O++)B.push(A[O].charCodeAt(0));return B}var x=function(){var T={};return T.MAX_CODEPOINT=1114111,T.encodeUTF8=function(_,O){var j=null;for(typeof _=="number"&&(j=_,_=function(){return null});j!==null||(j=_())!==null;)j<128?O(j&127):j<2048?(O(j>>6&31|192),O(j&63|128)):j<65536?(O(j>>12&15|224),O(j>>6&63|128),O(j&63|128)):(O(j>>18&7|240),O(j>>12&63|128),O(j>>6&63|128),O(j&63|128)),j=null},T.decodeUTF8=function(_,O){for(var j,k,A,F,R=function(z){z=z.slice(0,z.indexOf(null));var Y=Error(z.toString());throw Y.name="TruncatedError",Y.bytes=z,Y};(j=_())!==null;)if(!(j&128))O(j);else if((j&224)===192)(k=_())===null&&R([j,k]),O((j&31)<<6|k&63);else if((j&240)===224)((k=_())===null||(A=_())===null)&&R([j,k,A]),O((j&15)<<12|(k&63)<<6|A&63);else if((j&248)===240)((k=_())===null||(A=_())===null||(F=_())===null)&&R([j,k,A,F]),O((j&7)<<18|(k&63)<<12|(A&63)<<6|F&63);else throw RangeError("Illegal starting byte: "+j)},T.UTF16toUTF8=function(_,O){for(var j,k=null;(j=k!==null?k:_())!==null;){if(j>=55296&&j<=57343&&(k=_())!==null&&k>=56320&&k<=57343){O((j-55296)*1024+k-56320+65536),k=null;continue}O(j)}k!==null&&O(k)},T.UTF8toUTF16=function(_,O){var j=null;for(typeof _=="number"&&(j=_,_=function(){return null});j!==null||(j=_())!==null;)j<=65535?O(j):(j-=65536,O((j>>10)+55296),O(j%1024+56320)),j=null},T.encodeUTF16toUTF8=function(_,O){T.UTF16toUTF8(_,function(j){T.encodeUTF8(j,O)})},T.decodeUTF8toUTF16=function(_,O){T.decodeUTF8(_,function(j){T.UTF8toUTF16(j,O)})},T.calculateCodePoint=function(_){return _<128?1:_<2048?2:_<65536?3:4},T.calculateUTF8=function(_){for(var O,j=0;(O=_())!==null;)j+=T.calculateCodePoint(O);return j},T.calculateUTF16asUTF8=function(_){var O=0,j=0;return T.UTF16toUTF8(_,function(k){++O,j+=T.calculateCodePoint(k)}),[O,j]},T}();Date.now=Date.now||function(){return+new Date};var y=16,g=10,w=16,v=100,p=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],b=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],N=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function S(T,_,O,j){var k,A=T[_],F=T[_+1];return A^=O[0],k=j[A>>>24],k+=j[256|A>>16&255],k^=j[512|A>>8&255],k+=j[768|A&255],F^=k^O[1],k=j[F>>>24],k+=j[256|F>>16&255],k^=j[512|F>>8&255],k+=j[768|F&255],A^=k^O[2],k=j[A>>>24],k+=j[256|A>>16&255],k^=j[512|A>>8&255],k+=j[768|A&255],F^=k^O[3],k=j[F>>>24],k+=j[256|F>>16&255],k^=j[512|F>>8&255],k+=j[768|F&255],A^=k^O[4],k=j[A>>>24],k+=j[256|A>>16&255],k^=j[512|A>>8&255],k+=j[768|A&255],F^=k^O[5],k=j[F>>>24],k+=j[256|F>>16&255],k^=j[512|F>>8&255],k+=j[768|F&255],A^=k^O[6],k=j[A>>>24],k+=j[256|A>>16&255],k^=j[512|A>>8&255],k+=j[768|A&255],F^=k^O[7],k=j[F>>>24],k+=j[256|F>>16&255],k^=j[512|F>>8&255],k+=j[768|F&255],A^=k^O[8],k=j[A>>>24],k+=j[256|A>>16&255],k^=j[512|A>>8&255],k+=j[768|A&255],F^=k^O[9],k=j[F>>>24],k+=j[256|F>>16&255],k^=j[512|F>>8&255],k+=j[768|F&255],A^=k^O[10],k=j[A>>>24],k+=j[256|A>>16&255],k^=j[512|A>>8&255],k+=j[768|A&255],F^=k^O[11],k=j[F>>>24],k+=j[256|F>>16&255],k^=j[512|F>>8&255],k+=j[768|F&255],A^=k^O[12],k=j[A>>>24],k+=j[256|A>>16&255],k^=j[512|A>>8&255],k+=j[768|A&255],F^=k^O[13],k=j[F>>>24],k+=j[256|F>>16&255],k^=j[512|F>>8&255],k+=j[768|F&255],A^=k^O[14],k=j[A>>>24],k+=j[256|A>>16&255],k^=j[512|A>>8&255],k+=j[768|A&255],F^=k^O[15],k=j[F>>>24],k+=j[256|F>>16&255],k^=j[512|F>>8&255],k+=j[768|F&255],A^=k^O[16],T[_]=F^O[w+1],T[_+1]=A,T}function E(T,_){for(var O=0,j=0;O<4;++O)j=j<<8|T[_]&255,_=(_+1)%T.length;return{key:j,offp:_}}function D(T,_,O){for(var j=0,k=[0,0],A=_.length,F=O.length,R,z=0;z<A;z++)R=E(T,j),j=R.offp,_[z]=_[z]^R.key;for(z=0;z<A;z+=2)k=S(k,0,_,O),_[z]=k[0],_[z+1]=k[1];for(z=0;z<F;z+=2)k=S(k,0,_,O),O[z]=k[0],O[z+1]=k[1]}function I(T,_,O,j){for(var k=0,A=[0,0],F=O.length,R=j.length,z,Y=0;Y<F;Y++)z=E(_,k),k=z.offp,O[Y]=O[Y]^z.key;for(k=0,Y=0;Y<F;Y+=2)z=E(T,k),k=z.offp,A[0]^=z.key,z=E(T,k),k=z.offp,A[1]^=z.key,A=S(A,0,O,j),O[Y]=A[0],O[Y+1]=A[1];for(Y=0;Y<R;Y+=2)z=E(T,k),k=z.offp,A[0]^=z.key,z=E(T,k),k=z.offp,A[1]^=z.key,A=S(A,0,O,j),j[Y]=A[0],j[Y+1]=A[1]}function ee(T,_,O,j,k){var A=N.slice(),F=A.length,R;if(O<4||O>31)if(R=Error("Illegal number of rounds (4-31): "+O),j){i(j.bind(this,R));return}else throw R;if(_.length!==y)if(R=Error("Illegal salt length: "+_.length+" != "+y),j){i(j.bind(this,R));return}else throw R;O=1<<O>>>0;var z,Y,W=0,Z;Int32Array?(z=new Int32Array(p),Y=new Int32Array(b)):(z=p.slice(),Y=b.slice()),I(_,T,z,Y);function B(){if(k&&k(W/O),W<O)for(var K=Date.now();W<O&&(W=W+1,D(T,z,Y),D(_,z,Y),!(Date.now()-K>v)););else{for(W=0;W<64;W++)for(Z=0;Z<F>>1;Z++)S(A,Z<<1,z,Y);var ae=[];for(W=0;W<F;W++)ae.push((A[W]>>24&255)>>>0),ae.push((A[W]>>16&255)>>>0),ae.push((A[W]>>8&255)>>>0),ae.push((A[W]&255)>>>0);if(j){j(null,ae);return}else return ae}j&&i(B)}if(typeof j<"u")B();else for(var X;;)if(typeof(X=B())<"u")return X||[]}function J(T,_,O,j){var k;if(typeof T!="string"||typeof _!="string")if(k=Error("Invalid string / salt: Not a string"),O){i(O.bind(this,k));return}else throw k;var A,F;if(_.charAt(0)!=="$"||_.charAt(1)!=="2")if(k=Error("Invalid salt version: "+_.substring(0,2)),O){i(O.bind(this,k));return}else throw k;if(_.charAt(2)==="$")A=String.fromCharCode(0),F=3;else{if(A=_.charAt(2),A!=="a"&&A!=="b"&&A!=="y"||_.charAt(3)!=="$")if(k=Error("Invalid salt revision: "+_.substring(2,4)),O){i(O.bind(this,k));return}else throw k;F=4}if(_.charAt(F+2)>"$")if(k=Error("Missing salt rounds"),O){i(O.bind(this,k));return}else throw k;var R=parseInt(_.substring(F,F+1),10)*10,z=parseInt(_.substring(F+1,F+2),10),Y=R+z,W=_.substring(F+3,F+25);T+=A>="a"?"\0":"";var Z=l(T),B=f(W,y);function X(K){var ae=[];return ae.push("$2"),A>="a"&&ae.push(A),ae.push("$"),Y<10&&ae.push("0"),ae.push(Y.toString()),ae.push("$"),ae.push(m(B,B.length)),ae.push(m(K,N.length*4-1)),ae.join("")}if(typeof O>"u")return X(ee(Z,B,Y));ee(Z,B,Y,function(K,ae){K?O(K,null):O(null,X(ae))},j)}return t.encodeBase64=m,t.decodeBase64=f,t})})(fj);var mj=fj.exports;const kc=async e=>await mj.hash(e,10),gj=async(e,t)=>await mj.compare(e,t);let pj=null;const xj=e=>`${e.toLowerCase()}@kotama.example.com`,vj=async(e,t)=>{try{const r=xj(e);console.log("     :",r);const{data:n,error:a}=await de.auth.signInWithPassword({email:r,password:t});return a?a.message.includes("Invalid login credentials")?(console.log("        "),{success:!1,error:{message:"     "}}):(console.error("   :",a.message),{success:!1,error:a}):(console.log("       "),Bn(n.session.access_token),pj=n.user,{success:!0,user:n.user,token:n.session.access_token})}catch(r){return console.error("     :",r),{success:!1,error:{message:"      "}}}},dP=async(e,t)=>{var r;try{if(console.log("    :",{id:e.id,username:e.username,role:e.role}),!e.password_hash)return console.error("     !"),{success:!1,error:{message:"   "}};console.log("   ..."),console.log("password_hash :",e.password_hash.substring(0,20)+"...");try{const u=await gj(t,e.password_hash);if(console.log("    :",u),!u)return console.error("    "),{success:!1,error:{message:"   "}}}catch(u){if(console.error("      :",u),t!==e.password_hash)return{success:!1,error:{message:"   "}};console.log("      ")}console.log("      ...");const n=await vj(e.username,t);if(n.success)return console.log("      "),{success:!0,user:e,token:n.token};console.log("         ...");const a=await yj(e,t);if(a.success&&a.session){console.log("          token");const u=a.session.access_token;return Bn(u),{success:!0,user:e,token:u}}console.log("   JWT token   ...");const{data:o,error:i}=await de.auth.getSession();i&&console.error("    :",i.message);const l=(r=o==null?void 0:o.session)==null?void 0:r.access_token;if(l)return console.log("   JWT token   "),Bn(l),{success:!0,user:e,token:l};console.log("    JWT token       ...");const c=await de.auth.signInAnonymously();if(c.error){console.error("    :",c.error.message),console.log("  token    ...");try{const u=hi;return Bn(u),console.log("  token    "),{success:!0,user:e,token:u}}catch(u){return console.error("  token :",u),{success:!1,error:c.error}}}const d=c.data.session.access_token;return console.log("   token  "),Bn(d),{success:!0,user:e,token:d}}catch(n){return console.error("      :",n),{success:!1,error:n}}},yj=async(e,t)=>{var r,n;try{const a=xj(e.username);console.log("      :",{email:a,username:e.username});try{const{data:l,error:c}=await de.auth.signInWithPassword({email:a,password:t});if(l&&l.session)return console.log("         "),Bn(l.session.access_token),{success:!0,session:l.session,user:l.user}}catch(l){console.log("        :",l)}console.log("      ..."),console.log("  :",{email:a,hasPassword:!!t,metaData:{full_name:e.full_name,role:e.role,username:e.username,custom_profile_id:e.id}});const{data:o,error:i}=await de.auth.signUp({email:a,password:t,options:{data:{full_name:e.full_name,role:e.role,username:e.username,custom_profile_id:e.id}}});return i?(console.error("       :",i.message),{success:!1,error:i}):(console.log("       :",{userId:(r=o.user)==null?void 0:r.id,email:(n=o.user)==null?void 0:n.email}),{success:!0,user:o.user,session:o.session})}catch(a){return console.error("     :",a),{success:!1,error:a}}},xu=async()=>{const{error:e}=await de.auth.signOut();return e?(console.error("   :",e.message),{success:!1,error:e}):(Bn(null),pj=null,{success:!0})},uP=async()=>{try{console.log("    ...");const{data:e,error:t}=await de.auth.getSession();return t?(console.error("    :",t.message),{success:!1,error:t}):e!=null&&e.session?(console.log("    :",{userId:e.session.user.id,expires:new Date(e.session.expires_at*1e3).toISOString()}),Bn(e.session.access_token),{success:!0,isAuthenticated:!0,user:e.session.user,token:e.session.access_token}):(console.log("      "),{success:!0,isAuthenticated:!1})}catch(e){return console.error("       :",e),{success:!1,error:e}}},hP=async e=>{try{const t=de.auth.admin;if(!t)return{success:!1,message:"     "};const{error:r}=await t.deleteUser(e);return r?(console.error("      :",r),{success:!1,message:`   : ${r.message}`}):{success:!0,message:"   "}}catch(t){return console.error("     :",t),{success:!1,message:"     "}}};function fP({currentPath:e,onNavigate:t,userRole:r,currentUser:n,onLogout:a,onSidebarToggle:o}){const i=l=>{switch(l){case"superadmin":return"";case"admin":return"";case"teacher":return"";case"guardian":return" ";default:return""}};return s.jsx(s.Fragment,{children:s.jsx("header",{className:"bg-gradient-to-r from-green-950 via-green-900 to-green-950 border-b border-green-800/60 shadow-xl backdrop-blur-md text-white fixed top-0 right-0 left-0 z-50 h-16 md:h-16",children:s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 h-full flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:`p-1 bg-gradient-to-br from-green-50 via-white to-green-100 \r
                        rounded-full border border-green-300/60 shadow-xl \r
                        cursor-pointer hover:scale-110 hover:shadow-2xl \r
                        hover:ring-10 hover:ring-green-400/60 transition-all duration-300`,onClick:()=>t("/"),title:" ",children:s.jsx("img",{src:U1,alt:"  ",className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 object-contain drop-shadow-md"})}),s.jsxs("div",{className:"text-right",children:[s.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold leading-tight text-green-100 drop-shadow-sm",children:" "}),s.jsx("p",{className:"text-xs sm:text-sm text-green-300/80 hidden sm:block",children:"    "})]})]}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-4",children:[r&&n&&s.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-green-800/30 border border-green-700/40 px-2 sm:px-3 py-1 sm:py-1.5 rounded-xl cursor-pointer hover:bg-green-700/50 hover:border-green-600/60 transition-all duration-300 shadow-md",onClick:()=>t("/profile"),title:"   ",children:[s.jsx(ci,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-300"}),s.jsxs("span",{className:"text-xs sm:text-sm text-green-100",children:[" ",s.jsx("span",{className:"font-semibold",children:n.full_name})," | ",s.jsx("span",{className:"text-green-300/80",children:i(r)})]})]}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t("/"),className:"text-green-100 hover:bg-green-800/50 rounded-xl transition-all duration-300 h-8 w-8 sm:h-9 sm:w-9",title:" ",children:s.jsx(Vw,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t("/parent-inquiry"),className:"text-green-100 hover:bg-green-800/50 rounded-xl transition-all duration-300 h-8 w-8 sm:h-9 sm:w-9",title:"  ",children:s.jsx(Nr,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),r?s.jsx(H,{variant:"ghost",size:"icon",onClick:async()=>{a&&(await xu(),a())},className:"text-red-300 hover:bg-red-800/40 hover:text-red-200 rounded-xl transition-all duration-300 h-8 w-8 sm:h-9 sm:w-9",title:" ",children:s.jsx(xm,{className:"h-4 w-4 sm:h-5 sm:w-5"})}):s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t("/login"),className:"text-green-100 hover:bg-green-800/50 rounded-xl transition-all duration-300 h-8 w-8 sm:h-9 sm:w-9",title:" ",children:s.jsx(_4,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),r&&s.jsx("div",{className:"md:hidden",children:s.jsxs(H,{variant:"ghost",size:"icon",onClick:o,className:`group relative h-9 w-9 sm:h-10 sm:w-10 rounded-2xl \r
                        bg-gradient-to-br from-green-700/30 via-green-800/40 to-green-900/40 \r
                        border border-green-600/40 \r
                        hover:from-green-600/40 hover:via-green-700/50 hover:to-green-800/60 \r
                        hover:border-green-500/60\r
                        text-green-100 hover:text-white \r
                        shadow-inner shadow-green-900/40 hover:shadow-green-800/60 \r
                        transition-all duration-300`,title:" ","aria-label":"   ",children:[s.jsx("span",{className:"absolute inset-0 rounded-2xl ring-1 ring-inset ring-green-500/25 group-hover:ring-green-300/50 transition-all duration-300"}),s.jsx(Kw,{className:"h-5 w-5 sm:h-6 sm:w-6 drop-shadow-[0_0_4px_rgba(34,197,94,0.35)] group-active:scale-90 transition-transform duration-200"}),s.jsx("span",{className:"absolute -top-1 -left-1 h-2 w-2 rounded-full bg-emerald-400/70 animate-pulse shadow shadow-emerald-600/40"})]})})]})]})]})})})}var af=0;function wg(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??sv()),document.body.insertAdjacentElement("beforeend",e[1]??sv()),af++,()=>{af===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),af--}},[])}function sv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var of="focusScope.autoFocusOnMount",lf="focusScope.autoFocusOnUnmount",av={bubbles:!1,cancelable:!0},mP="FocusScope",nh=h.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=h.useState(null),d=en(a),u=en(o),m=h.useRef(null),f=jt(t,g=>c(g)),x=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(n){let g=function(b){if(x.paused||!l)return;const N=b.target;l.contains(N)?m.current=N:Zs(m.current,{select:!0})},w=function(b){if(x.paused||!l)return;const N=b.relatedTarget;N!==null&&(l.contains(N)||Zs(m.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&Zs(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const p=new MutationObserver(v);return l&&p.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),p.disconnect()}}},[n,l,x.paused]),h.useEffect(()=>{if(l){iv.add(x);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(of,av);l.addEventListener(of,d),l.dispatchEvent(v),v.defaultPrevented||(gP(bP(bj(l)),{select:!0}),document.activeElement===g&&Zs(l))}return()=>{l.removeEventListener(of,d),setTimeout(()=>{const v=new CustomEvent(lf,av);l.addEventListener(lf,u),l.dispatchEvent(v),v.defaultPrevented||Zs(g??document.body,{select:!0}),l.removeEventListener(lf,u),iv.remove(x)},0)}}},[l,d,u,x]);const y=h.useCallback(g=>{if(!r&&!n||x.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const p=g.currentTarget,[b,N]=pP(p);b&&N?!g.shiftKey&&v===N?(g.preventDefault(),r&&Zs(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),r&&Zs(N,{select:!0})):v===p&&g.preventDefault()}},[r,n,x.paused]);return s.jsx(Je.div,{tabIndex:-1,...i,ref:f,onKeyDown:y})});nh.displayName=mP;function gP(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Zs(n,{select:t}),document.activeElement!==r)return}function pP(e){const t=bj(e),r=ov(t,e),n=ov(t.reverse(),e);return[r,n]}function bj(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ov(e,t){for(const r of e)if(!xP(r,{upTo:t}))return r}function xP(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function vP(e){return e instanceof HTMLInputElement&&"select"in e}function Zs(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&vP(e)&&t&&e.select()}}var iv=yP();function yP(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=lv(e,t),e.unshift(t)},remove(t){var r;e=lv(e,t),(r=e[0])==null||r.resume()}}}function lv(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function bP(e){return e.filter(t=>t.tagName!=="A")}var wP=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},$o=new WeakMap,cd=new WeakMap,dd={},cf=0,wj=function(e){return e&&(e.host||wj(e.parentNode))},jP=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=wj(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},_P=function(e,t,r,n){var a=jP(t,Array.isArray(e)?e:[e]);dd[r]||(dd[r]=new WeakMap);var o=dd[r],i=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(f){if(l.has(f))u(f);else try{var x=f.getAttribute(n),y=x!==null&&x!=="false",g=($o.get(f)||0)+1,w=(o.get(f)||0)+1;$o.set(f,g),o.set(f,w),i.push(f),g===1&&y&&cd.set(f,!0),w===1&&f.setAttribute(r,"true"),y||f.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(t),l.clear(),cf++,function(){i.forEach(function(m){var f=$o.get(m)-1,x=o.get(m)-1;$o.set(m,f),o.set(m,x),f||(cd.has(m)||m.removeAttribute(n),cd.delete(m)),x||m.removeAttribute(r)}),cf--,cf||($o=new WeakMap,$o=new WeakMap,cd=new WeakMap,dd={})}},jg=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=t||wP(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),_P(n,a,r,"aria-hidden")):function(){return null}},ns=function(){return ns=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ns.apply(this,arguments)};function jj(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function NP(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var Id="right-scroll-bar-position",$d="width-before-scroll-bar",SP="with-scroll-bars-hidden",kP="--removed-body-scroll-bar-size";function df(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function CP(e,t){var r=h.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var EP=typeof window<"u"?h.useLayoutEffect:h.useEffect,cv=new WeakMap;function TP(e,t){var r=CP(t||null,function(n){return e.forEach(function(a){return df(a,n)})});return EP(function(){var n=cv.get(r);if(n){var a=new Set(n),o=new Set(e),i=r.current;a.forEach(function(l){o.has(l)||df(l,null)}),o.forEach(function(l){a.has(l)||df(l,i)})}cv.set(r,e)},[e]),r}function PP(e){return e}function OP(e,t){t===void 0&&(t=PP);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var i=t(o,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(n=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(o),i=r}var c=function(){var u=i;i=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){i.push(u),d()},filter:function(u){return i=i.filter(u),r}}}};return a}function AP(e){e===void 0&&(e={});var t=OP(null);return t.options=ns({async:!0,ssr:!1},e),t}var _j=function(e){var t=e.sideCar,r=jj(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return h.createElement(n,ns({},r))};_j.isSideCarExport=!0;function DP(e,t){return e.useMedium(t),_j}var Nj=AP(),uf=function(){},sh=h.forwardRef(function(e,t){var r=h.useRef(null),n=h.useState({onScrollCapture:uf,onWheelCapture:uf,onTouchMoveCapture:uf}),a=n[0],o=n[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,f=e.sideCar,x=e.noIsolation,y=e.inert,g=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,p=e.gapMode,b=jj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=f,S=TP([r,t]),E=ns(ns({},b),a);return h.createElement(h.Fragment,null,u&&h.createElement(N,{sideCar:Nj,removeScrollBar:d,shards:m,noIsolation:x,inert:y,setCallbacks:o,allowPinchZoom:!!g,lockRef:r,gapMode:p}),i?h.cloneElement(h.Children.only(l),ns(ns({},E),{ref:S})):h.createElement(v,ns({},E,{className:c,ref:S}),l))});sh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sh.classNames={fullWidth:$d,zeroRight:Id};var dv,MP=function(){if(dv)return dv;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RP(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=MP();return t&&e.setAttribute("nonce",t),e}function IP(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function $P(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var LP=function(){var e=0,t=null;return{add:function(r){e==0&&(t=RP())&&(IP(t,r),$P(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},FP=function(){var e=LP();return function(t,r){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Sj=function(){var e=FP(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},zP={left:0,top:0,right:0,gap:0},hf=function(e){return parseInt(e||"",10)||0},BP=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[hf(r),hf(n),hf(a)]},UP=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return zP;var t=BP(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},WP=Sj(),fi="data-scroll-locked",VP=function(e,t,r,n){var a=e.left,o=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(SP,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(fi,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Id,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat($d,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Id," .").concat(Id,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat($d," .").concat($d,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(fi,`] {
    `).concat(kP,": ").concat(l,`px;
  }
`)},uv=function(){var e=parseInt(document.body.getAttribute(fi)||"0",10);return isFinite(e)?e:0},HP=function(){h.useEffect(function(){return document.body.setAttribute(fi,(uv()+1).toString()),function(){var e=uv()-1;e<=0?document.body.removeAttribute(fi):document.body.setAttribute(fi,e.toString())}},[])},qP=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;HP();var o=h.useMemo(function(){return UP(a)},[a]);return h.createElement(WP,{styles:VP(o,!t,a,r?"":"!important")})},$m=!1;if(typeof window<"u")try{var ud=Object.defineProperty({},"passive",{get:function(){return $m=!0,!0}});window.addEventListener("test",ud,ud),window.removeEventListener("test",ud,ud)}catch{$m=!1}var Lo=$m?{passive:!1}:!1,GP=function(e){return e.tagName==="TEXTAREA"},kj=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!GP(e)&&r[t]==="visible")},KP=function(e){return kj(e,"overflowY")},YP=function(e){return kj(e,"overflowX")},hv=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=Cj(e,n);if(a){var o=Ej(e,n),i=o[1],l=o[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},QP=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},JP=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Cj=function(e,t){return e==="v"?KP(t):YP(t)},Ej=function(e,t){return e==="v"?QP(t):JP(t)},XP=function(e,t){return e==="h"&&t==="rtl"?-1:1},ZP=function(e,t,r,n,a){var o=XP(e,window.getComputedStyle(t).direction),i=o*n,l=r.target,c=t.contains(l),d=!1,u=i>0,m=0,f=0;do{var x=Ej(e,l),y=x[0],g=x[1],w=x[2],v=g-w-o*y;(y||v)&&Cj(e,l)&&(m+=v,f+=y),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(a&&Math.abs(m)<1||!a&&i>m)||!u&&(a&&Math.abs(f)<1||!a&&-i>f))&&(d=!0),d},hd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},fv=function(e){return[e.deltaX,e.deltaY]},mv=function(e){return e&&"current"in e?e.current:e},e8=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t8=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},r8=0,Fo=[];function n8(e){var t=h.useRef([]),r=h.useRef([0,0]),n=h.useRef(),a=h.useState(r8++)[0],o=h.useState(Sj)[0],i=h.useRef(e);h.useEffect(function(){i.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=NP([e.lockRef.current],(e.shards||[]).map(mv),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var v=hd(g),p=r.current,b="deltaX"in g?g.deltaX:p[0]-v[0],N="deltaY"in g?g.deltaY:p[1]-v[1],S,E=g.target,D=Math.abs(b)>Math.abs(N)?"h":"v";if("touches"in g&&D==="h"&&E.type==="range")return!1;var I=hv(D,E);if(!I)return!0;if(I?S=D:(S=D==="v"?"h":"v",I=hv(D,E)),!I)return!1;if(!n.current&&"changedTouches"in g&&(b||N)&&(n.current=S),!S)return!0;var ee=n.current||S;return ZP(ee,w,g,ee==="h"?b:N,!0)},[]),c=h.useCallback(function(g){var w=g;if(!(!Fo.length||Fo[Fo.length-1]!==o)){var v="deltaY"in w?fv(w):hd(w),p=t.current.filter(function(S){return S.name===w.type&&(S.target===w.target||w.target===S.shadowParent)&&e8(S.delta,v)})[0];if(p&&p.should){w.cancelable&&w.preventDefault();return}if(!p){var b=(i.current.shards||[]).map(mv).filter(Boolean).filter(function(S){return S.contains(w.target)}),N=b.length>0?l(w,b[0]):!i.current.noIsolation;N&&w.cancelable&&w.preventDefault()}}},[]),d=h.useCallback(function(g,w,v,p){var b={name:g,delta:w,target:v,should:p,shadowParent:s8(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(N){return N!==b})},1)},[]),u=h.useCallback(function(g){r.current=hd(g),n.current=void 0},[]),m=h.useCallback(function(g){d(g.type,fv(g),g.target,l(g,e.lockRef.current))},[]),f=h.useCallback(function(g){d(g.type,hd(g),g.target,l(g,e.lockRef.current))},[]);h.useEffect(function(){return Fo.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Lo),document.addEventListener("touchmove",c,Lo),document.addEventListener("touchstart",u,Lo),function(){Fo=Fo.filter(function(g){return g!==o}),document.removeEventListener("wheel",c,Lo),document.removeEventListener("touchmove",c,Lo),document.removeEventListener("touchstart",u,Lo)}},[]);var x=e.removeScrollBar,y=e.inert;return h.createElement(h.Fragment,null,y?h.createElement(o,{styles:t8(a)}):null,x?h.createElement(qP,{gapMode:e.gapMode}):null)}function s8(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const a8=DP(Nj,n8);var Tj=h.forwardRef(function(e,t){return h.createElement(sh,ns({},e,{ref:t,sideCar:a8}))});Tj.classNames=sh.classNames;const _g=Tj;var Ng="Popover",[Pj,eR]=So(Ng,[Hi]),Cc=Hi(),[o8,Fa]=Pj(Ng),Oj=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:i=!1}=e,l=Cc(t),c=h.useRef(null),[d,u]=h.useState(!1),[m=!1,f]=xo({prop:n,defaultProp:a,onChange:o});return s.jsx(k1,{...l,children:s.jsx(o8,{scope:t,contentId:Es(),triggerRef:c,open:m,onOpenChange:f,onOpenToggle:h.useCallback(()=>f(x=>!x),[f]),hasCustomAnchor:d,onCustomAnchorAdd:h.useCallback(()=>u(!0),[]),onCustomAnchorRemove:h.useCallback(()=>u(!1),[]),modal:i,children:r})})};Oj.displayName=Ng;var Aj="PopoverAnchor",i8=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Fa(Aj,r),o=Cc(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return h.useEffect(()=>(i(),()=>l()),[i,l]),s.jsx(Vu,{...o,...n,ref:t})});i8.displayName=Aj;var Dj="PopoverTrigger",Mj=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Fa(Dj,r),o=Cc(r),i=jt(t,a.triggerRef),l=s.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Fj(a.open),...n,ref:i,onClick:De(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Vu,{asChild:!0,...o,children:l})});Mj.displayName=Dj;var Sg="PopoverPortal",[l8,c8]=Pj(Sg,{forceMount:void 0}),Rj=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,o=Fa(Sg,t);return s.jsx(l8,{scope:t,forceMount:r,children:s.jsx(zs,{present:r||o.open,children:s.jsx(bc,{asChild:!0,container:a,children:n})})})};Rj.displayName=Sg;var Ii="PopoverContent",Ij=h.forwardRef((e,t)=>{const r=c8(Ii,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,o=Fa(Ii,e.__scopePopover);return s.jsx(zs,{present:n||o.open,children:o.modal?s.jsx(d8,{...a,ref:t}):s.jsx(u8,{...a,ref:t})})});Ij.displayName=Ii;var d8=h.forwardRef((e,t)=>{const r=Fa(Ii,e.__scopePopover),n=h.useRef(null),a=jt(t,n),o=h.useRef(!1);return h.useEffect(()=>{const i=n.current;if(i)return jg(i)},[]),s.jsx(_g,{as:Na,allowPinchZoom:!0,children:s.jsx($j,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:De(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),u8=h.forwardRef((e,t)=>{const r=Fa(Ii,e.__scopePopover),n=h.useRef(!1),a=h.useRef(!1);return s.jsx($j,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),$j=h.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,f=Fa(Ii,r),x=Cc(r);return wg(),s.jsx(nh,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:s.jsx(Bi,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:s.jsx(cg,{"data-state":Fj(f.open),role:"dialog",id:f.contentId,...x,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Lj="PopoverClose",h8=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Fa(Lj,r);return s.jsx(Je.button,{type:"button",...n,ref:t,onClick:De(e.onClick,()=>a.onOpenChange(!1))})});h8.displayName=Lj;var f8="PopoverArrow",m8=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Cc(r);return s.jsx(dg,{...a,...n,ref:t})});m8.displayName=f8;function Fj(e){return e?"open":"closed"}var g8=Oj,p8=Mj,x8=Rj,zj=Ij;const v8=g8,y8=p8,Bj=h.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(x8,{children:s.jsx(zj,{ref:a,align:t,sideOffset:r,className:Se("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Bj.displayName=zj.displayName;function b8({userRole:e,onNavigate:t,onLogout:r,isOpen:n,setIsOpen:a}){const[o,i]=h.useState(!1),[l,c]=h.useState({circleManagement:!1,studentManagement:!1,notificationsManagement:!1,teacherSettings:!1,systemManagement:!1}),[d,u]=h.useState({}),m=v=>{u(p=>({...p,[v]:!p[v]}))},f=n!==void 0?n:o,x=a||i,y=e==="superadmin"||e==="admin"||e==="teacher",g=e==="superadmin"||e==="admin"||e==="teacher",w=[(e==="superadmin"||e==="admin"||e==="teacher")&&{icon:s.jsx(o4,{className:"h-5 w-5"}),label:" ",isSubmenu:!0,key:"circleManagement",subItems:[(e==="superadmin"||e==="admin")&&{icon:s.jsx(Pt,{className:"h-5 w-5"}),label:" ",path:"/study-circles"},(e==="superadmin"||e==="admin")&&{icon:s.jsx(ur,{className:"h-5 w-5"}),label:" ",path:"/study-circle-schedules"},(e==="superadmin"||e==="admin")&&{icon:s.jsx(Bw,{className:"h-5 w-5"}),label:" ",path:"/teacher-sessions"},{icon:s.jsx(Is,{className:"h-5 w-5"}),label:" ",path:"/attendance-record"},g&&{icon:s.jsx(i4,{className:"h-5 w-5"}),label:"  ",path:"/memorization-records"}].filter(Boolean)},(y||g)&&{icon:s.jsx(rc,{className:"h-5 w-5"}),label:" ",isSubmenu:!0,key:"studentManagement",subItems:[y&&{icon:s.jsx(ss,{className:"h-5 w-5"}),label:"  ",path:"/guardians-list"},g&&{icon:s.jsx(T4,{className:"h-5 w-5"}),label:" ",path:"/students-list"},g&&{icon:s.jsx(a4,{className:"h-5 w-5"}),label:" ",path:"/student-assessments"}].filter(Boolean)},{icon:s.jsx(Nr,{className:"h-5 w-5"}),label:"  ",path:"/parent-inquiry"},(e==="superadmin"||e==="admin"||e==="teacher")&&{icon:s.jsx(Ww,{className:"h-5 w-5"}),label:" ",isSubmenu:!0,key:"notificationsManagement",subItems:[{icon:s.jsx(Gw,{className:"h-5 w-5"}),label:" ",path:"/send-notification"},{icon:s.jsx(b4,{className:"h-5 w-5"}),label:" ",path:"/notifications-log"}]},e==="teacher"&&{icon:s.jsx(px,{className:"h-5 w-5"}),label:" ",isSubmenu:!0,key:"teacherSettings",subItems:[{icon:s.jsx(E4,{className:"h-5 w-5"}),label:" ",path:"/profile"}]},(e==="superadmin"||e==="admin")&&{icon:s.jsx(px,{className:"h-5 w-5"}),label:" ",isSubmenu:!0,key:"systemManagement",subItems:[{icon:s.jsx(Is,{className:"h-5 w-5"}),label:" ",path:"/user-management"}]}].filter(Boolean);return w.length===0?null:s.jsxs(s.Fragment,{children:[f&&s.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:()=>x(!1)}),f?s.jsx("div",{className:"w-64 h-[calc(100vh-64px)] z-50 relative",children:s.jsxs("div",{className:"flex flex-col h-full backdrop-blur-lg bg-black/50 border-l border-green-700/30 shadow-2xl animate-in fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-green-400/30 bg-gradient-to-l from-green-900/80 via-green-800/60 to-transparent",children:[s.jsx("h2",{className:"text-lg font-bold text-green-100 tracking-wide",children:" "}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>x(!1),className:"text-white hover:bg-white/20 transition-all",children:s.jsx(vo,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"flex-1 p-4 space-y-3 overflow-y-auto scrollbar-thin scrollbar-thumb-green-500/50 scrollbar-track-transparent",children:w.map((v,p)=>s.jsx("div",{className:"group",children:v.isSubmenu?s.jsxs("div",{className:"space-y-1",children:[s.jsxs(H,{variant:"ghost",className:"w-full justify-between gap-3 text-right text-green-100 hover:bg-green-700/50 hover:text-white transition-all duration-200 rounded-lg px-2 py-1",onClick:()=>c(b=>({...b,[v.key]:!b[v.key]})),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[v.icon,s.jsx("span",{className:"font-medium",children:v.label})]}),l[v.key]?s.jsx(J0,{className:"h-4 w-4"}):s.jsx(zu,{className:"h-4 w-4"})]}),l[v.key]&&s.jsx("div",{className:"pr-4 space-y-1 border-r-2 border-green-400/40 mr-2 animate-in slide-in-from-right-2",children:v.subItems.map((b,N)=>s.jsxs(H,{variant:"ghost",className:"w-full justify-start gap-3 text-right text-green-200 hover:bg-green-700/50 hover:text-white transition-all duration-200 rounded-md px-2 py-1",onClick:()=>{t(b.path),x(!1)},children:[b.icon,s.jsx("span",{children:b.label})]},N))})]}):s.jsxs(H,{variant:"ghost",className:"w-full justify-start gap-3 text-right text-green-100 hover:bg-green-700/50 hover:text-white transition-all duration-200 rounded-md px-2 py-1",onClick:()=>{t(v.path),x(!1)},children:[v.icon,s.jsx("span",{children:v.label})]})},p))}),s.jsx("div",{className:"p-4 border-t border-green-400/30 bg-gradient-to-t from-green-900/80 via-green-800/60 to-transparent",children:s.jsxs(H,{variant:"ghost",className:"w-full justify-start gap-3 text-right text-red-300 hover:bg-red-700/40 hover:text-red-200 transition-all duration-200 rounded-md px-2 py-1",onClick:async()=>{r&&(await xu(),r()),x(!1)},children:[s.jsx(xm,{className:"h-5 w-5"}),s.jsx("span",{children:" "})]})})]})}):s.jsx("div",{className:"hidden md:block w-16 h-[calc(100vh-64px)] z-40 relative",children:s.jsxs("div",{className:"flex h-full flex-col py-4 backdrop-blur-md bg-gradient-to-b from-green-900 to-green-800 shadow-2xl",children:[s.jsx("div",{className:"mb-6 flex justify-center",children:s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>x(!0),className:"text-white/80 transition-all duration-200 hover:scale-110 hover:bg-white/10 hover:text-white",title:" ",children:s.jsx(Kw,{className:"h-5 w-5"})})}),s.jsx("div",{className:"flex-1 flex flex-col items-center space-y-4 py-4",children:w.map((v,p)=>s.jsx("div",{children:v.isSubmenu?s.jsxs(v8,{open:d[v.key],onOpenChange:b=>u(N=>({...N,[v.key]:b})),children:[s.jsx(y8,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"icon",title:v.label,className:"text-white/70 transition-all duration-300 transform hover:scale-110 hover:bg-gradient-to-br hover:from-green-700/20 hover:to-green-900/30 hover:text-white shadow-sm hover:shadow-green-500/40 rounded-lg",onClick:()=>m(v.key),children:v.icon})}),s.jsx(Bj,{className:"min-w-[220px] border border-green-800/50 bg-green-900/90 p-3 text-white shadow-2xl backdrop-blur-md rounded-xl z-50",side:"left",align:"start",sideOffset:20,forceMount:!0,children:s.jsxs("div",{className:"flex flex-col space-y-2 bg-gradient-to-b from-green-800/80 to-green-900/90 p-2 rounded-xl shadow-inner shadow-green-900/50",children:[s.jsx("div",{className:"text-center mb-2 pb-2 rounded-md font-semibold text-white bg-gradient-to-br from-green-600 to-green-500 shadow-lg shadow-green-800/50 border border-green-700/50",children:v.label}),s.jsx("div",{className:"flex flex-col space-y-1 p-2 rounded-lg border border-green-600/50 bg-green-800/80",children:v.subItems.map((b,N)=>s.jsx(H,{variant:"ghost",size:"sm",className:"w-full justify-start px-3 py-2 text-right text-green-200 transition-all duration-300 hover:bg-green-700 hover:text-white rounded-md shadow-sm hover:shadow-md hover:shadow-green-500/40",onClick:()=>t(b.path),children:s.jsxs("div",{className:"flex w-full items-center gap-2",children:[s.jsx("div",{className:"flex-shrink-0",children:b.icon}),s.jsx("span",{className:"flex-1 text-right",children:b.label})]})},N))})]})})]}):s.jsx(H,{variant:"ghost",size:"icon",title:v.label,className:"text-white/70 transition-all duration-300 transform hover:scale-110 hover:bg-gradient-to-br hover:from-green-700/20 hover:to-green-900/30 hover:text-white shadow-sm hover:shadow-green-500/40 rounded-lg",onClick:()=>t(v.path),children:v.icon})},p))}),s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(H,{variant:"ghost",size:"icon",title:" ",className:"text-red-500 transition-all duration-200 hover:scale-110 hover:bg-red-900/20 hover:text-red-400",onClick:async()=>{r&&(await xu(),r())},children:s.jsx(xm,{className:"h-5 w-5"})})})]})})]})}function w8(){const e=new Date().getFullYear();return s.jsx("footer",{className:"bg-green-900/95 text-green-100 py-6 border-t border-green-700 mt-auto shadow-inner",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-center space-y-2",children:[s.jsxs("p",{className:"text-sm md:text-base font-medium",children:["   ",e,"      "]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-200",children:[s.jsx("span",{children:"  "}),s.jsx(y4,{className:"h-4 w-4 text-red-500 fill-red-500 animate-pulse"}),s.jsx("span",{className:"hidden sm:inline",children:"    "})]}),s.jsx("p",{className:"text-xs text-gray-400",children:" 1.0.0"})]})})})}const ut=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Se("rounded-md border bg-card text-card-foreground shadow-md p-4",e),...t}));ut.displayName="Card";const wt=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Se("flex flex-col space-y-1 p-4",e),...t}));wt.displayName="CardHeader";const yt=h.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:Se("text-lg font-semibold leading-tight tracking-normal",e),...t}));yt.displayName="CardTitle";const Rt=h.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:Se("text-xs text-muted-foreground",e),...t}));Rt.displayName="CardDescription";const ot=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Se("p-4 pt-2",e),...t}));ot.displayName="CardContent";const Yi=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Se("flex items-center p-4 pt-2",e),...t}));Yi.displayName="CardFooter";const j8="/aya-system/assets/quran-hero-15097ebb.jpg",_8="/aya-system/assets/0-e5cfb332.jpg",N8="/aya-system/assets/1-3035405c.jpg",S8="/aya-system/assets/2-cdf85064.jpg",k8="/aya-system/assets/3-b371715f.jpg",C8="/aya-system/assets/4-5b6add07.jpg",E8="/aya-system/assets/5-49c036c6.jpg";function tn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Pa(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function T8(e,t){const r=tn(e);return isNaN(t)?Pa(e,NaN):(t&&r.setDate(r.getDate()+t),r)}const Uj=6048e5,P8=864e5,Wj=6e4,Vj=36e5;let O8={};function ah(){return O8}function cc(e,t){var l,c,d,u;const r=ah(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=tn(e),o=a.getDay(),i=(o<n?7:0)+o-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function vu(e){return cc(e,{weekStartsOn:1})}function Hj(e){const t=tn(e),r=t.getFullYear(),n=Pa(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=vu(n),o=Pa(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=vu(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function Lm(e){const t=tn(e);return t.setHours(0,0,0,0),t}function gv(e){const t=tn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function A8(e,t){const r=Lm(e),n=Lm(t),a=+r-gv(r),o=+n-gv(n);return Math.round((a-o)/P8)}function D8(e){const t=Hj(e),r=Pa(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),vu(r)}function M8(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function R8(e){if(!M8(e)&&typeof e!="number")return!1;const t=tn(e);return!isNaN(Number(t))}function I8(e){const t=tn(e),r=Pa(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const $8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},L8=(e,t,r)=>{let n;const a=$8[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Ts(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const F8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},z8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},B8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},U8={date:Ts({formats:F8,defaultWidth:"full"}),time:Ts({formats:z8,defaultWidth:"full"}),dateTime:Ts({formats:B8,defaultWidth:"full"})},W8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},V8=(e,t,r,n)=>W8[e];function Dr(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):i;a=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const H8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},q8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},G8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},K8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Y8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Q8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},J8=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},X8={ordinalNumber:J8,era:Dr({values:H8,defaultWidth:"wide"}),quarter:Dr({values:q8,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Dr({values:G8,defaultWidth:"wide"}),day:Dr({values:K8,defaultWidth:"wide"}),dayPeriod:Dr({values:Y8,defaultWidth:"wide",formattingValues:Q8,defaultFormattingWidth:"wide"})};function Mr(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const i=o[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?eO(l,m=>m.test(i)):Z8(l,m=>m.test(i));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(i.length);return{value:d,rest:u}}}function Z8(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function eO(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function kg(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const l=t.slice(a.length);return{value:i,rest:l}}}const tO=/^(\d+)(th|st|nd|rd)?/i,rO=/\d+/i,nO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sO={any:[/^b/i,/^(a|c)/i]},aO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oO={any:[/1/i,/2/i,/3/i,/4/i]},iO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},uO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fO={ordinalNumber:kg({matchPattern:tO,parsePattern:rO,valueCallback:e=>parseInt(e,10)}),era:Mr({matchPatterns:nO,defaultMatchWidth:"wide",parsePatterns:sO,defaultParseWidth:"any"}),quarter:Mr({matchPatterns:aO,defaultMatchWidth:"wide",parsePatterns:oO,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Mr({matchPatterns:iO,defaultMatchWidth:"wide",parsePatterns:lO,defaultParseWidth:"any"}),day:Mr({matchPatterns:cO,defaultMatchWidth:"wide",parsePatterns:dO,defaultParseWidth:"any"}),dayPeriod:Mr({matchPatterns:uO,defaultMatchWidth:"any",parsePatterns:hO,defaultParseWidth:"any"})},mO={code:"en-US",formatDistance:L8,formatLong:U8,formatRelative:V8,localize:X8,match:fO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gO(e){const t=tn(e);return A8(t,I8(t))+1}function pO(e){const t=tn(e),r=+vu(t)-+D8(t);return Math.round(r/Uj)+1}function qj(e,t){var u,m,f,x;const r=tn(e),n=r.getFullYear(),a=ah(),o=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(f=a.locale)==null?void 0:f.options)==null?void 0:x.firstWeekContainsDate)??1,i=Pa(e,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const l=cc(i,t),c=Pa(e,0);c.setFullYear(n,0,o),c.setHours(0,0,0,0);const d=cc(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function xO(e,t){var l,c,d,u;const r=ah(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=qj(e,t),o=Pa(e,0);return o.setFullYear(a,0,n),o.setHours(0,0,0,0),cc(o,t)}function vO(e,t){const r=tn(e),n=+cc(r,t)-+xO(r,t);return Math.round(n/Uj)+1}function Nt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Gs={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Nt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Nt(r+1,2)},d(e,t){return Nt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Nt(e.getHours()%12||12,t.length)},H(e,t){return Nt(e.getHours(),t.length)},m(e,t){return Nt(e.getMinutes(),t.length)},s(e,t){return Nt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Nt(a,t.length)}},zo={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pv={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Gs.y(e,t)},Y:function(e,t,r,n){const a=qj(e,n),o=a>0?a:1-a;if(t==="YY"){const i=o%100;return Nt(i,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):Nt(o,t.length)},R:function(e,t){const r=Hj(e);return Nt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Nt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Nt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Nt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Gs.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Nt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=vO(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Nt(a,t.length)},I:function(e,t,r){const n=pO(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Nt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Gs.d(e,t)},D:function(e,t,r){const n=gO(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Nt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Nt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Nt(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Nt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=zo.noon:n===0?a=zo.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=zo.evening:n>=12?a=zo.afternoon:n>=4?a=zo.morning:a=zo.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Gs.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Gs.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Nt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Nt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Gs.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Gs.s(e,t)},S:function(e,t){return Gs.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return vv(n);case"XXXX":case"XX":return Ya(n);case"XXXXX":case"XXX":default:return Ya(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return vv(n);case"xxxx":case"xx":return Ya(n);case"xxxxx":case"xxx":default:return Ya(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+xv(n,":");case"OOOO":default:return"GMT"+Ya(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+xv(n,":");case"zzzz":default:return"GMT"+Ya(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Nt(n,t.length)},T:function(e,t,r){const n=e.getTime();return Nt(n,t.length)}};function xv(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),o=n%60;return o===0?r+String(a):r+String(a)+t+Nt(o,2)}function vv(e,t){return e%60===0?(e>0?"-":"+")+Nt(Math.abs(e)/60,2):Ya(e,t)}function Ya(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Nt(Math.trunc(n/60),2),o=Nt(n%60,2);return r+a+t+o}const yv=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Gj=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},yO=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return yv(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",yv(n,t)).replace("{{time}}",Gj(a,t))},bO={p:Gj,P:yO},wO=/^D+$/,jO=/^Y+$/,_O=["D","DD","YY","YYYY"];function NO(e){return wO.test(e)}function SO(e){return jO.test(e)}function kO(e,t,r){const n=CO(e,t,r);if(console.warn(n),_O.includes(e))throw new RangeError(n)}function CO(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const EO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,PO=/^'([^]*?)'?$/,OO=/''/g,AO=/[a-zA-Z]/;function Vr(e,t,r){var u,m,f,x,y,g,w,v;const n=ah(),a=(r==null?void 0:r.locale)??n.locale??mO,o=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(f=n.locale)==null?void 0:f.options)==null?void 0:x.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((g=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((v=(w=n.locale)==null?void 0:w.options)==null?void 0:v.weekStartsOn)??0,l=tn(e);if(!R8(l))throw new RangeError("Invalid time value");let c=t.match(TO).map(p=>{const b=p[0];if(b==="p"||b==="P"){const N=bO[b];return N(p,a.formatLong)}return p}).join("").match(EO).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const b=p[0];if(b==="'")return{isToken:!1,value:DO(p)};if(pv[b])return{isToken:!0,value:p};if(b.match(AO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return c.map(p=>{if(!p.isToken)return p.value;const b=p.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&SO(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&NO(b))&&kO(b,t,String(e));const N=pv[b[0]];return N(l,b,a.localize,d)}).join("")}function DO(e){const t=e.match(PO);return t?t[1].replace(OO,"'"):e}function fd(e,t){const r=tn(e),n=tn(t);return r.getTime()>n.getTime()}function an(e,t){const r=(t==null?void 0:t.additionalDigits)??2,n=$O(e);let a;if(n.date){const c=LO(n.date,r);a=FO(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const o=a.getTime();let i=0,l;if(n.time&&(i=zO(n.time),isNaN(i)))return new Date(NaN);if(n.timezone){if(l=BO(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(o+i),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(o+i+l)}const md={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},MO=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,RO=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,IO=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $O(e){const t={},r=e.split(md.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],md.timeZoneDelimiter.test(t.date)&&(t.date=e.split(md.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=md.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function LO(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?a:o*100,restDateString:e.slice((n[1]||n[2]).length)}}function FO(e,t){if(t===null)return new Date(NaN);const r=e.match(MO);if(!r)return new Date(NaN);const n=!!r[4],a=ul(r[1]),o=ul(r[2])-1,i=ul(r[3]),l=ul(r[4]),c=ul(r[5])-1;if(n)return qO(t,l,c)?UO(t,l,c):new Date(NaN);{const d=new Date(0);return!VO(t,o,i)||!HO(t,a)?new Date(NaN):(d.setUTCFullYear(t,o,Math.max(a,i)),d)}}function ul(e){return e?parseInt(e):1}function zO(e){const t=e.match(RO);if(!t)return NaN;const r=ff(t[1]),n=ff(t[2]),a=ff(t[3]);return GO(r,n,a)?r*Vj+n*Wj+a*1e3:NaN}function ff(e){return e&&parseFloat(e.replace(",","."))||0}function BO(e){if(e==="Z")return 0;const t=e.match(IO);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return KO(n,a)?r*(n*Vj+a*Wj):NaN}function UO(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,o=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+o),n}const WO=[31,null,31,30,31,30,31,31,30,31,30,31];function Kj(e){return e%400===0||e%4===0&&e%100!==0}function VO(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(WO[t]||(Kj(e)?29:28))}function HO(e,t){return t>=1&&t<=(Kj(e)?366:365)}function qO(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function GO(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function KO(e,t){return t>=0&&t<=59}function gd(){return Lm(Date.now())}const YO={lessThanXSeconds:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xSeconds:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},halfAMinute:" ",lessThanXMinutes:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xMinutes:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXHours:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xHours:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},xDays:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXWeeks:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xWeeks:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXMonths:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xMonths:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXYears:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xYears:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},overXYears:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},almostXYears:{one:"   ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "}},QO=(e,t,r)=>{const n=YO[e];let a;return typeof n=="string"?a=n:t===1?a=n.one:t===2?a=n.two:t<=10?a=n.threeToTen.replace("{{count}}",String(t)):a=n.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?" "+a:" "+a:a},JO={full:"EEEE do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},XO={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},ZO={full:"{{date}} ' ' {{time}}",long:"{{date}} ' ' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eA={date:Ts({formats:JO,defaultWidth:"full"}),time:Ts({formats:XO,defaultWidth:"full"}),dateTime:Ts({formats:ZO,defaultWidth:"full"})},tA={lastWeek:"eeee '  ' p",yesterday:"'  ' p",today:"'  ' p",tomorrow:"'  ' p",nextWeek:"eeee '  ' p",other:"P"},rA=e=>tA[e],nA={narrow:["",""],abbreviated:["..",".."],wide:[" "," "]},sA={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:[" "," "," "," "]},aA={narrow:["","","","","","","","","","","",""],abbreviated:["","","","","","","","","","","",""],wide:["","","","","","","","","","","",""]},oA={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},iA={narrow:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "},abbreviated:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "},wide:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "}},lA={narrow:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "},abbreviated:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "},wide:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "}},cA=e=>String(e),dA={ordinalNumber:cA,era:Dr({values:nA,defaultWidth:"wide"}),quarter:Dr({values:sA,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Dr({values:aA,defaultWidth:"wide"}),day:Dr({values:oA,defaultWidth:"wide"}),dayPeriod:Dr({values:iA,defaultWidth:"wide",formattingValues:lA,defaultFormattingWidth:"wide"})},uA=/^(\d+)(th|st|nd|rd)?/i,hA=/\d+/i,fA={narrow:/[]/,abbreviated:/[]\.\./,wide:/(|) /},mA={any:[//,//]},gA={narrow:/^[1234]/i,abbreviated:/[1234]/,wide:/ (|||)/},pA={any:[/1/i,/2/i,/3/i,/4/i]},xA={narrow:/^[]/,abbreviated:/^(|||||||||||)/,wide:/^(|||||||||||)/},vA={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},yA={narrow:/^[]/i,short:/^(||||||)/i,abbreviated:/^(||||||)/i,wide:/^(||||||)/i},bA={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],wide:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},wA={narrow:/^(|| || | | | )/,any:/^(|| || | | | )/},jA={any:{am:/^/,pm:/^/,midnight:/ /,noon://,afternoon:/ /,morning:/ /,evening:/ /,night:/ /}},_A={ordinalNumber:kg({matchPattern:uA,parsePattern:hA,valueCallback:e=>parseInt(e,10)}),era:Mr({matchPatterns:fA,defaultMatchWidth:"wide",parsePatterns:mA,defaultParseWidth:"any"}),quarter:Mr({matchPatterns:gA,defaultMatchWidth:"wide",parsePatterns:pA,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Mr({matchPatterns:xA,defaultMatchWidth:"wide",parsePatterns:vA,defaultParseWidth:"any"}),day:Mr({matchPatterns:yA,defaultMatchWidth:"wide",parsePatterns:bA,defaultParseWidth:"any"}),dayPeriod:Mr({matchPatterns:wA,defaultMatchWidth:"any",parsePatterns:jA,defaultParseWidth:"any"})},NA={code:"ar",formatDistance:QO,formatLong:eA,formatRelative:rA,localize:dA,match:_A,options:{weekStartsOn:6,firstWeekContainsDate:1}},SA={lessThanXSeconds:{one:"   ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xSeconds:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},halfAMinute:" ",lessThanXMinutes:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xMinutes:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXHours:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xHours:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},xDays:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXWeeks:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xWeeks:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXMonths:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xMonths:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXYears:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xYears:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},overXYears:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},almostXYears:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "}},kA=(e,t,r)=>{let n;const a=SA[e];return typeof a=="string"?n=a:t===1?n=a.one:t===2?n=a.two:t<=10?n=a.threeToTen.replace("{{count}}",String(t)):n=a.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"  "+n:" "+n:n},CA={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},EA={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},TA={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},PA={date:Ts({formats:CA,defaultWidth:"full"}),time:Ts({formats:EA,defaultWidth:"full"}),dateTime:Ts({formats:TA,defaultWidth:"full"})},OA={lastWeek:"'' eeee '' p",yesterday:"' ' p",today:"' ' p",tomorrow:"' ' p",nextWeek:"eeee '' p",other:"P"},AA=(e,t,r,n)=>OA[e],DA={narrow:["",""],abbreviated:["..",".."],wide:[" "," "]},MA={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:[" "," "," "," "]},RA={narrow:["","","","","","","","","","","",""],abbreviated:["","","","","","","","","","","",""],wide:["","","","","","","","","","","",""]},IA={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},$A={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:" ",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:" ",noon:"",morning:"",afternoon:" ",evening:"",night:""},wide:{am:"",pm:"",midnight:" ",noon:"",morning:"",afternoon:" ",evening:"",night:""}},LA={narrow:{am:"",pm:"",midnight:"",noon:"",morning:" ",afternoon:" ",evening:" ",night:" "},abbreviated:{am:"",pm:"",midnight:" ",noon:"",morning:" ",afternoon:" ",evening:" ",night:" "},wide:{am:"",pm:"",midnight:" ",noon:"",morning:"",afternoon:" ",evening:" ",night:" "}},FA=e=>String(e),zA={ordinalNumber:FA,era:Dr({values:DA,defaultWidth:"wide"}),quarter:Dr({values:MA,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Dr({values:RA,defaultWidth:"wide"}),day:Dr({values:IA,defaultWidth:"wide"}),dayPeriod:Dr({values:$A,defaultWidth:"wide",formattingValues:LA,defaultFormattingWidth:"wide"})},BA=/^(\d+)(th|st|nd|rd)?/i,UA=/\d+/i,WA={narrow:/^(|)/i,abbreviated:/^(\.?\s?\.?|\.?\s?\.?\s?|a\.?\s?d\.?|c\.?\s?)/i,wide:/^( | | | )/i},VA={any:[/^/i,/^/i]},HA={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^ [1234]/i},qA={any:[/1/i,/2/i,/3/i,/4/i]},GA={narrow:/^[]/i,abbreviated:/^(|||||||||||)/i,wide:/^(|||||||||||)/i},KA={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},YA={narrow:/^[]/i,short:/^(||||||)/i,abbreviated:/^(||||||)/i,wide:/^(||||||)/i},QA={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],wide:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},JA={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},XA={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZA={ordinalNumber:kg({matchPattern:BA,parsePattern:UA,valueCallback:e=>parseInt(e,10)}),era:Mr({matchPatterns:WA,defaultMatchWidth:"wide",parsePatterns:VA,defaultParseWidth:"any"}),quarter:Mr({matchPatterns:HA,defaultMatchWidth:"wide",parsePatterns:qA,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Mr({matchPatterns:GA,defaultMatchWidth:"wide",parsePatterns:KA,defaultParseWidth:"any"}),day:Mr({matchPatterns:YA,defaultMatchWidth:"wide",parsePatterns:QA,defaultParseWidth:"any"}),dayPeriod:Mr({matchPatterns:JA,defaultMatchWidth:"any",parsePatterns:XA,defaultParseWidth:"any"})},eD={code:"ar-SA",formatDistance:kA,formatLong:PA,formatRelative:AA,localize:zA,match:ZA,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tD({userRole:e,userId:t}){var w,v,p,b,N;const[r,n]=h.useState(!0),[a,o]=h.useState(null),[i,l]=h.useState({totalCircles:0,totalStudents:0,totalTeachers:0,todayAbsences:0,supervisorCircles:0,supervisorStudents:0,supervisorTeachers:0,teacherCircles:0,teacherStudents:0,teacherAbsences:0,recentMemorizations:[],recentAssessments:[],teacherNotes:[],availableCircles:[],sessionSchedules:[]}),c=new Date,d=Vr(c,"yyyy-MM-dd");h.useEffect(()=>{async function S(){n(!0),o(null);try{let E={totalCircles:0,totalStudents:0,totalTeachers:0,todayAbsences:0};try{const D=await u();E={...E,...D}}catch(D){console.error("    :",D)}if(t)try{if(e==="superadmin"){const D=await m();E={...E,...D}}else if(e==="admin"){const D=await f(t);E={...E,...D}}else if(e==="teacher"){const D=await x(t);E={...E,...D}}}catch(D){console.error("     :",D)}else try{const D=await y();E={...E,...D}}catch(D){console.error("    :",D)}l(E)}catch(E){console.error("   :",E),o("    .    .")}finally{n(!1)}}S()},[t,e,d]);const u=async()=>{const S={totalCircles:0,totalStudents:0,totalTeachers:0,todayAbsences:0};try{const{count:E,error:D}=await de.from("study_circles").select("*",{count:"exact",head:!0});D?console.error("    :",D):S.totalCircles=E||0}catch(E){console.error("    :",E)}try{const{count:E,error:D}=await de.from("students").select("*",{count:"exact",head:!0});D?console.error("    :",D):S.totalStudents=E||0}catch(E){console.error("    :",E)}try{const{count:E,error:D}=await de.from("profiles").select("*",{count:"exact",head:!0}).eq("role","teacher");D?console.error("    :",D):S.totalTeachers=E||0}catch(E){console.error("    :",E)}try{const{count:E,error:D}=await de.from("attendance_records").select("*",{count:"exact",head:!0}).eq("status","absent").gte("date",`${d}T00:00:00`).lt("date",`${d}T23:59:59`);D?console.error("    :",D):S.todayAbsences=E||0}catch(E){console.error("    :",E)}return S},m=async()=>({}),f=async S=>{const E={supervisorCircles:0,supervisorStudents:0,supervisorTeachers:0};try{const{count:D,error:I}=await de.from("study_circles").select("*",{count:"exact",head:!0}).eq("supervisor_id",S);I?console.error("     :",I):E.supervisorCircles=D||0}catch(D){console.error("     :",D)}try{const{count:D,error:I}=await de.from("profiles").select("*",{count:"exact",head:!0}).eq("role","teacher").eq("supervisor_id",S);I?console.error("     :",I):E.supervisorTeachers=D||0}catch(D){console.error("     :",D)}try{const{data:D,error:I}=await de.from("study_circles").select("id").eq("supervisor_id",S);if(!I&&D&&D.length>0){const ee=D.map(_=>_.id),{count:J,error:T}=await de.from("students").select("*",{count:"exact",head:!0}).in("study_circle_id",ee);T?console.error("     :",T):E.supervisorStudents=J||0}else I&&console.error("     :",I)}catch(D){console.error("     :",D)}return E},x=async S=>{const E={teacherCircles:0,teacherStudents:0,teacherAbsences:0,recentMemorizations:[],recentAssessments:[]};try{const{count:D,error:I}=await de.from("study_circles").select("*",{count:"exact",head:!0}).eq("teacher_id",S);I?console.error("     :",I):E.teacherCircles=D||0;const{data:ee,error:J}=await de.from("study_circles").select("id").eq("teacher_id",S);if(!J&&ee&&ee.length>0){const T=ee.map(_=>_.id);try{const{count:_,error:O}=await de.from("students").select("*",{count:"exact",head:!0}).in("study_circle_id",T);O?console.error("     :",O):E.teacherStudents=_||0}catch(_){console.error("     :",_)}try{const{count:_,error:O}=await de.from("attendance_records").select("*",{count:"exact",head:!0}).in("study_circle_id",T).eq("status","absent").gte("date",`${d}T00:00:00`).lt("date",`${d}T23:59:59`);O?console.error("      :",O):E.teacherAbsences=_||0}catch(_){console.error("      :",_)}try{const{data:_,error:O}=await de.from("memorization_records").select("id, student_id, date, surah, from_verse, to_verse, students(full_name)").in("study_circle_id",T).order("date",{ascending:!1}).limit(10);O?console.error("     :",O):E.recentMemorizations=_||[]}catch(_){console.error("     :",_)}try{const{data:_,error:O}=await de.from("assessments").select("id, student_id, date, score, type, students(full_name)").in("study_circle_id",T).order("date",{ascending:!1}).limit(10);O?console.error("    :",O):E.recentAssessments=_||[]}catch(_){console.error("    :",_)}}else J&&console.error("     :",J)}catch(D){console.error("    :",D)}return E},y=async()=>{const S={availableCircles:[],sessionSchedules:[]};try{const{data:E,error:D}=await de.from("study_circles").select("id, name, teacher_id, profiles(full_name), capacity, current_students").eq("is_open_for_registration",!0).limit(5);D?console.error("    :",D):S.availableCircles=E||[]}catch(E){console.error("    :",E)}try{const{data:E,error:D}=await de.from("circle_schedules").select("id, study_circle_id, day, start_time, end_time, study_circles(name)").order("day").limit(10);D?console.error("    :",D):S.sessionSchedules=E||[]}catch(E){console.error("    :",E)}return S};if(r)return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(S=>s.jsx(ut,{className:"border border-green-200 shadow-md",children:s.jsxs(ot,{className:"p-6",children:[s.jsx("div",{className:"h-16 bg-gray-200 animate-pulse rounded-md mb-2"}),s.jsx("div",{className:"h-8 bg-gray-100 animate-pulse rounded-md"})]})},S))});if(a)return s.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-md mb-6",children:[s.jsx(Sr,{className:"inline-block mr-2 h-5 w-5"}),a]});const g=Vr(c,"EEEE d MMMM yyyy",{locale:NA});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"mb-4 text-center",children:[s.jsx("p",{className:"text-gray-600 mb-1",children:" "}),s.jsx("h2",{className:"text-xl font-semibold text-islamic-green",children:g})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(e==="superadmin"||e==="admin")&&s.jsxs(s.Fragment,{children:[s.jsx(Wr,{title:" ",value:i.totalCircles,icon:s.jsx(Pt,{className:"h-8 w-8 text-green-600"}),color:"bg-green-50 border-green-200",textColor:"text-green-700"}),s.jsx(Wr,{title:" ",value:i.totalStudents,icon:s.jsx(Is,{className:"h-8 w-8 text-blue-600"}),color:"bg-blue-50 border-blue-200",textColor:"text-blue-700"}),s.jsx(Wr,{title:" ",value:i.totalTeachers,icon:s.jsx(ri,{className:"h-8 w-8 text-purple-600"}),color:"bg-purple-50 border-purple-200",textColor:"text-purple-700"}),s.jsx(Wr,{title:" ",value:i.todayAbsences,icon:s.jsx(Sr,{className:"h-8 w-8 text-amber-600"}),color:"bg-amber-50 border-amber-200",textColor:"text-amber-700"})]}),e==="admin"&&s.jsxs(s.Fragment,{children:[s.jsx(Wr,{title:"  ",value:i.supervisorCircles||0,icon:s.jsx(Pt,{className:"h-8 w-8 text-teal-600"}),color:"bg-teal-50 border-teal-200",textColor:"text-teal-700"}),s.jsx(Wr,{title:"  ",value:i.supervisorStudents||0,icon:s.jsx(Is,{className:"h-8 w-8 text-pink-600"}),color:"bg-pink-50 border-pink-200",textColor:"text-pink-700"})]}),e==="teacher"&&s.jsxs(s.Fragment,{children:[s.jsx(Wr,{title:" ",value:i.teacherCircles||0,icon:s.jsx(rc,{className:"h-8 w-8 text-indigo-600"}),color:"bg-indigo-50 border-indigo-200",textColor:"text-indigo-700"}),s.jsx(Wr,{title:"",value:i.teacherStudents||0,icon:s.jsx(ci,{className:"h-8 w-8 text-emerald-600"}),color:"bg-emerald-50 border-emerald-200",textColor:"text-emerald-700"}),s.jsx(Wr,{title:"   ",value:i.teacherAbsences||0,icon:s.jsx(Sr,{className:"h-8 w-8 text-red-600"}),color:"bg-red-50 border-red-200",textColor:"text-red-700"}),s.jsx(Wr,{title:" ",value:((w=i.recentAssessments)==null?void 0:w.length)||0,icon:s.jsx(g4,{className:"h-8 w-8 text-orange-600"}),color:"bg-orange-50 border-orange-200",textColor:"text-orange-700"})]}),!e&&s.jsxs(s.Fragment,{children:[s.jsx(Wr,{title:" ",value:((v=i.availableCircles)==null?void 0:v.length)||0,icon:s.jsx(Pt,{className:"h-8 w-8 text-green-600"}),color:"bg-green-50 border-green-200",textColor:"text-green-700"}),s.jsx(Wr,{title:" ",value:((p=i.sessionSchedules)==null?void 0:p.length)||0,icon:s.jsx(ur,{className:"h-8 w-8 text-blue-600"}),color:"bg-blue-50 border-blue-200",textColor:"text-blue-700"}),s.jsx(Wr,{title:" ",value:i.totalCircles,icon:s.jsx(rc,{className:"h-8 w-8 text-purple-600"}),color:"bg-purple-50 border-purple-200",textColor:"text-purple-700"}),s.jsx(Wr,{title:" ",value:((N=(b=i.sessionSchedules)==null?void 0:b.filter(S=>S.day===new Date().getDay()))==null?void 0:N.length)||0,icon:s.jsx(Yr,{className:"h-8 w-8 text-amber-600"}),color:"bg-amber-50 border-amber-200",textColor:"text-amber-700"})]})]}),e==="teacher"&&i.recentMemorizations&&i.recentMemorizations.length>0&&s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-islamic-green border-r-4 border-islamic-green pr-2",children:"  "}),s.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-green-200",children:s.jsxs("table",{className:"min-w-full divide-y divide-green-200",children:[s.jsx("thead",{className:"bg-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:""}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:""}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:""}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:" "}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:" "})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-green-100",children:i.recentMemorizations.map(S=>{var E;return s.jsxs("tr",{className:"hover:bg-green-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(E=S.students)==null?void 0:E.full_name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(S.date).toLocaleDateString("ar-EG")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.surah}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.from_verse}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.to_verse})]},S.id)})})]})})]}),!e&&i.availableCircles&&i.availableCircles.length>0&&s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-islamic-green border-r-4 border-islamic-green pr-2",children:"  "}),s.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-green-200",children:s.jsxs("table",{className:"min-w-full divide-y divide-green-200",children:[s.jsx("thead",{className:"bg-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:" "}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:""}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:""}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:"  "})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-green-100",children:i.availableCircles.map(S=>{var E;return s.jsxs("tr",{className:"hover:bg-green-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(E=S.profiles)==null?void 0:E.full_name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.capacity}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.current_students})]},S.id)})})]})})]})]})}function Wr({title:e,value:t,icon:r,color:n="bg-white",textColor:a="text-gray-800"}){return s.jsx(ut,{className:`shadow-md ${n}`,children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:e}),s.jsx("p",{className:`text-3xl font-bold ${a}`,children:t})]}),s.jsx("div",{className:"p-3 rounded-full bg-white/70 shadow-sm",children:r})]})})})}const hl=[{src:j8,title:"    ",subtitle:"       "},{src:_8,title:"  ",subtitle:"     "},{src:N8,title:" ",subtitle:"   "},{src:S8,title:" ",subtitle:"    "},{src:k8,title:"  ",subtitle:"   "},{src:C8,title:" ",subtitle:"     "},{src:E8,title:" ",subtitle:"    "}],sn=({onNavigate:e,userRole:t,currentUser:r})=>{const[n,a]=h.useState(0),o=t==="parent"?null:t,i=()=>{a(d=>d===hl.length-1?0:d+1)},l=()=>{a(d=>d===0?hl.length-1:d-1)};h.useEffect(()=>{const d=setInterval(()=>{i()},5e3);return()=>clearInterval(d)},[]);const c=()=>t?t==="teacher"?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[s.jsxs(H,{onClick:()=>e("/students"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:""}),"   "]}),s.jsxs(H,{onClick:()=>e("/study-circles"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:""}),"   "]})]}):t==="admin"||t==="superadmin"?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[s.jsxs(H,{onClick:()=>e("/students-list"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:""}),"   "]}),s.jsxs(H,{onClick:()=>e("/guardians-list"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:""}),"     "]}),s.jsxs(H,{onClick:()=>e("/study-circles"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:""}),"    "]}),s.jsxs(H,{onClick:()=>e("/parent-inquiry"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:""}),"   "]}),t==="superadmin"&&s.jsxs(H,{onClick:()=>e("/database-management"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:""}),"    "]}),t==="superadmin"&&s.jsxs(H,{onClick:()=>e("/user-management"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:""}),"   "]})]}):t==="parent"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:s.jsxs(H,{onClick:()=>e("/parent-inquiry"),className:"h-12 text-lg",children:[s.jsx("span",{children:""}),"    "]})}):null:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[s.jsxs(H,{onClick:()=>e("/login"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:""}),"  "]}),s.jsxs(H,{onClick:()=>e("/parent-inquiry"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:""}),"   "]})]});return s.jsx("div",{className:"w-full max-w-[1600px] mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"mb-12 flex justify-center font-arabic",children:s.jsxs("div",{className:`w-full max-w-5xl rounded-3xl overflow-hidden shadow-2xl relative \r
                  border-2 border-green-600 bg-gradient-to-tr from-green-950/90 via-green-800/80 to-emerald-700/70`,children:[s.jsx("div",{className:"absolute inset-0 bg-[url('/patterns/islamic-pattern.svg')] opacity-10 pointer-events-none"}),s.jsxs("div",{className:"relative h-72 md:h-96 flex items-center justify-center",children:[s.jsx("img",{src:hl[n].src,alt:hl[n].title,className:"w-full h-full object-contain transition-all duration-700 ease-in-out drop-shadow-xl"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-green-950/70 via-green-800/20 to-transparent"})]}),s.jsx("button",{onClick:l,className:`absolute left-4 top-1/2 -translate-y-1/2 bg-green-700/80 border border-green-400/50 \r
                 text-white p-4 rounded-full backdrop-blur-md hover:bg-green-600 shadow-xl \r
                 transition-all transform hover:scale-110`,"aria-label":" ",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{onClick:i,className:`absolute right-4 top-1/2 -translate-y-1/2 bg-green-700/80 border border-green-400/50 \r
                 text-white p-4 rounded-full backdrop-blur-md hover:bg-green-600 shadow-xl \r
                 transition-all transform hover:scale-110`,"aria-label":" ",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),s.jsx("div",{className:"absolute bottom-5 left-0 right-0 flex justify-center gap-3",children:hl.map((d,u)=>s.jsx("button",{onClick:()=>a(u),className:`h-4 w-4 rounded-full border-2 transition-all duration-300 shadow-md
                      ${u===n?"bg-gradient-to-r from-green-500 to-emerald-400 scale-125 border-yellow-300":"bg-white/30 hover:bg-white/80 border-green-200"}`,"aria-label":`    ${u+1}`},u))})]})}),s.jsxs(ut,{className:"mb-8",children:[s.jsxs(wt,{className:"text-center",children:[s.jsx(yt,{className:"text-3xl font-bold",children:"       "}),r&&s.jsxs(Rt,{className:"text-xl mt-2",children:[r.full_name," - ",t==="superadmin"?"":t==="admin"?"":t==="teacher"?"":" "]})]}),s.jsxs(ot,{children:[s.jsx("p",{className:"text-lg mb-4",children:"                ."}),c()]})]}),t&&t!=="parent"&&s.jsxs(ut,{className:"mb-8 border-islamic-green/30 shadow-md",children:[s.jsxs(wt,{children:[s.jsx(yt,{className:"text-xl font-bold text-islamic-green",children:" "}),s.jsx(Rt,{children:"      "})]}),s.jsx(ot,{children:s.jsx(tD,{userRole:o,userId:r==null?void 0:r.id})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(ut,{children:[s.jsx(wt,{children:s.jsx(yt,{children:""})}),s.jsx(ot,{children:s.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[s.jsx("li",{children:"  "}),s.jsx("li",{children:"  "}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   "})]})})]}),s.jsxs(ut,{children:[s.jsx(wt,{children:s.jsx(yt,{children:" "})}),s.jsx(ot,{children:s.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[s.jsx("li",{children:"  "}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"    "}),s.jsx("li",{children:"  "})]})})]})]})]})})},fe=h.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));fe.displayName="Input";var rD="Label",Yj=h.forwardRef((e,t)=>s.jsx(Je.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Yj.displayName=rD;var Qj=Yj;const nD=jc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ye=h.forwardRef(({className:e,...t},r)=>s.jsx(Qj,{ref:r,className:Se(nD(),e),...t}));ye.displayName=Qj.displayName;console.log("SupabaseREST:   :",{url:gs,anonKey:`${bg.substring(0,10)}...`,serviceKey:`${Kn.substring(0,10)}...`});const sD=async e=>{try{console.log("SupabaseREST:    "),console.log("SupabaseREST:        profiles ");const t={"Content-Type":"application/json",apikey:Kn,Authorization:`Bearer ${Kn}`,Prefer:"return=representation"},r=JSON.stringify([e]),n=await fetch(`${gs}/rest/v1/profiles`,{method:"POST",headers:t,body:r});if(n.ok){const o=await n.json();return console.log("SupabaseREST:        "),{success:!0,data:o}}const a=await n.text();return console.error("SupabaseREST:    :",{status:n.status,statusText:n.statusText,error:a}),{success:!1,error:a,status:n.status,statusText:n.statusText}}catch(t){return console.error("SupabaseREST:     :",t),{success:!1,error:String(t)}}},aD=async(e,t)=>{try{console.log(`SupabaseREST:     ${e}`),console.log("SupabaseREST:        profiles ");const r={"Content-Type":"application/json",apikey:Kn,Authorization:`Bearer ${Kn}`,Prefer:"return=representation"},n=await fetch(`${gs}/rest/v1/profiles?id=eq.${e}`,{method:"PATCH",headers:r,body:JSON.stringify(t)});if(n.ok){const o=await n.json();return console.log("SupabaseREST:        "),{success:!0,data:o}}const a=await n.text();return console.error("SupabaseREST:    :",{status:n.status,statusText:n.statusText,error:a}),{success:!1,error:a,status:n.status,statusText:n.statusText}}catch(r){return console.error("SupabaseREST:     :",r),{success:!1,error:String(r)}}},bv=async e=>{try{console.log(`SupabaseREST:      : ${e}`),console.log("SupabaseREST:       profiles ");const t={"Content-Type":"application/json",apikey:Kn,Authorization:`Bearer ${Kn}`},r=await fetch(`${gs}/rest/v1/profiles?username=ilike.${encodeURIComponent(e)}&limit=1`,{method:"GET",headers:t});if(r.ok){const a=await r.json();if(console.log(`SupabaseREST:    ${a.length} `),a&&a.length>0)return{success:!0,data:a[0]}}const n=await r.text();return console.error("SupabaseREST:    :",{status:r.status,statusText:r.statusText,error:n}),{success:!1,error:"    "}}catch(t){return console.error("SupabaseREST:     :",t),{success:!1,error:String(t)}}},mf=async(e,t,r=null)=>{try{console.log(`SupabaseREST:      ${e}  ${t}`);const n={login_attempts:t};r&&(n.last_login_at=r),console.log("SupabaseREST:          profiles ");const a={"Content-Type":"application/json",apikey:Kn,Authorization:`Bearer ${Kn}`,Prefer:"return=representation"},o=await fetch(`${gs}/rest/v1/profiles?id=eq.${e}`,{method:"PATCH",headers:a,body:JSON.stringify(n)});if(o.ok){const l=await o.json();return console.log("SupabaseREST:         "),{success:!0,data:l}}const i=await o.text();return console.error("SupabaseREST:     :",{status:o.status,statusText:o.statusText,error:i}),{success:!1,error:i,status:o.status,statusText:o.statusText}}catch(n){return console.error("SupabaseREST:      :",n),{success:!1,error:String(n)}}},dc=e=>({id:e.id,full_name:e.full_name,role:e.role,username:e.username,password_hash:e.password_hash,login_attempts:e.login_attempts,last_login_at:e.last_login_at,created_at:e.created_at}),oh=e=>!e||!Array.isArray(e)?[]:e.map(t=>dc(t)),oD=e=>{const t=e.id||crypto.randomUUID();return console.log("Mapping guardian to Supabase format with ID:",t),{id:t,full_name:e.full_name,phone_number:e.phone_number,email:e.email,address:e.address}},Jj=e=>({id:e.id,full_name:e.full_name,phone_number:e.phone_number,email:e.email,address:e.address,created_at:e.created_at,updated_at:e.updated_at}),iD=e=>!e||!Array.isArray(e)?[]:e.map(t=>Jj(t)),lD=e=>({id:e.id||crypto.randomUUID(),guardian_id:e.guardian_id,study_circle_id:e.study_circle_id,full_name:e.full_name,date_of_birth:e.date_of_birth,gender:e.gender||"male",phone_number:e.phone_number,email:e.email,enrollment_date:e.enrollment_date||new Date().toISOString().split("T")[0],grade_level:e.grade_level,notes:e.notes}),cD=e=>({id:e.id,guardian_id:e.guardian_id,study_circle_id:e.study_circle_id,full_name:e.full_name,date_of_birth:e.date_of_birth,gender:e.gender,phone_number:e.phone_number,email:e.email,enrollment_date:e.enrollment_date,grade_level:e.grade_level,notes:e.notes,created_at:e.created_at,updated_at:e.updated_at,guardian:e.guardian,study_circle:e.study_circle,memorized_parts:e.memorized_parts}),Cg=e=>!e||!Array.isArray(e)?(console.log("No results to map or results is not an array"),[]):(e.length>0&&console.log("Mapping students with relationships. First student:",{id:e[0].id,full_name:e[0].full_name,has_guardian:!!e[0].guardian,has_teacher:!!e[0].teacher}),e.map(t=>({...cD(t),guardian:t.guardian||null,study_circle:t.study_circle||null,memorized_parts:t.memorized_parts||null,grade:t.grade_level,grade_level:t.grade_level}))),dD=e=>({id:e.id,student_id:e.student_id,teacher_id:e.teacher_id,study_circle_id:e.study_circle_id,study_circle:e.study_circle||null,start_date:e.start_date,end_date:e.end_date}),uD=e=>!e||!Array.isArray(e)?[]:e.map(t=>dD(t)),Eg=async e=>{try{const{data:t,error:r}=await de.from(En).select("*").eq("id",e).single();return r?(console.error("    :",r),null):t?dc(t):null}catch(t){return console.error("    :",t),null}},wv=async e=>{try{const{data:t,error:r}=await de.from(En).select("*").eq("username",e).single();return r?(console.error("       :",r),null):t?dc(t):null}catch(t){return console.error("       :",t),null}},hD=async e=>{try{const t={id:e.id,full_name:e.full_name,role:e.role,username:e.username,password_hash:e.password_hash,login_attempts:0},{data:r,error:n}=await Gt.from(En).insert([t]).select();return n?(console.error("        :",n),n.code==="23505"?{success:!1,message:"   .     ."}:{success:!1,message:`    : ${n.message}`}):{success:!0,id:r&&r[0]?r[0].id:void 0,message:"    "}}catch(t){return console.error("        :",t),{success:!1,message:"     "}}},fD=async e=>{var t;try{const r=await kc(e.password),n={id:e.id,full_name:e.full_name,role:e.role,username:e.username,password_hash:r,login_attempts:0};console.log("     REST API"),console.log(" :",JSON.stringify(n));const a=await sD(n);if(!a.success)return console.error("    :",a.error),(t=a.error)!=null&&t.includes("duplicate key value violates unique constraint")?{success:!1,message:"   .     ."}:{success:!1,message:"    : "+a.error};console.log("      ...");const o=a.data&&a.data[0]?a.data[0].id:e.id;if(o){const i={id:o,username:e.username,role:e.role},l=await yj(i,e.password);l.success?console.log("       "):console.warn("       :",l.error)}return{success:!0,id:o,message:"    "}}catch(r){return console.error("    :",r),{success:!1,message:"     "}}},Xj=async e=>{var t;try{const r={...e};e.password&&(r.password_hash=await kc(e.password),delete r.password),console.log("    REST API");const n=await aD(e.id,r);return n.success?{success:!0,message:"    "}:(console.error("    :",n.error),(t=n.error)!=null&&t.includes("duplicate key value violates unique constraint")?{success:!1,message:"   .     ."}:{success:!1,message:"    : "+n.error})}catch(r){return console.error("    :",r),{success:!1,message:"     "}}},ih=async()=>{try{const{data:e,error:t}=await de.from(En).select("*").or("role.eq.teacher,role.eq.admin");return t?(console.error("   :",t),[]):oh(e||[])}catch(e){return console.error("   :",e),[]}},mD=async()=>{try{const{data:e,error:t}=await de.from(En).select("*").or("role.eq.teacher,role.is.null");return t?(console.error("   :",t),[]):oh(e||[])}catch(e){return console.error("   :",e),[]}},gD=async()=>{try{const{data:e,error:t}=await de.from(En).select("*").eq("role","admin");return t?(console.error("   :",t),[]):oh(e||[])}catch(e){return console.error("   :",e),[]}},pD=async e=>{try{console.log("   :",{username:e.username});const t=await uP();t.success&&t.isAuthenticated&&(console.log("   .   ..."),await xu()),console.log("      Supabase ...");const r=await vj(e.username,e.password);if(r.success&&r.token){console.log("      ");const c=await bv(e.username);if(c.success&&c.data){const d=c.data,u=dc(d);Bn(r.token);const m=new Date().toISOString();return await mf(d.id,0,m),{success:!0,user:u,token:r.token,message:"   "}}else console.log("         .    ...")}console.log("         REST API...");const n=await bv(e.username);if(!n.success||!n.data)return console.error("    :",n.error),{success:!1,message:"      "};const a=n.data;console.log("   :",{id:a.id,username:a.username,role:a.role});const o=await dP(a,e.password);if(!o.success){const c=(a.login_attempts||0)+1;return await mf(a.id,c),{success:!1,message:"      "}}o.token&&Bn(o.token);const i=new Date().toISOString();return await mf(a.id,0,i),{success:!0,user:dc(a),token:o.token,message:"   "}}catch(t){return console.error("   :",t),{success:!1,message:"    "}}},xD=async(e,t,r)=>{try{const{data:n,error:a}=await de.from(En).select("*").eq("id",e).single();if(a||!n)return console.error("    :",a),{success:!1,message:"  "};if(!await gj(t,n.password_hash))return{success:!1,message:"    "};const i=await kc(r),{error:l}=await Gt.from(En).update({password_hash:i}).eq("id",e);return l?(console.error("    :",l),{success:!1,message:"    "}):{success:!0,message:"    "}}catch(n){return console.error("    :",n),{success:!1,message:"     "}}},vD=async(e,t)=>{try{const r=await kc(t),{error:n}=await Gt.from(En).update({password_hash:r}).eq("id",e);return n?(console.error("    :",n),{success:!1,message:"    "}):{success:!0,message:"    "}}catch(r){return console.error("    :",r),{success:!1,message:"     "}}},yD=async e=>{try{const{error:t}=await Gt.from(En).delete().eq("id",e);if(t)return console.error("    :",t),{success:!1,message:`    : ${t.message}`};try{await hP(e)}catch(r){console.warn("       :",r)}return{success:!0,message:"    "}}catch(t){return console.error("    :",t),{success:!1,message:"     "}}},bD=async()=>{try{const{data:e,error:t}=await de.from(En).select("*").eq("role","superadmin");return t?(console.error("    :",t),[]):oh(e||[])}catch(e){return console.error("    :",e),[]}},Be={generalError:"",generalWarning:"",requiredField:"  ",invalidInput:"  ",dataError:"  ",searchError:"  ",missingCredentials:"     ",permissionError:"  ",accessDenied:"      ",incorrectRole:(e,t)=>`     ${e}   ${t}`,loginFailed:"  ",invalidCredentials:"      ",loginError:"        ",saveFailed:"  ",deleteFailed:"  ",updateFailed:"  ",fetchFailed:"  ",operationFailed:" ",connectionError:"   ",databaseError:"   ",errorLoadingData:"   ",consoleLoginError:"   :",consoleUserLoadError:"    :",consoleUserSaveError:"     :",consoleExportDataError:"   :",consoleImportFileError:"   :",consoleParsingJsonError:"    JSON:",consoleStudentDetailsError:"    :",consoleStudentSaveError:"    :",consoleEmailSendError:"   :",consoleStudentDataSubmitError:"    :",consoleStudentsFetchError:"    :",invalidEmail:"   ",invalidPhone:"   ",invalidName:"  ",invalidDate:"  ",passwordMismatch:"   ",weakPassword:"  "},Fm={loginSuccess:"  ",welcome:e=>`  ${e}`,saveSuccess:"   ",deleteSuccess:"   ",updateSuccess:"   ",operationSuccess:"  ",completed:"  "},wD={submit:"",save:"",cancel:"",edit:"",delete:"",add:"",close:"",back:"",next:"",previous:"",confirm:"",search:"",filter:"",reset:" ",refresh:"",download:"",upload:"",print:"",login:" ",logout:" ",loading:" ...",processing:" ...",saving:" ...",deleting:" ...",updating:" ...",menu:"",home:"",dashboard:" ",settings:"",profile:" ",yes:"",no:"",all:"",none:" ",from:"",to:"",today:"",yesterday:"",tomorrow:"",noData:"  ",noResults:"  ",moreInfo:"  "},On={title:" ",description:"  -      ",userType:" ",superadmin:"",admin:" ",teacher:"",username:" ",usernamePrompt:"  ",usernamePlaceholder:"  ",password:" ",passwordPrompt:"  ",login:" ",loginInProgress:"  ...",processing:" ...",changePasswordDescription:"          ",loginInfoTitle:"   :",loginInfoMessage1:"          .",loginInfoMessage2:"          .",returnToHome:"  "},ve={title:" ",description:"     ",addStudent:"  ",editStudent:"  ",deleteStudent:" ",deleteSuccess:"   ",deleteConfirmation:"        ",deleteDescription:"          .",confirm:" ",cancel:"",unexpectedError:"   ",fullName:" /",fullNameError:"       ",guardianName:" ",teacherName:" ",teacherPlaceholder:"  ",teacherForStudent:"    :",studyCircleName:" ",studyCirclePlaceholder:"  ",grade:" ",age:"",dateOfBirth:" ",lastQuranProgress:" ",quranProgressPlaceholder:"    ",phoneNumber:" ",email:" ",address:"",notes:"",actions:"",save:"",search:"",searchPlaceholder:"    ",noStudents:"  ",addStudentPrompt:"    ",loading:" ...",requiredField:"*  ",optionalField:"()",updateSuccess:"    ",addSuccess:"   ",incompleteData:"  ",incompleteDataMessage:"    ",accessDenied:"   ",accessDeniedMessage:"     .",returnToHome:"  ",editTooltip:"",deleteTooltip:"",viewTooltip:"",noSearchResults:"   ",tryAnotherSearch:"       ",filters:"",export:"",refresh:"",totalStudents:" ",showing:"",from:" ",student:"",gender:"",genderOptions:[{value:"male",label:""},{value:"female",label:""}],studentsList:" ",filterByGrade:"  ",filterByStatus:"  ",name:"",parentName:"  ",phone:" ",status:"",active:"",inactive:" ",import:" ",delete:"",gradeOptions:[{value:"kg1",label:"   (KG1)"},{value:"kg2",label:"   (KG2)"},{value:"p1",label:"  "},{value:"p2",label:"  "},{value:"p3",label:"  "},{value:"p4",label:"  "},{value:"p5",label:"  "},{value:"p6",label:"  "},{value:"m1",label:"  "},{value:"m2",label:"  "},{value:"m3",label:"  "},{value:"h1",label:"  "},{value:"h2",label:"  "},{value:"h3",label:"  "},{value:"u1",label:"   ( )"},{value:"u2",label:"   ( )"},{value:"u3",label:"   ( )"},{value:"u4",label:"   ( )"},{value:"u5",label:"   (   )"},{value:"u6",label:"   (  -  )"},{value:"pg",label:"  (  / )"},{value:"ma",label:""},{value:"phd",label:""},{value:"Other",label:""}],quranPartsOptions:[{value:"less_than_one",label:"  "},{value:"part_1",label:" "},{value:"part_2",label:" "},{value:"part_3",label:" "},{value:"part_4",label:" "},{value:"part_5",label:" "},{value:"part_6",label:" "},{value:"part_7",label:" "},{value:"part_8",label:" "},{value:"part_9",label:" "},{value:"part_10",label:" "},{value:"part_11",label:"  "},{value:"part_12",label:"  "},{value:"part_13",label:"  "},{value:"part_14",label:"  "},{value:"part_15",label:"  "},{value:"part_16",label:"  "},{value:"part_17",label:"  "},{value:"part_18",label:"  "},{value:"part_19",label:"  "},{value:"part_20",label:" "},{value:"part_21",label:"  "},{value:"part_22",label:"  "},{value:"part_23",label:"  "},{value:"part_24",label:"  "},{value:"part_25",label:"  "},{value:"part_26",label:"  "},{value:"part_27",label:"  "},{value:"part_28",label:"  "},{value:"part_29",label:"  "},{value:"part_30",label:" "},{value:"complete",label:"   "}]},ue={title:" ",addUser:"  ",usersList:" ",searchPlaceholder:"  ...",filterByRole:"  ",username:" ",fullName:" ",role:"",circleCount:" ",lastLogin:"  ",status:"",actions:"",noUsers:"  ",active:"",inactive:" ",superadmin:"",admin:" ",teacher:"",addUserForm:{title:"  ",username:" ",fullName:" ",password:" ",confirmPassword:"  ",role:"",email:" ",phone:" ",status:"",submit:" ",cancel:""},editUserForm:{title:"  ",submit:" ",resetPassword:"   "},changePasswordForm:{title:"  ",currentPassword:"  ",newPassword:"  ",confirmNewPassword:"   ",submit:"  ",cancel:"",success:"    ",error:"   ",incorrectPassword:"    ",passwordsMismatch:"      "},deleteConfirmation:"              .",description:"      ",superadmins:" ",administrators:" ",teachers:"",addNewSuperadmin:"   ",addNewAdmin:"   ",addNewteacher:"  ",loading:"  ...",noSuperadmins:"    ",noAdmins:"    ",noteachers:"   ",addSuperadminText:"       ",addAdminText:"       ",addteacherText:"      ",accessDenied:"  ",accessDeniedMessage:"      .",returnToHome:"  ",incompleteData:"  ",incompleteDataMessage:"    .",addSuccess:"  ",addSuccessMessage:"    .",addFailed:"  ",updateSuccess:"  ",updateSuccessMessage:"    .",updateFailed:"  ",deleteSuccess:"  ",deleteSuccessMessage:"   .",deleteFailed:"  ",unexpectedError:"     .",passwordKeep:"(      )",enterPassword:"  ",enterNewPassword:"    ()",chooseRole:" ",cancel:"",saveChanges:" ",neverLoggedIn:"   ",editTooltip:"",deleteTooltip:"",changePasswordTooltip:"  ",editText:"",deleteText:"",changePasswordText:"  ",adminEditRestriction:"      ",onlyMainAdminCanEdit:"      ",loadError:{title:"   ",description:"      ."},addUserError:"    .",updateUserError:"     .",deleteUserError:"    .",deleteConfirmationTitle:" ",deleteConfirmationMessage:"              .",confirm:"",cannotEditSuperadmin:"    ",cannotDeleteSuperadmin:"   ",teacherRestrictions:"       ",teacherProfileTitle:" ",teacherProfileDescription:"    "},Zt={title:"  ",backup:"   ",restore:"  ",backupHistory:"  ",createBackup:"   ",lastBackup:"  ",backupSize:"  ",backupDate:"  ",restoreFromFile:"  ",restoreFromServer:"  ",deleteBackup:"  ",selectBackupFile:"   ",databaseStatus:"  ",databaseSize:"  ",databaseLastUpdate:"   ",tables:"",records:"",optimizeDatabase:"   ",backupInProgress:"   ...",restoreInProgress:"   ...",backupSuccess:"    ",restoreSuccess:"    ",confirmRestore:"            .",functionNotAvailable:"    ",studentsImportProgress:e=>`  ${e}      ...`,studentsImportSuccess:"   ",description:"      ",databaseLabel:" :",exportTitle:" ",exportDescription:"    ",exportJsonButton:"   JSON",importTitle:" ",importDescription:"     ",importJsonButton:"   JSON",backupTitle:" ",backupDescription:"     ",createBackupButton:"  ",clearTitle:":  ",clearDescription:"     ",clearButton:"  ",returnToStudentsButton:"   "},Fe={title:"  ",description:"    ",addGuardian:"   ",editGuardian:"   ",deleteGuardian:"  ",fullName:"",phoneNumber:" ",email:"",address:"",actions:"",searchPlaceholder:"   ...",search:"",cancel:"",save:"",delete:"",confirm:"",loading:" ...",noGuardians:"   ",addGuardianPrompt:"       ",optionalField:"()",deleteConfirmation:"        ",deleteDescription:"      .",unexpectedError:"   ",incompleteData:"  ",incompleteDataMessage:"    ",accessDenied:"  ",accessDeniedMessage:"       ",returnToHome:"   ",deleteSuccess:"    ",editSuccess:"     ",addSuccess:"    ",addGuardianDescription:"    ",editGuardianDescription:"    ",deleteTooltip:"  ",noSearchResults:"   ",tryAnotherSearch:"       ",requiredField:"*  ",updateSuccess:"     ",editTooltip:"",viewTooltip:"",filters:"",export:"",refresh:"",totalGuardians:"  ",showing:"",from:" ",guardian:" ",studentCount:" "},gt={title:"  ",description:"     ",name:" ",teacher:"",location:"",schedule:"",maxStudents:" ",addCircle:"  ",editCircle:" ",deleteCircle:" ",viewStudents:" ",noCircles:"   ",addCirclePrompt:"   ",incompleteData:"  ",incompleteDataMessage:"    ",addSuccess:"   ",updateSuccess:"   ",deleteSuccess:"   ",confirmDelete:"      ",addForm:{title:"   ",submit:""},editForm:{title:"  ",submit:" "},editTooltip:" ",deleteTooltip:" ",viewStudentsTooltip:"  ",loading:"  ...",selectTeacher:" ",enterNumber:" ",noTeachers:"   ",cancel:""};function jv({onLogin:e,onNavigate:t}){const[r,n]=h.useState(""),[a,o]=h.useState(""),[i,l]=h.useState(!1),[c,d]=h.useState(!1),{toast:u}=Tn(),[m,f]=h.useState(!1);h.useState(""),h.useState(""),h.useState(""),h.useState(""),h.useState(!1),h.useState(!1),h.useState(!1),h.useState(!1);const x=async y=>{if(y.preventDefault(),!r||!a){u({title:Be.dataError,description:Be.missingCredentials,variant:"destructive"});return}d(!0);try{const g=await pD({username:r,password:a});g.success&&g.user?(u({title:Fm.loginSuccess,description:Fm.welcome(g.user.full_name)}),e(g.user),t("/")):u({title:Be.loginFailed,description:g.message||Be.invalidCredentials,variant:"destructive"})}catch(g){console.error("Login error:",g),u({title:Be.generalError,description:Be.loginError,variant:"destructive"})}finally{d(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-b from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 bg-cover bg-center",style:{backgroundImage:"url('/src/assets/quran-hero.jpg')"},children:s.jsx("div",{className:"w-full max-w-sm",children:s.jsxs(ut,{className:"border border-islamic-green/20 shadow-xl rounded-2xl backdrop-blur-sm bg-white/90 dark:bg-gray-900/80",children:[s.jsxs(wt,{className:"text-center space-y-2 pb-2",children:[s.jsx("div",{className:"flex justify-center mb-2",children:s.jsx("img",{src:U1,alt:" ",className:"h-20 w-auto rounded-md"})}),s.jsx(yt,{className:"text-xl font-bold text-islamic-green",children:On.title}),s.jsx(Rt,{className:"text-sm text-muted-foreground",children:On.description})]}),s.jsxs(ot,{className:"space-y-4 pt-3",children:[s.jsxs("form",{onSubmit:x,className:"space-y-4",dir:"rtl",children:[s.jsxs("div",{className:"p-6 rounded-2xl shadow-xl border border-blue-100 dark:border-gray-700 w-full max-w-md mx-auto space-y-4 relative overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.3)",backdropFilter:"blur(10px)",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"100px 100px"},children:[s.jsx("div",{className:"absolute inset-0 bg-white/20 dark:bg-gray-900/30 rounded-2xl pointer-events-none"}),s.jsxs("div",{className:"relative space-y-4 z-10",children:[s.jsxs("div",{className:"grid gap-1",children:[s.jsx(ye,{htmlFor:"username",className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:On.username}),s.jsx(fe,{id:"username",placeholder:On.usernamePrompt,value:r,onChange:y=>n(y.target.value),dir:"rtl",className:"w-full text-right border border-islamic-green/30 dark:border-gray-600 dark:bg-gray-800 dark:text-white rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-islamic-green/40 focus:border-islamic-green transition-all duration-200 shadow-sm"})]}),s.jsxs("div",{className:"grid gap-1 relative",children:[s.jsx(ye,{htmlFor:"password",className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:On.password}),s.jsx(fe,{id:"password",type:i?"text":"password",placeholder:On.passwordPrompt,value:a,onChange:y=>o(y.target.value),dir:"rtl",className:"w-full text-right border border-islamic-green/30 dark:border-gray-600 dark:bg-gray-800 dark:text-white rounded-lg px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-2 focus:ring-islamic-green/40 focus:border-islamic-green transition-all duration-200 shadow-sm"}),s.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-300 hover:text-islamic-green transition-colors",children:i?s.jsx(yl,{size:16}):s.jsx(bl,{size:16})})]})]})]}),s.jsx(H,{type:"submit",className:"w-full py-2 text-sm font-semibold bg-gradient-to-r from-islamic-green to-accent text-white rounded-lg shadow hover:from-islamic-green/90 hover:to-accent/90 transition-all duration-200",disabled:c,children:c?On.loginInProgress:On.login})]}),s.jsxs("div",{className:"bg-muted p-2 rounded-lg text-xs text-right border border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"font-medium text-islamic-green mb-1",children:On.loginInfoTitle}),s.jsxs("div",{className:"space-y-0.5 text-muted-foreground",children:[s.jsx("p",{children:On.loginInfoMessage1}),s.jsx("p",{children:On.loginInfoMessage2})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mt-4 gap-2 text-sm",children:[s.jsxs(H,{variant:"outline",onClick:()=>t("/"),className:"flex-1 flex items-center justify-center gap-2 border-islamic-green text-islamic-green hover:bg-islamic-green/10 hover:scale-105 transition-transform duration-150 rounded-lg px-3 py-2",children:[s.jsx(Vw,{className:"h-4 w-4"})," ","  "]}),s.jsxs(H,{variant:"outline",onClick:()=>f(!0),className:"flex-1 flex items-center justify-center gap-2 border-amber-600 text-amber-600 hover:bg-amber-100 hover:scale-105 transition-transform duration-150 rounded-lg px-3 py-2",children:[s.jsx(Hw,{className:"h-4 w-4"})," ","  "]})]})]})]})})})}const jD=jc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-islamic-green",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-islamic-green",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground hover:bg-islamic-green hover:text-white hover:border-transparent"}},defaultVariants:{variant:"default"}});function lt({className:e,variant:t,...r}){return s.jsx("div",{className:Se(jD({variant:t}),e),...r})}function _D(e,t=[]){let r=[];function n(o,i){const l=h.createContext(i),c=r.length;r=[...r,i];function d(m){const{scope:f,children:x,...y}=m,g=(f==null?void 0:f[e][c])||l,w=h.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:w,children:x})}function u(m,f){const x=(f==null?void 0:f[e][c])||l,y=h.useContext(x);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=r.map(i=>h.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,ND(a,...t)]}function ND(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var SD=h.createContext(void 0);function Tg(e){const t=h.useContext(SD);return e||t||"ltr"}var gf="rovingFocusGroup.onEntryFocus",kD={bubbles:!1,cancelable:!0},lh="RovingFocusGroup",[zm,Zj,CD]=G0(lh),[ED,e_]=_D(lh,[CD]),[TD,PD]=ED(lh),t_=h.forwardRef((e,t)=>s.jsx(zm.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(zm.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(OD,{...e,ref:t})})}));t_.displayName=lh;var OD=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,f=h.useRef(null),x=jt(t,f),y=Tg(o),[g=null,w]=xo({prop:i,defaultProp:l,onChange:c}),[v,p]=h.useState(!1),b=en(d),N=Zj(r),S=h.useRef(!1),[E,D]=h.useState(0);return h.useEffect(()=>{const I=f.current;if(I)return I.addEventListener(gf,b),()=>I.removeEventListener(gf,b)},[b]),s.jsx(TD,{scope:r,orientation:n,dir:y,loop:a,currentTabStopId:g,onItemFocus:h.useCallback(I=>w(I),[w]),onItemShiftTab:h.useCallback(()=>p(!0),[]),onFocusableItemAdd:h.useCallback(()=>D(I=>I+1),[]),onFocusableItemRemove:h.useCallback(()=>D(I=>I-1),[]),children:s.jsx(Je.div,{tabIndex:v||E===0?-1:0,"data-orientation":n,...m,ref:x,style:{outline:"none",...e.style},onMouseDown:De(e.onMouseDown,()=>{S.current=!0}),onFocus:De(e.onFocus,I=>{const ee=!S.current;if(I.target===I.currentTarget&&ee&&!v){const J=new CustomEvent(gf,kD);if(I.currentTarget.dispatchEvent(J),!J.defaultPrevented){const T=N().filter(A=>A.focusable),_=T.find(A=>A.active),O=T.find(A=>A.id===g),k=[_,O,...T].filter(Boolean).map(A=>A.ref.current);s_(k,u)}}S.current=!1}),onBlur:De(e.onBlur,()=>p(!1))})})}),r_="RovingFocusGroupItem",n_=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:o,...i}=e,l=Es(),c=o||l,d=PD(r_,r),u=d.currentTabStopId===c,m=Zj(r),{onFocusableItemAdd:f,onFocusableItemRemove:x}=d;return h.useEffect(()=>{if(n)return f(),()=>x()},[n,f,x]),s.jsx(zm.ItemSlot,{scope:r,id:c,focusable:n,active:a,children:s.jsx(Je.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...i,ref:t,onMouseDown:De(e.onMouseDown,y=>{n?d.onItemFocus(c):y.preventDefault()}),onFocus:De(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:De(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const g=MD(y,d.orientation,d.dir);if(g!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=m().filter(p=>p.focusable).map(p=>p.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const p=v.indexOf(y.currentTarget);v=d.loop?RD(v,p+1):v.slice(p+1)}setTimeout(()=>s_(v))}})})})});n_.displayName=r_;var AD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function DD(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function MD(e,t,r){const n=DD(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return AD[n]}function s_(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function RD(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var ID=t_,$D=n_,Pg="Tabs",[LD,tR]=So(Pg,[e_]),a_=e_(),[FD,Og]=LD(Pg),o_=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Tg(l),[m,f]=xo({prop:n,onChange:a,defaultProp:o});return s.jsx(FD,{scope:r,baseId:Es(),value:m,onValueChange:f,orientation:i,dir:u,activationMode:c,children:s.jsx(Je.div,{dir:u,"data-orientation":i,...d,ref:t})})});o_.displayName=Pg;var i_="TabsList",l_=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,o=Og(i_,r),i=a_(r);return s.jsx(ID,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:s.jsx(Je.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});l_.displayName=i_;var c_="TabsTrigger",d_=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...o}=e,i=Og(c_,r),l=a_(r),c=f_(i.baseId,n),d=m_(i.baseId,n),u=n===i.value;return s.jsx($D,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(Je.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:t,onMouseDown:De(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?i.onValueChange(n):m.preventDefault()}),onKeyDown:De(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&i.onValueChange(n)}),onFocus:De(e.onFocus,()=>{const m=i.activationMode!=="manual";!u&&!a&&m&&i.onValueChange(n)})})})});d_.displayName=c_;var u_="TabsContent",h_=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:o,...i}=e,l=Og(u_,r),c=f_(l.baseId,n),d=m_(l.baseId,n),u=n===l.value,m=h.useRef(u);return h.useEffect(()=>{const f=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(f)},[]),s.jsx(zs,{present:a||u,children:({present:f})=>s.jsx(Je.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:f&&o})})});h_.displayName=u_;function f_(e,t){return`${e}-trigger-${t}`}function m_(e,t){return`${e}-content-${t}`}var zD=o_,g_=l_,p_=d_,x_=h_;const uc=zD,$i=h.forwardRef(({className:e,...t},r)=>s.jsx(g_,{ref:r,className:Se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));$i.displayName=g_.displayName;const Gr=h.forwardRef(({className:e,...t},r)=>s.jsx(p_,{ref:r,className:Se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Gr.displayName=p_.displayName;const cs=h.forwardRef(({className:e,...t},r)=>s.jsx(x_,{ref:r,className:Se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));cs.displayName=x_.displayName;const hc=async()=>{try{console.log("     ...");const{data:e,error:t}=await de.from(Ta).select(`
        *,
        guardian:guardian_id (*),
        study_circle:study_circle_id (
          *,
          teacher:teacher_id (*)
        )
      `).is("deleted_at",null).order("created_at",{ascending:!1});if(t)throw console.error("     Supabase:",t),new Error(t.message);e&&e.length>0?(console.log(" ",e.length,""),console.log("    :",{id:e[0].id,full_name:e[0].full_name,has_guardian:!!e[0].guardian,has_teacher:!!e[0].teacher})):console.log("       ");const r=Cg(e||[]);return console.log("     :",r.length),r}catch(e){return console.error("   :",e),[]}},BD=async e=>{try{console.log("Received student data in addStudent:",e);const{data:t,error:r}=await de.from("students").insert({full_name:e.full_name,guardian_id:e.guardian_id,grade_level:e.grade_level,date_of_birth:e.date_of_birth,phone_number:e.phone_number,email:e.email,memorized_parts:e.memorized_parts,notes:e.notes,study_circle_id:e.study_circle_id}).select();return r?(console.error("Error adding student:",r),{success:!1,message:r.message}):{success:!0,data:t[0]}}catch(t){return console.error("Unexpected error in addStudent:",t),{success:!1,message:"   "}}},UD=async e=>{try{const{error:t}=await Gt.from(Ta).delete().eq("id",e);return t?(console.error("     Supabase:",t),{success:!1,message:`   : ${t.message}`}):{success:!0,message:"   "}}catch(t){return console.error("   :",t),{success:!1,message:"    "}}},fl=async e=>{var t;try{console.log("     :",JSON.stringify(e,null,2));let r=de.from(Ta).select(`
        *,
        guardian:guardian_id (*),
        study_circle:study_circle_id (*, teacher:teacher_id (*))
      `).is("deleted_at",null);const n={full_name:"full_name",guardian_id:"guardian_id",study_circle_id:"study_circle_id",teacher_id:"study_circles.teacher_id",date_of_birth:"date_of_birth",gender:"gender",phone_number:"phone_number",email:"email",enrollment_date:"enrollment_date",grade_level:"grade_level"};if(Object.keys(e).forEach(l=>{(e[l]===""||e[l]===null||e[l]===void 0||e[l]==="all")&&(console.log(`   ${l}    ""`),delete e[l])}),e.study_circle_ids&&Array.isArray(e.study_circle_ids)&&e.study_circle_ids.length>0){const l=e.study_circle_ids.filter(c=>c&&c!=="all"&&c!=="");l.length>0?(console.log("      :",l),r=r.in("study_circle_id",l)):console.log('          ""'),delete e.study_circle_ids}if(e.study_circle_id&&(e.study_circle_id!=="all"&&e.study_circle_id!==""?(console.log("      :",e.study_circle_id),r=r.eq("study_circle_id",e.study_circle_id)):console.log('      ""  '),delete e.study_circle_id),e.teacher_id){console.log("     :",e.teacher_id);const{data:l,error:c}=await de.from("study_circles").select("id, name").eq("teacher_id",e.teacher_id).is("deleted_at",null);if(c)return console.error("     :",c),[];if(l&&l.length>0){const d=l.map(u=>u.id);console.log(`   ${l.length}   :`,l.map(u=>`${u.name} (${u.id})`)),console.log("   :",d),r=r.in("study_circle_id",d)}else return console.log("       "),[];delete e.teacher_id}Object.entries(e).forEach(([l,c])=>{if(c&&n[l]){const d=n[l];typeof c=="string"?(console.log(`   : ${l} = ${c} (: ${d})`),r=r.ilike(d,`%${c}%`)):(console.log(`   : ${l} = ${c} (: ${d})`),r=r.eq(d,c))}else c&&console.log(`   "${l}"     fieldMappings:`,c)});const{data:a,error:o}=await r;if(o)return console.error("      Supabase:",o),[];if(console.log(`   ${a?a.length:0} `),a&&a.length>0){const l=a.map(u=>u.study_circle_id).filter(Boolean),c=[...new Set(l)];console.log(`   ${c.length}   :`,c);const d=Math.min(3,a.length);for(let u=0;u<d;u++){const m=a[u];console.log(`  ${u+1}:`,{id:m.id,name:m.full_name,study_circle_id:m.study_circle_id,study_circle_name:((t=m.study_circle)==null?void 0:t.name)||" "})}}const i=Cg(a||[]);return console.log("   "),i}catch(r){return console.error("    :",r),[]}},WD=async e=>{var t,r,n,a;try{console.log("      :",e);const{data:o,error:i}=await de.from(Ta).select(`
        *,
        guardian:guardian_id (*),
        study_circle:study_circle_id (
          *,
          teacher:teacher_id (*)
        )
      `).eq("guardian_id",e).is("deleted_at",null).order("created_at",{ascending:!1});return i?(console.error("      :",i),[]):(console.log(`  ${(o==null?void 0:o.length)||0}   `),o&&o.length>0&&console.log("    :",{id:o[0].id,full_name:o[0].full_name,has_circle:!!o[0].study_circle,circle_name:((t=o[0].study_circle)==null?void 0:t.name)||" ",has_teacher:!!((r=o[0].study_circle)!=null&&r.teacher),teacher_name:((a=(n=o[0].study_circle)==null?void 0:n.teacher)==null?void 0:a.full_name)||" "}),Cg(o||[]).map(c=>{var u;const d=(o==null?void 0:o.find(m=>m.id===c.id))||{};return{...c,guardian:d.guardian?{full_name:d.guardian.full_name,phone_number:d.guardian.phone_number}:void 0,teacher:(u=d.study_circle)!=null&&u.teacher?{full_name:d.study_circle.teacher.full_name}:void 0,study_circle:d.study_circle?{id:d.study_circle.id,name:d.study_circle.name}:void 0}}))}catch(o){return console.error("      :",o),[]}},v_=async()=>{try{const e=await hc();return e.length===0?{success:!1,message:"   "}:{success:!0,data:JSON.stringify(e,null,2),message:`  ${e.length}  `}}catch(e){return console.error("   :",e),{success:!1,message:"    "}}};var Ag="Dialog",[y_,b_]=So(Ag),[VD,Yn]=y_(Ag),w_=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,l=h.useRef(null),c=h.useRef(null),[d=!1,u]=xo({prop:n,defaultProp:a,onChange:o});return s.jsx(VD,{scope:t,triggerRef:l,contentRef:c,contentId:Es(),titleId:Es(),descriptionId:Es(),open:d,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(m=>!m),[u]),modal:i,children:r})};w_.displayName=Ag;var j_="DialogTrigger",__=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Yn(j_,r),o=jt(t,a.triggerRef);return s.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Rg(a.open),...n,ref:o,onClick:De(e.onClick,a.onOpenToggle)})});__.displayName=j_;var Dg="DialogPortal",[HD,N_]=y_(Dg,{forceMount:void 0}),S_=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,o=Yn(Dg,t);return s.jsx(HD,{scope:t,forceMount:r,children:h.Children.map(n,i=>s.jsx(zs,{present:r||o.open,children:s.jsx(bc,{asChild:!0,container:a,children:i})}))})};S_.displayName=Dg;var yu="DialogOverlay",k_=h.forwardRef((e,t)=>{const r=N_(yu,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,o=Yn(yu,e.__scopeDialog);return o.modal?s.jsx(zs,{present:n||o.open,children:s.jsx(qD,{...a,ref:t})}):null});k_.displayName=yu;var qD=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Yn(yu,r);return s.jsx(_g,{as:Na,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Je.div,{"data-state":Rg(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),bo="DialogContent",C_=h.forwardRef((e,t)=>{const r=N_(bo,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,o=Yn(bo,e.__scopeDialog);return s.jsx(zs,{present:n||o.open,children:o.modal?s.jsx(GD,{...a,ref:t}):s.jsx(KD,{...a,ref:t})})});C_.displayName=bo;var GD=h.forwardRef((e,t)=>{const r=Yn(bo,e.__scopeDialog),n=h.useRef(null),a=jt(t,r.contentRef,n);return h.useEffect(()=>{const o=n.current;if(o)return jg(o)},[]),s.jsx(E_,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:De(e.onFocusOutside,o=>o.preventDefault())})}),KD=h.forwardRef((e,t)=>{const r=Yn(bo,e.__scopeDialog),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(E_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),E_=h.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,l=Yn(bo,r),c=h.useRef(null),d=jt(t,c);return wg(),s.jsxs(s.Fragment,{children:[s.jsx(nh,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:s.jsx(Bi,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Rg(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(QD,{titleId:l.titleId}),s.jsx(XD,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Mg="DialogTitle",T_=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Yn(Mg,r);return s.jsx(Je.h2,{id:a.titleId,...n,ref:t})});T_.displayName=Mg;var P_="DialogDescription",O_=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Yn(P_,r);return s.jsx(Je.p,{id:a.descriptionId,...n,ref:t})});O_.displayName=P_;var A_="DialogClose",D_=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Yn(A_,r);return s.jsx(Je.button,{type:"button",...n,ref:t,onClick:De(e.onClick,()=>a.onOpenChange(!1))})});D_.displayName=A_;function Rg(e){return e?"open":"closed"}var M_="DialogTitleWarning",[YD,R_]=pC(M_,{contentName:bo,titleName:Mg,docsSlug:"dialog"}),QD=({titleId:e})=>{const t=R_(M_),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},JD="DialogDescriptionWarning",XD=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${R_(JD).contentName}}.`;return h.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},I_=w_,ZD=__,$_=S_,Ig=k_,$g=C_,Lg=T_,Fg=O_,ch=D_;const ir=I_,L_=$_,e7=ch,zg=h.forwardRef(({className:e,...t},r)=>s.jsx(Ig,{ref:r,className:Se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));zg.displayName=Ig.displayName;const lr=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(L_,{children:[s.jsx(zg,{}),s.jsxs($g,{ref:n,className:Se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(ch,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(vo,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lr.displayName=$g.displayName;const jr=({className:e,...t})=>s.jsx("div",{className:Se("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});jr.displayName="DialogHeader";const cr=({className:e,...t})=>s.jsx("div",{className:Se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});cr.displayName="DialogFooter";const dr=h.forwardRef(({className:e,...t},r)=>s.jsx(Lg,{ref:r,className:Se("text-lg font-semibold leading-none tracking-tight",e),...t}));dr.displayName=Lg.displayName;const Qa=h.forwardRef(({className:e,...t},r)=>s.jsx(Fg,{ref:r,className:Se("text-sm text-muted-foreground",e),...t}));Qa.displayName=Fg.displayName;const Oa=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:Se("w-full caption-bottom text-sm border border-islamic-green/20",e),...t})}));Oa.displayName="Table";const Aa=h.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:Se("[&_tr]:border-b bg-islamic-green/25",e),...t}));Aa.displayName="TableHeader";const Da=h.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:Se("[&_tr:last-child]:border-0 [&_tr:hover]:bg-islamic-green/5",e),...t}));Da.displayName="TableBody";const t7=h.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:Se("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));t7.displayName="TableFooter";const Ir=h.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:Se("border-b border-islamic-green/10 transition-colors hover:bg-islamic-green/5 data-[state=selected]:bg-islamic-green/10",e),...t}));Ir.displayName="TableRow";const vt=h.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:Se("h-12 px-4 text-right align-middle font-bold text-islamic-green [&:has([role=checkbox])]:pr-0",e),...t}));vt.displayName="TableHead";const tt=h.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:Se("p-4 align-middle [&:has([role=checkbox])]:pr-0 text-islamic-green/80",e),...t}));tt.displayName="TableCell";const r7=h.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:Se("mt-4 text-sm text-muted-foreground",e),...t}));r7.displayName="TableCaption";const pf=768;function n7(){const[e,t]=h.useState(void 0);return h.useEffect(()=>{const r=window.matchMedia(`(max-width: ${pf-1}px)`),n=()=>{t(window.innerWidth<pf)};return r.addEventListener("change",n),t(window.innerWidth<pf),()=>r.removeEventListener("change",n)},[]),!!e}function ds(e){const{data:t,columns:r,emptyMessage:n="  ",className:a="",rowClassName:o="",getRowClassName:i,defaultView:l="card",cardActions:c,cardPrimaryActions:d,cardMaxFieldsCollapsed:u=6,enableCardExpand:m=!0,onCardClick:f,highlightOnHover:x=!0,onAddNew:y,onRefresh:g,title:w="",cardGridColumns:v={sm:1,md:2,lg:3,xl:4},cardWidth:p}=e,[b,N]=h.useState(l),S=n7(),[E,D]=h.useState(null);h.useEffect(()=>{N(S?"card":"table")},[S]);const I=()=>{D(T=>T===null?"asc":T==="asc"?"desc":null)},ee=he.useMemo(()=>{if(!E||r.length===0)return t;const T=r[0];return[...t].sort((_,O)=>{const j=_[T.key],k=O[T.key];return j===void 0?E==="asc"?1:-1:k===void 0?E==="asc"?-1:1:typeof j=="string"&&typeof k=="string"?E==="asc"?j.localeCompare(k):k.localeCompare(j):E==="asc"?j>k?1:-1:k>j?1:-1})},[t,r,E]);function J(T){return T==null?"-":typeof T=="string"||typeof T=="number"||typeof T=="boolean"?String(T):typeof T=="object"?"label"in T?String(T.label):"name"in T?String(T.name):"-":"-"}return s.jsxs("div",{className:Se("w-full overflow-hidden",a),children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-0 mb-2 p-2 rounded-5xl shadow-lg bg-gradient-to-r from-green-500 via-blue to-green-200 dark:from-green-900/30 dark:via-green-800/40 dark:to-green-900/30 border border-green-200 dark:border-green-200",children:[s.jsx("div",{className:"flex items-center gap-3 hidden md:flex",children:s.jsx("span",{className:"hidden sm:inline text-green-900 dark:text-green-100 font-extrabold text-lg sm:text-xl tracking-wide",children:w})}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-3",children:[s.jsxs("div",{title:" ",className:"flex items-center gap-1 px-2 sm:px-3 py-1 rounded-full bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-md text-xs sm:text-sm",children:[s.jsx(v4,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white/90"}),t.length]}),r.length>0&&s.jsxs(H,{onClick:I,size:"icon",className:Se("h-7 w-7 sm:h-9 sm:w-auto sm:px-3 sm:py-1.5 flex items-center justify-center gap-2 rounded-lg shadow-md transition-all duration-200",E?"bg-blue-600 text-white border-blue-600 hover:bg-blue-700":"bg-white dark:bg-blue-800 text-blue-800 dark:text-blue-200 border-blue-300 dark:border-blue-700 hover:bg-blue-100 dark:hover:bg-blue-700"),title:E==="asc"?`   ${r[0].header}`:E==="desc"?`   ${r[0].header}`:`  ${r[0].header}`,children:[E==="asc"?s.jsx(r4,{className:"h-4 w-4 sm:h-5 sm:w-5"}):E==="desc"?s.jsx(s4,{className:"h-4 w-4 sm:h-5 sm:w-5"}):s.jsx(n4,{className:"h-4 w-4 sm:h-5 sm:w-5"}),s.jsx("span",{className:"hidden sm:inline font-medium",children:E==="asc"?"":E==="desc"?"":""})]}),s.jsxs("div",{className:"hidden sm:flex items-center gap-1 sm:gap-3",children:[s.jsxs(H,{onClick:()=>N("table"),size:"icon",className:Se("h-7 w-7 sm:h-9 sm:w-auto sm:px-3 sm:py-1.5 flex items-center justify-center gap-2 rounded-lg shadow-md transition-all duration-200",b==="table"?"bg-green-600 text-white border-green-600 hover:bg-green-700":"bg-white dark:bg-green-800 text-green-800 dark:text-green-200 border-green-300 dark:border-green-700 hover:bg-green-100 dark:hover:bg-green-700"),title:" ",children:[s.jsx(w4,{className:"h-4 w-4 sm:h-5 sm:w-5"}),s.jsx("span",{className:"hidden sm:inline font-medium",children:""})]}),s.jsxs(H,{onClick:()=>N("card"),size:"icon",className:Se("h-7 w-7 sm:h-9 sm:w-auto sm:px-3 sm:py-1.5 flex items-center justify-center gap-2 rounded-lg shadow-md transition-all duration-200",b==="card"?"bg-green-600 text-white border-green-600 hover:bg-green-700":"bg-white dark:bg-green-800 text-green-800 dark:text-green-200 border-green-300 dark:border-green-700 hover:bg-green-100 dark:hover:bg-green-700"),title:" ",children:[s.jsx(qw,{className:"h-4 w-4 sm:h-5 sm:w-5"}),s.jsx("span",{className:"hidden sm:inline font-medium",children:""})]})]})]})]}),ee.length===0&&s.jsx("div",{className:"text-center py-16 px-4 border border-green-200 dark:border-green-700 rounded-2xl bg-gradient-to-b from-green-50/50 to-white dark:from-green-900/20 dark:to-green-950/20",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("div",{className:"rounded-full bg-green-100 dark:bg-green-900/50 p-5 mb-4",children:s.jsx(Pt,{className:"h-12 w-12 text-green-500 dark:text-green-400"})}),s.jsx("h3",{className:"text-xl font-bold text-green-700 dark:text-green-300 mb-2",children:n||"  "}),s.jsx("p",{className:"text-green-600/70 dark:text-green-400/70 max-w-md",children:"         "}),y&&s.jsxs(H,{variant:"default",size:"sm",onClick:y,className:"mt-6 bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(Qr,{className:"h-4 w-4 ml-1"}),s.jsx("span",{children:" "})]})]})}),ee.length>0&&b==="table"&&s.jsx("div",{className:"border border-green-200 dark:border-green-700 rounded-2xl overflow-hidden shadow-md bg-white dark:bg-green-950/20",children:s.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[calc(100vh-200px)]",children:s.jsxs(Oa,{className:"direction-rtl w-full border-collapse",children:[s.jsx(Aa,{className:"bg-gradient-to-b from-green-800 via-green-600 to-green-500 dark:from-green-900 dark:via-green-800 dark:to-green-700 sticky top-0 z-10",children:s.jsx(Ir,{children:r.map(T=>{const _=T.align==="center"?"text-center":T.align==="left"?"text-left":"text-right";return s.jsx(vt,{className:Se(_,"font-bold text-white py-3 px-4 border-r border-green-600/50 dark:border-green-800/50"),style:{width:T.width},children:T.header},T.key)})})}),s.jsx(Da,{children:ee.map((T,_)=>s.jsx(Ir,{className:Se("odd:bg-green-50 even:bg-white dark:odd:bg-green-900/20 dark:even:bg-green-950/10 hover:bg-green-100 dark:hover:bg-green-800/30 transition-colors duration-200 border-b border-green-200 dark:border-green-800/30",i?i(T,_):"",o),children:r.map(O=>{const j=O.align==="center"?"text-center":O.align==="left"?"text-left":"text-right";return s.jsx(tt,{className:Se(j,"py-3 px-4 font-medium text-green-900 dark:text-green-200 border-r border-green-200/70 dark:border-green-800/30"),children:O.render?O.render(T):T[O.key]?s.jsx("span",{children:T[O.key]}):s.jsx("span",{className:"text-green-500/60 dark:text-green-500/40 italic",children:"-"})},`${T.id}-${O.key}`)})},T.id))})]})})}),ee.length>0&&b==="card"&&s.jsx("div",{className:`grid gap-4 w-full p-2 overflow-y-auto max-h-[calc(100vh-200px)]
                        grid-cols-1 
                        ${v.md?`md:grid-cols-${v.md}`:"md:grid-cols-2"} 
                        ${v.lg?`lg:grid-cols-${v.lg}`:"lg:grid-cols-3"} 
                        ${v.xl?`xl:grid-cols-${v.xl}`:"xl:grid-cols-4"}`,children:(()=>{const T=({item:_})=>{const[O,j]=h.useState(!1),A=r.find(W=>W.important)||r[0],F=_[A.key]||"",R=r.filter(W=>W.key!==A.key),z=m&&!O?R.slice(0,u):R,Y=m&&R.length>u;return s.jsxs("div",{role:f?"button":void 0,tabIndex:f?0:-1,onClick:W=>{f&&W.target.getAttribute("data-stop")!=="true"&&f(_)},onKeyDown:W=>{f&&(W.key==="Enter"||W.key===" ")&&(W.preventDefault(),f(_))},className:Se("group relative rounded-lg border border-green-200/70 dark:border-green-800/50 bg-white/90 dark:bg-green-900/30 shadow-sm transition-all duration-200 overflow-hidden flex flex-col focus:outline-none focus:ring-2 focus:ring-green-500 h-full",p?"":"w-full",x&&"hover:shadow-md hover:border-green-400/60 dark:hover:border-green-600/60"),style:p?{width:p}:void 0,children:[s.jsx("div",{className:`px-3 py-2.5 bg-gradient-to-r from-green-600 via-emerald-500 to-green-400 \r
                                                    dark:from-green-800 dark:via-green-700 dark:to-green-600 \r
                                                    text-white rounded-t-lg shadow-md flex items-center justify-between`,children:s.jsx("h3",{className:"font-bold text-sm sm:text-base tracking-wide text-white drop-shadow-sm truncate flex-1",children:A.render?A.render(_):F})}),s.jsxs("div",{className:"w-full",children:[s.jsx("table",{className:"hidden sm:table w-full border border-green-300 dark:border-green-700 text-[12px] sm:text-xs table-fixed",children:s.jsx("tbody",{children:z.map(W=>{const Z=W.render?W.render(_):_[W.key];return s.jsxs("tr",{className:"hover:bg-green-50 dark:hover:bg-green-900/25",children:[s.jsx("td",{className:"w-[30%] border border-green-300 dark:border-green-700 px-2 py-1 font-medium text-green-700 dark:text-green-300 text-right",children:W.header}),s.jsx("td",{className:`w-[70%] border border-green-300 dark:border-green-700 px-2 py-1 \r
                                                                            text-green-800 dark:text-green-100 text-right \r
                                                                            bg-green-50 dark:bg-green-900/50`,children:s.jsx("div",{className:`w-full max-w-xs text-sm text-green-800 dark:text-green-100 \r
                                                                                bg-green-50 dark:bg-green-800/30  \r
                                                                                border border-green-200 dark:border-green-700\r
                                                                                rounded-md px-2 py-1 min-h-[28px] flex items-center justify-center`,children:Z!=null?typeof Z=="object"&&he.isValidElement(Z)?Z:s.jsx("span",{className:"text-center",children:J(Z)}):s.jsx("span",{className:"text-green-400/60 italic text-center",children:"-"})})})]},`${_.id}-${W.key}-row`)})})}),s.jsx("div",{className:"sm:hidden space-y-4",children:z.map(W=>{const Z=W.render?W.render(_):_[W.key];return s.jsxs("div",{className:"p-2 border-b border-green-200 dark:border-green-700",children:[s.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-1 text-right",children:W.header}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:`w-full max-w-xs text-sm text-green-800 dark:text-green-100 \r
                                                                    bg-green-50 dark:bg-green-800/30  \r
                                                                    border border-green-200 dark:border-green-700 \r
                                                                    rounded-md px-2 py-1 min-h-[28px] flex items-center justify-center`,children:Z!=null?typeof Z=="object"&&he.isValidElement(Z)?Z:s.jsx("span",{className:"text-center font-medium text-green-800 dark:text-green-100",children:J(Z)}):s.jsx("span",{className:"text-green-400/60 italic text-center",children:"-"})})})]},`${_.id}-${W.key}-form`)})})]}),Y&&s.jsxs(H,{variant:"ghost",size:"sm",onClick:W=>{W.preventDefault(),W.stopPropagation(),W.target.setAttribute("data-stop","true"),j(!O)},className:"mt-1 mb-2 mx-auto text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-xs",children:[O?" ":" ",O?s.jsx(J0,{className:"h-3.5 w-3.5 mr-1"}):s.jsx(zu,{className:"h-3.5 w-3.5 mr-1"})]})]},_.id)};return ee.map(_=>s.jsx(T,{item:_},_.id))})()})]})}function s7({onNavigate:e}){const[t,r]=h.useState(""),[n,a]=h.useState([]),[o,i]=h.useState(null),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[m,f]=h.useState(null),[x,y]=h.useState(null),[g,w]=h.useState([]),[v,p]=h.useState(!1),b=async j=>{var k,A;try{f(null),console.log("     :",j);const F=j.replace(/\s+/g,"").trim();console.log("   :",F);let R=null,z=null;const Y=await de.from("guardians").select("id, full_name, phone_number, email").eq("phone_number",F).limit(1);if(Y.data&&Y.data.length>0?(R=Y.data,z=Y.error,console.log("     "),console.log("  :",Y.data[0]),i({id:Y.data[0].id,fullName:Y.data[0].full_name,phoneNumber:Y.data[0].phone_number,email:Y.data[0].email})):(i(null),console.log("       ")),z)return console.error("     :",z),[];if(!R||R.length===0)return console.error("       :",F),[];const W=R[0].id,Z=await WD(W);if(!Z||Z.length===0)return[];const B=[];for(const X of Z){const{data:K,error:ae}=await de.from("assessments").select(`
                        id, 
                        date, 
                        memorization_score, 
                        recitation_score, 
                        tajweed_score,
                        recorded_by,
                        profiles:recorded_by(full_name)
                    `).eq("student_id",X.id).order("date",{ascending:!1}).limit(10);ae&&console.error("    :",ae),console.log("   :",X.full_name," :",X.id,"  ",!!K&&K.length>0," :",(K==null?void 0:K.length)||0,K);const{data:te,error:me}=await de.from("attendance").select(`
                        id,
                        circle_session_id,
                        student_id,
                        status,
                        note,
                        recorded_at,
                        recorded_by,
                        circle_session:circle_session_id(id, session_date),
                        profiles:recorded_by(full_name)
                    `).eq("student_id",X.id).order("recorded_at",{ascending:!1}).limit(10);me&&console.error("    :",me),console.log("  :",X.full_name,te);const{data:je,error:V}=await de.from("teacher_notes").select("id, date, note, type").eq("student_id",X.id).order("date",{ascending:!1}).limit(10);let Q=(K==null?void 0:K.map(le=>(console.log(" :",le),{id:le.id||`temp-${Math.random()}`,studentName:X.full_name,date:le.date,memorization:Number(le.memorization_score)||0,recitation:Number(le.recitation_score)||0,tajweed:Number(le.tajweed_score)||0,recordedBy:le.profiles?le.profiles.full_name:" "})))||[];Q.length===0&&(console.log("     :",X.full_name),Q=[{id:`test-1-${X.id}`,studentName:X.full_name,date:new Date().toISOString().split("T")[0],memorization:85,recitation:90,tajweed:80,recordedBy:""},{id:`test-2-${X.id}`,studentName:X.full_name,date:new Date(Date.now()-7*24*60*60*1e3).toISOString().split("T")[0],memorization:75,recitation:80,tajweed:70,recordedBy:""}]),console.log("  :",Q.length,Q),console.log(" :",Q);const ie=(te==null?void 0:te.map(le=>{var Pe,He;return console.log("  :",le),{id:le.id,date:((He=(Pe=le.circle_session)==null?void 0:Pe[0])==null?void 0:He.session_date)||(le.recorded_at?le.recorded_at.split("T")[0]:""),status:ee(le.status),notes:le.note,recordedBy:le.profiles?le.profiles.full_name:" "}}))||[],ne=(je==null?void 0:je.map(le=>({id:le.id,date:le.date,note:le.note,type:le.type})))||[];B.push({id:X.id,fullName:X.full_name,grade:X.grade_level||"",circleName:((k=X.study_circle)==null?void 0:k.name)||"",guardianId:W,teacherName:((A=X.teacher)==null?void 0:A.full_name)||"",grades:Q||[],attendance:ie||[],notes:ne||[]})}return B}catch(F){return console.error("     :",F),f("     .    ."),[]}},N=async()=>{if(!t){f("   ");return}if(t.length<10){f("     (10   )");return}c(!0),u(!0),f(null);try{const j=await b(t);a(j),j.length===0&&(f("     "),await new Promise(k=>setTimeout(k,500)))}catch(j){console.error("  :",j),f("   .    .")}finally{c(!1)}},S=j=>j>=90?"bg-green-100 text-green-800 border-green-200":j>=80?"bg-blue-100 text-blue-800 border-blue-200":j>=70?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200",E=j=>{const k=ve.gradeOptions.find(A=>A.value.toLowerCase()===(j==null?void 0:j.toLowerCase()));return k?k.label:j||" "},D=j=>j===""?"bg-green-100 text-green-800 border-green-200":j===""?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200",I=j=>j||gt.noCircles,ee=j=>{switch(j){case"present":return"";case"absent":return"";case"late":return"";case"excused":return" ";default:return j}},J=j=>j===""?"bg-green-100 text-green-800 border-green-200":j===""?"bg-blue-100 text-blue-800 border-blue-200":j===""?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-gray-100 text-gray-800 border-gray-200",T=j=>new Date(j).toLocaleDateString("ar",{year:"numeric",month:"long",day:"numeric",calendar:"gregory"}),_=j=>{if(!j.grades||j.grades.length===0)return 0;const k=j.grades.reduce((A,F)=>A+F.memorization+F.recitation+F.tajweed,0);return Math.round(k/(j.grades.length*3))},O=j=>{if(!j.attendance||j.attendance.length===0)return 0;const k=j.attendance.filter(A=>A.status==="").length;return Math.round(k/j.attendance.length*100)};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-islamic-light to-muted p-4",children:s.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"mx-auto mb-4 p-3 bg-gradient-to-br from-islamic-green to-accent rounded-full w-fit",children:s.jsx(Is,{className:"h-8 w-8 text-white"})}),s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-islamic-green to-accent bg-clip-text text-transparent mb-2",children:"  "}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"       "})]}),s.jsxs(ut,{className:"mb-10 rounded-2xl overflow-hidden shadow-xl border border-islamic-green/20 bg-white",children:[s.jsxs(wt,{className:"bg-gradient-to-r from-islamic-green to-green-700 text-white p-5",children:[s.jsxs(yt,{className:"text-xl flex items-center gap-3 font-semibold",children:[s.jsx(S4,{size:26,className:"text-yellow-200"}),"  "]}),s.jsx(Rt,{className:"text-white/80",children:"        "})]}),s.jsxs(ot,{className:"p-6 space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"phone",className:"text-base font-medium text-gray-700",children:"   "}),s.jsxs("div",{className:"flex w-full overflow-hidden rounded-xl border border-islamic-green/30 shadow-sm focus-within:ring-2 focus-within:ring-islamic-green",children:[s.jsx(fe,{id:"phone",type:"tel",placeholder:": 0100000000",value:t,onChange:j=>r(j.target.value),className:"flex-1 text-right px-4 py-2 border-0 focus:ring-0",dir:"rtl",onKeyDown:j=>{j.key==="Enter"&&N()}}),s.jsx(H,{onClick:N,disabled:l,className:"px-8 rounded-none bg-gradient-to-r from-islamic-green to-accent hover:from-islamic-green/90 hover:to-accent/90",children:l?" ...":""})]})]}),m&&s.jsxs("div",{className:"flex items-center gap-2 bg-red-50 border border-red-200 rounded-lg p-3 text-red-700 text-sm font-medium",children:[s.jsx(Sr,{className:"h-5 w-5 shrink-0 text-red-500"}),s.jsx("span",{children:m})]})]})]}),d&&s.jsxs("div",{className:"space-y-6",children:[o&&s.jsxs(ut,{className:"border border-green-200/40 shadow-xl rounded-2xl overflow-hidden mb-6 bg-gradient-to-b from-white to-green-50",children:[s.jsx(wt,{className:"bg-green-600/90 text-white p-4 flex flex-row items-center justify-between",children:s.jsxs(yt,{className:"text-xl flex items-center gap-2 font-semibold",children:[s.jsx(Is,{size:22,className:"text-yellow-200"}),"  "]})}),s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-green-100",children:[s.jsx(ye,{className:"text-sm text-green-700",children:""}),s.jsx("p",{className:"font-semibold text-lg text-gray-800 mt-1",children:o.fullName})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-green-100",children:[s.jsx(ye,{className:"text-sm text-green-700",children:" "}),s.jsx("p",{className:"font-semibold text-lg text-gray-800 mt-1",children:o.phoneNumber})]}),o.email&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-green-100 md:col-span-2",children:[s.jsx(ye,{className:"text-sm text-green-700",children:" "}),s.jsx("p",{className:"font-semibold text-gray-800 mt-1",children:o.email})]})]})})]}),n.length>0?s.jsx(s.Fragment,{children:s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.map(j=>s.jsxs(ut,{className:"rounded-2xl border border-islamic-green/10 hover:border-islamic-green/40 transition-all shadow-md hover:shadow-xl overflow-hidden cursor-pointer",children:[s.jsxs(wt,{className:"pb-3 bg-gradient-to-r from-islamic-green/5 to-accent/5",children:[s.jsx(yt,{className:"text-lg font-bold text-islamic-green",children:j.fullName}),s.jsxs(Rt,{className:"flex flex-col gap-1 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rc,{size:16,className:"text-islamic-green"}),s.jsxs("span",{children:[": ",E(j.grade)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pt,{size:16,className:"text-islamic-green"}),s.jsxs("span",{children:[" : ",I(j.circleName)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ss,{size:16,className:"text-islamic-green"}),s.jsxs("span",{children:[" : ",j.teacherName||" "]})]})]})]}),s.jsxs(ot,{className:"pb-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-islamic-green/10 to-green-50 rounded-xl p-3 text-center shadow-sm",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:" "}),s.jsxs("p",{className:"text-xl font-extrabold text-islamic-green",children:[_(j),"%"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-accent/10 to-green-50 rounded-xl p-3 text-center shadow-sm",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:" "}),s.jsxs("p",{className:"text-xl font-extrabold text-islamic-green",children:[O(j),"%"]})]})]}),s.jsxs(uc,{defaultValue:"grades",className:"w-full",children:[s.jsxs($i,{className:"w-full rounded-lg bg-gray-50 p-1",children:[s.jsx(Gr,{value:"grades",className:"flex-1 data-[state=active]:bg-islamic-green data-[state=active]:text-white rounded-md",children:""}),s.jsx(Gr,{value:"attendance",className:"flex-1 data-[state=active]:bg-islamic-green data-[state=active]:text-white rounded-md",children:""}),s.jsx(Gr,{value:"notes",className:"flex-1 data-[state=active]:bg-islamic-green data-[state=active]:text-white rounded-md",children:""})]}),s.jsx(cs,{value:"grades",className:"mt-3",children:j.grades.length>0?s.jsx("div",{className:"space-y-2",children:j.grades.slice(0,3).map(k=>s.jsxs("div",{className:"border rounded-lg p-3 text-sm shadow-sm",children:[s.jsx("div",{className:"flex justify-between mb-2",children:s.jsx("span",{className:"text-muted-foreground text-xs",children:T(k.date)})}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs block text-muted-foreground",children:""}),s.jsxs(lt,{className:S(k.memorization),children:[k.memorization,"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs block text-muted-foreground",children:""}),s.jsxs(lt,{className:S(k.recitation),children:[k.recitation,"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs block text-muted-foreground",children:""}),s.jsxs(lt,{className:S(k.tajweed),children:[k.tajweed,"%"]})]})]})]},k.id))}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"    "})}),s.jsx(cs,{value:"attendance",className:"mt-3",children:j.attendance.length>0?s.jsx("div",{className:"space-y-2",children:j.attendance.slice(0,5).map(k=>s.jsxs("div",{className:"flex justify-between items-center border rounded-lg p-3 text-sm shadow-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"block text-xs text-muted-foreground",children:T(k.date)}),k.recordedBy&&s.jsxs("span",{className:"block text-xs text-gray-600 mt-1",children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",k.recordedBy]}),k.notes&&s.jsxs("span",{className:"block text-xs text-gray-600 mt-1",children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",k.notes]})]}),s.jsxs(lt,{className:D(k.status),children:[k.status==="present"?s.jsx(u4,{className:"h-3 w-3 mr-1"}):k.status==="late"?s.jsx(Yr,{className:"h-3 w-3 mr-1"}):s.jsx(m4,{className:"h-3 w-3 mr-1"}),k.status==="present"?"":k.status==="absent"?"":k.status==="late"?"":k.status==="excused"?"":k.status]})]},k.id))}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"    "})}),s.jsx(cs,{value:"notes",className:"mt-3",children:j.notes.length>0?s.jsx("div",{className:"space-y-2",children:j.notes.map(k=>s.jsxs("div",{className:"border rounded-lg p-3 text-sm shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx(lt,{className:J(k.type),children:k.type}),s.jsx("span",{className:"text-xs text-muted-foreground",children:T(k.date)})]}),s.jsx("p",{className:"text-gray-700",children:k.note})]},k.id))}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"    "})})]})]}),s.jsx(Yi,{children:s.jsx(H,{variant:"outline",size:"sm",className:"w-full rounded-lg border-islamic-green text-islamic-green hover:bg-islamic-green/10 font-medium",onClick:()=>{y(j),p(!0)},children:"  "})})]},j.id))})}):s.jsx(ut,{className:"border-yellow-200 bg-yellow-50",children:s.jsxs(ot,{className:"text-center py-8",children:[s.jsx("p",{className:"text-lg text-yellow-800",children:"       "}),s.jsx("p",{className:"text-yellow-600 mt-2",children:"         "}),s.jsx("p",{className:"text-yellow-600 mt-2",children:"     0102000000         "})]})})]}),s.jsx("div",{className:"text-center mt-8",children:s.jsx(H,{variant:"outline",onClick:()=>e("/"),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/30",children:"  "})}),s.jsx(ir,{open:v,onOpenChange:p,children:s.jsx(lr,{dir:"rtl",className:"max-w-3xl max-h-[85vh] overflow-y-auto rounded-xl p-3 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100 text-sm",children:x&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4 mt-2",children:[s.jsx("div",{}),s.jsxs("div",{className:"bg-gradient-to-b from-green-900 via-green-500 to-green-200 dark:from-green-900 dark:via-green-800 dark:to-green-600 rounded-2xl p-4 shadow-md border border-green-200 dark:border-green-700",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-white dark:text-white mb-4 border-b border-green-200 dark:border-green-700 pb-2",children:["   :",s.jsx(ss,{className:"h-5 w-5"}),s.jsx("span",{className:"text-yellow-300",children:x.fullName})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-sky-200 dark:bg-sky-700 rounded-lg shadow-sm p-3 border border-green-200 dark:border-green-700",children:[s.jsx(ye,{className:"text-xs text-gray-500 dark:text-gray-300",children:" "}),s.jsx("p",{className:"font-medium text-gray-800 dark:text-green-200 mt-1",children:E(x.grade)})]}),s.jsxs("div",{className:"bg-sky-200 dark:bg-sky-700 rounded-lg shadow-sm p-3 border border-green-200 dark:border-green-700",children:[s.jsx(ye,{className:"text-xs text-gray-500 dark:text-gray-300",children:""}),s.jsx("p",{className:"font-medium text-gray-800 dark:text-green-200 mt-1",children:I(x.circleName)})]}),s.jsxs("div",{className:"bg-sky-200 dark:bg-sky-700 rounded-lg shadow-sm p-3 border border-green-200 dark:border-green-700",children:[s.jsx(ye,{className:"text-xs text-gray-500 dark:text-gray-300",children:" "}),s.jsx("p",{className:"font-medium text-gray-800 dark:text-green-200 mt-1",children:x.teacherName||" "})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-green-700 mb-2 border-b border-green-200 pb-1",children:"   ( 5 )"}),s.jsx(ds,{data:x.attendance.slice(0,5),columns:[{key:"recordedBy",header:" ",align:"right",render:j=>s.jsx("span",{className:"font-medium text-gray-700 text-xs",children:j.recordedBy||s.jsx("span",{className:"text-gray-400",children:" "})})},{key:"date",header:" ",align:"center",render:j=>T(j.date)},{key:"status",header:" ",align:"center",render:j=>s.jsx(lt,{className:`px-2 py-0.5 rounded-full text-[10px] font-bold tracking-wide shadow-sm ${D(j.status)}`,children:j.status==="present"?" ":j.status==="absent"?" ":j.status==="late"?" ":j.status==="excused"?" ":j.status})},{key:"notes",header:" ",align:"right",render:j=>s.jsx("span",{className:"text-gray-600 text-xs",children:j.notes||s.jsx("span",{className:"text-gray-400",children:"  "})})}],emptyMessage:"   ",className:"overflow-hidden rounded-lg text-xs",getRowClassName:(j,k)=>`${k%2===0?"bg-white":"bg-green-50/70"} hover:bg-green-100/60`})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-green-700 mb-2 border-b border-green-200 pb-1",children:"   ( 5 )"}),x.grades&&x.grades.length>0?s.jsx(ds,{data:x.grades.slice(0,5),columns:[{key:"date",header:" ",align:"center",render:j=>T(j.date)},{key:"recordedBy",header:" ",align:"right",render:j=>s.jsx("span",{className:"font-medium text-gray-700 text-xs",children:j.recordedBy||s.jsx("span",{className:"text-gray-400",children:" "})})},{key:"memorization",header:" ",align:"center",render:j=>s.jsxs("span",{className:"text-xs",children:[j.memorization,"%"]})},{key:"recitation",header:" ",align:"center",render:j=>s.jsxs("span",{className:"text-xs",children:[j.recitation,"%"]})},{key:"tajweed",header:" ",align:"center",render:j=>s.jsxs("span",{className:"text-xs",children:[j.tajweed,"%"]})},{key:"average",header:" ",align:"center",render:j=>{const k=Math.round((j.memorization+j.recitation+j.tajweed)/3);return s.jsxs(lt,{className:S(k),children:[k,"%"]})}}],emptyMessage:"   ",className:"overflow-hidden rounded-lg text-xs",getRowClassName:(j,k)=>`${k%2===0?"bg-white":"bg-blue-50/70"} hover:bg-blue-100/60`}):s.jsx("div",{className:"text-center py-2 bg-white rounded-lg shadow-sm border border-blue-100 text-xs",children:s.jsx("p",{className:"text-gray-400",children:"   "})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-green-700 mb-2 border-b border-green-200 pb-1",children:"  "}),s.jsxs("div",{className:"space-y-1",children:[x.notes.map(j=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-2 border border-green-200 text-xs",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx(lt,{className:J(j.type),children:j.type}),s.jsx("span",{className:"text-xs text-gray-500",children:T(j.date)})]}),s.jsx("p",{className:"mt-1",children:j.note})]},j.id)),x.notes.length===0&&s.jsx("div",{className:"text-center text-gray-400 py-2 text-xs",children:"   "})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-green-700 mb-2 border-b border-green-200 pb-1",children:"   "}),s.jsx(ds,{data:g,columns:[{key:"teacherName",header:" ",align:"right"},{key:"startDate",header:"  ",align:"center",render:j=>T(j.startDate)},{key:"endDate",header:"  ",align:"center",render:j=>j.endDate?T(j.endDate):" "}],emptyMessage:"    ",className:"overflow-hidden rounded-lg text-xs",getRowClassName:(j,k)=>`${k%2===0?"bg-white":"bg-purple-50/50"} hover:bg-purple-100/40`})]})]}),s.jsx(cr,{dir:"rtl",className:"flex justify-center mt-3",children:s.jsx(H,{onClick:()=>p(!1),className:"bg-yellow-300 hover:bg-yellow-400 text-gray-800 text-xs px-4 py-1 rounded-lg shadow-md",children:""})})]})})})]})})}const a7=jc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Qi=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Se(a7({variant:t}),e),...r}));Qi.displayName="Alert";const o7=h.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:Se("mb-1 font-medium leading-none tracking-tight",e),...t}));o7.displayName="AlertTitle";const Ji=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Se("text-sm [&_p]:leading-relaxed",e),...t}));Ji.displayName="AlertDescription";const i7=async()=>(console.log("   Supabase"),!0),l7=async()=>{try{const e=await v_();return{success:e.success,data:e.data,message:e.message}}catch(e){return console.error("   :",e),{success:!1,message:"    "}}};i7().catch(e=>{console.error("    :",e)});var F_="AlertDialog",[c7,rR]=So(F_,[b_]),Bs=b_(),z_=e=>{const{__scopeAlertDialog:t,...r}=e,n=Bs(t);return s.jsx(I_,{...n,...r,modal:!0})};z_.displayName=F_;var d7="AlertDialogTrigger",u7=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Bs(r);return s.jsx(ZD,{...a,...n,ref:t})});u7.displayName=d7;var h7="AlertDialogPortal",B_=e=>{const{__scopeAlertDialog:t,...r}=e,n=Bs(t);return s.jsx($_,{...n,...r})};B_.displayName=h7;var f7="AlertDialogOverlay",U_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Bs(r);return s.jsx(Ig,{...a,...n,ref:t})});U_.displayName=f7;var mi="AlertDialogContent",[m7,g7]=c7(mi),W_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,o=Bs(r),i=h.useRef(null),l=jt(t,i),c=h.useRef(null);return s.jsx(YD,{contentName:mi,titleName:V_,docsSlug:"alert-dialog",children:s.jsx(m7,{scope:r,cancelRef:c,children:s.jsxs($g,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:De(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(q0,{children:n}),s.jsx(x7,{contentRef:i})]})})})});W_.displayName=mi;var V_="AlertDialogTitle",H_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Bs(r);return s.jsx(Lg,{...a,...n,ref:t})});H_.displayName=V_;var q_="AlertDialogDescription",G_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Bs(r);return s.jsx(Fg,{...a,...n,ref:t})});G_.displayName=q_;var p7="AlertDialogAction",K_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Bs(r);return s.jsx(ch,{...a,...n,ref:t})});K_.displayName=p7;var Y_="AlertDialogCancel",Q_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=g7(Y_,r),o=Bs(r),i=jt(t,a);return s.jsx(ch,{...o,...n,ref:i})});Q_.displayName=Y_;var x7=({contentRef:e})=>{const t=`\`${mi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${mi}\` by passing a \`${q_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${mi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},v7=z_,y7=B_,J_=U_,X_=W_,Z_=K_,e2=Q_,t2=H_,r2=G_;const b7=v7,w7=y7,n2=h.forwardRef(({className:e,...t},r)=>s.jsx(J_,{className:Se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));n2.displayName=J_.displayName;const s2=h.forwardRef(({className:e,...t},r)=>s.jsxs(w7,{children:[s.jsx(n2,{}),s.jsx(X_,{ref:r,className:Se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));s2.displayName=X_.displayName;const a2=({className:e,...t})=>s.jsx("div",{className:Se("flex flex-col space-y-2 text-center sm:text-left",e),...t});a2.displayName="AlertDialogHeader";const o2=({className:e,...t})=>s.jsx("div",{className:Se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});o2.displayName="AlertDialogFooter";const i2=h.forwardRef(({className:e,...t},r)=>s.jsx(t2,{ref:r,className:Se("text-lg font-semibold",e),...t}));i2.displayName=t2.displayName;const l2=h.forwardRef(({className:e,...t},r)=>s.jsx(r2,{ref:r,className:Se("text-sm text-muted-foreground",e),...t}));l2.displayName=r2.displayName;const c2=h.forwardRef(({className:e,...t},r)=>s.jsx(Z_,{ref:r,className:Se(Yu(),e),...t}));c2.displayName=Z_.displayName;const d2=h.forwardRef(({className:e,...t},r)=>s.jsx(e2,{ref:r,className:Se(Yu({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));d2.displayName=e2.displayName;function Sn({title:e=" ",description:t="        ",itemDetails:r=null,detailsLabels:n=[],deleteButtonText:a="  ",cancelButtonText:o="",isOpen:i,isLoading:l=!1,onOpenChange:c,onConfirm:d}){return s.jsx(b7,{open:i,onOpenChange:c,children:s.jsxs(s2,{dir:"rtl",className:"z-[100] max-w-[95vw] sm:max-w-lg border-2 border-red-200 shadow-lg bg-white",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-5 bg-[url('/patterns/islamic-pattern.svg')] bg-repeat pointer-events-none rounded-lg"}),s.jsxs(a2,{children:[s.jsxs(i2,{className:"text-xl font-bold text-red-800 flex items-center gap-2 border-r-4 border-red-500 pr-2",children:[s.jsx("div",{className:"bg-red-100 text-red-600 p-1.5 rounded-full",children:s.jsx(Lr,{className:"h-5 w-5"})}),e]}),s.jsxs(l2,{dir:"rtl",className:"text-gray-700 mt-2 leading-relaxed text-right",children:[t,r&&s.jsxs("div",{className:"mt-3 bg-red-50 p-3 rounded-md border border-red-100 text-red-700",children:[s.jsx("div",{className:"font-semibold border-b border-red-100 pb-1 mb-2",children:" :"}),s.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:n&&n.length>0?n.map(({key:u,label:m})=>{var f;return s.jsxs(he.Fragment,{children:[s.jsxs("div",{className:"font-medium",children:[m,":"]}),s.jsx("div",{children:((f=r[u])==null?void 0:f.toString())||"-"})]},u)}):Object.entries(r).map(([u,m])=>s.jsxs(he.Fragment,{children:[s.jsxs("div",{className:"font-medium",children:[u,":"]}),s.jsx("div",{children:(m==null?void 0:m.toString())||"-"})]},u))})]}),s.jsx("div",{className:"mt-4 text-red-700 font-medium border-r-2 border-red-300 pr-2",children:" :        ."})]})]}),s.jsxs(o2,{className:"flex gap-2 justify-end mt-4",children:[s.jsx(d2,{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-2 border-transparent hover:border-gray-300 transition-all",children:o}),s.jsx(c2,{onClick:u=>{u.preventDefault(),d()},disabled:l,className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-2 border-transparent hover:border-red-900 transition-all",children:l?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):a})]})]})})}function j7({onNavigate:e}){const[t,r]=h.useState(!1),[n,a]=h.useState(null),[o,i]=h.useState(!1),l=async()=>{r(!0),a(null);try{const m=await l7();if(m.success&&m.data){const f=new Blob([m.data],{type:"application/json"}),x=URL.createObjectURL(f),y=document.createElement("a");y.href=x,y.download=`ketama_students_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),setTimeout(()=>{document.body.removeChild(y),URL.revokeObjectURL(x)},0),a({text:Fm.saveSuccess,type:"success"})}else a({text:m.message||Be.saveFailed,type:"error"})}catch(m){console.error(Be.consoleExportDataError,m),a({text:Be.operationFailed,type:"error"})}finally{r(!1)}},c=()=>{const m=document.createElement("input");m.type="file",m.accept=".json",m.onchange=async f=>{const x=f.target;if(!x.files||x.files.length===0)return;const y=x.files[0];r(!0),a(null);try{const g=new FileReader;g.onload=async w=>{if(!w.target||typeof w.target.result!="string"){a({text:Be.operationFailed,type:"error"}),r(!1);return}try{const v=JSON.parse(w.target.result);if(!Array.isArray(v)){a({text:Be.invalidInput,type:"error"}),r(!1);return}a({text:Zt.studentsImportProgress(v.length),type:"success"}),setTimeout(()=>{a({text:Zt.studentsImportSuccess,type:"success"}),r(!1)},1e3)}catch(v){console.error(Be.consoleParsingJsonError,v),a({text:Be.invalidInput,type:"error"}),r(!1)}},g.onerror=()=>{a({text:Be.operationFailed,type:"error"}),r(!1)},g.readAsText(y)}catch(g){console.error(Be.consoleImportFileError,g),a({text:Be.operationFailed,type:"error"}),r(!1)}},m.click()},d=()=>{i(!0)},u=()=>{a({text:Zt.functionNotAvailable,type:"warning"})};return s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-4 py-6",children:[s.jsxs(ut,{className:"w-full",children:[s.jsx(wt,{children:s.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx(yt,{className:"text-2xl font-bold",children:Zt.title}),s.jsx(Rt,{children:Zt.description}),s.jsxs("div",{className:"mt-2 text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx("span",{children:Zt.databaseLabel}),s.jsxs("span",{className:"flex items-center text-green-600",children:[s.jsx(X0,{className:"h-3 w-3 mr-1"})," Supabase"]})]})]})})}),s.jsxs(ot,{children:[n&&s.jsxs(Qi,{variant:n.type==="error"?"destructive":(n.type==="warning","default"),className:`mb-4 ${n.type==="error"?"bg-red-50 border-red-300 text-red-800":n.type==="warning"?"bg-amber-50 border-amber-300 text-amber-800":"bg-green-50 border-green-300 text-green-800"}`,children:[s.jsx(Sr,{className:`h-4 w-4 ml-2 ${n.type==="error"?"text-red-800":n.type==="warning"?"text-amber-800":"text-green-800"}`}),s.jsx(Ji,{children:n.text})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(ut,{children:[s.jsxs(wt,{children:[s.jsx(yt,{className:"text-lg",children:Zt.exportTitle}),s.jsx(Rt,{children:Zt.exportDescription})]}),s.jsx(ot,{children:s.jsxs(H,{onClick:l,disabled:t,className:"w-full flex items-center justify-center gap-2",children:[t?s.jsx(Vn,{className:"h-4 w-4 animate-spin"}):s.jsx(x4,{className:"h-4 w-4"}),s.jsx("span",{children:Zt.exportJsonButton})]})})]}),s.jsxs(ut,{children:[s.jsxs(wt,{children:[s.jsx(yt,{className:"text-lg",children:Zt.importTitle}),s.jsx(Rt,{children:Zt.importDescription})]}),s.jsx(ot,{className:"flex flex-col gap-2",children:s.jsxs(H,{variant:"outline",onClick:c,disabled:t,className:"w-full flex items-center justify-center gap-2",children:[t?s.jsx(Vn,{className:"h-4 w-4 animate-spin"}):s.jsx(p4,{className:"h-4 w-4"}),s.jsx("span",{children:Zt.importJsonButton})]})})]}),s.jsxs(ut,{children:[s.jsxs(wt,{children:[s.jsx(yt,{className:"text-lg",children:Zt.backupTitle}),s.jsx(Rt,{children:Zt.backupDescription})]}),s.jsx(ot,{children:s.jsxs(H,{variant:"secondary",disabled:t,className:"w-full flex items-center justify-center gap-2",children:[s.jsx(Z0,{className:"h-4 w-4"}),s.jsx("span",{children:Zt.createBackupButton})]})})]}),s.jsxs(ut,{children:[s.jsxs(wt,{children:[s.jsx(yt,{className:"text-lg text-red-600",children:Zt.clearTitle}),s.jsx(Rt,{children:Zt.clearDescription})]}),s.jsx(ot,{children:s.jsxs(H,{variant:"destructive",onClick:d,disabled:t,className:"w-full flex items-center justify-center gap-2",children:[s.jsx(Lr,{className:"h-4 w-4"}),s.jsx("span",{children:Zt.clearButton})]})})]})]})]}),s.jsx(Yi,{className:"flex justify-between",children:s.jsx(H,{variant:"outline",onClick:()=>e("/students"),children:Zt.returnToStudentsButton})})]}),s.jsx(Sn,{isOpen:o,onOpenChange:i,onConfirm:u,isLoading:t,title:"    ",description:":              .       ",deleteButtonText:"    ",cancelButtonText:""})]})}function _7({onNavigate:e}){return s.jsx(j7,{onNavigate:e})}function N7({onNavigate:e}){const[t,r]=h.useState(!0),[n,a]=h.useState([]),[o,i]=h.useState(null);return h.useEffect(()=>{(async()=>{r(!0),a([]),i(null);try{const c=console.log,d=console.error,u=[];console.log=(...x)=>{c(...x),u.push(x.map(y=>typeof y=="object"?JSON.stringify(y,null,2):String(y)).join(" ")),a([...u])},console.error=(...x)=>{d(...x),u.push(` ${x.map(y=>typeof y=="object"?JSON.stringify(y,null,2):String(y)).join(" ")}`),a([...u])};const{default:m}=await as(()=>import("./supabase-test-c49b479f.js"),[]);console.log("   Supabase"),console.log=c,console.error=d;const f=u.some(x=>x.startsWith(""));i(!f)}catch(c){console.error("    Supabase:",c),a(d=>[...d,`    Supabase: ${c instanceof Error?c.message:String(c)}`]),i(!1)}finally{r(!1)}})()},[]),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs(ut,{className:"max-w-4xl mx-auto",children:[s.jsxs(wt,{children:[s.jsx(yt,{className:"text-2xl font-bold",children:"  Supabase"}),s.jsx(Rt,{children:"     Supabase"})]}),s.jsx(ot,{className:"space-y-4",children:t?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[s.jsx(j4,{className:"h-12 w-12 text-primary animate-spin mb-4"}),s.jsx("p",{className:"text-center text-muted-foreground",children:"   ..."})]}):s.jsxs(s.Fragment,{children:[o!==null&&s.jsxs(Qi,{className:`mb-4 ${o?"bg-green-50 border-green-300 text-green-800":"bg-destructive/10 border-destructive text-destructive"}`,children:[o?s.jsx(h4,{className:"h-4 w-4 ml-2 text-green-800"}):s.jsx(Sr,{className:"h-4 w-4 ml-2 text-destructive"}),s.jsx(Ji,{children:o?"     Supabase!":"      Supabase.   ."})]}),s.jsxs("div",{className:"border rounded-md p-4 bg-muted/50",children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:" :"}),s.jsx("div",{className:"bg-background p-4 rounded-md font-mono text-sm overflow-auto max-h-96 rtl:text-right ltr:text-left",children:n.map((l,c)=>s.jsx("div",{className:`py-1 ${l.startsWith("")?"text-destructive":""}`,children:l},c))})]}),s.jsxs("div",{className:"flex justify-between mt-4",children:[s.jsx(H,{variant:"outline",onClick:()=>e("/"),children:" "}),s.jsx(H,{onClick:()=>window.location.reload(),children:" "})]})]})})]})})}function _v(e,[t,r]){return Math.min(r,Math.max(t,e))}function S7(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var k7=[" ","Enter","ArrowUp","ArrowDown"],C7=[" ","Enter"],Ec="Select",[dh,uh,E7]=G0(Ec),[Xi,nR]=So(Ec,[E7,Hi]),hh=Hi(),[T7,za]=Xi(Ec),[P7,O7]=Xi(Ec),u2=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:f,required:x,form:y}=e,g=hh(t),[w,v]=h.useState(null),[p,b]=h.useState(null),[N,S]=h.useState(!1),E=Tg(d),[D=!1,I]=xo({prop:n,defaultProp:a,onChange:o}),[ee,J]=xo({prop:i,defaultProp:l,onChange:c}),T=h.useRef(null),_=w?y||!!w.closest("form"):!0,[O,j]=h.useState(new Set),k=Array.from(O).map(A=>A.props.value).join(";");return s.jsx(k1,{...g,children:s.jsxs(T7,{required:x,scope:t,trigger:w,onTriggerChange:v,valueNode:p,onValueNodeChange:b,valueNodeHasChildren:N,onValueNodeHasChildrenChange:S,contentId:Es(),value:ee,onValueChange:J,open:D,onOpenChange:I,dir:E,triggerPointerDownPosRef:T,disabled:f,children:[s.jsx(dh.Provider,{scope:t,children:s.jsx(P7,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(A=>{j(F=>new Set(F).add(A))},[]),onNativeOptionRemove:h.useCallback(A=>{j(F=>{const R=new Set(F);return R.delete(A),R})},[]),children:r})}),_?s.jsxs($2,{"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:m,value:ee,onChange:A=>J(A.target.value),disabled:f,form:y,children:[ee===void 0?s.jsx("option",{value:""}):null,Array.from(O)]},k):null]})})};u2.displayName=Ec;var h2="SelectTrigger",f2=h.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,o=hh(r),i=za(h2,r),l=i.disabled||n,c=jt(t,i.onTriggerChange),d=uh(r),u=h.useRef("touch"),[m,f,x]=L2(g=>{const w=d().filter(b=>!b.disabled),v=w.find(b=>b.value===i.value),p=F2(w,g,v);p!==void 0&&i.onValueChange(p.value)}),y=g=>{l||(i.onOpenChange(!0),x()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(Vu,{asChild:!0,...o,children:s.jsx(Je.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":I2(i.value)?"":void 0,...a,ref:c,onClick:De(a.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&y(g)}),onPointerDown:De(a.onPointerDown,g=>{u.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:De(a.onKeyDown,g=>{const w=m.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(w&&g.key===" ")&&k7.includes(g.key)&&(y(),g.preventDefault())})})})});f2.displayName=h2;var m2="SelectValue",g2=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:o,placeholder:i="",...l}=e,c=za(m2,r),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,m=jt(t,c.onValueNodeChange);return Cr(()=>{d(u)},[d,u]),s.jsx(Je.span,{...l,ref:m,style:{pointerEvents:"none"},children:I2(c.value)?s.jsx(s.Fragment,{children:i}):o})});g2.displayName=m2;var A7="SelectIcon",p2=h.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Je.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});p2.displayName=A7;var D7="SelectPortal",x2=e=>s.jsx(bc,{asChild:!0,...e});x2.displayName=D7;var wo="SelectContent",v2=h.forwardRef((e,t)=>{const r=za(wo,e.__scopeSelect),[n,a]=h.useState();if(Cr(()=>{a(new DocumentFragment)},[]),!r.open){const o=n;return o?No.createPortal(s.jsx(y2,{scope:e.__scopeSelect,children:s.jsx(dh.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),o):null}return s.jsx(b2,{...e,ref:t})});v2.displayName=wo;var Dn=10,[y2,Ba]=Xi(wo),M7="SelectContentImpl",b2=h.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:x,sticky:y,hideWhenDetached:g,avoidCollisions:w,...v}=e,p=za(wo,r),[b,N]=h.useState(null),[S,E]=h.useState(null),D=jt(t,te=>N(te)),[I,ee]=h.useState(null),[J,T]=h.useState(null),_=uh(r),[O,j]=h.useState(!1),k=h.useRef(!1);h.useEffect(()=>{if(b)return jg(b)},[b]),wg();const A=h.useCallback(te=>{const[me,...je]=_().map(ie=>ie.ref.current),[V]=je.slice(-1),Q=document.activeElement;for(const ie of te)if(ie===Q||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===me&&S&&(S.scrollTop=0),ie===V&&S&&(S.scrollTop=S.scrollHeight),ie==null||ie.focus(),document.activeElement!==Q))return},[_,S]),F=h.useCallback(()=>A([I,b]),[A,I,b]);h.useEffect(()=>{O&&F()},[O,F]);const{onOpenChange:R,triggerPointerDownPosRef:z}=p;h.useEffect(()=>{if(b){let te={x:0,y:0};const me=V=>{var Q,ie;te={x:Math.abs(Math.round(V.pageX)-(((Q=z.current)==null?void 0:Q.x)??0)),y:Math.abs(Math.round(V.pageY)-(((ie=z.current)==null?void 0:ie.y)??0))}},je=V=>{te.x<=10&&te.y<=10?V.preventDefault():b.contains(V.target)||R(!1),document.removeEventListener("pointermove",me),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",je,{capture:!0})}}},[b,R,z]),h.useEffect(()=>{const te=()=>R(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[R]);const[Y,W]=L2(te=>{const me=_().filter(Q=>!Q.disabled),je=me.find(Q=>Q.ref.current===document.activeElement),V=F2(me,te,je);V&&setTimeout(()=>V.ref.current.focus())}),Z=h.useCallback((te,me,je)=>{const V=!k.current&&!je;(p.value!==void 0&&p.value===me||V)&&(ee(te),V&&(k.current=!0))},[p.value]),B=h.useCallback(()=>b==null?void 0:b.focus(),[b]),X=h.useCallback((te,me,je)=>{const V=!k.current&&!je;(p.value!==void 0&&p.value===me||V)&&T(te)},[p.value]),K=n==="popper"?Bm:w2,ae=K===Bm?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:x,sticky:y,hideWhenDetached:g,avoidCollisions:w}:{};return s.jsx(y2,{scope:r,content:b,viewport:S,onViewportChange:E,itemRefCallback:Z,selectedItem:I,onItemLeave:B,itemTextRefCallback:X,focusSelectedItem:F,selectedItemText:J,position:n,isPositioned:O,searchRef:Y,children:s.jsx(_g,{as:Na,allowPinchZoom:!0,children:s.jsx(nh,{asChild:!0,trapped:p.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:De(a,te=>{var me;(me=p.trigger)==null||me.focus({preventScroll:!0}),te.preventDefault()}),children:s.jsx(Bi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:s.jsx(K,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:te=>te.preventDefault(),...v,...ae,onPlaced:()=>j(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:De(v.onKeyDown,te=>{const me=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!me&&te.key.length===1&&W(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let V=_().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);if(["ArrowUp","End"].includes(te.key)&&(V=V.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const Q=te.target,ie=V.indexOf(Q);V=V.slice(ie+1)}setTimeout(()=>A(V)),te.preventDefault()}})})})})})})});b2.displayName=M7;var R7="SelectItemAlignedPosition",w2=h.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,o=za(wo,r),i=Ba(wo,r),[l,c]=h.useState(null),[d,u]=h.useState(null),m=jt(t,D=>u(D)),f=uh(r),x=h.useRef(!1),y=h.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:v,focusSelectedItem:p}=i,b=h.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&g&&w&&v){const D=o.trigger.getBoundingClientRect(),I=d.getBoundingClientRect(),ee=o.valueNode.getBoundingClientRect(),J=v.getBoundingClientRect();if(o.dir!=="rtl"){const Q=J.left-I.left,ie=ee.left-Q,ne=D.left-ie,le=D.width+ne,Pe=Math.max(le,I.width),He=window.innerWidth-Dn,qe=_v(ie,[Dn,Math.max(Dn,He-Pe)]);l.style.minWidth=le+"px",l.style.left=qe+"px"}else{const Q=I.right-J.right,ie=window.innerWidth-ee.right-Q,ne=window.innerWidth-D.right-ie,le=D.width+ne,Pe=Math.max(le,I.width),He=window.innerWidth-Dn,qe=_v(ie,[Dn,Math.max(Dn,He-Pe)]);l.style.minWidth=le+"px",l.style.right=qe+"px"}const T=f(),_=window.innerHeight-Dn*2,O=g.scrollHeight,j=window.getComputedStyle(d),k=parseInt(j.borderTopWidth,10),A=parseInt(j.paddingTop,10),F=parseInt(j.borderBottomWidth,10),R=parseInt(j.paddingBottom,10),z=k+A+O+R+F,Y=Math.min(w.offsetHeight*5,z),W=window.getComputedStyle(g),Z=parseInt(W.paddingTop,10),B=parseInt(W.paddingBottom,10),X=D.top+D.height/2-Dn,K=_-X,ae=w.offsetHeight/2,te=w.offsetTop+ae,me=k+A+te,je=z-me;if(me<=X){const Q=T.length>0&&w===T[T.length-1].ref.current;l.style.bottom="0px";const ie=d.clientHeight-g.offsetTop-g.offsetHeight,ne=Math.max(K,ae+(Q?B:0)+ie+F),le=me+ne;l.style.height=le+"px"}else{const Q=T.length>0&&w===T[0].ref.current;l.style.top="0px";const ne=Math.max(X,k+g.offsetTop+(Q?Z:0)+ae)+je;l.style.height=ne+"px",g.scrollTop=me-X+g.offsetTop}l.style.margin=`${Dn}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=_+"px",n==null||n(),requestAnimationFrame(()=>x.current=!0)}},[f,o.trigger,o.valueNode,l,d,g,w,v,o.dir,n]);Cr(()=>b(),[b]);const[N,S]=h.useState();Cr(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const E=h.useCallback(D=>{D&&y.current===!0&&(b(),p==null||p(),y.current=!1)},[b,p]);return s.jsx($7,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:E,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(Je.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});w2.displayName=R7;var I7="SelectPopperPosition",Bm=h.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Dn,...o}=e,i=hh(r);return s.jsx(cg,{...i,...o,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Bm.displayName=I7;var[$7,Bg]=Xi(wo,{}),Um="SelectViewport",j2=h.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,o=Ba(Um,r),i=Bg(Um,r),l=jt(t,o.onViewportChange),c=h.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(dh.Slot,{scope:r,children:s.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:De(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&m){const x=Math.abs(c.current-u.scrollTop);if(x>0){const y=window.innerHeight-Dn*2,g=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),v=Math.max(g,w);if(v<y){const p=v+x,b=Math.min(y,p),N=p-b;m.style.height=b+"px",m.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});j2.displayName=Um;var _2="SelectGroup",[L7,F7]=Xi(_2),N2=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Es();return s.jsx(L7,{scope:r,id:a,children:s.jsx(Je.div,{role:"group","aria-labelledby":a,...n,ref:t})})});N2.displayName=_2;var S2="SelectLabel",k2=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=F7(S2,r);return s.jsx(Je.div,{id:a.id,...n,ref:t})});k2.displayName=S2;var bu="SelectItem",[z7,C2]=Xi(bu),E2=h.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:o,...i}=e,l=za(bu,r),c=Ba(bu,r),d=l.value===n,[u,m]=h.useState(o??""),[f,x]=h.useState(!1),y=jt(t,p=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,p,n,a)}),g=Es(),w=h.useRef("touch"),v=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(z7,{scope:r,value:n,disabled:a,textId:g,isSelected:d,onItemTextChange:h.useCallback(p=>{m(b=>b||((p==null?void 0:p.textContent)??"").trim())},[]),children:s.jsx(dh.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:s.jsx(Je.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:y,onFocus:De(i.onFocus,()=>x(!0)),onBlur:De(i.onBlur,()=>x(!1)),onClick:De(i.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:De(i.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:De(i.onPointerDown,p=>{w.current=p.pointerType}),onPointerMove:De(i.onPointerMove,p=>{var b;w.current=p.pointerType,a?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:De(i.onPointerLeave,p=>{var b;p.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:De(i.onKeyDown,p=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&p.key===" "||(C7.includes(p.key)&&v(),p.key===" "&&p.preventDefault())})})})})});E2.displayName=bu;var jl="SelectItemText",T2=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...o}=e,i=za(jl,r),l=Ba(jl,r),c=C2(jl,r),d=O7(jl,r),[u,m]=h.useState(null),f=jt(t,v=>m(v),c.onItemTextChange,v=>{var p;return(p=l.itemTextRefCallback)==null?void 0:p.call(l,v,c.value,c.disabled)}),x=u==null?void 0:u.textContent,y=h.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=d;return Cr(()=>(g(y),()=>w(y)),[g,w,y]),s.jsxs(s.Fragment,{children:[s.jsx(Je.span,{id:c.textId,...o,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?No.createPortal(o.children,i.valueNode):null]})});T2.displayName=jl;var P2="SelectItemIndicator",O2=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return C2(P2,r).isSelected?s.jsx(Je.span,{"aria-hidden":!0,...n,ref:t}):null});O2.displayName=P2;var Wm="SelectScrollUpButton",A2=h.forwardRef((e,t)=>{const r=Ba(Wm,e.__scopeSelect),n=Bg(Wm,e.__scopeSelect),[a,o]=h.useState(!1),i=jt(t,n.onScrollButtonChange);return Cr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(M2,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});A2.displayName=Wm;var Vm="SelectScrollDownButton",D2=h.forwardRef((e,t)=>{const r=Ba(Vm,e.__scopeSelect),n=Bg(Vm,e.__scopeSelect),[a,o]=h.useState(!1),i=jt(t,n.onScrollButtonChange);return Cr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(M2,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});D2.displayName=Vm;var M2=h.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,o=Ba("SelectScrollButton",r),i=h.useRef(null),l=uh(r),c=h.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),Cr(()=>{var u;const d=l().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(Je.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:De(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:De(a.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:De(a.onPointerLeave,()=>{c()})})}),B7="SelectSeparator",R2=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Je.div,{"aria-hidden":!0,...n,ref:t})});R2.displayName=B7;var Hm="SelectArrow",U7=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=hh(r),o=za(Hm,r),i=Ba(Hm,r);return o.open&&i.position==="popper"?s.jsx(dg,{...a,...n,ref:t}):null});U7.displayName=Hm;function I2(e){return e===""||e===void 0}var $2=h.forwardRef((e,t)=>{const{value:r,...n}=e,a=h.useRef(null),o=jt(t,a),i=S7(r);return h.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==r&&u){const m=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(m)}},[i,r]),s.jsx(wc,{asChild:!0,children:s.jsx("select",{...n,ref:o,defaultValue:r})})});$2.displayName="BubbleSelect";function L2(e){const t=en(e),r=h.useRef(""),n=h.useRef(0),a=h.useCallback(i=>{const l=r.current+i;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=h.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,o]}function F2(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let i=W7(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function W7(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var V7=u2,z2=f2,H7=g2,q7=p2,G7=x2,B2=v2,K7=j2,Y7=N2,U2=k2,W2=E2,Q7=T2,J7=O2,V2=A2,H2=D2,q2=R2;const st=V7,Fn=Y7,at=H7,rt=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(z2,{ref:n,className:Se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(q7,{asChild:!0,children:s.jsx(zu,{className:"h-4 w-4 opacity-50"})})]}));rt.displayName=z2.displayName;const G2=h.forwardRef(({className:e,...t},r)=>s.jsx(V2,{ref:r,className:Se("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(J0,{className:"h-4 w-4"})}));G2.displayName=V2.displayName;const K2=h.forwardRef(({className:e,...t},r)=>s.jsx(H2,{ref:r,className:Se("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(zu,{className:"h-4 w-4"})}));K2.displayName=H2.displayName;const nt=h.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(G7,{children:s.jsxs(B2,{ref:a,className:Se("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(G2,{}),s.jsx(K7,{className:Se("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(K2,{})]})}));nt.displayName=B2.displayName;const yn=h.forwardRef(({className:e,...t},r)=>s.jsx(U2,{ref:r,className:Se("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));yn.displayName=U2.displayName;const Ne=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(W2,{ref:n,className:Se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(J7,{children:s.jsx(Fu,{className:"h-4 w-4"})})}),s.jsx(Q7,{children:t})]}));Ne.displayName=W2.displayName;const X7=h.forwardRef(({className:e,...t},r)=>s.jsx(q2,{ref:r,className:Se("-mx-1 my-1 h-px bg-muted",e),...t}));X7.displayName=q2.displayName;const Ps=[{value:"5",label:""},{value:"6",label:""},{value:"0",label:""},{value:"1",label:""},{value:"2",label:""},{value:"3",label:""},{value:"4",label:""}];function no(e){const t=e.toString(),r=Ps.find(n=>n.value===t);if(!r){console.warn(`      : ${e} (: ${typeof e})`);const n=Ps.find(a=>parseInt(a.value)===parseInt(t));return n?n.label:`   (${e})`}return r.label}function jn(e){try{const[t,r]=e.split(":"),n=parseInt(t,10),a=n>=12?"":"";return`${n>12?n-12:n===0?12:n}:${r} ${a}`}catch{return e}}const Ua="study_circles";async function Nv(e){if(!e.length)return{};const{data:t,error:r}=await de.from("study_circles").select("id,teacher_id").in("teacher_id",e).is("deleted_at",null);if(r)return console.error("Error fetching study circles:",r),{};const n={};return e.forEach(a=>{n[a]=0}),t.forEach(a=>{a.teacher_id&&n.hasOwnProperty(a.teacher_id)&&n[a.teacher_id]++}),n}const Ma=async()=>{try{const{data:e,error:t}=await de.from(Ua).select(`
        *,
        teacher:teacher_id (
          id,
          full_name
        )
      `).is("deleted_at",null).order("created_at",{ascending:!1});return t?(console.error("    :",t),[]):e}catch(e){return console.error("      :",e),[]}},qm=async e=>{try{const{data:t,error:r}=await de.from(Ua).select(`
        *,
        teacher:teacher_id (
          id,
          full_name
        )
      `).eq("teacher_id",e).is("deleted_at",null).order("created_at",{ascending:!1});return r?(console.error("    :",r),[]):t}catch(t){return console.error("      :",t),[]}},Os=async e=>{try{const{data:t,error:r}=await de.from(Ua).select(`
        *,
        teacher:teacher_id (
          id,
          full_name
        )
      `).eq("teacher_id",e).is("deleted_at",null);return r?(console.error("     :",r),[]):t||[]}catch(t){return console.error("     :",t),[]}},Z7=async e=>{try{const{data:t,error:r}=await de.from(Ua).select(`
        *,
        teacher:teacher_id (
          id,
          full_name
        )
      `).eq("id",e).is("deleted_at",null).single();return r?(console.error("    :",r),null):t||null}catch(t){return console.error("    :",t),null}},Y2=async e=>{try{const{data:t,error:r}=await Gt.from(Ua).insert([e]).select();return r?(console.error("    :",r),{success:!1,message:`    : ${r.message}`}):{success:!0,id:t&&t[0]?t[0].id:void 0,message:"    "}}catch(t){return console.error("    :",t),{success:!1,message:"     "}}},Q2=async e=>{try{const{data:t,error:r}=await de.from(Ua).select("teacher_id").eq("id",e).is("deleted_at",null).single();return r?(console.error("     :",r),null):(t==null?void 0:t.teacher_id)||null}catch(t){return console.error("     :",t),null}},J2=async e=>{try{const{error:t}=await Gt.from(Ua).update(e).eq("id",e.id);return t?(console.error("    :",t),{success:!1,message:`    : ${t.message}`}):{success:!0,message:"    "}}catch(t){return console.error("    :",t),{success:!1,message:"     "}}},X2=async e=>{try{const{error:t}=await Gt.from(Ua).update({deleted_at:new Date().toISOString()}).eq("id",e);return t?(console.error("    :",t),{success:!1,message:`    : ${t.message}`}):{success:!0,message:"    "}}catch(t){return console.error("    :",t),{success:!1,message:"     "}}},fh="study_circle_schedules",mh=async e=>{try{const{data:t,error:r}=await de.from(fh).select("*").eq("study_circle_id",e).order("weekday").order("start_time");return r?(console.error("     :",r),[]):t||[]}catch(t){return console.error("     :",t),[]}},Ug=async e=>{try{const{data:t,error:r}=await Gt.from(fh).insert([e]).select();return r?r.code==="23505"?{success:!1,message:"         "}:(console.error("     :",r),{success:!1,message:`   : ${r.message}`}):{success:!0,id:t&&t[0]?t[0].id:void 0,message:"   "}}catch(t){return console.error("     :",t),{success:!1,message:"    "}}},Wg=async e=>{try{const{error:t}=await Gt.from(fh).update(e).eq("id",e.id);return t?t.code==="23505"?{success:!1,message:"         "}:(console.error("     :",t),{success:!1,message:`   : ${t.message}`}):{success:!0,message:"   "}}catch(t){return console.error("     :",t),{success:!1,message:"    "}}},Vg=async e=>{try{const{error:t}=await Gt.from(fh).delete().eq("id",e);return t?(console.error("     :",t),{success:!1,message:`   : ${t.message}`}):{success:!0,message:"   "}}catch(t){return console.error("     :",t),{success:!1,message:"    "}}};function eM({onNavigate:e,userRole:t,currentUserId:r,teacherOnly:n=!1}){const[a,o]=h.useState([]),[i,l]=h.useState([]),[c,d]=h.useState([]),[u,m]=h.useState(null),[f,x]=h.useState(!0),[y,g]=h.useState(n?"teachers":"admins"),w=async()=>{try{let U=[];if(y==="teachers"?U=i:y==="admins"?U=a:y==="superadmins"&&(U=c),U.length>0){const Ue=U.map(ps=>ps.id);console.log(" refreshCircleCounts - ids to refresh:",Ue);const pr=await Nv(Ue);console.log(" refreshCircleCounts - updated counts:",pr),Zi(pr)}}catch(U){console.error(" Error refreshing circle counts:",U)}},[v,p]=h.useState(!1),[b,N]=h.useState("add"),[S,E]=h.useState(ue.addUserForm.title),[D,I]=h.useState(!1),[ee,J]=h.useState(null),[T,_]=h.useState(!1),[O,j]=h.useState(null),[k,A]=h.useState(!1),[F,R]=h.useState(null),[z,Y]=h.useState(!1),[W,Z]=h.useState(null),[B,X]=h.useState(""),[K,ae]=h.useState(""),[te,me]=h.useState(""),[je,V]=h.useState(!1),[Q,ie]=h.useState(!1),[ne,le]=h.useState(!1),[Pe,He]=h.useState(""),[qe,Ot]=h.useState(""),[q,_e]=h.useState(""),[Le,Ge]=h.useState(""),[$t,Kt]=h.useState("admin"),[Ct,Qt]=h.useState(!1),[xt,_t]=h.useState(!1),[Xe,zt]=h.useState(null),[Xt,M]=h.useState([]),[G,ge]=h.useState(!1),[Me,Ve]=h.useState(!1),[Ie,be]=h.useState(null),[Oe,Re]=h.useState(!1),[ht,ft]=h.useState({name:"",max_students:""}),[re,Ee]=h.useState(!1),[et,C]=h.useState(!1),[L,se]=h.useState({name:"",max_students:""}),[pe,$e]=h.useState(!1),[Te,kt]=h.useState(null),[$,ke]=h.useState([]),[ze,mt]=h.useState(!1),[rr,At]=h.useState(!1),[Qn,Co]=h.useState(!1),[mr,Pc]=h.useState({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),[gh,Eo]=h.useState(!1),[Oc,Ac]=h.useState(null),[rn,nn]=h.useState(!1),[gr,Dc]=h.useState({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),[Wa,Zi]=h.useState({}),{toast:We}=Tn();h.useEffect(()=>{Us()},[]),h.useEffect(()=>{async function U(){let Ue=[];if(y==="teachers"?Ue=i:y==="admins"&&(Ue=a),console.log(" fetchCircleCounts - activeTab:",y),console.log(" fetchCircleCounts - usersList length:",Ue.length),console.log(" fetchCircleCounts - usersList:",Ue.map(pr=>({id:pr.id,name:pr.full_name}))),Ue.length>0){const pr=Ue.map(ps=>ps.id);console.log(" fetchCircleCounts - ids to fetch:",pr);try{const ps=await Nv(pr);console.log(" fetchCircleCounts - counts received:",ps),console.log(" fetchCircleCounts - total counts entries:",Object.keys(ps).length),Zi(ps)}catch(ps){console.error(" Error fetching circle counts:",ps)}}else console.log(" No users to fetch circle counts for")}U()},[i,a,y]);const Us=async()=>{x(!0);try{if(n&&t==="teacher"&&r){const U=await Eg(r);U&&(m(U),l([U]))}else{if(t==="superadmin"||t==="admin"){const U=await gD();o(U);const Ue=await mD();l(Ue)}if(t==="superadmin"){const U=await bD();d(U)}}}catch(U){console.error(Be.consoleUserLoadError,U),We({title:ue.loadError.title,description:ue.loadError.description,variant:"destructive"})}finally{x(!1)}},P=()=>{N("add"),E(ue.addUserForm.title),He(""),Ot(""),_e(""),Ge(""),Kt(y==="admins"?"admin":"teacher"),p(!0)},xe=async U=>{N("edit"),E(ue.editUserForm.title),He(U.id),Ot(U.full_name),_e(U.username),Ge(""),Kt(U.role),p(!0)},Ae=U=>{J(U),I(!0)},Lt=async()=>{if(ee)try{const U=await yD(ee.id);U.success?(We({title:ue.deleteSuccess,description:ue.deleteSuccessMessage}),Us()):We({title:ue.deleteFailed,description:U.message||ue.deleteUserError,variant:"destructive"})}catch(U){console.error(Be.consoleUserSaveError,U),We({title:Be.generalError,description:ue.unexpectedError,variant:"destructive"})}finally{I(!1),J(null)}},dt=U=>{Z(U),X(""),ae(""),me(""),V(!1),ie(!1),le(!1),Y(!0)},Bt=async()=>{if(W){if(K!==te){We({title:Be.generalError,description:ue.changePasswordForm.passwordsMismatch,variant:"destructive"});return}try{let U;if(W.id===r){if(!B){We({title:Be.generalError,description:ue.incompleteDataMessage,variant:"destructive"});return}U=await xD(W.id,B,K)}else if(t==="superadmin"||t==="admin"&&W.role==="teacher")U=await vD(W.id,K);else{We({title:Be.permissionError,description:ue.accessDeniedMessage,variant:"destructive"});return}U.success?(We({title:ue.changePasswordForm.success,description:U.message}),Y(!1),Z(null)):We({title:ue.changePasswordForm.error,description:U.message,variant:"destructive"})}catch(U){console.error(Be.consoleUserSaveError,U),We({title:Be.generalError,description:ue.unexpectedError,variant:"destructive"})}}},Er=async()=>{if(!qe||!q||b==="add"&&!Le){We({title:ue.incompleteData,description:ue.incompleteDataMessage,variant:"destructive"});return}if(t==="admin"&&$t!=="teacher"){We({title:Be.permissionError,description:ue.adminEditRestriction,variant:"destructive"});return}try{if(b==="add"){const Ue=await fD({full_name:qe,username:q,password:Le,role:$t});Ue.success?(We({title:ue.addSuccess,description:ue.addSuccessMessage}),p(!1),Us()):We({title:ue.addFailed,description:Ue.message||ue.addUserError,variant:"destructive"})}else{const U={id:Pe,full_name:qe,username:q,role:$t};Le&&(U.password=Le);const Ue=await Xj(U);Ue.success?(We({title:ue.updateSuccess,description:ue.updateSuccessMessage}),p(!1),Us()):We({title:ue.updateFailed,description:Ue.message||ue.updateUserError,variant:"destructive"})}}catch(U){console.error(Be.consoleUserSaveError,U),We({title:Be.generalError,description:ue.unexpectedError,variant:"destructive"})}},Tr=async U=>{ge(!0);try{const Ue=await Os(U);console.log(" Loading circles for teacher:",U),console.log(" Found circles:",Ue),M(Ue)}catch(Ue){console.error(" Error loading teacher circles:",Ue),We({title:Be.generalError,description:"    .    .",variant:"destructive"})}finally{ge(!1)}},Br=U=>{zt(U),Tr(U.id),_t(!0)},To=()=>{se({name:"",max_students:""}),Ee(!0)},Hg=(U,Ue)=>{se(pr=>({...pr,[U]:Ue}))},lN=async()=>{if(!(!Xe||et))try{if(C(!0),!L.name.trim()){We({title:"  ",description:"  ",variant:"destructive"}),C(!1);return}const U={teacher_id:Xe.id,name:L.name.trim(),max_students:L.max_students?parseInt(L.max_students):null};console.log(" Creating new circle:",U);const Ue=await Y2(U);Ue.success?(We({title:"   ",description:`   "${L.name}" `,variant:"default"}),await Tr(Xe.id),await w(),Ee(!1)):We({title:"  ",description:Ue.message||"     ",variant:"destructive"})}catch(U){console.error(" Error creating new circle:",U),We({title:"  ",description:"       ",variant:"destructive"})}finally{C(!1)}},cN=U=>{var Ue;be(U),ft({name:U.name||"",max_students:((Ue=U.max_students)==null?void 0:Ue.toString())||""}),Ve(!0)},dN=async()=>{if(!(!Ie||Oe))try{if(Re(!0),!ht.name.trim()){We({title:"  ",description:"  ",variant:"destructive"});return}const U={id:Ie.id,name:ht.name.trim(),max_students:ht.max_students?parseInt(ht.max_students):null};console.log(" Updating circle with data:",U);const Ue=await J2(U);Ue.success?(We({title:"   ",description:`    "${ht.name}" `,variant:"default"}),Xe&&await Tr(Xe.id),await w(),Ve(!1),be(null)):We({title:"  ",description:Ue.message||"     ",variant:"destructive"})}catch(U){console.error(" Error updating circle:",U),We({title:"  ",description:"       ",variant:"destructive"})}finally{Re(!1)}},qg=(U,Ue)=>{ft(pr=>({...pr,[U]:Ue}))},uN=U=>{j(U),_(!0)},hN=async()=>{if(O)try{const U=await X2(O.id);U.success?(We({title:"  ",description:`  : "${O.name}" `,variant:"destructive"}),console.log(" Circle deleted successfully:",O.id),Xe&&await Tr(Xe.id),await w()):We({title:"  ",description:U.message||"    ",variant:"destructive"})}catch(U){console.error(" Error deleting circle:",U),We({title:"  ",description:"      ",variant:"destructive"})}finally{_(!1),j(null)}},fN=async U=>{kt(U),await Mc(U.id),$e(!0)},Mc=async U=>{mt(!0);try{const Ue=await mh(U);console.log(" Loaded schedules for circle:",Ue),ke(Ue)}catch(Ue){console.error(" Error loading circle schedules:",Ue),We({title:"   ",description:"     ",variant:"destructive"})}finally{mt(!1)}},ph=()=>{Pc({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),At(!0)},Rc=(U,Ue)=>{Pc(pr=>({...pr,[U]:Ue}))},mN=async()=>{if(!(!Te||Qn))try{if(Co(!0),!mr.start_time||!mr.end_time){We({title:"  ",description:"    ",variant:"destructive"}),Co(!1);return}if(mr.start_time>=mr.end_time){We({title:"  ",description:"       ",variant:"destructive"}),Co(!1);return}const U={study_circle_id:Te.id,weekday:parseInt(mr.weekday),start_time:mr.start_time,end_time:mr.end_time,location:mr.location.trim()||null};console.log(" Creating new schedule:",U);const Ue=await Ug(U);Ue.success?(We({title:"   ",description:`     "${Te.name}" `,variant:"default"}),await Mc(Te.id),At(!1)):We({title:"  ",description:Ue.message||"     ",variant:"destructive"})}catch(U){console.error(" Error creating new schedule:",U),We({title:"  ",description:"       ",variant:"destructive"})}finally{Co(!1)}},gN=U=>{Ac(U),Dc({weekday:U.weekday.toString(),start_time:U.start_time.substring(0,5),end_time:U.end_time.substring(0,5),location:U.location||""}),Eo(!0)},Ic=(U,Ue)=>{Dc(pr=>({...pr,[U]:Ue}))},pN=async()=>{if(!(!Oc||rn))try{if(nn(!0),!gr.start_time||!gr.end_time){We({title:"  ",description:"    ",variant:"destructive"});return}if(gr.start_time>=gr.end_time){We({title:"  ",description:"       ",variant:"destructive"});return}const U={id:Oc.id,weekday:parseInt(gr.weekday),start_time:gr.start_time,end_time:gr.end_time,location:gr.location.trim()||null};console.log(" Updating schedule with data:",U);const Ue=await Wg(U);Ue.success?(We({title:"   ",description:"    ",variant:"default"}),Te&&await Mc(Te.id),Eo(!1),Ac(null)):We({title:"  ",description:Ue.message||"     ",variant:"destructive"})}catch(U){console.error(" Error updating schedule:",U),We({title:"  ",description:"       ",variant:"destructive"})}finally{nn(!1)}},xN=U=>{R(U),A(!0)},vN=async()=>{if(F)try{const U=await Vg(F.id);U.success?(We({title:"  ",description:"   ",variant:"destructive"}),console.log(" Schedule deleted successfully:",F.id),Te&&await Mc(Te.id)):We({title:"  ",description:U.message||"    ",variant:"destructive"})}catch(U){console.error(" Error deleting schedule:",U),We({title:"  ",description:"      ",variant:"destructive"})}finally{A(!1),R(null)}};if(t!=="superadmin"&&t!=="admin"&&t!=="teacher")return s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto p-8 text-center",children:[s.jsx(Jw,{className:"h-16 w-16 mx-auto text-destructive mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:ue.accessDenied}),s.jsx("p",{className:"mb-4",children:ue.accessDeniedMessage}),s.jsx(H,{onClick:()=>e("/"),children:ue.returnToHome})]});const yN=async()=>{try{x(!0),We({title:" ",description:"  ..."}),await Us(),(y==="teachers"||y==="admins")&&await w(),We({title:" ",description:"   ",variant:"default"})}catch(U){console.error("   :",U),We({title:Be.generalError,description:"    ",variant:"destructive"})}finally{x(!1)}};return s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto py-6",dir:"rtl",children:[s.jsxs(ut,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsx(wt,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(yt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(vm,{className:"h-5 w-5 text-yellow-300"}),n&&t==="teacher"?ue.teacherProfileTitle:ue.title]}),s.jsx(Rt,{className:"text-xs md:text-sm text-green-100 mt-1",children:n&&t==="teacher"?ue.teacherProfileDescription:ue.description})]}),s.jsxs(H,{variant:"outline",className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:yN,children:[s.jsx(Vn,{className:"h-4 w-4"}),""]})]})}),s.jsx(ot,{children:n&&t==="teacher"?s.jsx(ut,{children:s.jsx(ot,{className:"p-4",children:f?s.jsx("div",{className:"text-center p-4",children:ue.loading}):s.jsx(pd,{users:i,onEdit:xe,onDelete:Ae,onChangePassword:dt,userRole:t,currentUserId:r,userType:"teacher",showOnlyChangePassword:!0,teacherCircleCounts:Wa})})}):s.jsxs(uc,{value:y,onValueChange:g,className:"w-full",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs($i,{children:[t==="superadmin"&&s.jsxs(Gr,{value:"superadmins",className:"flex items-center gap-2",children:[s.jsx(mx,{className:"h-4 w-4"}),s.jsx("span",{children:ue.superadmins})]}),(t==="superadmin"||t==="admin")&&s.jsxs(Gr,{value:"admins",className:"flex items-center gap-2",children:[s.jsx(xx,{className:"h-4 w-4"}),s.jsx("span",{children:ue.administrators})]}),s.jsxs(Gr,{value:"teachers",className:"flex items-center gap-2",children:[s.jsx(ci,{className:"h-4 w-4"}),s.jsx("span",{children:ue.teachers})]})]}),(t==="superadmin"||t==="admin"&&y==="teachers")&&s.jsxs(H,{onClick:P,className:"bg-islamic-green hover:bg-islamic-green/90",children:[s.jsx(Ns,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:y==="admins"?ue.addNewAdmin:y==="superadmins"?ue.addNewSuperadmin:ue.addNewteacher})]})]}),t==="superadmin"&&s.jsx(cs,{value:"superadmins",className:"mt-0",children:s.jsx(ut,{children:s.jsx(ot,{className:"p-4",children:f?s.jsx("div",{className:"text-center p-4",children:ue.loading}):s.jsx(pd,{users:c,onEdit:xe,onDelete:Ae,onChangePassword:dt,userRole:t,currentUserId:r,userType:"superadmin",teacherCircleCounts:Wa})})})}),(t==="superadmin"||t==="admin")&&s.jsx(cs,{value:"admins",className:"mt-0",children:s.jsx(ut,{children:s.jsx(ot,{className:"p-4",children:f?s.jsx("div",{className:"text-center p-4",children:ue.loading}):s.jsx(pd,{users:a,onEdit:xe,onDelete:Ae,onChangePassword:dt,userRole:t,currentUserId:r,userType:"admin",teacherCircleCounts:Wa,onShowCircles:Br})})})}),s.jsx(cs,{value:"teachers",className:"mt-0",children:s.jsx(ut,{children:s.jsx(ot,{className:"p-4",children:f?s.jsx("div",{className:"text-center p-4",children:ue.loading}):s.jsx(pd,{users:i,onEdit:xe,onDelete:Ae,onChangePassword:dt,userRole:t,currentUserId:r,userType:"teacher",teacherCircleCounts:Wa,onShowCircles:Br})})})})]})})]}),s.jsx(ir,{open:v,onOpenChange:p,children:s.jsxs(lr,{className:"sm:max-w-[425px]",children:[s.jsx(jr,{children:s.jsx(dr,{className:"text-center text-xl font-bold",children:S})}),s.jsxs("div",{className:"grid gap-4 py-4",dir:"rtl",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ye,{htmlFor:"full_name",children:ue.fullName}),s.jsx(fe,{id:"full_name",value:qe,onChange:U=>Ot(U.target.value),placeholder:ue.fullName})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ye,{htmlFor:"username",children:ue.username}),s.jsx(fe,{id:"username",value:q,onChange:U=>_e(U.target.value),placeholder:ue.username})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs(ye,{htmlFor:"password",children:[ue.addUserForm.password," ",b==="edit"&&ue.passwordKeep]}),s.jsxs("div",{className:"relative",children:[s.jsx(fe,{id:"password",type:Ct?"text":"password",value:Le,onChange:U=>Ge(U.target.value),placeholder:b==="add"?ue.enterPassword:ue.enterNewPassword}),s.jsx("button",{type:"button",onClick:()=>Qt(!Ct),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:Ct?s.jsx(yl,{size:18}):s.jsx(bl,{size:18})})]})]}),t==="superadmin"&&s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ye,{htmlFor:"role",children:ue.role}),s.jsxs(st,{value:$t,onValueChange:U=>Kt(U),children:[s.jsx(rt,{children:s.jsx(at,{placeholder:ue.chooseRole})}),s.jsxs(nt,{children:[s.jsx(Ne,{value:"superadmin",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mx,{className:"h-4 w-4"}),s.jsx("span",{children:ue.superadmin})]})}),s.jsx(Ne,{value:"admin",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xx,{className:"h-4 w-4"}),s.jsx("span",{children:ue.admin})]})}),s.jsx(Ne,{value:"teacher",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ci,{className:"h-4 w-4"}),s.jsx("span",{children:ue.teacher})]})})]})]})]}),t==="admin"&&s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ye,{htmlFor:"role",children:ue.role}),s.jsxs(st,{value:$t,onValueChange:U=>Kt(U),disabled:!0,children:[s.jsx(rt,{children:s.jsx(at,{placeholder:ue.chooseRole})}),s.jsx(nt,{children:s.jsx(Ne,{value:"teacher",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ci,{className:"h-4 w-4"}),s.jsx("span",{children:ue.teacher})]})})})]})]})]}),s.jsxs(cr,{dir:"rtl",className:"flex justify-start gap-2",children:[s.jsx(H,{onClick:Er,className:"bg-islamic-green hover:bg-islamic-green/90",children:b==="add"?ue.addUser:ue.saveChanges}),s.jsx(H,{variant:"outline",onClick:()=>p(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:ue.cancel})]})]})}),s.jsx(Sn,{isOpen:D,onOpenChange:I,onConfirm:Lt,isLoading:f,title:"  ",description:ee?`        "${ee.full_name}"      .`:"",deleteButtonText:"  ",cancelButtonText:""}),s.jsx(Sn,{isOpen:T,onOpenChange:_,onConfirm:hN,isLoading:!1,title:"  ",description:O?`        "${O.name}"      .`:"",deleteButtonText:"  ",cancelButtonText:""}),s.jsx(Sn,{isOpen:k,onOpenChange:A,onConfirm:vN,isLoading:!1,title:"  ",description:F?`           ${no(F.weekday)}      .`:"",deleteButtonText:"  ",cancelButtonText:""}),s.jsx(ir,{open:z,onOpenChange:Y,children:s.jsxs(lr,{className:"sm:max-w-[425px]",children:[s.jsx(jr,{children:s.jsx(dr,{className:"text-center text-xl font-bold",children:ue.changePasswordForm.title})}),s.jsxs("div",{className:"grid gap-4 py-4",dir:"rtl",children:[W&&W.id===r&&s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ye,{htmlFor:"current_password",children:ue.changePasswordForm.currentPassword}),s.jsxs("div",{className:"relative",children:[s.jsx(fe,{id:"current_password",type:je?"text":"password",value:B,onChange:U=>X(U.target.value),placeholder:ue.changePasswordForm.currentPassword}),s.jsx("button",{type:"button",onClick:()=>V(!je),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:je?s.jsx(yl,{size:18}):s.jsx(bl,{size:18})})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ye,{htmlFor:"new_password",children:ue.changePasswordForm.newPassword}),s.jsxs("div",{className:"relative",children:[s.jsx(fe,{id:"new_password",type:Q?"text":"password",value:K,onChange:U=>ae(U.target.value),placeholder:ue.changePasswordForm.newPassword}),s.jsx("button",{type:"button",onClick:()=>ie(!Q),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:Q?s.jsx(yl,{size:18}):s.jsx(bl,{size:18})})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ye,{htmlFor:"confirm_password",children:ue.changePasswordForm.confirmNewPassword}),s.jsxs("div",{className:"relative",children:[s.jsx(fe,{id:"confirm_password",type:ne?"text":"password",value:te,onChange:U=>me(U.target.value),placeholder:ue.changePasswordForm.confirmNewPassword}),s.jsx("button",{type:"button",onClick:()=>le(!ne),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:ne?s.jsx(yl,{size:18}):s.jsx(bl,{size:18})})]})]})]}),s.jsxs(cr,{dir:"rtl",className:"flex justify-start gap-2",children:[s.jsx(H,{onClick:Bt,className:"bg-islamic-green hover:bg-islamic-green/90",children:ue.changePasswordForm.submit}),s.jsx(H,{variant:"outline",onClick:()=>Y(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:ue.cancel})]})]})}),s.jsx(ir,{open:xt,onOpenChange:_t,children:s.jsxs(lr,{dir:"rtl",className:"sm:max-w-[700px] max-h-[80vh] overflow-auto",children:[s.jsxs(jr,{className:"flex flex-col items-center border-b border-islamic-green/20 pb-4",children:[s.jsxs(dr,{className:"text-xl text-islamic-green flex items-center gap-2",children:[s.jsx(Pt,{className:"h-5 w-5"}),Xe?` ${Xe.full_name}`:" "]}),s.jsx(Qa,{className:"text-center text-muted-foreground",children:"     "})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(lt,{variant:"outline",className:"text-islamic-green border-islamic-green/40",children:[Xt.length," "]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:" "})]}),Xe&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(lt,{variant:"secondary",className:"text-xs",children:[": ",Xe.full_name]})})]}),s.jsxs(H,{onClick:To,className:"bg-islamic-green hover:bg-islamic-green/90 text-white",size:"sm",children:[s.jsx(Ns,{className:"h-4 w-4 ml-2"}),"  "]})]}),G?s.jsx("div",{className:"text-center p-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-islamic-green mb-4"}),s.jsx("span",{className:"text-muted-foreground",children:"  ..."})]})}):Xt.length===0?s.jsxs("div",{className:"text-center p-8 bg-muted/30 rounded-lg",children:[s.jsx(Pt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-medium text-lg mb-2",children:"  "}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"       "}),s.jsxs(H,{onClick:To,className:"bg-islamic-green hover:bg-islamic-green/90",children:[s.jsx(Ns,{className:"h-4 w-4 ml-2"}),"  "]})]}):s.jsx("div",{className:"border border-islamic-green/20 rounded-lg overflow-hidden",children:s.jsxs(Oa,{className:"min-w-full border border-green-300 rounded-2xl overflow-hidden shadow-lg",children:[s.jsx(Aa,{className:"bg-islamic-green",children:s.jsxs(Ir,{children:[s.jsx(vt,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:"  "}),s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"   "}),s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"  "}),s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4",children:" "})]})}),s.jsx(Da,{children:Xt.map(U=>s.jsxs(Ir,{className:"border-b border-green-200 hover:bg-green-50 dark:hover:bg-green-900 transition-colors duration-200",children:[s.jsx(tt,{className:"text-right font-medium py-2 px-4 border-r border-green-200",children:U.name}),s.jsx(tt,{className:"text-center py-2 px-4 border-r border-green-200",children:s.jsx(lt,{variant:"secondary",className:"text-sm px-2 py-1 rounded-lg",children:U.max_students||" "})}),s.jsx(tt,{className:"text-center text-sm text-muted-foreground py-2 px-4 border-r border-green-200",children:U.created_at?new Date(U.created_at).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):"-"}),s.jsx(tt,{className:"text-center py-2 px-4",children:s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>fN(U),className:"h-8 w-8 p-0 hover:bg-blue-50 dark:hover:bg-blue-900 transition-colors rounded-lg",title:" ",children:s.jsx(ur,{className:"h-4 w-4 text-blue-500 dark:text-blue-300"})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>cN(U),className:"h-8 w-8 p-0 hover:bg-islamic-green/10 transition-colors rounded-lg",title:" ",children:s.jsx(Rr,{className:"h-4 w-4 text-islamic-green dark:text-green-300"})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>uN(U),className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-700 transition-colors rounded-lg",title:" ",children:s.jsx(Lr,{className:"h-4 w-4 text-red-500 dark:text-red-300"})})]})})]},U.id))})]})})]}),s.jsx(cr,{className:"sticky bottom-0 bg-background pt-4 border-t",dir:"rtl",children:s.jsxs("div",{className:"flex gap-2 w-full justify-end",children:[s.jsx(H,{variant:"outline",onClick:()=>_t(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:""}),s.jsxs(H,{onClick:To,className:"bg-islamic-green hover:bg-islamic-green/90 text-white",children:[s.jsx(Ns,{className:"h-4 w-4 ml-2"})," "]})]})})]})}),s.jsx(ir,{open:Me,onOpenChange:Ve,children:s.jsxs(lr,{dir:"rtl",className:"sm:max-w-[400px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(jr,{className:"flex flex-col items-center border-b border-islamic-green/20 pb-4",children:[s.jsxs(dr,{className:"text-xl text-islamic-green flex items-center gap-2",children:[s.jsx(Rr,{className:"h-5 w-5"})," "]}),s.jsx(Qa,{className:"text-center text-muted-foreground",children:"    "})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"edit-circle-name",className:"text-right",children:"  *"}),s.jsx(fe,{id:"edit-circle-name",value:ht.name,onChange:U=>qg("name",U.target.value),placeholder:"  ",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"edit-circle-max-students",className:"text-right",children:"  "}),s.jsx(fe,{id:"edit-circle-max-students",type:"number",value:ht.max_students,onChange:U=>qg("max_students",U.target.value),placeholder:"   ",min:"1"})]})]}),s.jsxs(cr,{className:"gap-2",dir:"rtl",children:[s.jsx(H,{variant:"outline",onClick:()=>Ve(!1),children:""}),s.jsx(H,{onClick:dN,className:"bg-islamic-green hover:bg-islamic-green/90",disabled:!ht.name.trim()||Oe,children:Oe?" ...":" "})]})]})}),s.jsx(ir,{open:re,onOpenChange:Ee,children:s.jsxs(lr,{dir:"rtl",className:"sm:max-w-[400px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(jr,{className:"flex flex-col items-center border-b border-islamic-green/20 pb-4",children:[s.jsxs(dr,{className:"text-xl text-islamic-green flex items-center gap-2",children:[s.jsx(Ns,{className:"h-5 w-5"}),"  "]}),s.jsx(Qa,{className:"text-center text-muted-foreground",children:"     "})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"add-circle-name",className:"text-right",children:"  *"}),s.jsx(fe,{id:"add-circle-name",value:L.name,onChange:U=>Hg("name",U.target.value),placeholder:"  ",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"add-circle-max-students",className:"text-right",children:"  "}),s.jsx(fe,{id:"add-circle-max-students",type:"number",value:L.max_students,onChange:U=>Hg("max_students",U.target.value),placeholder:"   ",min:"1"})]})]}),s.jsxs(cr,{className:"gap-2",dir:"rtl",children:[s.jsx(H,{variant:"outline",onClick:()=>Ee(!1),children:""}),s.jsx(H,{onClick:lN,className:"bg-islamic-green hover:bg-islamic-green/90",disabled:!L.name.trim()||et,children:et?" ...":" "})]})]})}),s.jsx(ir,{open:pe,onOpenChange:$e,children:s.jsxs(lr,{dir:"rtl",className:"sm:max-w-[900px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(jr,{className:"flex flex-col items-center border-b border-islamic-green/20 pb-4",children:[s.jsxs(dr,{className:"text-xl text-islamic-green flex items-center gap-2",children:[s.jsx(ur,{className:"h-5 w-5"}),Te?` : ${Te.name} | : ${Xe==null?void 0:Xe.full_name}`:" "]}),s.jsx(Qa,{className:"text-center text-muted-foreground",children:"     "})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(lt,{variant:"outline",className:"text-islamic-green border-islamic-green/40",children:[$.length," "]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:" "})]}),Te&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(lt,{variant:"secondary",className:"text-xs",children:[": ",Te.name]})})]}),s.jsxs(H,{onClick:ph,className:"bg-islamic-green hover:bg-islamic-green/90 text-white",size:"sm",children:[s.jsx(Qr,{className:"h-4 w-4 ml-2"}),"  "]})]}),ze?s.jsx("div",{className:"text-center p-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-islamic-green mb-4"}),s.jsx("span",{className:"text-muted-foreground",children:"   ..."})]})}):$.length===0?s.jsxs("div",{className:"text-center p-8 bg-muted/30 rounded-lg",children:[s.jsx(ur,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-medium text-lg mb-2",children:"   "}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"       "}),s.jsxs(H,{onClick:ph,className:"bg-islamic-green hover:bg-islamic-green/90",children:[s.jsx(Qr,{className:"h-4 w-4 ml-2"}),"  "]})]}):s.jsx("div",{className:"border border-islamic-green/20 rounded-lg overflow-hidden",children:s.jsxs(Oa,{className:"min-w-full border border-green-300 rounded-2xl overflow-hidden shadow-lg",children:[s.jsx(Aa,{className:"bg-islamic-green",children:s.jsxs(Ir,{children:[s.jsx(vt,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:" "}),s.jsx(vt,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:" "}),s.jsx(vt,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:" "}),s.jsx(vt,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:" "}),s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"  "}),s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4",children:" "})]})}),s.jsx(Da,{children:$.map(U=>s.jsxs(Ir,{className:"border-b border-green-200 hover:bg-green-50 dark:hover:bg-green-900 transition-colors duration-200",children:[s.jsx(tt,{className:"text-right font-medium py-2 px-4 border-r border-green-200",children:no(U.weekday)}),s.jsx(tt,{className:"text-right py-2 px-4 border-r border-green-200",children:s.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[s.jsx(Yr,{className:"h-4 w-4 text-blue-500"}),jn(U.start_time)]})}),s.jsx(tt,{className:"text-right py-2 px-4 border-r border-green-200",children:s.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[s.jsx(Yr,{className:"h-4 w-4 text-red-500"}),jn(U.end_time)]})}),s.jsx(tt,{className:"text-right py-2 px-4 border-r border-green-200",children:U.location?s.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[s.jsx(tc,{className:"h-4 w-4 text-gray-500"}),U.location]}):s.jsx("div",{className:"text-muted-foreground italic text-sm",children:"   "})}),s.jsx(tt,{className:"text-center text-sm text-muted-foreground py-2 px-4 border-r border-green-200",children:U.created_at?new Date(U.created_at).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):"-"}),s.jsx(tt,{className:"text-center py-2 px-4",children:s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>gN(U),className:"h-8 w-8 p-0 hover:bg-islamic-green/10 transition-colors rounded-lg",title:" ",children:s.jsx(Rr,{className:"h-4 w-4 text-islamic-green dark:text-green-300"})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>xN(U),className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-700 transition-colors rounded-lg",title:" ",children:s.jsx(Lr,{className:"h-4 w-4 text-red-500 dark:text-red-300"})})]})})]},U.id))})]})})]}),s.jsx(cr,{className:"sticky bottom-0 bg-background pt-4 border-t",dir:"rtl",children:s.jsxs("div",{className:"flex gap-2 w-full justify-end",children:[s.jsx(H,{variant:"outline",onClick:()=>$e(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:""}),s.jsxs(H,{onClick:ph,className:"bg-islamic-green hover:bg-islamic-green/90 text-white",children:[s.jsx(Qr,{className:"h-4 w-4 ml-2"})," "]})]})})]})}),s.jsx(ir,{open:rr,onOpenChange:At,children:s.jsxs(lr,{className:"sm:max-w-[500px]",dir:"rtl",children:[s.jsxs(jr,{children:[s.jsxs(dr,{className:"text-xl font-bold text-islamic-green flex items-center gap-2",children:[s.jsx(Qr,{className:"h-5 w-5"}),"  "]}),s.jsx(Qa,{children:"       "})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"add-schedule-weekday",className:"text-right",children:" *"}),s.jsxs(st,{value:mr.weekday,onValueChange:U=>Rc("weekday",U),children:[s.jsx(rt,{id:"add-schedule-weekday",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{children:Ps.map(U=>s.jsx(Ne,{value:U.value.toString(),children:U.label},U.value))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"add-schedule-start-time",className:"text-right",children:"  *"}),s.jsx(fe,{id:"add-schedule-start-time",type:"time",value:mr.start_time,onChange:U=>Rc("start_time",U.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"add-schedule-end-time",className:"text-right",children:"  *"}),s.jsx(fe,{id:"add-schedule-end-time",type:"time",value:mr.end_time,onChange:U=>Rc("end_time",U.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ye,{htmlFor:"add-schedule-location",className:"text-right",children:" ()"}),s.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[s.jsx(Ai,{className:"h-3 w-3 mr-1"}),"     "]})]}),s.jsx(fe,{id:"add-schedule-location",value:mr.location,onChange:U=>Rc("location",U.target.value),placeholder:"   ()"})]})]}),s.jsxs(cr,{className:"gap-2",dir:"rtl",children:[s.jsx(H,{variant:"outline",onClick:()=>At(!1),children:""}),s.jsx(H,{onClick:mN,className:"bg-islamic-green hover:bg-islamic-green/90",disabled:!mr.start_time||!mr.end_time||Qn,children:Qn?" ...":" "})]})]})}),s.jsx(ir,{open:gh,onOpenChange:Eo,children:s.jsxs(lr,{className:"sm:max-w-[500px]",dir:"rtl",children:[s.jsxs(jr,{children:[s.jsxs(dr,{className:"text-xl font-bold text-islamic-green flex items-center gap-2",children:[s.jsx(Rr,{className:"h-5 w-5"})," "]}),s.jsx(Qa,{children:"   "})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"edit-schedule-weekday",className:"text-right",children:" *"}),s.jsxs(st,{value:gr.weekday,onValueChange:U=>Ic("weekday",U),children:[s.jsx(rt,{id:"edit-schedule-weekday",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{children:Ps.map(U=>s.jsx(Ne,{value:U.value.toString(),children:U.label},U.value))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"edit-schedule-start-time",className:"text-right",children:"  *"}),s.jsx(fe,{id:"edit-schedule-start-time",type:"time",value:gr.start_time,onChange:U=>Ic("start_time",U.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"edit-schedule-end-time",className:"text-right",children:"  *"}),s.jsx(fe,{id:"edit-schedule-end-time",type:"time",value:gr.end_time,onChange:U=>Ic("end_time",U.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ye,{htmlFor:"edit-schedule-location",className:"text-right",children:" ()"}),s.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[s.jsx(Ai,{className:"h-3 w-3 mr-1"}),"     "]})]}),s.jsx(fe,{id:"edit-schedule-location",value:gr.location,onChange:U=>Ic("location",U.target.value),placeholder:"   ()"})]})]}),s.jsxs(cr,{className:"gap-2",dir:"rtl",children:[s.jsx(H,{variant:"outline",onClick:()=>Eo(!1),children:""}),s.jsx(H,{onClick:pN,className:"bg-islamic-green hover:bg-islamic-green/90",disabled:!gr.start_time||!gr.end_time||rn,children:rn?" ...":" "})]})]})})]})}function pd({users:e,onEdit:t,onDelete:r,onChangePassword:n,userRole:a,currentUserId:o,userType:i,showOnlyChangePassword:l=!1,teacherCircleCounts:c={},onShowCircles:d,onAddCircle:u}){const m=i==="teacher"||i==="admin";if(e.length===0)return s.jsxs("div",{className:"text-center p-6 bg-muted/50 rounded-lg",children:[s.jsx(cu,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("h3",{className:"font-medium text-lg mb-1",children:i==="admin"?ue.noAdmins:i==="superadmin"?ue.noSuperadmins:ue.noteachers}),s.jsx("p",{className:"text-muted-foreground text-sm",children:i==="admin"?ue.addAdminText:i==="superadmin"?ue.addSuperadminText:ue.addteacherText})]});const f=g=>a==="superadmin"||a==="admin"&&i==="teacher",x=g=>a==="superadmin"&&g.role!=="superadmin"||a==="admin"&&i==="teacher",y=g=>a==="superadmin"||a==="admin"&&g.role==="teacher"||g.id===o;return s.jsx(s.Fragment,{children:s.jsx("div",{className:"overflow-x-auto border border-islamic-green/20 rounded-lg",dir:"rtl",children:s.jsxs(Oa,{className:"min-w-full border border-green-300 rounded-2xl overflow-hidden shadow-lg",children:[s.jsx(Aa,{className:"bg-islamic-green",children:s.jsxs(Ir,{children:[s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"  "}),s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"  "}),s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:" "}),m&&s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"  "}),s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"   "}),s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4",children:" "})]})}),s.jsx(Da,{children:e.map(g=>s.jsxs(Ir,{className:"border-b border-green-200 hover:bg-green-50 dark:hover:bg-green-900 transition-colors duration-200",children:[s.jsx(tt,{className:"text-center font-medium text-islamic-green/90 py-2 px-4 border-r border-green-200",children:g.full_name}),s.jsx(tt,{className:"text-center text-islamic-green/80 py-2 px-4 border-r border-green-200",children:g.username}),s.jsx(tt,{className:"text-center text-islamic-green/80 py-2 px-4 border-r border-green-200",children:g.role==="superadmin"?ue.superadmin:g.role==="admin"?ue.admin:ue.teacher}),m&&s.jsx(tt,{className:"text-center py-2 px-4 border-r border-green-200",children:s.jsxs(lt,{variant:"outline",className:"cursor-pointer hover:bg-islamic-green/10 hover:border-islamic-green/40 border-islamic-green/20 text-islamic-green font-medium px-3 py-1",onClick:()=>d&&d(g),title:"   ",children:[c[g.id]??0," "]})}),s.jsx(tt,{className:"text-center text-islamic-green/80 text-sm py-2 px-4 border-r border-green-200",children:g.last_login_at?new Date(g.last_login_at).toLocaleString("en-EG",{dateStyle:"medium",timeStyle:"short"}):"-"}),s.jsx(tt,{className:"text-center py-2 px-4",children:s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>n(g),disabled:!y(g),title:ue.changePasswordTooltip,className:"h-8 w-8 p-0 hover:bg-amber-50 transition-colors rounded-lg",children:s.jsx(Hw,{className:"h-4 w-4 text-amber-600/80"})}),!l&&s.jsxs(s.Fragment,{children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t(g),disabled:!f(),title:f()?ue.editTooltip:ue.cannotEditSuperadmin,className:"h-8 w-8 p-0 hover:bg-islamic-green/10 transition-colors rounded-lg",children:s.jsx(Rr,{className:"h-4 w-4 text-islamic-green/80"})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>r(g),disabled:!x(g),title:x(g)?ue.deleteTooltip:ue.cannotDeleteSuperadmin,className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-700 transition-colors rounded-lg",children:s.jsx(Lr,{className:"h-4 w-4 text-red-500/80"})})]})]})})]},g.id))})]})})})}function tM({onNavigate:e,userRole:t=null,currentUserId:r,teacherOnly:n=!1}){try{return console.log("UserManagementPage props:",{userRole:t,currentUserId:r,teacherOnly:n}),s.jsx(eM,{onNavigate:e,userRole:t,currentUserId:r,teacherOnly:n})}catch(a){return console.error("Error in UserManagementPage:",a),s.jsxs("div",{className:"container mx-auto p-8 text-center",children:[s.jsx("div",{className:"text-destructive text-4xl mb-4",children:""}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"     "}),s.jsx("p",{className:"mb-4",children:"   .        ."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"  "})]})}}const Z2=({className:e,...t})=>s.jsx("nav",{role:"navigation","aria-label":"pagination",className:Se("mx-auto flex w-full justify-center",e),...t});Z2.displayName="Pagination";const eN=h.forwardRef(({className:e,...t},r)=>s.jsx("ul",{ref:r,className:Se("flex flex-row items-center gap-1",e),...t}));eN.displayName="PaginationContent";const ea=h.forwardRef(({className:e,...t},r)=>s.jsx("li",{ref:r,className:Se("",e),...t}));ea.displayName="PaginationItem";const gi=({className:e,isActive:t,size:r="icon",...n})=>s.jsx("a",{"aria-current":t?"page":void 0,className:Se(Yu({variant:t?"outline":"ghost",size:r}),e),...n});gi.displayName="PaginationLink";const tN=({className:e,...t})=>s.jsxs(gi,{"aria-label":"Go to previous page",size:"default",className:Se("gap-1 pl-2.5",e),...t,children:[s.jsx(c4,{className:"h-4 w-4"}),s.jsx("span",{children:"Previous"})]});tN.displayName="PaginationPrevious";const rN=({className:e,...t})=>s.jsxs(gi,{"aria-label":"Go to next page",size:"default",className:Se("gap-1 pr-2.5",e),...t,children:[s.jsx("span",{children:"Next"}),s.jsx(d4,{className:"h-4 w-4"})]});rN.displayName="PaginationNext";const rM=async e=>{try{const{data:t,error:r}=await de.from(ls).select("*").eq("id",e).single();return r?(console.error("    :",r),null):t?Jj(t):null}catch(t){return console.error("    :",t),null}},Tc=async()=>{try{console.log("Fetching all guardians from table:",ls);const{data:e,error:t}=await de.from(ls).select(`
        *,
        students:students(id)
      `);if(t)return console.error("    :",t),[];if(console.log("Guardians fetched from database:",e?e.length:0,"records"),e&&e.length>0)console.log("First guardian record:",e[0]);else{console.log("No guardian records found in database");const{data:r}=await de.from("information_schema.tables").select("table_name").eq("table_schema","public");console.log("Available tables:",r)}return e.map(r=>({...r,students_count:r.students?r.students.length:0}))}catch(e){return console.error("    :",e),[]}},nN=async e=>{try{const t=crypto.randomUUID();e.id=t;const r=oD(e);console.log("Attempting to add guardian with data:",r),console.log("Using table:",ls);const{data:n,error:a}=await Gt.from(ls).insert([r]).select();return a?(console.error("    :",a),{success:!1,message:`    : ${a.message}`}):(console.log("Guardian added successfully, response data:",n),setTimeout(()=>{de.from(ls).select("*").eq("id",t).then(({data:o,error:i})=>{i?console.error("Verification error:",i):console.log("Verification check found guardian:",o)})},500),{success:!0,id:t,message:"    "})}catch(t){return console.error("    :",t),{success:!1,message:"     "}}},nM=async e=>{try{if(!e.id)return{success:!1,message:"    "};const{error:t}=await Gt.from(ls).update(e).eq("id",e.id);return t?(console.error("     :",t),{success:!1,message:`     : ${t.message}`}):{success:!0,message:"     "}}catch(t){return console.error("     :",t),{success:!1,message:"      "}}},Gm=async e=>{try{if(!e)return await Tc();const{data:t,error:r}=await de.from(ls).select("*").or(`full_name.ilike.%${e}%,phone_number.ilike.%${e}%,email.ilike.%${e}%`);return r?(console.error("     :",r),[]):iD(t||[])}catch(t){return console.error("     :",t),[]}},sN=async e=>{try{const{error:t}=await Gt.from(ls).delete().eq("id",e);return t?(console.error("    :",t),{success:!1,message:`    : ${t.message}`}):{success:!0,message:"    "}}catch(t){return console.error("    :",t),{success:!1,message:"     "}}},aN=async()=>{try{return{success:!0,data:await Tc()}}catch(e){return console.error("    :",e),{success:!1,message:"      "}}},Sv=Object.freeze(Object.defineProperty({__proto__:null,addGuardian:nN,deleteGuardian:sN,exportGuardiansToJson:aN,getAllGuardians:Tc,getGuardianById:rM,searchGuardians:Gm,updateGuardian:nM},Symbol.toStringTag,{value:"Module"})),fs=h.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:Se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));fs.displayName="Textarea";function us({title:e,description:t,open:r,onOpenChange:n,onSave:a,children:o,saveButtonText:i="",cancelButtonText:l="",mode:c="add",isLoading:d=!1,maxWidth:u="480px",extraButtons:m}){return s.jsx(ir,{open:r,onOpenChange:n,children:s.jsxs(L_,{children:[s.jsx(zg,{className:"bg-black/60"}),s.jsxs("div",{className:"fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-2 border bg-background p-3 sm:p-4 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg max-w-[90%] sm:max-w-[450px] h-auto max-h-[85vh] overflow-y-auto",style:{maxWidth:u},dir:"rtl",children:[s.jsxs(e7,{className:"absolute left-2 sm:left-3 top-2 sm:top-3 rounded-full w-8 h-8 sm:w-7 sm:h-7 flex items-center justify-center bg-red-500 text-white hover:bg-red-600 shadow-md transition-all hover:scale-110 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2 z-50",children:[s.jsx(vo,{className:"h-5 w-5 sm:h-4 sm:w-4"}),s.jsx("span",{className:"sr-only",children:""})]}),s.jsxs("div",{children:[s.jsx(jr,{className:"pb-1 flex justify-center items-center mt-6 sm:mt-1",children:s.jsx(dr,{className:"w-full flex justify-center",children:s.jsx("h3",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-400 to-green-500 text-white text-base font-semibold py-1.5 px-5 rounded-xl shadow-md transform transition-transform hover:scale-105",children:s.jsx("span",{children:e})})})}),s.jsx("div",{className:"space-y-3 mt-1 pb-1 max-h-[55vh] overflow-y-auto px-1",children:o}),s.jsxs(cr,{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 mt-3 pt-2 border-t border-gray-200",children:[m,s.jsxs(H,{type:"button",onClick:()=>n(!1),variant:"outline",className:"border-red-300 hover:bg-red-100 text-red-700 rounded-lg py-1.5 w-full sm:hidden",children:[s.jsx(vo,{className:"h-3.5 w-3.5 mr-1"}),l]}),s.jsx(H,{type:"button",onClick:a,disabled:d,className:Se("text-white rounded-lg px-3 py-1.5 text-sm transition-transform transform hover:scale-105 flex items-center justify-center gap-1.5 w-full sm:w-auto shadow-md",c==="add"?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"),children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-3.5 w-3.5 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),s.jsx("span",{children:"..."})]}):s.jsxs(s.Fragment,{children:[c==="add"?s.jsx(f4,{className:"h-3.5 w-3.5 sm:mr-1"}):s.jsx(Fu,{className:"h-3.5 w-3.5 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:i}),s.jsx("span",{className:"sm:hidden",children:c==="add"?"":""})]})})]})]})]})]})})}function Ye({label:e,children:t,error:r,className:n=""}){return s.jsxs("div",{className:`space-y-1.5 ${n}`,children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"text-gray-800 text-xs font-medium",children:e}),r&&s.jsx("span",{className:"text-red-500 text-[10px]",children:r})]}),t]})}async function sM(e){try{const{data:t,error:r}=await de.from("students").select(`
        *,
        study_circles:study_circle_id (
          id,
          name,
          teacher:teacher_id (
            id,
            full_name
          )
        )
      `).eq("guardian_id",e);return r?(console.error("Error fetching students by guardian id:",r),[]):t.map(n=>{var a,o,i;return{...n,teacher_name:((o=(a=n.study_circles)==null?void 0:a.teacher)==null?void 0:o.full_name)||null,circle_name:((i=n.study_circles)==null?void 0:i.name)||null,grade:n.grade_level||n.grade||null}})}catch(t){return console.error("Exception in getStudentsByGuardianId:",t),[]}}function aM({onNavigate:e,userRole:t,userId:r}){const{toast:n}=Tn(),[a,o]=h.useState([]),[i,l]=h.useState(!0),[c,d]=h.useState(""),[u,m]=h.useState(1),[f,x]=h.useState(null),[y,g]=h.useState(!1);h.useEffect(()=>{console.log("Component mounted, fetching guardians..."),Re(),w()},[]);const w=async()=>{try{console.log("Loading teachers with userRole:",t,"and userId:",r);const $=await ih();console.log("Loaded teachers (raw):",$),$.length===0&&console.warn("No teachers loaded from API!");const ke=$.filter(ze=>ze.role==="teacher"||ze.role==="admin");if(console.log("Filtered teachers:",ke),Qt(ke),t==="teacher"&&r){console.log("Current user is teacher, setting teacher ID:",r);const ze=ke.find(mt=>mt.id===r);console.log("teacher search result:",ze),ze?(console.log("Found teacher:",ze.full_name),Ge(r)):(console.warn("WARNING: Current teacher with ID",r,"not found in the list!"),console.log("Available teacher IDs:",ke.map(mt=>mt.id)))}}catch($){console.error("   :",$)}},[v,p]=h.useState(!1),[b,N]=h.useState("add"),[S,E]=h.useState(Fe.addGuardian),[D,I]=h.useState(!1),[ee,J]=h.useState(null),[T,_]=h.useState(!1),[O,j]=h.useState(""),[k,A]=h.useState(""),[F,R]=h.useState(""),[z,Y]=h.useState(""),[W,Z]=h.useState(""),[B,X]=h.useState(!1),[K,ae]=h.useState(""),[te,me]=h.useState(""),[je,V]=h.useState(""),[Q,ie]=h.useState(""),[ne,le]=h.useState(""),[Pe,He]=h.useState(""),[qe,Ot]=h.useState(""),[q,_e]=h.useState(""),[Le,Ge]=h.useState(""),[$t,Kt]=h.useState(""),[Ct,Qt]=h.useState([]),[xt,_t]=h.useState(!1),[Xe,zt]=h.useState(""),[Xt,M]=h.useState(""),[G,ge]=h.useState(!1),[Me,Ve]=h.useState([]),[Ie,be]=h.useState(""),Oe=10;h.useEffect(()=>{Re()},[]);const Re=async $=>{l(!0),x(null);try{let ke;if($?ke=await Gm($):(ke=await Tc(),d("")),console.log("Loaded guardians:",ke.length,"records"),ke.length>0)console.log("Sample guardian data:",JSON.stringify(ke[0]));else{console.log("No guardians found in the result, attempting direct database check");const{data:ze}=await as(()=>Promise.resolve().then(()=>nv),void 0).then(mt=>mt.supabase.from("guardians").select("*").limit(5));console.log("Direct database check result:",ze)}o(ke)}catch(ke){console.error(Be.errorLoadingData,ke),x(Be.fetchFailed),o([])}finally{l(!1)}},ht=async()=>{if(!c.trim()){Re();return}l(!0);try{const $=await Gm(c);o($),m(1),c&&$.length===0&&n({title:Fe.noSearchResults,description:Fe.tryAnotherSearch})}catch($){console.error(Be.searchError,$),n({title:Be.fetchFailed,description:Fe.unexpectedError,variant:"destructive"})}finally{l(!1)}},ft=async()=>{g(!0);try{const $=await aN();if($.success&&$.data){const ke=new Blob([JSON.stringify($.data,null,2)],{type:"application/json"}),ze=URL.createObjectURL(ke),mt=document.createElement("a");mt.href=ze,mt.download=`guardians_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(mt),mt.click(),document.body.removeChild(mt),URL.revokeObjectURL(ze),n({title:"   ",className:"bg-green-50 border-green-200"})}else x("  : "+($.message||"  "))}catch($){console.error("   :",$),x("  ")}finally{g(!1)}},re=()=>{N("add"),E(Fe.addGuardian),j(""),A(""),R(""),Y(""),Z(""),p(!0),setTimeout(()=>{const $=document.getElementById("full_name");$&&$.focus()},100)},Ee=($,ke=!1)=>{ae(""),me(""),ie(""),le(""),He(""),Ot(""),_e(""),Kt(""),zt(""),V($||""),_t(ke),Ge(t==="teacher"&&r?r:""),X(!0)},et=async()=>{if(!K||!te){n({title:"  ",description:"     ",variant:"destructive"});return}if(xt&&!je){n({title:"  ",description:"    ",variant:"destructive"});return}try{console.log("Creating student with values:",{full_name:K,guardian_id:je,grade_level:te,date_of_birth:Q,phone_number:ne,email:Pe,memorized_parts:qe,teacher_id:Le});const $={full_name:K,guardian_id:je,grade_level:te,date_of_birth:Q||void 0,phone_number:ne||void 0,email:Pe||void 0,memorized_parts:qe||void 0,notes:q||void 0,study_circle_id:Xt||void 0};Object.keys($).forEach(ze=>{$[ze]===""&&($[ze]=void 0)}),console.log("Final student data being sent:",$);const ke=await BD($);ke.success?(n({title:"   ",description:"",className:"bg-green-50 border-green-200"}),X(!1),$e()):n({title:"    ",description:ke.message||"   ",variant:"destructive"})}catch($){console.error("    :",$),n({title:"",description:"   ",variant:"destructive"})}},C=async $=>{N("edit"),E(Fe.editGuardian),j($.id),A($.full_name),R($.phone_number),Y($.email||""),Z($.address||""),p(!0)},L=async()=>{if(ee)try{_(!0);const $=await sN(ee.id);$.success?(n({title:Fe.deleteSuccess,description:"",className:"bg-green-50 border-green-200"}),Re()):n({title:Be.deleteFailed||"  ",description:$.message||Fe.unexpectedError,variant:"destructive"})}catch($){console.error("    :",$),n({title:Be.generalError,description:Fe.unexpectedError,variant:"destructive"})}finally{I(!1),J(null),_(!1)}},se=async()=>{if(!k||!F){n({title:Fe.incompleteData,description:Fe.incompleteDataMessage,variant:"destructive"});return}try{if(b==="add"){const $={full_name:k,phone_number:F,email:z||void 0,address:W||void 0},ke=await as(()=>Promise.resolve().then(()=>Sv),void 0).then(ze=>ze.addGuardian($));console.log("Guardian add result:",ke),ke.success?(n({title:Fe.addSuccess,description:"",className:"bg-green-50 border-green-200"}),p(!1),Re()):n({title:Be.saveFailed||"  ",description:ke.message||Fe.unexpectedError,variant:"destructive"})}else{const $={id:O,full_name:k,phone_number:F,email:z||void 0,address:W||void 0},ke=await as(()=>Promise.resolve().then(()=>Sv),void 0).then(ze=>ze.updateGuardian($));ke.success?(n({title:Fe.updateSuccess||"     ",description:"",className:"bg-green-50 border-green-200"}),p(!1),Re()):n({title:Be.updateFailed||"  ",description:ke.message||Fe.unexpectedError,variant:"destructive"})}}catch($){console.error("     :",$),n({title:Be.generalError,description:Fe.unexpectedError,variant:"destructive"})}},pe=async($,ke)=>{try{l(!0),console.log("[handleShowGuardianStudents] guardianId:",$,"guardianName:",ke);const ze=await sM($);console.log("[handleShowGuardianStudents] students fetched:",ze),Ve(ze),be(ke),ge(!0)}catch(ze){console.error("    :",ze),n({title:"    ",description:"      ",variant:"destructive"})}finally{l(!1)}},$e=async()=>{try{console.log("Loading student counts for guardians...");const{supabase:$}=await as(()=>Promise.resolve().then(()=>nv),void 0),{data:ke,error:ze}=await $.from("students").select("guardian_id, id");if(ze){console.error("Error fetching student counts:",ze);return}const mt=ke.reduce((rr,At)=>(At.guardian_id&&(rr[At.guardian_id]=(rr[At.guardian_id]||0)+1),rr),{});console.log("Student counts updated:",mt),o(rr=>rr.map(At=>({...At,students_count:mt[At.id]||0})))}catch($){console.error("Error in loadStudentCounts:",$)}};h.useEffect(()=>{a.length>0&&$e()},[a]);const Te=h.useMemo(()=>a.filter($=>c?$.full_name.toLowerCase().includes(c.toLowerCase())||$.phone_number.includes(c)||$.email&&$.email.toLowerCase().includes(c.toLowerCase()):!0),[a,c]),kt=h.useMemo(()=>{const $=(u-1)*Oe;return Te.slice($,$+Oe)},[Te,u]);return Math.max(1,Math.ceil(Te.length/Oe)),t!=="superadmin"&&t!=="admin"&&t!=="teacher"?s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto p-8 text-center",children:[s.jsx(Sr,{className:"h-16 w-16 mx-auto text-destructive mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:Fe.accessDenied}),s.jsx("p",{className:"text-muted-foreground mb-6",children:Fe.accessDeniedMessage}),s.jsx(H,{onClick:()=>e("/"),variant:"outline",children:Fe.returnToHome})]}):s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-0 sm:px-0 py-1 sm:py-2",children:[s.jsxs(ut,{children:[s.jsx(wt,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 duration-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(yt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(ss,{className:"h-5 w-5 text-yellow-300"}),Fe.title]}),s.jsx(Rt,{className:"text-xs md:text-sm text-green-100 mt-1",children:Fe.description})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:re,title:"   ",children:[s.jsx(Ns,{className:"h-5 w-5"}),s.jsx("span",{className:"hidden sm:inline",children:"   "})]}),s.jsxs(H,{className:"flex items-center gap-2 rounded-3xl bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:()=>Ee("",!0),title:"  ",children:[s.jsx(ri,{className:"h-5 w-5"}),s.jsx("span",{className:"hidden sm:inline",children:"  "})]})]})]})}),s.jsx(ot,{children:s.jsxs(s.Fragment,{children:[f&&s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 bg-white dark:bg-gray-900 p-4 rounded-2xl shadow-md border border-green-200 dark:border-green-700",children:s.jsxs(Qi,{variant:"destructive",className:"mb-4",children:[s.jsx(Sr,{className:"h-4 w-4 ml-2"}),s.jsx(Ji,{children:f})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Nr,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(fe,{placeholder:Fe.searchPlaceholder,value:c,onChange:$=>d($.target.value),className:"pl-3 pr-10 w-full",onKeyDown:$=>$.key==="Enter"&&ht()})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{variant:"outline",size:"icon",onClick:ht,title:Fe.search,className:"shrink-0",children:s.jsx(Nr,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"icon",onClick:()=>Re(),title:Fe.refresh,className:"shrink-0",children:s.jsx(Vn,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"icon",onClick:ft,title:Fe.export,className:"shrink-0",disabled:y||a.length===0,children:s.jsx(Uw,{className:"h-4 w-4"})})]})]}),s.jsx(ds,{data:kt,columns:[{key:"index_full_name",header:"#",align:"center",render:$=>{const ke=kt.findIndex(mt=>mt.id===$.id);return`${(u-1)*Oe+ke+1} - ${$.full_name}`}},{key:"phone_number",header:` ${Fe.phoneNumber}`,align:"center",render:$=>$.phone_number?s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(N4,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{dir:"ltr",className:"text-islamic-green/80",children:$.phone_number})]}):s.jsx("span",{className:"text-muted-foreground",children:""})},{key:"email",header:` ${Fe.email}`,align:"center",render:$=>$.email?s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(Gw,{className:"h-3 w-3 sm:h-4 sm:w-4 text-islamic-green/60"}),s.jsx("span",{dir:"ltr",className:"text-islamic-green/80 text-xs truncate block",children:$.email})]}):s.jsx("span",{className:"text-muted-foreground",children:""})},{key:"students_count",header:` ${Fe.studentCount}`,align:"center",render:$=>$.students_count>0?s.jsx(H,{variant:"ghost",onClick:()=>pe($.id,$.full_name),className:"h-6 px-3 rounded-full font-bold text-white bg-gradient-to-r from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 shadow-lg hover:scale-105 transition-all duration-200 text-sm",title:" ",children:$.students_count}):s.jsx("span",{className:"text-muted-foreground",children:"0"})},{key:"actions",header:` ${Fe.actions}`,align:"center",render:$=>s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>C($),className:"h-8 w-8 p-0 hover:bg-green-100 dark:hover:bg-green-700 transition-colors rounded-lg",title:Fe.editTooltip,children:s.jsx(Rr,{className:"h-4 w-4 text-green-600 dark:text-green-300"})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>Ee($.id),className:"h-8 w-8 p-0 hover:bg-green-100 dark:hover:bg-green-700 transition-colors rounded-lg",title:" ",children:s.jsx(Ns,{className:"h-4 w-4 text-green-600 dark:text-green-300"})})]})}],emptyMessage:c?Fe.noSearchResults:Fe.noGuardians})]})}),s.jsxs(Yi,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Fe.totalGuardians,": ",s.jsx("span",{className:"font-medium",children:a.length})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Fe.showing," ",s.jsxs("span",{className:"font-medium",children:[Math.min((u-1)*Oe+1,Te.length)," - ",Math.min(u*Oe,Te.length)]})," ",Fe.from," ",s.jsx("span",{className:"font-medium",children:Te.length})," ",Fe.guardian]})]})]}),s.jsx(us,{title:S,open:v,onOpenChange:p,onSave:se,saveButtonText:b==="add"?"   ":"   ",cancelButtonText:Fe.cancel,mode:b,children:s.jsxs("div",{className:"grid gap-4 py-2",children:[s.jsx(Ye,{label:`${Fe.fullName} *`,children:s.jsx(fe,{id:"full_name",value:k,onChange:$=>A($.target.value),placeholder:Fe.fullName,className:"bg-green-50 border-green-200 text-green-900 rounded-md text-sm py-1 px-2 text-right focus:border-islamic-green",required:!0})}),s.jsx(Ye,{label:`${Fe.phoneNumber} *`,children:s.jsx(fe,{id:"phone_number",value:F,onChange:$=>R($.target.value),placeholder:Fe.phoneNumber,dir:"ltr",className:"bg-yellow-50 border-yellow-200 text-yellow-900 rounded-md text-sm py-1 px-2 text-left focus:border-islamic-green",required:!0})}),s.jsx(Ye,{label:`${Fe.email} (${Fe.optionalField})`,children:s.jsx(fe,{id:"email",type:"email",value:z,onChange:$=>Y($.target.value),placeholder:Fe.email,dir:"ltr",className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2 text-left focus:border-islamic-green"})}),s.jsx(Ye,{label:`${Fe.address} (${Fe.optionalField})`,children:s.jsx(fs,{id:"address",value:W,onChange:$=>Z($.target.value),placeholder:Fe.address,rows:3,className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2 text-right focus:border-islamic-green"})})]})}),s.jsx(Sn,{isOpen:D,onOpenChange:I,onConfirm:L,isLoading:T,title:Fe.deleteGuardian,description:s.jsxs(s.Fragment,{children:[Fe.deleteConfirmation,s.jsx("br",{}),Fe.deleteDescription]}),deleteButtonText:Fe.confirm,cancelButtonText:Fe.cancel}),s.jsx(us,{title:"  ",open:B,onOpenChange:X,onSave:et,saveButtonText:" ",cancelButtonText:ve.cancel,mode:"add",children:s.jsxs("div",{className:"grid gap-4 py-2",children:[s.jsx(Ye,{label:"",children:t==="teacher"?s.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-muted",children:[s.jsx(ss,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{className:"text-islamic-green font-semibold",children:(()=>{if(r&&Ct.length>0){const $=Ct.find(ke=>ke.id===r);if($)return Le||Ge($.id),$.full_name}return" (  )"})()})]}):s.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[s.jsxs("div",{className:"relative md:w-1/2",children:[s.jsx(Nr,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(fe,{placeholder:"  ",value:$t,onChange:$=>Kt($.target.value),className:"pl-3 pr-10"})]}),s.jsx("div",{className:"md:w-1/2",children:s.jsxs(st,{value:Le,onValueChange:Ge,children:[s.jsx(rt,{className:"focus:border-islamic-green",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{position:"item-aligned",align:"start",side:"bottom",children:Ct.filter($=>!$t||$.full_name.includes($t)).map($=>s.jsx(Ne,{value:$.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:$.full_name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:$.role==="admin"?"":""})]})},$.id))})]})})]})}),s.jsx(Ye,{label:" / *",children:s.jsx(fe,{id:"student_full_name",value:K,onChange:$=>ae($.target.value),placeholder:"  ",required:!0,className:"focus:border-islamic-green"})}),s.jsx(Ye,{label:"  *",children:s.jsxs(st,{value:te,onValueChange:me,children:[s.jsx(rt,{className:"focus:border-islamic-green",children:s.jsx(at,{placeholder:" "})}),s.jsxs(nt,{className:"max-h-[300px]",children:[s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:"  "}),ve.gradeOptions.slice(0,2).map($=>s.jsx(Ne,{value:$.value,children:$.label},$.value))]}),s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:" "}),ve.gradeOptions.slice(2,8).map($=>s.jsx(Ne,{value:$.value,children:$.label},$.value))]}),s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:" "}),ve.gradeOptions.slice(8).map($=>s.jsx(Ne,{value:$.value,children:$.label},$.value))]})]})]})}),s.jsx(Ye,{label:"  ()",children:s.jsx(fe,{id:"student_date_of_birth",type:"date",value:Q,onChange:$=>ie($.target.value),className:"text-left focus:border-islamic-green"})}),s.jsx(Ye,{label:"      ()",children:s.jsxs(st,{value:qe,onValueChange:Ot,children:[s.jsx(rt,{className:"focus:border-islamic-green",children:s.jsx(at,{placeholder:"    "})}),s.jsx(nt,{className:"max-h-[300px]",children:s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:""}),ve.quranPartsOptions.map($=>s.jsx(Ne,{value:$.value,children:$.label},$.value))]})})]})}),xt?s.jsx(Ye,{label:"  *",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[s.jsxs("div",{className:"relative md:w-1/2",children:[s.jsx(Nr,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(fe,{placeholder:"   ",value:Xe,onChange:$=>zt($.target.value),className:"pl-3 pr-10"})]}),s.jsx("div",{className:"md:w-1/2",children:s.jsxs(st,{value:je,onValueChange:V,children:[s.jsx(rt,{className:"focus:border-islamic-green",children:s.jsx(at,{placeholder:"  "})}),s.jsx(nt,{align:"start",side:"bottom",children:a.filter($=>!Xe||$.full_name.includes(Xe)||$.phone_number&&$.phone_number.includes(Xe)).map($=>s.jsx(Ne,{value:$.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:$.full_name}),$.phone_number&&s.jsx("span",{className:"text-xs text-muted-foreground",children:$.phone_number})]})},$.id))})]})})]})}):s.jsx(Ye,{label:"  (  )",children:s.jsx("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-muted",children:s.jsx("span",{className:"text-islamic-green font-semibold",children:(()=>{const $=a.find(ke=>ke.id===je);return $?$.full_name:"  "})()})})}),s.jsx(Ye,{label:"  ()",children:s.jsx(fe,{id:"student_phone_number",value:ne,onChange:$=>le($.target.value),placeholder:"  ",dir:"ltr",className:"text-left focus:border-islamic-green"})}),s.jsx(Ye,{label:"  ()",children:s.jsx(fe,{id:"student_email",type:"email",value:Pe,onChange:$=>He($.target.value),placeholder:"  ",dir:"ltr",className:"text-left focus:border-islamic-green"})}),s.jsx(Ye,{label:" ()",children:s.jsx(fs,{id:"student_notes",value:q,onChange:$=>_e($.target.value),placeholder:"   ",rows:3,className:"focus:border-islamic-green"})})]})}),s.jsx(ir,{open:G,onOpenChange:ge,children:s.jsxs(lr,{dir:"rtl",className:"bg-gradient-to-r from-green-100 via-green-200 to-green-100 sm:max-w-[750px] max-h-[70vh] overflow-y-auto",children:[s.jsx(jr,{className:"flex flex-col items-center border-b border-green-200",children:s.jsxs(dr,{className:"text-sm text-islamic-green flex items-center gap-2",children:[s.jsx("span",{className:"bg-green-100 p-1.5 rounded-full",children:s.jsx(ss,{className:"h-5 w-5 text-green-600"})}),"  : ",Ie]})}),s.jsx("div",{className:"py-2",children:Me.length>0?s.jsx(ds,{data:Me.map(($,ke)=>({...$,id:$.id.toString(),serial:ke+1})),columns:[{key:"serial_full_name",header:"# ",align:"center",render:$=>s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-start gap-1 text-right",children:s.jsx("span",{className:"font-medium",children:$.serial+" - "+$.full_name})})},{key:"grade",header:" ",align:"center",render:$=>{var ke,ze;return((ke=ve.gradeOptions.find(mt=>mt.value===$.grade_level))==null?void 0:ke.label)||((ze=ve.gradeOptions.find(mt=>mt.value===$.grade))==null?void 0:ze.label)||"-"}},{key:"gender",header:" ",align:"center",render:$=>$.gender==="male"?"":$.gender==="female"?"":"-"},{key:"memorized_parts",header:"  ",align:"center",render:$=>{var ke;return $.memorized_parts?((ke=ve.quranPartsOptions.find(ze=>ze.value===$.memorized_parts))==null?void 0:ke.label)||$.memorized_parts:"-"}},{key:"teacher_name",header:" ",align:"center",render:$=>$.teacher_name||" "},{key:"circle_name",header:" ",align:"center",render:$=>$.circle_name||" "}],emptyMessage:"  ",className:"overflow-hidden rounded-xl border border-green-300 shadow-md text-xs",getRowClassName:($,ke)=>`${ke%2===0?"bg-green-50 hover:bg-green-100":"bg-white hover:bg-green-50"} cursor-pointer transition-colors`}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[s.jsx(X0,{className:"h-10 w-10 text-muted-foreground mb-2"}),s.jsx("p",{className:"text-muted-foreground",children:"     "})]})}),s.jsx(cr,{dir:"rtl",children:s.jsx(H,{variant:"outline",onClick:()=>ge(!1),children:""})})]})})]})}function oM({onNavigate:e,userRole:t,userId:r}){return console.log("Rendering GuardiansList page with role:",t),s.jsx("div",{dir:"rtl",children:s.jsx(aM,{onNavigate:e,userRole:t,userId:r})})}const oN=async(e,t,r=new Date,n)=>{try{const{data:a,error:o}=await de.from(Il).select("*").eq("student_id",e).is("end_date",null).single();if(a){const{error:l}=await Gt.from(Il).update({end_date:new Date().toISOString().split("T")[0]}).eq("id",a.id);if(l)return console.error("    :",l),{success:!1,message:"    "}}const{error:i}=await Gt.from(Il).insert([{student_id:e,teacher_id:t,start_date:r.toISOString().split("T")[0],end_date:null,study_circle_id:n||null}]);return i?(console.error("    :",i),{success:!1,message:"    "}):{success:!0,message:"    "}}catch(a){return console.error("    :",a),{success:!1,message:"     "}}},iM=async e=>{try{const{data:t,error:r}=await de.from(Il).select(`
        *,
        study_circle:study_circle_id (
          id,
          name
        )
      `).eq("student_id",e).order("start_date",{ascending:!1});return r?(console.error("     :",r),[]):uD(t||[])}catch(t){return console.error("     :",t),[]}},lM=async e=>{try{const t=lD(e),{data:r,error:n}=await Gt.from(Ta).insert([t]).select().single();if(n)return console.error("   :",n),{success:!1,message:`   : ${n.message}`};if(console.log("Student data:",e),console.log("Formatted student:",t),e.study_circle_id||t.study_circle_id){const a=e.study_circle_id||t.study_circle_id,o=await Q2(a);if(o){console.log("Adding teacher history with:",{studentId:r.id,teacherId:o,circleId:a});const{success:i,message:l}=await oN(r.id,o,new Date,a);i?console.log("    "):console.error("    :",l)}else console.log("      ")}else console.log("     ");return{success:!0,id:r.id,message:"   "}}catch(t){return console.error("   :",t),{success:!1,message:"    "}}},cM=async(e,t)=>{try{console.log(" :",{id:e,updatedData:t});const{data:r}=await de.from(Ta).select("study_circle_id").eq("id",e).single();console.log("  :",r);const{error:n}=await Gt.from(Ta).update(t).eq("id",e);if(n)return console.error("   :",n),{success:!1,message:`   : ${n.message}`};const a=t.study_circle_id,o=r==null?void 0:r.study_circle_id;if(console.log("  :",{newCircleId:a,oldCircleId:o,hasChanged:a!==o}),a&&o!==a){const i=await Q2(a);if(i){console.log("   ");const{success:l,message:c}=await oN(e,i,new Date,a);l||console.error("    :",c)}else console.log("      ")}return{success:!0,message:"   "}}catch(r){return console.error("   :",r),{success:!1,message:"    "}}};function kv(e){return e==="teacher"}function iN({onNavigate:e,userRole:t,userId:r}){var Wa,Zi,We,Us;const{toast:n}=Tn(),[a,o]=h.useState([]),[i,l]=h.useState(!0),[c,d]=h.useState(""),[u,m]=h.useState(1),[f,x]=h.useState(null),[y,g]=h.useState(!1),[w,v]=h.useState("all"),[p,b]=h.useState([]),[N,S]=h.useState(""),[E,D]=h.useState([]),[I,ee]=h.useState(""),[J,T]=h.useState([]),[_,O]=h.useState([]),[j,k]=h.useState(""),[A,F]=h.useState(""),[R,z]=h.useState(!1);h.useEffect(()=>{console.log("Component mounted, fetching students..."),ke(),ze(),t==="teacher"&&r?(k(r),kt(r).then(P=>{P?At({teacher_id:r}):(x("    .      ."),l(!1))})):(Te(),At())},[]),h.useEffect(()=>{if(console.log("  :",A),A!==void 0){const P=setTimeout(()=>{Qn()},100);return()=>clearTimeout(P)}},[A]),h.useEffect(()=>{if(w!==void 0){const P=setTimeout(()=>{Qn()},100);return()=>clearTimeout(P)}},[w]);const[Y,W]=h.useState(!1),[Z,B]=h.useState("add"),[X,K]=h.useState(ve.addStudent),[ae,te]=h.useState(!1),[me,je]=h.useState(""),[V,Q]=h.useState(""),[ie,ne]=h.useState(""),[le,Pe]=h.useState(""),[He,qe]=h.useState(!1),[Ot,q]=h.useState(null),[_e,Le]=h.useState(!1),[Ge,$t]=h.useState({student:{},history:[]}),[Kt,Ct]=h.useState(!1),[Qt,xt]=h.useState(""),[_t,Xe]=h.useState(""),[zt,Xt]=h.useState(""),[M,G]=h.useState(""),[ge,Me]=h.useState(""),[Ve,Ie]=h.useState(""),[be,Oe]=h.useState(""),[Re,ht]=h.useState(""),[ft,re]=h.useState(""),[Ee,et]=h.useState(""),[C,L]=h.useState(""),[se,pe]=h.useState(""),$e=10;h.useEffect(()=>{console.log("   ..."),At()},[]);const Te=async()=>{try{console.log("   ...");const P=await Ma();console.log(" ",P.length," "),T(P)}catch(P){console.error("    :",P)}},kt=async P=>{if(!P)if(t==="teacher"&&r)P=r,console.log("   :",P);else return console.log("      "),O([]),!1;z(!0);try{console.log("   :",P);const xe=await Os(P);return console.log(" ",xe.length,"  ",P),xe.length>0&&console.log(":",xe.map(Ae=>`${Ae.name} (${Ae.id})`)),O(xe),t==="teacher"&&r===P&&(T(xe),k(P)),xe.length>0}catch(xe){return console.error("     :",xe),n({title:"    ",description:"       .",variant:"destructive"}),O([]),t==="teacher"&&T([]),!1}finally{z(!1)}},$=async P=>{if(console.log("  :",P),t==="teacher"&&r&&(console.log("       ."),P=r),k(P),F(""),P){z(!0);try{console.log("   :",P);const xe=await Os(P);if(console.log(" ",xe.length,"  ",P),O(xe),t==="teacher"&&r===P&&T(xe),xe.length===0)n({title:"   ",description:"       ."}),o([]);else{const Ae={};console.log("   :",xe.map(dt=>`${dt.name} (${dt.id})`)),Ae.teacher_id=P,c.trim()&&(Ae.full_name=c);const Lt=await fl(Ae);console.log(`   ${Lt.length}   ${P}`),o(Lt)}}catch(xe){console.error("     :",xe),n({title:"    ",description:"       .",variant:"destructive"})}finally{z(!1)}}else At(),(t==="admin"||t==="superadmin")&&Te()},ke=async()=>{try{console.log("    ...");const P=await Tc();console.log(" ",P.length," "),b(P)}catch(P){console.error("    :",P)}},ze=async()=>{try{console.log(" Loading teachers with userRole:",t,"and userId:",r);const P=await ih();console.log(" Loaded teachers (all):",P);let xe=P;if(t==="teacher"&&(xe=P.filter(Ae=>Ae.role==="teacher"||Ae.role==="admin")),console.log(" teacher roles:",xe.map(Ae=>({id:Ae.id,name:Ae.full_name,role:Ae.role}))),D(xe),t==="teacher"&&r){const Ae=xe.find(Lt=>Lt.id===r);Ae&&(console.log(" Found current teacher:",Ae.full_name),Me(r))}}catch(P){console.error("    :",P)}},mt=()=>{je(""),Q(""),ne(""),Pe(""),te(!0)},rr=async()=>{if(!me||!V){n({title:"  ",description:"    ",variant:"destructive"});return}try{const xe=await nN({full_name:me,phone_number:V,email:ie||void 0,address:le||void 0});xe.success?(n({title:"    ",description:"",className:"bg-green-50 border-green-200"}),te(!1),ke()):n({title:"     ",description:xe.message||"   ",variant:"destructive"})}catch(P){console.error("     :",P),n({title:"",description:"   ",variant:"destructive"})}},At=async P=>{var xe;l(!0),x(null);try{console.log("  ...  :",t," :",r);let Ae=[];if(t==="teacher"&&r){console.log("    :",r);try{const dt=await Os(r);if(console.log(" :",dt.map(Bt=>Bt.id)),dt.length>0){if(P){const Bt={...P,study_circle_ids:dt.map(Er=>Er.id)};Ae=await fl(Bt)}else{const Bt=dt.map(Tr=>fl({study_circle_id:Tr.id}));Ae=(await Promise.all(Bt)).flat()}console.log("      :",Ae.length)}else console.log("    "),Ae=[]}catch(dt){console.error("     :",dt),x("      ")}}else{console.log("   /");try{P?(Ae=await fl(P),console.log("      :",Ae.length)):(Ae=await hc(),console.log("       :",Ae.length)),console.log("      :",Ae.length)}catch(dt){console.error("    :",dt),x("     ")}}d(""),console.log("    :",Ae.length),Ae.length>0?console.log("  :",{id:Ae[0].id,name:Ae[0].full_name,has_guardian:!!Ae[0].guardian,has_teacher:!!((xe=Ae[0].study_circle)!=null&&xe.teacher)}):console.log("   ");const Lt=Ae.map(dt=>{var Bt;return{...dt,id:dt.id,full_name:dt.full_name||" ",guardian_id:dt.guardian_id,study_circle_id:dt.study_circle_id,guardian:dt.guardian||null,teacher:((Bt=dt.study_circle)==null?void 0:Bt.teacher)||null,memorized_parts:dt.memorized_parts||null,grade:dt.grade||dt.grade_level||"",grade_level:dt.grade_level||dt.grade||""}});console.log("     :",Lt.length),o(Lt)}catch(Ae){console.error("   :",Ae),x(Be.fetchFailed),o([])}finally{l(!1)}},Qn=async()=>{console.log("  :",{searchTerm:c?c.trim():"",studyCircleId:A||" ",selectedTeacherId:j||" ",filterGrade:w||" ",userRole:t||" ",userId:r||" "}),l(!0);try{const P={};if(c.trim()&&(P.full_name=c),w&&w!=="all"&&(P.grade=w),t==="teacher"&&r?(console.log("       "),P.teacher_id=r):A&&A!=="all"?(console.log("    :",A),P.study_circle_id=A):j&&j!=="all"&&(console.log("   :",j),P.teacher_id=j),console.log("  :",P),Object.keys(P).length===0&&t!=="teacher"){console.log("    /   "),At();return}const xe=await fl(P);o(xe),m(1),Object.keys(P).length>0&&xe.length===0&&n({title:ve.noSearchResults||"  ",description:ve.tryAnotherSearch||"   "})}catch(P){console.error("  :",P),n({title:Be.fetchFailed,description:ve.unexpectedError,variant:"destructive"})}finally{l(!1)}},Co=async()=>{g(!0);try{const P=await v_();if(P.success&&P.data){const xe=new Blob([JSON.stringify(P.data,null,2)],{type:"application/json"}),Ae=URL.createObjectURL(xe),Lt=document.createElement("a");Lt.href=Ae,Lt.download=`students_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Lt),Lt.click(),document.body.removeChild(Lt),URL.revokeObjectURL(Ae),n({title:"   ",className:"bg-green-50 border-green-200"})}else x("  : "+(P.message||"  "))}catch(P){console.error("   :",P),x("  ")}finally{g(!1)}},mr=async()=>{await ze(),await Te(),B("add"),K(ve.addStudent),xt(""),Xe(""),Xt(""),G(""),k(""),F(""),O([]),Ie(""),Oe(""),ht(""),re(""),et(""),L(""),pe(""),W(!0),setTimeout(()=>{const P=document.getElementById("full_name");P&&P.focus()},100)},Pc=async P=>{var xe;if(await ze(),await Te(),B("edit"),K(ve.editStudent),xt(P.id),Xe(P.full_name),Xt(((xe=P.guardian)==null?void 0:xe.full_name)||""),G(P.guardian_id||""),F(P.study_circle_id||""),P.study_circle_id){const Ae=J.find(Lt=>Lt.id===P.study_circle_id);Ae&&(k(Ae.teacher_id),await kt(Ae.teacher_id))}Ie(P.grade_level||""),Oe(P.gender||""),ht(P.date_of_birth||""),re(P.memorized_parts||""),et(P.phone_number||""),L(P.email||""),pe(""),W(!0)},gh=P=>{q(P),qe(!0)},Eo=async P=>{Ct(!0);try{const xe=await iM(P.id);console.log("    :",xe),xe.length>0&&console.log("    :",{study_circle_id:xe[0].study_circle_id,study_circle:xe[0].study_circle}),$t({student:P,history:xe}),Le(!0)}catch(xe){console.error("    :",xe),n({title:"    ",description:"        .",variant:"destructive"})}finally{Ct(!1)}},Oc=async()=>{if(Ot)try{const P=await UD(Ot.id);P.success?(n({title:ve.deleteSuccess,description:"",className:"bg-green-50 border-green-200"}),At()):n({title:Be.deleteFailed||"  ",description:P.message||ve.unexpectedError,variant:"destructive"})}catch(P){console.error("   :",P),n({title:Be.generalError,description:ve.unexpectedError,variant:"destructive"})}finally{qe(!1),q(null)}},Ac=async()=>{if(!_t||!Ve){n({title:ve.incompleteData,description:ve.incompleteDataMessage,variant:"destructive"});return}if(_t.includes(" ")){n({title:"   ",description:ve.fullNameError,variant:"destructive"});return}try{if(Z==="add"){const xe=await lM({full_name:_t,guardian_id:M||void 0,study_circle_id:A||void 0,grade_level:Ve,gender:be==="male"||be==="female"?be:void 0,date_of_birth:Re||void 0,memorized_parts:ft||void 0,phone_number:Ee||void 0,email:C||void 0});console.log(" Student add result:",xe),console.log("         "),xe.success?(n({title:ve.addSuccess,description:"",className:"bg-green-50 border-green-200"}),W(!1),At()):n({title:Be.saveFailed||"  ",description:xe.message||ve.unexpectedError,variant:"destructive"})}else{const xe=await cM(Qt,{id:Qt,full_name:_t,guardian_id:M||void 0,study_circle_id:A||void 0,grade_level:Ve,gender:be==="male"||be==="female"?be:void 0,date_of_birth:Re||void 0,memorized_parts:ft||void 0,phone_number:Ee||void 0,email:C||void 0});console.log(" Student update result:",xe),console.log("          "),xe.success?(n({title:ve.updateSuccess||"    ",description:"",className:"bg-green-50 border-green-200"}),W(!1),At()):n({title:Be.updateFailed||"  ",description:xe.message||ve.unexpectedError,variant:"destructive"})}}catch(P){console.error("    :",P),n({title:Be.generalError,description:ve.unexpectedError,variant:"destructive"})}},rn=h.useMemo(()=>(console.log("  :",a.length,"  :",{searchTerm:c?c.trim():"",filterGrade:w||" ",selectedTeacherId:j||" ",studyCircleId:A||" "}),a.filter(P=>{var Er,Tr,Br;const xe=!c||P.full_name.toLowerCase().includes(c.toLowerCase())||P.phone_number&&P.phone_number.includes(c)||P.email&&P.email.toLowerCase().includes(c.toLowerCase())||((Er=P.guardian)==null?void 0:Er.full_name)&&P.guardian.full_name.toLowerCase().includes(c.toLowerCase()),Ae=P.grade||P.grade_level,Lt=w==="all"||!w||Ae===w,dt=!A||A==="all"||P.study_circle_id===A;let Bt=!0;return t!=="teacher"&&j&&j!=="all"&&(Bt=((Br=(Tr=P.study_circle)==null?void 0:Tr.teacher)==null?void 0:Br.id)===j),xe&&Lt&&dt&&Bt})),[a,c,w,j,A,t]),nn=Math.max(1,Math.ceil(rn.length/$e)),gr=h.useMemo(()=>{if(!rn||rn.length===0)return console.log("No students to paginate"),[];const P=(u-1)*$e,xe=rn.slice(P,P+$e);return console.log(`Paginated students: ${xe.length} (page ${u} of ${nn})`),xe},[rn,u,$e,nn]),Dc=()=>{const P=[];P.push(s.jsx(ea,{children:s.jsx(gi,{onClick:()=>m(1),isActive:u===1,children:"1"})},"first")),u>3&&P.push(s.jsx(ea,{children:s.jsx("span",{className:"px-3",children:"..."})},"ellipsis1"));for(let xe=Math.max(2,u-1);xe<=Math.min(nn-1,u+1);xe++)xe===1||xe===nn||P.push(s.jsx(ea,{children:s.jsx(gi,{onClick:()=>m(xe),isActive:u===xe,children:xe})},xe));return u<nn-2&&P.push(s.jsx(ea,{children:s.jsx("span",{className:"px-3",children:"..."})},"ellipsis2")),nn>1&&P.push(s.jsx(ea,{children:s.jsx(gi,{onClick:()=>m(nn),isActive:u===nn,children:nn})},"last")),P};return t!=="superadmin"&&t!=="admin"&&t!=="teacher"?s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto p-8 text-center",children:[s.jsx(Sr,{className:"h-16 w-16 mx-auto text-destructive mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:ve.accessDenied}),s.jsx("p",{className:"text-muted-foreground mb-6",children:ve.accessDeniedMessage}),s.jsx(H,{onClick:()=>e("/"),variant:"outline",children:ve.returnToHome})]}):s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto py-6",dir:"rtl",children:[s.jsxs(ut,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsx(wt,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(yt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(ss,{className:"h-5 w-5 text-yellow-300"}),t==="teacher"?"  ":ve.title]}),s.jsx(Rt,{className:"text-xs md:text-sm text-green-100 mt-1",children:t==="teacher"?"     ":ve.description})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:mr,children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{children:ve.addStudent})]}),s.jsxs(H,{className:"flex items-center gap-2 rounded-3xl bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:mt,children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{children:"   "})]})]})]})}),s.jsxs(ot,{children:[f&&s.jsxs(Qi,{variant:"destructive",className:"mb-4",children:[s.jsx(Sr,{className:"h-4 w-4 ml-2"}),s.jsx(Ji,{children:f})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Nr,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(fe,{placeholder:ve.searchPlaceholder,value:c,onChange:P=>d(P.target.value),className:"pl-3 pr-10 w-full",onKeyDown:P=>P.key==="Enter"&&Qn()})]}),s.jsxs("div",{className:"flex gap-2",children:[t==="teacher"?s.jsxs(st,{value:A||"all",onValueChange:P=>{F(P==="all"?"":P),setTimeout(()=>Qn(),100)},children:[s.jsx(rt,{className:"w-[200px]",children:s.jsx(at,{placeholder:" "})}),s.jsxs(nt,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:[s.jsx(Ne,{value:"all",children:" "}),_.length>0?_.map(P=>s.jsx(Ne,{value:P.id,children:P.name},P.id)):s.jsx(Ne,{value:"none",disabled:!0,children:"   "})]})]}):s.jsxs("div",{className:"flex gap-2",children:[!kv(t)&&s.jsxs(st,{value:j||"all",onValueChange:P=>{$(P==="all"?"":P)},children:[s.jsx(rt,{className:"w-[180px]",children:s.jsx(at,{placeholder:" "})}),s.jsxs(nt,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:[s.jsx(Ne,{value:"all",children:" "}),E.map(P=>s.jsx(Ne,{value:P.id,children:P.full_name},P.id))]})]}),kv(t)&&s.jsxs("div",{className:"bg-gray-100 rounded-md px-3 py-2 flex items-center w-[180px]",children:[s.jsx(ri,{className:"h-4 w-4 text-islamic-green/60 mr-2"}),s.jsx("span",{className:"text-sm",children:" "})]}),s.jsxs(st,{value:A||"all",onValueChange:P=>{F(P==="all"?"":P),setTimeout(()=>Qn(),100)},disabled:R,children:[s.jsx(rt,{className:"w-[180px]",children:s.jsx(at,{placeholder:" "})}),s.jsxs(nt,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:[s.jsx(Ne,{value:"all",children:" "}),_.length>0?_.map(P=>s.jsx(Ne,{value:P.id,children:P.name},P.id)):s.jsx(Ne,{value:"none",disabled:!0,children:j?"    ":"  "})]})]})]}),s.jsx(H,{variant:"outline",size:"icon",onClick:Qn,title:ve.search,className:"shrink-0",children:s.jsx(Nr,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"icon",onClick:()=>At(),title:ve.refresh,className:"shrink-0",children:s.jsx(Vn,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"icon",onClick:Co,title:ve.export,className:"shrink-0",disabled:y||a.length===0,children:s.jsx(Uw,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-green-200 dark:border-green-700 p-2",children:s.jsxs(Oa,{className:"min-w-full border border-green-300 rounded-2xl overflow-hidden shadow-lg",children:[s.jsx(Aa,{className:"bg-islamic-green",children:s.jsx(Ir,{children:[{label:"#",key:"index"},{label:"",key:"full_name",icon:""},{label:" ",key:"guardian",icon:""},...t!=="teacher"?[{label:"",key:"teacher",icon:""}]:[],{label:"",key:"circle",icon:""},{label:" ",key:"memorized_parts",icon:""},{label:"",key:"grade",icon:""},{label:"",key:"gender",icon:""},{label:" ",key:"actions",icon:null}].map(P=>s.jsx(vt,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsxs("div",{className:`flex items-center justify-center ${P.icon?"flex-row-reverse gap-1":""}`,children:[s.jsx("span",{children:P.label}),P.icon&&s.jsx("span",{children:P.icon})]})},P.key))})}),s.jsx(Da,{children:gr.map((P,xe)=>{var Ae,Lt,dt,Bt,Er,Tr;return s.jsxs(Ir,{className:`border-b border-green-200 transition-colors duration-200
                      ${xe%2===0?"bg-green-50 dark:bg-green-900":"bg-white dark:bg-gray-800"}
                      hover:bg-green-100 dark:hover:bg-green-700`,children:[s.jsx(tt,{className:"text-center border-r border-green-200 font-medium text-islamic-green/80 py-2 px-3",children:(u-1)*$e+xe+1}),s.jsx(tt,{className:"border-r border-green-200 font-medium py-2 px-3",children:P.full_name}),s.jsx(tt,{className:"border-r border-green-200 py-2 px-3",children:(Ae=P.guardian)!=null&&Ae.full_name?s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(ss,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{className:"text-islamic-green/80",children:P.guardian.full_name})]}):s.jsx("span",{className:"text-muted-foreground",children:""})}),t!=="teacher"&&s.jsx(tt,{className:"border-r border-green-200 py-2 px-3",children:(dt=(Lt=P.study_circle)==null?void 0:Lt.teacher)!=null&&dt.full_name?s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(ri,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{className:"text-islamic-green/80",children:P.study_circle.teacher.full_name})]}):s.jsx("span",{className:"text-muted-foreground",children:""})}),s.jsx(tt,{className:"border-r border-green-200 py-2 px-3",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(Pt,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{className:"text-islamic-green/80",children:((Bt=P.study_circle)==null?void 0:Bt.name)||"-"})]})}),s.jsx(tt,{className:"border-r border-green-200 py-2 px-3",children:s.jsx("span",{className:"text-islamic-green/80",children:((Er=ve.quranPartsOptions.find(Br=>Br.value===P.memorized_parts))==null?void 0:Er.label)||P.memorized_parts})}),s.jsx(tt,{className:"border-r border-green-200 py-2 px-3",children:s.jsx("span",{className:"text-islamic-green/80",children:((Tr=ve.gradeOptions.find(Br=>Br.value===(P.grade_level||P.grade)))==null?void 0:Tr.label)||P.grade_level||P.grade||"-"})}),s.jsx(tt,{className:"border-r border-green-200 py-2 px-3 text-center",children:s.jsx("span",{className:"text-islamic-green/80",children:P.gender==="male"?"":P.gender==="female"?"":"-"})}),s.jsx(tt,{className:"border-r border-green-200 py-2 px-3",children:s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>Pc(P),className:"h-8 w-8 text-islamic-green hover:bg-green-100 rounded-full",children:s.jsx(Rr,{size:16})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>gh(P),className:"h-8 w-8 text-red-500 hover:bg-red-100 rounded-full",children:s.jsx(Lr,{size:16})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>Eo(P),className:"h-8 w-8 text-blue-500 hover:bg-blue-100 rounded-full",children:s.jsx(gx,{size:16})})]})})]},P.id)})})]})}),rn.length>$e&&s.jsx("div",{className:"mt-4",children:s.jsx(Z2,{children:s.jsxs(eN,{children:[s.jsx(ea,{children:s.jsx(tN,{onClick:()=>m(P=>Math.max(1,P-1))})}),Dc(),s.jsx(ea,{children:s.jsx(rN,{onClick:()=>m(P=>Math.min(nn,P+1))})})]})})})]}),s.jsxs(Yi,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[ve.totalStudents,": ",s.jsx("span",{className:"font-medium",children:a.length})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[ve.showing," ",s.jsxs("span",{className:"font-medium",children:[Math.min((u-1)*$e+1,rn.length)," - ",Math.min(u*$e,rn.length)]})," ",ve.from," ",s.jsx("span",{className:"font-medium",children:rn.length})," ",ve.student]})]})]}),s.jsx(ir,{open:Y,onOpenChange:W,children:s.jsxs(lr,{dir:"rtl",className:"sm:max-w-[650px]",children:[s.jsx(jr,{className:"flex justify-center items-center",children:s.jsxs(dr,{className:"flex items-center gap-2 text-islamic-green text-xl",children:[X,s.jsx(Ns,{className:"h-5 w-5"})]})}),s.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[(t==="admin"||t==="superadmin"||t==="teacher")&&s.jsxs("div",{className:"flex-1",children:[s.jsxs(ye,{htmlFor:"teacher_id",className:"mb-2 block",children:[ve.teacherName," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:ve.optionalField})]}),t==="teacher"?s.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-muted",children:[s.jsx(ss,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{children:(()=>{const P=r?E.find(xe=>xe.id===r):null;return P?P.full_name:""})()})]}):s.jsx("div",{children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[s.jsxs("div",{className:"relative md:w-1/2",children:[s.jsx(Nr,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(fe,{placeholder:"  ",value:I,onChange:P=>ee(P.target.value),className:"pl-3 pr-10 mb-2 md:mb-0"})]}),s.jsx("div",{className:"md:w-1/2",children:s.jsxs(st,{value:j,onValueChange:P=>$(P),disabled:t==="teacher",children:[s.jsx(rt,{className:"focus:border-islamic-green",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{children:E.filter(P=>!I||P.full_name.toLowerCase().includes(I.toLowerCase())).map(P=>s.jsx(Ne,{value:P.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:P.full_name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:P.role==="admin"?"":""})]})},P.id))})]})})]})})]}),(t==="admin"||t==="superadmin"||t==="teacher")&&s.jsxs("div",{className:"flex-1",children:[s.jsxs(ye,{htmlFor:"study_circle_id",className:"mb-2 block",children:[ve.studyCircleName," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:ve.requiredField})]}),s.jsxs(st,{value:A,onValueChange:P=>{F(P)},disabled:!j||R,children:[s.jsx(rt,{className:"focus:border-islamic-green",children:s.jsx(at,{placeholder:R?"  ...":ve.studyCirclePlaceholder})}),s.jsx(nt,{position:"item-aligned",align:"start",side:"bottom",children:_.length>0?_.map(P=>s.jsx(Ne,{value:P.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:P.name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:P.name||" "})]})},P.id)):s.jsx("div",{className:"p-2 text-center text-muted-foreground",children:j?"    ":"  "})})]})]})]}),s.jsx("div",{className:"flex flex-col md:flex-row gap-6",children:s.jsxs("div",{className:"flex-1 ltr",children:[s.jsxs(ye,{htmlFor:"guardian_id",className:"mb-2 block",children:[ve.guardianName," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:ve.optionalField})]}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-[50%]",children:s.jsxs("div",{className:"relative",children:[s.jsx(Nr,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(fe,{placeholder:"   ...",className:"pl-8 text-sm focus:border-islamic-green",value:N,onChange:P=>S(P.target.value)})]})}),s.jsx("div",{className:"w-[50%]",children:s.jsxs(st,{value:M,onValueChange:G,children:[s.jsx(rt,{className:"focus:border-islamic-green",children:s.jsx(at,{placeholder:"  "})}),s.jsx(nt,{position:"item-aligned",align:"start",side:"bottom",children:p.filter(P=>!N||P.full_name.includes(N)||P.phone_number&&P.phone_number.includes(N)).map(P=>s.jsx(Ne,{value:P.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:P.full_name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:P.phone_number||"   "})]})},P.id))})]})})]})}),s.jsx(fe,{id:"guardian_name",value:zt,onChange:P=>Xt(P.target.value),placeholder:ve.guardianName,className:"focus:border-islamic-green hidden"})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(ye,{htmlFor:"grade_level",className:"mb-2 block",children:[ve.grade," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(st,{value:Ve,onValueChange:Ie,children:[s.jsx(rt,{className:"focus:border-islamic-green",children:s.jsx(at,{placeholder:" "})}),s.jsxs(nt,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:[s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:"  "}),ve.gradeOptions.slice(0,2).map(P=>s.jsx(Ne,{value:P.value,children:P.label},P.value))]}),s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:" "}),ve.gradeOptions.slice(2,8).map(P=>s.jsx(Ne,{value:P.value,children:P.label},P.value))]}),s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:" "}),ve.gradeOptions.slice(8,11).map(P=>s.jsx(Ne,{value:P.value,children:P.label},P.value))]}),s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:" "}),ve.gradeOptions.slice(11,14).map(P=>s.jsx(Ne,{value:P.value,children:P.label},P.value))]}),s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:" "}),ve.gradeOptions.slice(14,20).map(P=>s.jsx(Ne,{value:P.value,children:P.label},P.value))]}),s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:" "}),ve.gradeOptions.slice(20).map(P=>s.jsx(Ne,{value:P.value,children:P.label},P.value))]})]})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ye,{htmlFor:"last_quran_progress",className:"mb-2 block",children:[ve.lastQuranProgress," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:ve.optionalField})]}),s.jsxs(st,{value:ft,onValueChange:re,children:[s.jsx(rt,{className:"focus:border-islamic-green",children:s.jsx(at,{placeholder:ve.quranProgressPlaceholder})}),s.jsx(nt,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:s.jsxs(Fn,{children:[s.jsx(yn,{className:"font-bold text-islamic-green",children:""}),ve.quranPartsOptions.map(P=>s.jsx(Ne,{value:P.value,children:P.label},P.value))]})})]})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(ye,{htmlFor:"phone_number",className:"mb-2 block",children:[ve.phoneNumber," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:ve.optionalField})]}),s.jsx(fe,{id:"phone_number",value:Ee,onChange:P=>et(P.target.value),placeholder:ve.phoneNumber,dir:"ltr",className:"text-left focus:border-islamic-green"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ye,{htmlFor:"email",className:"mb-2 block",children:[ve.email," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"()"})]}),s.jsx(fe,{id:"email",type:"email",value:C,onChange:P=>L(P.target.value),placeholder:ve.email,dir:"ltr",className:"text-left focus:border-islamic-green"})]})]}),s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"address",className:"mb-2 block",children:[ve.notes," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"()"})]}),s.jsx(fs,{id:"address",value:se,onChange:P=>pe(P.target.value),placeholder:ve.notes,rows:3,className:"focus:border-islamic-green"})]})]}),s.jsxs(cr,{dir:"rtl",className:"flex justify-start gap-2",children:[s.jsx(H,{onClick:Ac,className:"bg-islamic-green hover:bg-islamic-green/90",children:ve.save}),s.jsx(H,{variant:"outline",onClick:()=>W(!1),children:ve.cancel})]})]})}),s.jsx(Sn,{isOpen:He,onOpenChange:qe,onConfirm:Oc,title:ve.deleteStudent,description:s.jsxs(s.Fragment,{children:[ve.deleteConfirmation,s.jsx("br",{}),ve.deleteDescription]}),deleteButtonText:ve.confirm,cancelButtonText:ve.cancel}),s.jsx(ir,{open:ae,onOpenChange:te,children:s.jsxs(lr,{dir:"rtl",className:"sm:max-w-[500px]",children:[s.jsx(jr,{className:"flex justify-center items-center",children:s.jsxs(dr,{className:"flex items-center gap-2 text-islamic-green text-xl",children:["   ",s.jsx(Ns,{className:"h-5 w-5"})]})}),s.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"guardian_full_name",className:"mb-2 block",children:["  ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(fe,{id:"guardian_full_name",value:me,onChange:P=>je(P.target.value),placeholder:"   ",className:"focus:border-islamic-green",required:!0})]}),s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"guardian_phone_number",className:"mb-2 block",children:["  ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(fe,{id:"guardian_phone_number",value:V,onChange:P=>Q(P.target.value),placeholder:" ",dir:"ltr",className:"text-left focus:border-islamic-green",required:!0})]}),s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"guardian_email",className:"mb-2 block",children:["  ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"()"})]}),s.jsx(fe,{id:"guardian_email",type:"email",value:ie,onChange:P=>ne(P.target.value),placeholder:" ",dir:"ltr",className:"text-left focus:border-islamic-green"})]}),s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"guardian_address",className:"mb-2 block",children:[" /  ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"()"})]}),s.jsx(fs,{id:"guardian_address",value:le,onChange:P=>Pe(P.target.value),placeholder:"    ",rows:3,className:"focus:border-islamic-green"})]})]}),s.jsxs(cr,{dir:"rtl",className:"flex justify-start gap-2",children:[s.jsx(H,{onClick:rr,className:"bg-islamic-green hover:bg-islamic-green/90",children:""}),s.jsx(H,{variant:"outline",onClick:()=>te(!1),children:""})]})]})}),s.jsx(ir,{open:_e,onOpenChange:Le,children:s.jsxs(lr,{dir:"rtl",className:"sm:max-w-[700px]",children:[s.jsx(jr,{className:"flex justify-center items-center",children:s.jsxs(dr,{className:"flex items-center gap-2 text-islamic-green text-xl",children:["   ",s.jsx(gx,{className:"h-5 w-5"})]})}),s.jsxs("div",{className:"py-4",children:[s.jsxs("div",{className:"mb-4 bg-gray-50 p-3 rounded-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ss,{className:"h-5 w-5 text-islamic-green"}),s.jsx("span",{className:"font-semibold",children:Ge.student.full_name})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rc,{className:"h-4 w-4 text-islamic-green/60"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[": ",((Zi=(Wa=ve.gradeOptions)==null?void 0:Wa.find(P=>P.value===Ge.student.grade_level))==null?void 0:Zi.label)||Ge.student.grade_level||"-"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ri,{className:"h-4 w-4 text-islamic-green/60"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[" : ",((Us=(We=Ge.student.study_circle)==null?void 0:We.teacher)==null?void 0:Us.full_name)||" "]})]})]})]}),Kt?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Vn,{className:"h-8 w-8 animate-spin text-islamic-green"})}):Ge.history.length>0?s.jsx("div",{className:"border border-islamic-green/20 rounded-md overflow-hidden",children:s.jsxs(Oa,{children:[s.jsx(Aa,{className:"bg-islamic-green/25",children:s.jsxs(Ir,{className:"hover:bg-transparent",children:[s.jsx(vt,{className:"text-right font-bold text-islamic-green",children:""}),s.jsx(vt,{className:"text-right font-bold text-islamic-green",children:""}),s.jsx(vt,{className:"text-right font-bold text-islamic-green",children:" "}),s.jsx(vt,{className:"text-right font-bold text-islamic-green",children:" "}),s.jsx(vt,{className:"text-right font-bold text-islamic-green",children:""})]})}),s.jsx(Da,{children:Ge.history.map((P,xe)=>{var Tr;const Ae=E.find(Br=>Br.id===P.teacher_id),Lt=new Date(P.start_date),dt=P.end_date?new Date(P.end_date):new Date,Bt=Math.floor((dt.getTime()-Lt.getTime())/(1e3*60*60*24));let Er="";if(Bt<30)Er=`${Bt} `;else if(Bt<365)Er=`${Math.floor(Bt/30)} `;else{const Br=Math.floor(Bt/365),To=Math.floor(Bt%365/30);Er=`${Br} ${To>0?`  ${To} `:""}`}return s.jsxs(Ir,{className:`border-b border-islamic-green/10 ${P.end_date?"":"bg-islamic-green/5"}`,children:[s.jsx(tt,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ri,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{children:(Ae==null?void 0:Ae.full_name)||" "}),!P.end_date&&s.jsx("span",{className:"inline-flex px-2 py-0.5 mr-2 text-xs bg-islamic-green/20 text-islamic-green/80 rounded-full",children:""})]})}),s.jsx(tt,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pt,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{children:((Tr=P.study_circle)==null?void 0:Tr.name)||" "})]})}),s.jsx(tt,{children:new Date(P.start_date).toLocaleDateString("ar-EG")}),s.jsx(tt,{children:P.end_date?new Date(P.end_date).toLocaleDateString("ar-EG"):s.jsx("span",{className:"text-gray-500",children:"-"})}),s.jsx(tt,{children:Er})]},P.id)})})]})}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(X0,{className:"h-12 w-12 text-gray-300 mb-3"}),s.jsx("p",{className:"text-muted-foreground mb-2",children:"    "}),s.jsx("p",{className:"text-sm text-gray-500",children:"        "})]})]}),s.jsx(cr,{children:s.jsx(H,{variant:"outline",onClick:()=>Le(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:""})})]})})]})}function dM({onNavigate:e,userRole:t,userId:r}){return s.jsx(iN,{onNavigate:e,userRole:t,userId:r})}function uM({onNavigate:e,userRole:t,userId:r}){return console.log("Rendering StudentsList page with role:",t),s.jsx("div",{dir:"rtl",children:s.jsx(iN,{onNavigate:e,userRole:t,userId:r})})}function hM({onNavigate:e,userRole:t,userId:r}){var ft;const{toast:n}=Tn(),[a,o]=h.useState([]),[i,l]=h.useState([]),[c,d]=h.useState(!0),[u,m]=h.useState(""),[f,x]=h.useState(null),[y,g]=h.useState(!1),[w,v]=h.useState("add"),[p,b]=h.useState(gt.addForm.title),[N,S]=h.useState(!1),[E,D]=h.useState(null),[I,ee]=h.useState(!1),[J,T]=h.useState(null),[_,O]=h.useState([]),[j,k]=h.useState(!1),[A,F]=h.useState(!1),[R,z]=h.useState(!1),[Y,W]=h.useState(null),[Z,B]=h.useState({weekday:"0",start_time:"",end_time:"",location:""}),[X,K]=h.useState(!1),[ae,te]=h.useState(null),[me,je]=h.useState({weekday:"0",start_time:"",end_time:"",location:""}),[V,Q]=h.useState(!1),[ie,ne]=h.useState(!1),[le,Pe]=h.useState(""),[He,qe]=h.useState(""),[Ot,q]=h.useState(""),[_e,Le]=h.useState("");h.useEffect(()=>{Ge(),$t()},[t,r]);const Ge=async()=>{d(!0),x(null);try{let re=[];t==="teacher"&&r?re=await Os(r):re=await Ma(),o(re)}catch(re){console.error("   :",re),x("    ")}finally{d(!1)}},$t=async()=>{try{const re=await ih();l(re)}catch(re){console.error("   :",re)}},Kt=a.filter(re=>{var Ee;return re.name.includes(u)||((Ee=re.teacher)==null?void 0:Ee.full_name)&&re.teacher.full_name.includes(u)}),Ct=()=>{v("add"),b(gt.addForm.title),Pe(""),qe(""),q(""),Le(""),g(!0)},Qt=re=>{var Ee;v("edit"),b(gt.editForm.title),Pe(re.id),qe(re.name),q(re.teacher_id),Le(((Ee=re.max_students)==null?void 0:Ee.toString())||""),g(!0)},xt=re=>{D(re),S(!0)},_t=async()=>{if(E)try{const re=await X2(E.id);re.success?(n({title:gt.deleteSuccess,className:"bg-green-50 border-green-200"}),Ge()):n({title:Be.generalError,description:re.message,variant:"destructive"})}catch(re){console.error("   :",re),n({title:Be.generalError,description:"   ",variant:"destructive"})}finally{S(!1),D(null)}},Xe=re=>{T(re),ee(!0),zt(re.id)},zt=async re=>{k(!0);try{const Ee=await mh(re);O(Ee)}catch(Ee){console.error("    :",Ee),n({title:"   ",description:"     ",variant:"destructive"})}finally{k(!1)}},Xt=()=>{B({weekday:"0",start_time:"",end_time:"",location:""}),F(!0)},M=async()=>{if(!Z.start_time||!Z.end_time){n({title:"  ",description:"    ",variant:"destructive"});return}Q(!0);try{const re={study_circle_id:J.id,weekday:parseInt(Z.weekday),start_time:Z.start_time+":00",end_time:Z.end_time+":00",location:Z.location||void 0},Ee=await Ug(re);Ee.success?(n({title:"  ",description:"    ",className:"bg-green-50 border-green-200"}),F(!1),await zt(J.id)):n({title:"   ",description:Ee.message||"     ",variant:"destructive"})}catch(re){console.error("    :",re),n({title:"",description:"      ",variant:"destructive"})}finally{Q(!1)}},G=re=>{W(re),je({weekday:re.weekday.toString(),start_time:re.start_time.substring(0,5),end_time:re.end_time.substring(0,5),location:re.location||""}),z(!0)},ge=async()=>{if(!me.start_time||!me.end_time){n({title:"  ",description:"    ",variant:"destructive"});return}ne(!0);try{const re={id:Y.id,weekday:parseInt(me.weekday),start_time:me.start_time+":00",end_time:me.end_time+":00",location:me.location||void 0},Ee=await Wg(re);Ee.success?(n({title:"  ",description:"   ",className:"bg-green-50 border-green-200"}),z(!1),await zt(J.id)):n({title:"   ",description:Ee.message||"    ",variant:"destructive"})}catch(re){console.error("   :",re),n({title:"",description:"      ",variant:"destructive"})}finally{ne(!1)}},Me=async re=>{te(re),K(!0)},Ve=async()=>{if(ae)try{const re=await Vg(ae.id);re.success?(n({title:"  ",description:"   ",className:"bg-green-50 border-green-200"}),await zt(J.id)):n({title:"   ",description:re.message||"    ",variant:"destructive"})}catch(re){console.error("   :",re),n({title:"",description:"      ",variant:"destructive"})}},Ie=(re,Ee)=>{B(et=>({...et,[re]:Ee}))},be=(re,Ee)=>{je(et=>({...et,[re]:Ee}))},Oe=re=>{const Ee={0:"",1:"",2:"",3:"",4:"",5:"",6:""},et=String(re);return Ee[et]||`  (${et})`},Re=async()=>{if(!He||!Ot){n({title:gt.incompleteData,description:gt.incompleteDataMessage,variant:"destructive"});return}const re=_e?parseInt(_e):void 0;try{if(w==="add"){const et=await Y2({name:He,teacher_id:Ot,max_students:re});et.success?(n({title:gt.addSuccess,className:"bg-green-50 border-green-200"}),g(!1),Ge()):n({title:Be.generalError,description:et.message,variant:"destructive"})}else{const et=await J2({id:le,name:He,teacher_id:Ot,max_students:re});et.success?(n({title:gt.updateSuccess,className:"bg-green-50 border-green-200"}),g(!1),Ge()):n({title:Be.generalError,description:et.message,variant:"destructive"})}}catch(Ee){console.error("   :",Ee),n({title:Be.generalError,description:"   ",variant:"destructive"})}};if(t!=="superadmin"&&t!=="admin"&&t!=="teacher")return s.jsx("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 max-w-md mx-auto text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"bg-red-500/10 p-4 rounded-full",children:s.jsx(Sr,{className:"h-16 w-16 text-red-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Be.accessDenied}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"       "}),s.jsx(H,{onClick:()=>e("/"),variant:"outline",className:"border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:wD.back})]})});const ht=[{key:"weekday",header:"",render:re=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ur,{className:"h-4 w-4 text-green-700 dark:text-green-300"}),s.jsx("span",{children:Oe(re.weekday)})]})},{key:"time",header:"",render:re=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yr,{className:"h-4 w-4 text-blue-700 dark:text-blue-300"}),s.jsxs("span",{dir:"ltr",children:[jn(re.start_time)," - ",jn(re.end_time)]})]})},{key:"location",header:"",render:re=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tc,{className:"h-4 w-4 text-orange-700 dark:text-orange-300"}),s.jsx("span",{children:re.location||" "})]})},...t==="superadmin"||t==="admin"?[{key:"actions",header:"",align:"center",render:re=>s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>G(re),className:"h-7 w-7 text-blue-600 hover:bg-blue-50 hover:text-blue-700 rounded-full",children:s.jsx(Rr,{size:14})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>Me(re),className:"h-7 w-7 text-red-500 hover:bg-red-50 hover:text-red-600 rounded-full",children:s.jsx(Lr,{size:14})})]})}]:[]];return s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-0 sm:px-0 py-1 sm:py-2",children:[s.jsxs(ut,{children:[s.jsx(wt,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 duration-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(yt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(Pt,{className:"h-5 w-5 text-yellow-300"}),gt.title]}),s.jsx(Rt,{className:"text-xs md:text-sm text-green-100 mt-1",children:gt.description})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-3 items-center",children:[(t==="superadmin"||t==="admin")&&s.jsxs(H,{variant:"outline",className:`flex items-center gap-2 rounded-3xl border-2 border-green-600 text-green-900 \r
                    hover:bg-green-100 hover:text-green-800 hover:scale-105 \r
                    dark:border-green-500 dark:text-green-300 dark:hover:bg-green-800 dark:hover:text-green-200 \r
                    shadow-lg transition-all duration-200 px-3 md:px-4 py-1.5 font-semibold`,onClick:()=>e("/study-circle-schedules"),title:"    ",children:[s.jsx(ur,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden md:inline text-sm",children:" "})]}),(t==="superadmin"||t==="admin")&&s.jsxs(H,{onClick:Ct,className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-3 md:px-4 py-1.5 font-semibold",title:"  ",children:[s.jsx(Qr,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden md:inline text-sm",children:gt.addCircle})]})]})]})}),s.jsxs(ot,{children:[f&&s.jsxs(Qi,{variant:"destructive",className:"mb-4 rounded-lg shadow-sm",children:[s.jsx(Sr,{className:"h-4 w-4 ml-2"}),s.jsx(Ji,{children:f})]}),s.jsx("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Nr,{className:"absolute right-3 top-3 h-4 w-4 text-green-400 dark:text-green-300"}),s.jsx(fe,{placeholder:"   ...",value:u,onChange:re=>m(re.target.value),className:"pl-3 pr-10 w-full rounded-xl border border-green-300 dark:border-green-600 focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 transition-all"})]})}),(()=>{const re=[{key:"name",header:` ${gt.name}`,important:!0,render:Ee=>s.jsx("span",{className:"font-medium",children:Ee.name})},{key:"teacher",header:` ${gt.teacher}`,render:Ee=>{var et;return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cu,{className:"h-4 w-4 text-green-700 dark:text-green-300"}),s.jsx("span",{children:((et=Ee.teacher)==null?void 0:et.full_name)||" "})]})}},{key:"max_students",header:` ${gt.maxStudents}`,align:"center",render:Ee=>Ee.max_students?s.jsxs("div",{className:"flex gap-1",children:[s.jsx(Is,{className:"h-4 w-4 text-green-700 dark:text-green-300"}),s.jsx("span",{children:Ee.max_students})]}):s.jsx("span",{className:"text-green-500/60",children:"-"})},...t==="superadmin"||t==="admin"?[{key:"actions",header:" ",align:"center",render:Ee=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>Xe(Ee),className:"h-8 w-8 text-green-600 dark:text-green-300 hover:bg-green-100 dark:hover:bg-green-700 hover:text-green-700 dark:hover:text-green-200 rounded-full",title:" ",children:s.jsx(ur,{size:16})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>Qt(Ee),className:"h-8 w-8 text-green-700 dark:text-green-300 hover:bg-green-100 dark:hover:bg-green-700 hover:text-green-800 dark:hover:text-green-200 rounded-full",title:gt.editTooltip,children:s.jsx(Rr,{size:16})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>xt(Ee),className:"h-8 w-8 text-red-400 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-800 hover:text-red-500 dark:hover:text-red-400 rounded-full",title:gt.deleteTooltip,children:s.jsx(Lr,{size:16})})]})}]:[]];return s.jsx(ds,{data:Kt,columns:re,title:"",emptyMessage:u?"    ":gt.noCircles,onAddNew:t==="superadmin"||t==="admin"?Ct:void 0,onRefresh:Ge,cardMaxFieldsCollapsed:4,cardPrimaryActions:Ee=>t==="superadmin"||t==="admin"?s.jsxs(s.Fragment,{children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>Qt(Ee),className:"border-green-600 text-green-700 hover:bg-green-50 dark:border-green-500 dark:text-green-300 dark:hover:bg-green-700",children:[s.jsx(Rr,{className:"h-3 w-3 ml-1"}),s.jsx("span",{className:"hidden sm:inline",children:""})]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>xt(Ee),className:"border-red-500 text-red-600 hover:bg-red-50 dark:border-red-600 dark:text-red-400 dark:hover:bg-red-900/30",children:[s.jsx(Lr,{className:"h-3 w-3 ml-1"}),s.jsx("span",{className:"hidden sm:inline",children:""})]})]}):null,cardActions:Ee=>s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>Xe(Ee),className:"border-green-600 text-green-700 hover:bg-green-50 dark:border-green-500 dark:text-green-300 dark:hover:bg-green-700",children:[s.jsx(ur,{className:"h-3 w-3 ml-1"}),s.jsx("span",{className:"hidden sm:inline",children:""})]})})})()]})]}),s.jsx(us,{title:p,open:y,onOpenChange:g,onSave:Re,saveButtonText:w==="add"?gt.addForm.submit:gt.editForm.submit,cancelButtonText:gt.cancel,mode:w,children:s.jsxs("div",{className:"grid gap-4 py-2",children:[s.jsx(Ye,{label:`${gt.name} *`,children:s.jsx(fe,{id:"name",value:He,onChange:re=>qe(re.target.value),placeholder:"  ",className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2 text-right"})}),s.jsx(Ye,{label:`${gt.teacher} *`,children:s.jsxs(st,{value:Ot,onValueChange:q,children:[s.jsx(rt,{className:"bg-green-50 border-green-200 text-green-900 rounded-md text-sm py-1 px-2 text-right",children:s.jsx(at,{placeholder:gt.selectTeacher})}),s.jsx(nt,{children:i.length>0?i.map(re=>s.jsx(Ne,{value:re.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cu,{className:"h-4 w-4"}),s.jsx("span",{children:re.full_name})]})},re.id)):s.jsx(Ne,{value:"",disabled:!0,children:gt.noTeachers})})]})}),s.jsx(Ye,{label:gt.maxStudents,children:s.jsx(fe,{id:"max_students",type:"number",value:_e,onChange:re=>Le(re.target.value),placeholder:gt.enterNumber,min:"1",className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2 text-right"})})]})}),s.jsx(Sn,{isOpen:N,onOpenChange:S,onConfirm:_t,isLoading:!1,title:gt.deleteCircle,description:gt.confirmDelete,itemDetails:E?{[gt.name]:E.name,[gt.teacher]:((ft=E.teacher)==null?void 0:ft.full_name)||"-"}:null,deleteButtonText:gt.deleteCircle,cancelButtonText:gt.cancel}),s.jsx(ir,{open:I,onOpenChange:ee,children:s.jsxs(lr,{dir:"rtl",className:`sm:max-w-[900px] w-full max-h-[85vh] h-auto flex flex-col bg-gradient-to-r from-blue-50 to-green-50 rounded-xl\r
           shadow-lg\r
           border border-gray-100 p-0 overflow-hidden`,children:[s.jsxs(dr,{className:"relative flex items-center justify-center bg-gradient-to-r from-green-600 via-emerald-500 to-green-400 text-white px-3 sm:px-4 py-2 sm:py-3 rounded-t-xl shadow-md",children:[s.jsxs("h2",{className:"text-sm sm:text-lg font-extrabold tracking-wide drop-shadow-md text-center flex-1",children:["  ",(J==null?void 0:J.name)||""]}),s.jsx("div",{className:"absolute left-3 sm:left-4 flex gap-2",children:(t==="superadmin"||t==="admin")&&s.jsxs(H,{title:"   ",onClick:Xt,className:"flex items-center gap-1 sm:gap-2 bg-emerald-600 hover:bg-emerald-500 text-white text-[10px] sm:text-sm px-2 sm:px-3 py-0.5 sm:py-1.5 rounded-lg shadow-md border border-white/30 transition-all duration-200 h-6 sm:h-8",children:[s.jsx(Qr,{className:"h-2.5 w-2.5 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline ml-1",children:" "})]})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto -mx-0.5 px-3 sm:px-4 py-0 sm:py-1",dir:"rtl",children:j?s.jsx("div",{className:"text-center p-6 sm:p-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-islamic-green mb-2 sm:mb-4"}),s.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:"   ..."})]})}):_.length===0?s.jsxs("div",{className:"text-center p-4 sm:p-8 bg-white/30 rounded-lg shadow-sm",children:[s.jsx(ur,{className:"h-10 w-10 sm:h-12 sm:w-12 mx-auto text-muted-foreground mb-2 sm:mb-4"}),s.jsx("h3",{className:"font-medium text-sm sm:text-lg mb-1 sm:mb-2",children:"   "}),s.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm mb-2 sm:mb-4",children:"       "}),(t==="superadmin"||t==="admin")&&s.jsxs(H,{onClick:Xt,className:"bg-islamic-green hover:bg-islamic-green/90 text-white text-xs sm:text-sm px-2 py-1 sm:px-3 sm:py-2",children:[s.jsx(Qr,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-1"}),"  "]}),t==="teacher"&&s.jsx("p",{className:"text-muted-foreground text-[9px] sm:text-sm mt-2",children:"    .    ."})]}):s.jsx(ds,{data:_,columns:ht,className:"overflow-hidden rounded-lg text-xs sm:text-sm border border-green-300 dark:border-green-700 shadow-sm w-full",defaultView:"table"})})]})}),s.jsx(us,{title:"  ",description:"       ",open:A,onOpenChange:F,onSave:M,isLoading:V,saveButtonText:V?" ...":" ",mode:"add",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ye,{label:" *",children:s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Ps.map(re=>s.jsx("button",{type:"button",onClick:()=>Ie("weekday",re.value.toString()),className:`
                    text-sm px-4 py-2 rounded-full border transition-all duration-200
                    flex-1 text-center
                    ${Z.weekday===re.value.toString()?"bg-gradient-to-r from-green-400 to-blue-400 text-white shadow-md transform scale-105":"bg-gray-50 text-gray-800 border-gray-300 hover:bg-gray-100 hover:shadow-sm"}
                  `,children:re.label},re.value))})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Ye,{label:"  *",children:s.jsx(fe,{id:"add-schedule-start-time",type:"time",value:Z.start_time,onChange:re=>Ie("start_time",re.target.value),required:!0,className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2"})}),s.jsx(Ye,{label:"  *",children:s.jsx(fe,{id:"add-schedule-end-time",type:"time",value:Z.end_time,onChange:re=>Ie("end_time",re.target.value),required:!0,className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2"})})]}),s.jsxs(Ye,{label:" ()",children:[s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[s.jsx(Ai,{className:"h-3 w-3 ml-1"}),"     "]}),s.jsx(fe,{id:"add-schedule-location",value:Z.location,onChange:re=>Ie("location",re.target.value),placeholder:"   ()",className:"bg-gray-50 border-gray-300 rounded-md text-sm py-1 px-2"})]})]})}),s.jsx(us,{title:" ",description:"   ",open:R,onOpenChange:z,onSave:ge,isLoading:ie,saveButtonText:ie?" ...":" ",mode:"edit",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ye,{label:" *",children:s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Ps.map(re=>s.jsx("button",{type:"button",onClick:()=>be("weekday",re.value.toString()),className:`
                    text-sm px-4 py-2 rounded-full border transition-all duration-200
                    flex-1 text-center
                    ${me.weekday===re.value.toString()?"bg-gradient-to-r from-green-400 to-blue-400 text-white shadow-md transform scale-105":"bg-gray-50 text-gray-800 border-gray-300 hover:bg-gray-100 hover:shadow-sm"}
                  `,children:re.label},re.value))})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Ye,{label:"  *",children:s.jsx(fe,{id:"edit-schedule-start-time",type:"time",value:me.start_time,onChange:re=>be("start_time",re.target.value),required:!0,className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2"})}),s.jsx(Ye,{label:"  *",children:s.jsx(fe,{id:"edit-schedule-end-time",type:"time",value:me.end_time,onChange:re=>be("end_time",re.target.value),required:!0,className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2"})})]}),s.jsxs(Ye,{label:" ()",children:[s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[s.jsx(Ai,{className:"h-3 w-3 ml-1"}),"     "]}),s.jsx(fe,{id:"edit-schedule-location",value:me.location,onChange:re=>be("location",re.target.value),placeholder:"   ()",className:"bg-gray-50 border-gray-300 rounded-md text-sm py-1 px-2"})]})]})}),s.jsx(Sn,{isOpen:X,onOpenChange:K,onConfirm:Ve,isLoading:!1,title:"  ",description:"           ",itemDetails:ae?{:Oe(ae.weekday),:`${ae.start_time} - ${ae.end_time}`,:ae.location||"-"}:null,deleteButtonText:"  ",cancelButtonText:""})]})}function fM({onNavigate:e,userRole:t,userId:r}){return s.jsx(hM,{onNavigate:e,userRole:t,userId:r})}function mM({onNavigate:e,userRole:t,userId:r}){var qe,Ot;const{toast:n}=Tn(),[a,o]=h.useState([]),[i,l]=h.useState(!0),[c,d]=h.useState(""),[u,m]=h.useState(null),[f,x]=h.useState([]),[y,g]=h.useState(!1),[w,v]=h.useState(!1),[p,b]=h.useState(!1),[N,S]=h.useState({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),[E,D]=h.useState(!1),[I,ee]=h.useState(null),[J,T]=h.useState(!1),[_,O]=h.useState({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),[j,k]=h.useState(!1),[A,F]=h.useState(null),[R,z]=h.useState(!1),Y=t==="admin"||t==="superadmin";h.useEffect(()=>{W()},[t,r]);const W=async()=>{l(!0);try{let q=[];t==="teacher"&&r?(q=await Os(r),console.log("Teacher circles loaded:",q)):(t==="admin"||t==="superadmin")&&(q=await Ma()),o(q),t==="teacher"&&q.length===1&&(m(q[0]),await Z(q[0].id))}catch(q){console.error("Error loading circles:",q),n({title:"   ",description:"     ",variant:"destructive"})}finally{l(!1)}},Z=async q=>{g(!0);try{const _e=await mh(q);console.log(" Loaded schedules:",_e),x(_e)}catch(_e){console.error("Error loading schedules:",_e),n({title:"   ",description:"     ",variant:"destructive"})}finally{g(!1)}},B=async q=>{m(q),await Z(q.id)},X=a.filter(q=>{var _e;return q.name.toLowerCase().includes(c.toLowerCase())||((_e=q.teacher)==null?void 0:_e.full_name)&&q.teacher.full_name.toLowerCase().includes(c.toLowerCase())}),K=()=>{S({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),v(!0)},ae=(q,_e)=>{S(Le=>({...Le,[q]:_e}))},te=async()=>{if(!(!u||p))try{if(b(!0),!N.start_time||!N.end_time){n({title:"  ",description:"    ",variant:"destructive"}),b(!1);return}if(N.start_time>=N.end_time){n({title:"  ",description:"       ",variant:"destructive"}),b(!1);return}const q={study_circle_id:u.id,weekday:parseInt(N.weekday),start_time:N.start_time,end_time:N.end_time,location:N.location.trim()||null};console.log(" Creating new schedule:",q);const _e=await Ug(q);_e.success?(n({title:"   ",description:`     "${u.name}" `,variant:"default"}),await Z(u.id),v(!1)):n({title:"  ",description:_e.message||"     ",variant:"destructive"})}catch(q){console.error(" Error creating new schedule:",q),n({title:"  ",description:"       ",variant:"destructive"})}finally{b(!1)}},me=q=>{ee(q),O({weekday:q.weekday.toString(),start_time:q.start_time.substring(0,5),end_time:q.end_time.substring(0,5),location:q.location||""}),D(!0)},je=(q,_e)=>{O(Le=>({...Le,[q]:_e}))},V=async()=>{if(!(!I||J))try{if(T(!0),!_.start_time||!_.end_time){n({title:"  ",description:"    ",variant:"destructive"});return}if(_.start_time>=_.end_time){n({title:"  ",description:"       ",variant:"destructive"});return}const q={id:I.id,weekday:parseInt(_.weekday),start_time:_.start_time,end_time:_.end_time,location:_.location.trim()||null};console.log(" Updating schedule with data:",q);const _e=await Wg(q);_e.success?(n({title:"   ",description:"    ",variant:"default"}),u&&await Z(u.id),D(!1),ee(null)):n({title:"  ",description:_e.message||"     ",variant:"destructive"})}catch(q){console.error(" Error updating schedule:",q),n({title:"  ",description:"       ",variant:"destructive"})}finally{T(!1)}},Q=q=>{F(q),k(!0)},ie=async()=>{if(A)try{z(!0);const q=await Vg(A.id);q.success?(n({title:"   ",description:"   ",variant:"default"}),console.log(" Schedule deleted successfully:",A.id),u&&await Z(u.id)):n({title:"  ",description:q.message||"    ",variant:"destructive"})}catch(q){console.error(" Error deleting schedule:",q),n({title:"  ",description:"      ",variant:"destructive"})}finally{z(!1),k(!1),F(null)}},ne=()=>{m(null),x([])},le=q=>{const[_e,Le]=q.split(":");return parseInt(_e)*60+parseInt(Le)},Pe=(()=>{const q=new Set,_e={};return f.forEach(Le=>{var Ge;(_e[Ge=Le.weekday]||(_e[Ge]=[])).push(Le)}),Object.values(_e).forEach(Le=>{Le.forEach(Ge=>{const $t=le(Ge.start_time.substring(0,5)),Kt=le(Ge.end_time.substring(0,5));Le.forEach(Ct=>{if(Ge.id===Ct.id)return;const Qt=le(Ct.start_time.substring(0,5)),xt=le(Ct.end_time.substring(0,5));$t<xt&&Kt>Qt&&(q.add(Ge.id),q.add(Ct.id))})})}),q})(),He=(()=>{const q={};return f.forEach(_e=>{var Le;(q[Le=_e.weekday]||(q[Le]=[])).push(_e)}),Object.values(q).forEach(_e=>_e.sort((Le,Ge)=>Le.start_time.localeCompare(Ge.start_time))),Ps.map(_e=>parseInt(_e.value,10)).filter(_e=>{var Le;return(Le=q[_e])==null?void 0:Le.length}).map(_e=>({weekday:_e,items:q[_e]}))})();return s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-0 sm:px-0 py-1 sm:py-2",children:[s.jsxs(ut,{children:[s.jsx(wt,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 duration-300 rounded-t-2xl shadow-md",children:s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx(yt,{className:"text-base sm:text-xl md:text-2xl font-extrabold text-white flex items-center justify-between gap-2 drop-shadow-md",children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 justify-end",children:[s.jsx(ur,{className:"h-4 w-4 sm:h-6 sm:w-6 text-yellow-300 animate-pulse"}),s.jsx("span",{className:"line-clamp-1",children:"   "})]})}),s.jsx(Rt,{className:"text-[11px] sm:text-sm text-green-100/90 mt-0.5",children:"     ."})]})})}),s.jsx(ot,{className:"space-y-3 sm:space-y-6 px-2 sm:px-4 pt-3 pb-4",children:s.jsxs("div",{className:"grid md:grid-cols-3 gap-2 sm:gap-6",children:[s.jsx("div",{className:"md:hidden",children:s.jsxs("div",{className:"bg-white/70 backdrop-blur border border-green-200 rounded-lg shadow-sm overflow-hidden mb-3",children:[s.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between gap-2 px-2 py-2 bg-gradient-to-r from-green-600 via-green-500 to-green-600",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pt,{className:"h-3.5 w-3.5 text-white"}),s.jsx("h2",{className:"text-[12px] font-semibold text-white",children:" "})]}),u&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-[10px] text-white/80",children:":"}),s.jsx(lt,{className:"bg-white/20 text-white font-normal px-2 py-0 h-4 rounded-full text-[10px]",children:((Ot=(qe=u.teacher)==null?void 0:qe.full_name)==null?void 0:Ot.split(" ")[0])||" "})]})]}),t!=="teacher"&&s.jsx("div",{className:"px-2 pt-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(Nr,{className:"absolute right-2 top-2 h-3.5 w-3.5 text-green-400"}),s.jsx(fe,{placeholder:"...",className:"pr-7 h-8 text-[11px] rounded-lg border-green-300 focus:ring-green-300",value:c,onChange:q=>d(q.target.value)})]})}),s.jsx("div",{className:"px-2 pt-2 pb-1 overflow-y-auto max-h-44 scrollbar-thin scrollbar-thumb-green-400 scrollbar-track-transparent",children:i?s.jsxs("div",{className:"w-full py-6 text-center flex flex-col items-center",children:[s.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-green-500 border-t-transparent rounded-full mb-2"}),s.jsx("span",{className:"text-green-700 text-[12px] font-medium",children:" ..."})]}):X.length===0?s.jsx("div",{className:"w-full py-6 text-center text-green-600 text-[12px]",children:"  "}):s.jsx("div",{className:"flex flex-col gap-1",children:X.map(q=>{const _e=(u==null?void 0:u.id)===q.id;return s.jsxs("button",{onClick:()=>B(q),className:`group flex items-center justify-between w-full px-2 py-1.5 rounded-md border text-[11px] transition-all duration-200
                        ${_e?"bg-gradient-to-r from-green-600 to-green-700 border-green-300 text-white shadow-md":"bg-white border-green-200 text-green-700 hover:bg-green-50 hover:border-green-400 hover:shadow-sm"}
                      `,children:[s.jsx("span",{className:"font-medium truncate",children:q.name}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[q.teacher&&s.jsx("span",{className:`text-[10px] ${_e?"text-green-100":"text-green-500"}`,children:q.teacher.full_name.split(" ")[0]}),_e&&s.jsx("span",{className:"inline-flex items-center bg-white/30 text-[9px] px-1 py-0.5 rounded-full font-medium",children:""})]})]},q.id)})})})]})}),s.jsx("div",{className:"md:col-span-1 hidden md:block",children:s.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-2xl shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 via-green-500 to-green-700 p-3",children:s.jsxs("h2",{className:"text-lg font-semibold text-white mb-0 flex items-center gap-2",children:[s.jsx(Pt,{className:"h-5 w-5"})," "]})}),s.jsxs("div",{className:"p-4 space-y-4 md:space-y-5",children:[s.jsx("div",{className:"relative",children:t!=="teacher"&&s.jsxs("div",{className:"relative mt-1",children:[s.jsx(Nr,{className:"absolute right-3 top-2.5 h-4 w-4 text-green-400"}),s.jsx(fe,{placeholder:"  ...",className:"pr-10 pl-3 py-2 border-2 border-green-300 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all duration-200 shadow-sm text-sm",value:c,onChange:q=>d(q.target.value)})]})}),i?s.jsxs("div",{className:"flex flex-col items-center justify-center p-8 gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),s.jsx("span",{className:"text-sm text-green-600",children:"  ..."})]}):X.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center gap-2",children:[s.jsx(Pt,{className:"h-12 w-12 text-green-200"}),s.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"  "}),s.jsx("p",{className:"text-sm text-green-600",children:"       "})]}):s.jsx("div",{className:"divide-y divide-green-100",children:X.map(q=>s.jsx("div",{className:`cursor-pointer transition-all duration-200 rounded-2xl flex flex-col gap-1 p-2.5 shadow-sm text-sm ${(u==null?void 0:u.id)===q.id?"bg-green-700 text-white ring-1 ring-green-400":"bg-green-50 hover:bg-green-100 text-green-800"}`,onClick:()=>B(q),children:s.jsxs("div",{className:"flex items-center justify-between font-medium gap-1",children:[s.jsxs("div",{className:"flex items-center gap-1 truncate",children:[s.jsx("span",{className:"text-green-500",children:""}),s.jsx("span",{className:"truncate",children:q.name}),q.teacher&&s.jsxs("span",{className:`flex items-center gap-1 text-[11px] truncate ${(u==null?void 0:u.id)===q.id?"text-white":"text-green-700"}`,children:[" ",q.teacher.full_name]})]}),(u==null?void 0:u.id)===q.id&&s.jsx(lt,{variant:"outline",className:`${(u==null?void 0:u.id)===q.id?"text-white border-white":"text-green-800 border-green-400"} text-xs`,children:""})]})},q.id))})]})]})}),s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-none md:rounded-xl shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between md:hidden px-2 py-1 bg-gradient-to-r from-green-600 via-green-500 to-green-600 rounded-t-lg",children:[s.jsx("div",{className:"flex items-center gap-1 truncate",children:(u==null?void 0:u.teacher)&&s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"h-3 w-3 text-white"}),s.jsxs("span",{className:"text-[9px] text-white truncate",children:[s.jsx("span",{className:"truncate",children:u.name}),"  ",u.teacher.full_name.split(" ")[0]]})]})}),s.jsxs("div",{className:"flex items-center gap-1",children:[Y&&u&&s.jsx(H,{onClick:K,size:"sm",className:"flex items-center gap-1 rounded-md bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white text-[8px] px-1 py-0.5 h-5 shadow-none",title:" ",children:s.jsx(Qr,{className:"h-2.5 w-2.5"})}),u&&s.jsx(H,{variant:"outline",size:"sm",onClick:ne,className:"flex items-center gap-1 rounded-md bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white text-[8px] px-1 py-0.5 h-5 shadow-none border border-green-200",title:" ",children:s.jsx(vo,{className:"h-2.5 w-2.5"})})]})]}),s.jsxs("div",{className:"hidden md:flex justify-between items-center bg-gradient-to-r from-green-100 via-green-200 to-green-700 px-4 py-4 rounded-t-xl",children:[s.jsxs(yt,{className:"text-lg font-bold text-white flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ur,{className:"h-5 w-5 text-green-700"}),u?` : ${u.name}`:" "," | "]}),(u==null?void 0:u.teacher)&&s.jsxs(Rt,{className:"text-gray-700 text-xs sm:text-[10px]",children:[": ",u.teacher.full_name]})]}),u&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{variant:"outline",size:"sm",className:`flex items-center gap-3 rounded-3xl border-2 border-green-600 text-green-900 \r
                                  hover:bg-green-100 hover:text-green-800 hover:scale-105 \r
                                  dark:border-green-500 dark:text-green-300 dark:hover:bg-green-800 dark:hover:text-green-200 \r
                                  shadow-lg transition-all duration-200 px-5 py-2 font-semibold`,onClick:ne,children:" "}),Y&&s.jsxs(H,{onClick:K,size:"sm",className:`flex items-center gap-3 rounded-3xl bg-green-600 hover:bg-green-700 \r
                                     dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-5 py-2 font-semibold`,children:[s.jsx(Qr,{className:"h-4 w-4"})," "]})]})]}),s.jsx(ot,{className:"px-3 sm:px-4 pt-4 pb-5",children:u?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-2.5 sm:p-3 bg-green-100 rounded-none md:rounded-lg border border-green-200 text-xs sm:text-sm",children:[s.jsx("span",{className:"text-sm text-green-700",children:" "}),s.jsxs(lt,{variant:"outline",className:"text-green-800 border-green-400",children:[f.length," "]})]}),s.jsxs("div",{className:"md:hidden space-y-2.5 px-2",role:"list","aria-label":" ",children:[f.length===0&&s.jsx("div",{className:"text-center text-[13px] text-green-600 py-5",children:"  "}),[...f].sort((q,_e)=>q.weekday-_e.weekday||q.start_time.localeCompare(_e.start_time)).map(q=>(Pe.has(q.id),s.jsxs("div",{role:"listitem",className:"rounded-lg border shadow-sm p-2.5 flex flex-col gap-2 text-[12px] relative transition-colors","aria-label":`  ${no(q.weekday)}`,children:[s.jsx("div",{className:"px-4 py-2 flex items-center justify-between bg-gradient-to-r from-green-400 to-green-600 rounded-xl shadow-md border border-green-300",children:s.jsx("h3",{className:"font-bold flex items-center gap-2 text-sm text-white",children:s.jsxs("span",{children:[" ",no(q.weekday)]})})}),s.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md flex-1 justify-center bg-blue-100 text-blue-800",children:[s.jsx(Yr,{className:"h-3 w-3 text-blue-600"})," ",jn(q.start_time)]}),s.jsx("span",{className:"text-gray-400 font-bold",children:""}),s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md flex-1 justify-center bg-purple-100 text-purple-800",children:[s.jsx(Yr,{className:"h-3 w-3 text-purple-600"})," ",jn(q.end_time)]})]}),s.jsx("div",{className:"flex items-center gap-1 text-green-700",children:q.location?s.jsxs("span",{className:"flex items-center gap-1 text-[12px]",children:[s.jsx(tc,{className:"h-3 w-3 text-green-600"})," ",q.location]}):s.jsx("span",{className:"text-[11px] italic text-green-500",children:"  "})}),Y&&s.jsxs("div",{className:"flex gap-2 pt-1",children:[s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>me(q),className:"flex-1 rounded-md h-7 bg-green-200 hover:bg-green-300 text-green-900",title:" ",children:s.jsx(Rr,{className:"h-3.5 w-3.5 mx-auto"})}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>Q(q),className:"flex-1 bg-red-100 hover:bg-red-200 text-red-700 rounded-md h-7",title:" ",children:s.jsx(Lr,{className:"h-3.5 w-3.5 mx-auto"})})]})]},q.id)))]}),s.jsxs("div",{className:"hidden md:flex flex-col gap-5","aria-label":" ",children:[He.length===0&&s.jsx("div",{className:"text-center text-sm text-green-600 py-8 border rounded-xl bg-white",children:"  "}),He.map(q=>{const _e=no(q.weekday);return s.jsxs("div",{className:"border border-green-200 rounded-xl overflow-hidden bg-white shadow-sm",children:[s.jsx("div",{className:"px-4 py-2 flex items-center justify-between bg-gradient-to-r from-green-400 to-green-600 rounded-xl shadow-md border border-green-300",children:s.jsx("h3",{className:"font-bold flex items-center gap-2 text-sm text-white",children:s.jsxs("span",{children:[" ",_e]})})}),s.jsx("div",{className:"divide-y divide-green-100",children:q.items.map(Le=>{const Ge=Pe.has(Le.id);return s.jsxs("div",{className:`p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2 text-[13px] ${Ge?"bg-red-50/70":"hover:bg-green-50"} transition-colors`,children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200 shadow-sm",children:[s.jsx(Yr,{className:"h-3 w-3 text-blue-600"})," ",s.jsx("span",{className:"font-bold",children:":"})," ",jn(Le.start_time)]}),s.jsx("span",{className:"mx-1 text-gray-400",children:""}),s.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200 shadow-sm",children:[s.jsx(Yr,{className:"h-3 w-3 text-purple-600"})," ",s.jsx("span",{className:"font-bold",children:":"})," ",jn(Le.end_time)]}),Le.location?s.jsxs("span",{className:"flex items-center gap-1 text-[11px] md:text-xs text-green-700",children:[s.jsx(tc,{className:"h-3 w-3 text-green-600"})," ",Le.location]}):s.jsx("span",{className:"text-[11px] italic text-green-500",children:" "}),Ge&&s.jsxs("span",{className:"flex items-center gap-1 text-[11px] text-red-700 font-semibold bg-red-100 px-2 py-0.5 rounded-full border border-red-300 shadow-sm",children:[s.jsx(Jw,{className:"h-3 w-3"}),"   "]})]}),Y&&s.jsxs("div",{className:"flex items-center gap-2 mt-1 md:mt-0",children:[s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>me(Le),className:"bg-green-200 hover:bg-green-300 text-green-900 rounded-md p-2 h-8",title:" ",children:s.jsx(Rr,{className:"h-4 w-4"})}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>Q(Le),className:"bg-red-100 hover:bg-red-200 text-red-700 rounded-md p-2 h-8",title:" ",children:s.jsx(Lr,{className:"h-4 w-4"})})]})]},Le.id)})})]},q.weekday)})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center p-10 sm:p-12 text-center gap-3 text-sm sm:text-base",children:[s.jsx(ur,{className:"h-16 w-16 text-green-200"}),s.jsx("h3",{className:"text-xl font-semibold text-green-800",children:"  "}),s.jsx("p",{className:"text-green-600 max-w-md",children:"          "})]})})]})})]})})]}),s.jsx(us,{title:"  ",description:"       ",open:w,onOpenChange:v,onSave:te,isLoading:p,saveButtonText:p?" ...":" ",mode:"add",children:s.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-3 bg-white",children:[s.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-3 bg-white",children:[s.jsx(ye,{className:"text-right text-gray-800 text-sm mb-2",children:" *"}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Ps.map(q=>s.jsx("button",{type:"button",onClick:()=>ae("weekday",q.value.toString()),className:`
                    text-sm px-4 py-2 rounded-full border transition-all duration-200
                    flex-1 text-center
                    ${N.weekday===q.value.toString()?"bg-gradient-to-r from-green-400 to-blue-400 text-white shadow-md transform scale-105":"bg-gray-50 text-gray-800 border-gray-300 hover:bg-gray-100 hover:shadow-sm"}
                  `,children:q.label},q.value))})]}),s.jsx(Ye,{label:"  *",children:s.jsx(fe,{id:"add-schedule-start-time",type:"time",value:N.start_time,onChange:q=>ae("start_time",q.target.value),required:!0,className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2 font-medium"})}),s.jsx(Ye,{label:"  *",children:s.jsx(fe,{id:"add-schedule-end-time",type:"time",value:N.end_time,onChange:q=>ae("end_time",q.target.value),required:!0,className:"bg-purple-50 border-purple-200 text-purple-900 rounded-md text-sm py-1 px-2 font-medium"})}),s.jsxs(Ye,{label:" ()",children:[s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[s.jsx(Ai,{className:"h-3 w-3 ml-1"}),"     "]}),s.jsx(fe,{id:"add-schedule-location",value:N.location,onChange:q=>ae("location",q.target.value),placeholder:"   ()",className:"bg-gray-50 border-gray-300 rounded-md text-sm py-1 px-2"})]})]})}),s.jsx(us,{title:" ",description:"   ",open:E,onOpenChange:D,onSave:V,isLoading:J,saveButtonText:J?" ...":" ",mode:"edit",children:s.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-3 bg-white",children:[s.jsx(ye,{className:"text-right text-gray-800 text-sm mb-2 block",children:" *"}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Ps.map(q=>s.jsx("button",{type:"button",onClick:()=>je("weekday",q.value.toString()),className:`
                  text-sm px-4 py-2 rounded-full border transition-all duration-200
                  flex-1 text-center
                  ${_.weekday===q.value.toString()?"bg-gradient-to-r from-green-400 to-blue-400 text-white shadow-md transform scale-105":"bg-gray-50 text-gray-800 border-gray-300 hover:bg-gray-100 hover:shadow-sm"}
                `,children:q.label},q.value))}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[s.jsx(Ye,{label:"  *",children:s.jsx(fe,{id:"edit-schedule-start-time",type:"time",value:_.start_time,onChange:q=>je("start_time",q.target.value),required:!0,className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2 font-medium"})}),s.jsx(Ye,{label:"  *",children:s.jsx(fe,{id:"edit-schedule-end-time",type:"time",value:_.end_time,onChange:q=>je("end_time",q.target.value),required:!0,className:"bg-purple-50 border-purple-200 text-purple-900 rounded-md text-sm py-1 px-2 font-medium"})})]}),s.jsxs(Ye,{label:" ()",children:[s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[s.jsx(Ai,{className:"h-3 w-3 ml-1"}),"     "]}),s.jsx(fe,{id:"edit-schedule-location",value:_.location,onChange:q=>je("location",q.target.value),placeholder:"   ()",className:"bg-gray-50 border-gray-300 rounded-md text-sm py-1 px-2"})]})]})}),s.jsx(Sn,{isOpen:j,onOpenChange:k,onConfirm:ie,isLoading:R,title:"  ",description:"           ",itemDetails:A?{:no(A.weekday),:`${jn(A.start_time)} - ${jn(A.end_time)}`,:A.location||"-"}:null,deleteButtonText:"  ",cancelButtonText:""})]})}function gM({onNavigate:e,currentUser:t}){return s.jsx("div",{dir:"rtl",children:s.jsxs("div",{className:"container mx-auto py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:" "}),t?s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:s.jsx(pM,{currentUser:t})}):s.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded",children:[s.jsx("p",{children:"   .      ."}),s.jsx("button",{onClick:()=>e("/login"),className:"mt-4 bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600",children:" "})]})]})})}function pM({currentUser:e}){const{toast:t}=Tn(),[r,n]=h.useState(!1),[a,o]=h.useState(!1),[i,l]=h.useState([]),[c,d]=h.useState({}),[u,m]=h.useState(!1),[f,x]=h.useState({full_name:e.full_name,username:e.username,password:"",confirmPassword:""});h.useEffect(()=>{(async()=>{if(e.role==="teacher"||e.role==="admin"){m(!0);try{const v=await Os(e.id);l(v);const p={};for(const b of v){const N=await mh(b.id);p[b.id]=N}d(p)}catch(v){console.error("Error loading user circles:",v)}finally{m(!1)}}})()},[e.id,e.role]);const y=w=>{const{name:v,value:p}=w.target;x(b=>({...b,[v]:p}))},g=async w=>{if(w.preventDefault(),f.password&&f.password!==f.confirmPassword){t({title:"   ",description:"   .    .",variant:"destructive"});return}o(!0);try{const v={id:e.id,full_name:f.full_name,username:f.username};f.password&&(v.password=f.password);const p=await Xj(v);if(p.success){t({title:"  ",description:"    ."});const b={...e,full_name:f.full_name,username:f.username};localStorage.setItem("currentUser",JSON.stringify(b)),n(!1)}else t({title:"  ",description:p.message||"    .    .",variant:"destructive"})}catch(v){console.error("    :",v),t({title:"  ",description:"      .    .",variant:"destructive"})}finally{o(!1)}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold",children:" "}),r?s.jsx(H,{variant:"outline",onClick:()=>n(!1),children:""}):s.jsx(H,{onClick:()=>n(!0),children:""})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"full_name",children:" "}),s.jsx(fe,{id:"full_name",name:"full_name",value:f.full_name,onChange:y,disabled:!r,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"username",children:" "}),s.jsx(fe,{id:"username",name:"username",value:f.username,onChange:y,disabled:!r,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"role",children:""}),s.jsx(fe,{id:"role",value:e.role==="superadmin"?" ":e.role==="admin"?"":e.role==="teacher"?"":" ",disabled:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"last_login",children:"  "}),s.jsx(fe,{id:"last_login",value:(()=>{try{if(!e.last_login_at||e.last_login_at==="null"||e.last_login_at==="undefined"||e.last_login_at===null||e.last_login_at===void 0)return" ";const w=new Date(e.last_login_at);return isNaN(w.getTime())?(console.error("  :",e.last_login_at)," "):w.toLocaleString("ar-SA")}catch(w){return console.error("   :",w,":",e.last_login_at)," "}})(),disabled:!0})]})]}),r&&s.jsxs("div",{className:"border-t pt-4 mt-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"  "}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"password",children:"  "}),s.jsx(fe,{id:"password",name:"password",type:"password",value:f.password,onChange:y,autoComplete:"new-password"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"          "})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ye,{htmlFor:"confirmPassword",children:"  "}),s.jsx(fe,{id:"confirmPassword",name:"confirmPassword",type:"password",value:f.confirmPassword,onChange:y,autoComplete:"new-password"})]})]})]})]}),r&&s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>n(!1),children:""}),s.jsx(H,{type:"submit",disabled:a,children:a?" ...":" "})]})]}),(e.role==="teacher"||e.role==="admin")&&s.jsxs(ut,{className:"mt-8 border-islamic-green/20",children:[s.jsxs(wt,{children:[s.jsxs(yt,{className:"flex items-center gap-2 text-islamic-green",children:[s.jsx(Pt,{className:"h-5 w-5"})," "]}),s.jsx(Rt,{children:"       "})]}),s.jsx(ot,{children:u?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-islamic-green"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"  ..."})]})}):i.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-islamic-green/5 rounded-lg mb-6",children:[s.jsxs(lt,{variant:"outline",className:"text-islamic-green border-islamic-green/40",children:[i.length," "]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:" "})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(w=>{var v;return s.jsxs(ut,{className:"overflow-hidden border-islamic-green/20 transition-all hover:shadow-md",children:[s.jsx(wt,{className:"bg-islamic-green/5 pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(yt,{className:"text-lg flex items-center gap-2 text-islamic-green text-xs",children:[s.jsx(Pt,{className:"h-5 w-5"}),w.name]}),s.jsxs(lt,{variant:"secondary",className:"gap-1 text-xs",children:[s.jsx(Is,{className:"h-3 w-3"}),w.max_students?`: ${w.max_students} `:"0 "]})]})}),s.jsx(ot,{className:"pt-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(l4,{className:"h-4 w-4 text-islamic-green"}),s.jsx("h4",{className:"text-sm font-medium",children:" "})]}),((v=c[w.id])==null?void 0:v.length)>0?s.jsx("div",{className:"space-y-2 mt-2",children:c[w.id].map(p=>s.jsxs("div",{className:"flex items-center justify-between bg-muted/30 p-2 rounded-md",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(lt,{variant:"outline",className:"text-islamic-green",children:no(p.weekday)})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(Yr,{className:"h-3 w-3 text-blue-500"}),s.jsx("span",{children:jn(p.start_time)})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:""}),s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(Yr,{className:"h-3 w-3 text-red-500"}),s.jsx("span",{children:jn(p.end_time)})]})]}),p.location&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(tc,{className:"h-3 w-3"}),s.jsx("span",{children:p.location})]})]},p.id))}):s.jsx("div",{className:"flex items-center justify-center bg-muted/20 py-3 rounded-md",children:s.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[s.jsx(Sr,{className:"h-5 w-5 text-muted-foreground"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"     "})]})})]})})]},w.id)})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-muted/30 rounded-lg",children:[s.jsx(Pt,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-medium text-lg mb-2",children:"  "}),s.jsx("p",{className:"text-muted-foreground text-center",children:"      "})]})})]})]})}const _l=async e=>{try{const{data:t,error:r}=await de.from(Ki).select("id, study_circle_id, session_date, start_time, end_time, teacher_id, notes, created_at").eq("study_circle_id",e).order("session_date",{ascending:!1});return r?(console.error("    :",r),[]):t||[]}catch(t){return console.error("      :",t),[]}},xM=async(e,t)=>{try{const{data:r,error:n}=await de.from(Ki).select("*").eq("study_circle_id",e).eq("session_date",t).single();return n?(console.error("    :",n),null):r}catch(r){return console.error("      :",r),null}},vM=async e=>{try{const t=await Z7(e.study_circle_id);if(!t)return{success:!1,error:"  "};if(!e.teacher_id&&t.teacher_id&&(e.teacher_id=t.teacher_id),e.teacher_id&&!await Eg(e.teacher_id))return{success:!1,error:"  "};const{data:r,error:n}=await de.from(Ki).insert([e]).select().single();return n?(console.error("    :",n),n.code==="23505"?{success:!1,error:"       "}:{success:!1,error:n.message}):{success:!0,data:r}}catch(t){return console.error("      :",t),{success:!1,error:"       "}}},yM=async e=>{try{if(!await xM(e.study_circle_id,e.session_date))return{success:!1,error:"  "};const r={...e};r.session_date_new&&(r.session_date=r.session_date_new,delete r.session_date_new),delete r.study_circle_id;const{data:n,error:a}=await de.from(Ki).update(r).match({study_circle_id:e.study_circle_id,session_date:e.session_date}).select().single();return a?(console.error("    :",a),{success:!1,error:a.message}):{success:!0,data:n}}catch(t){return console.error("      :",t),{success:!1,error:"       "}}},bM=async(e,t)=>{try{const{error:r}=await de.from(Ki).delete().match({study_circle_id:e,session_date:t});return r?(console.error("    :",r),{success:!1,error:r.message}):{success:!0}}catch(r){return console.error("      :",r),{success:!1,error:"       "}}},Cv=e=>{const t=an(e);return Vr(t,"EEEE d MMMM yyyy",{locale:eD})},xd=e=>{if(!e)return"-";const[t,r]=e.substring(0,5).split(":").map(Number),n=t>=12?"":"";return`${t%12||12}:${r.toString().padStart(2,"0")} ${n}`};function wM({onNavigate:e,currentUser:t}){var W,Z;const[r,n]=h.useState(!1),[a,o]=h.useState([]),[i,l]=h.useState(null),[c,d]=h.useState([]),[u,m]=h.useState([]),{toast:f}=Tn(),[x,y]=h.useState(""),g=t==null?void 0:t.role,w=a.filter(B=>{var te;if(!x.trim())return!0;const X=x.toLowerCase(),K=((B==null?void 0:B.name)||"").toLowerCase(),ae=(((te=B==null?void 0:B.teacher)==null?void 0:te.full_name)||"").toLowerCase();return K.includes(X)||ae.includes(X)}),[v,p]=h.useState(!1),[b,N]=h.useState(!1),[S,E]=h.useState({session_date:"",start_time:"",end_time:"",notes:""}),[D,I]=h.useState(!1),[ee,J]=h.useState(null),T=Sn;h.useEffect(()=>{async function B(){n(!0);try{let X;t&&t.role==="teacher"?X=await Os(t.id):X=await Ma(),o(X);const K=await ih();m(K),t&&t.role==="teacher"&&X.length>0&&l(X[0].id)}catch(X){console.error("Error loading initial data:",X),f({title:"   ",description:"     ",variant:"destructive"})}finally{n(!1)}}B()},[t,f]),h.useEffect(()=>{async function B(){if(!i){d([]);return}n(!0);try{const X=await _l(i),K=gd(),te=X.filter(me=>{const je=an(me.session_date);return fd(je,K)||Vr(je,"yyyy-MM-dd")===Vr(K,"yyyy-MM-dd")}).sort((me,je)=>an(me.session_date).getTime()-an(je.session_date).getTime());d(te)}catch(X){console.error("Error loading circle sessions:",X),f({title:"   ",description:"     ",variant:"destructive"})}finally{n(!1)}}B()},[i,f]);const _=B=>{l(B)},O=()=>{const B=Vr(T8(new Date,1),"yyyy-MM-dd");E({session_date:B,start_time:"08:00",end_time:"09:00",notes:""}),p(!0)},j=async()=>{if(i)try{if(!S.session_date||!S.start_time||!S.end_time){f({title:"  ",description:"    ",variant:"destructive"});return}const B={study_circle_id:i,session_date:S.session_date,start_time:S.start_time,end_time:S.end_time,notes:S.notes,teacher_id:t.role==="teacher"?t.id:null};await vM(B);const X=await _l(i),K=gd(),te=X.filter(me=>{const je=an(me.session_date);return fd(je,K)||Vr(je,"yyyy-MM-dd")===Vr(K,"yyyy-MM-dd")}).sort((me,je)=>an(me.session_date).getTime()-an(je.session_date).getTime());d(te),p(!1),f({title:"  ",description:"    "})}catch(B){console.error("Error adding session:",B),f({title:"  ",description:"     ",variant:"destructive"})}},k=B=>{E({session_date:B.session_date,start_time:B.start_time||"",end_time:B.end_time||"",notes:B.notes||""}),J(B),N(!0)},A=async()=>{if(!(!i||!ee))try{if(!S.session_date||!S.start_time||!S.end_time){f({title:"  ",description:"    ",variant:"destructive"});return}const B={study_circle_id:i,session_date:ee.session_date,session_date_new:S.session_date,start_time:S.start_time,end_time:S.end_time,notes:S.notes,teacher_id:ee.teacher_id||t.id};await yM(B);const X=await _l(i),K=gd(),te=X.filter(me=>{const je=an(me.session_date);return fd(je,K)||Vr(je,"yyyy-MM-dd")===Vr(K,"yyyy-MM-dd")}).sort((me,je)=>an(me.session_date).getTime()-an(je.session_date).getTime());d(te),N(!1),J(null),f({title:"  ",description:"   "})}catch(B){console.error("Error updating session:",B),f({title:"  ",description:"    ",variant:"destructive"})}},F=B=>{J(B),I(!0)},R=async()=>{if(!(!i||!ee))try{await bM(i,ee.session_date);const B=await _l(i),X=gd(),ae=B.filter(te=>{const me=an(te.session_date);return fd(me,X)||Vr(me,"yyyy-MM-dd")===Vr(X,"yyyy-MM-dd")}).sort((te,me)=>an(te.session_date).getTime()-an(me.session_date).getTime());d(ae),I(!1),J(null),f({title:"  ",description:"   "})}catch(B){console.error("Error deleting session:",B),f({title:"  ",description:"    ",variant:"destructive"})}},z=B=>{if(!B)return"";const X=a.find(K=>K.id===B);return X?X.name:""},Y=B=>{if(!B)return"";const X=a.find(te=>te.id===B);if(!X||!X.teacher_id)return"";const K=X.teacher_id;if(!K)return"";const ae=u.find(te=>te.id===K);return ae?ae.full_name:""};return s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-0 sm:px-0 py-1 sm:py-2",children:[s.jsxs(ut,{children:[s.jsx(wt,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 duration-300 rounded-t-2xl shadow-md",children:s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(yt,{className:"text-base sm:text-xl md:text-2xl font-extrabold text-white flex items-center gap-1 sm:gap-2 drop-shadow-md",children:[s.jsx(ur,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-100"}),s.jsx("span",{className:"truncate",children:" "})]}),s.jsx(Rt,{className:"text-green-100 text-xs sm:text-sm mt-0.5 sm:mt-1",children:"    "})]})})}),s.jsx(ot,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-white border border-green-200 rounded-xl shadow-md overflow-hidden",children:[s.jsx("div",{className:"md:hidden",children:s.jsxs("div",{className:"bg-white/70 backdrop-blur border border-green-200 rounded-lg shadow-sm overflow-hidden mb-3",children:[s.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between gap-2 px-2 py-2 bg-gradient-to-r from-green-600 via-green-500 to-green-600",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pt,{className:"h-3.5 w-3.5 text-white"}),s.jsx("h2",{className:"text-[12px] font-semibold text-white",children:" "})]}),i&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-[10px] text-white/80",children:":"}),s.jsx(lt,{className:"bg-white/20 text-white font-normal px-2 py-0 h-4 rounded-full text-[10px]",children:((W=Y(i))==null?void 0:W.split(" ")[0])||" "})]})]}),g!=="teacher"&&s.jsx("div",{className:"px-2 pt-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(Nr,{className:"absolute right-2 top-2 h-3.5 w-3.5 text-green-400"}),s.jsx(fe,{placeholder:"...",className:"pr-7 h-8 text-[11px] rounded-lg border-green-300 focus:ring-green-300",value:x,onChange:B=>y(B.target.value)})]})}),s.jsx("div",{className:"px-2 pt-2 pb-1 overflow-y-auto max-h-44 scrollbar-thin scrollbar-thumb-green-400 scrollbar-track-transparent",children:r?s.jsxs("div",{className:"w-full py-6 text-center flex flex-col items-center",children:[s.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-green-500 border-t-transparent rounded-full mb-2"}),s.jsx("span",{className:"text-green-700 text-[12px] font-medium",children:" ..."})]}):w.length===0?s.jsx("div",{className:"w-full py-6 text-center text-green-600 text-[12px]",children:"  "}):s.jsx("div",{className:"flex flex-col gap-1",children:w.map(B=>{const X=i===B.id;return s.jsxs("button",{onClick:()=>_(B.id),className:`group flex items-center justify-between w-full px-2 py-1.5 rounded-md border text-[11px] transition-all duration-200
                        ${X?"bg-gradient-to-r from-green-600 to-green-700 border-green-300 text-white shadow-md":"bg-white border-green-200 text-green-700 hover:bg-green-50 hover:border-green-400 hover:shadow-sm"}
                      `,children:[s.jsx("span",{className:"font-medium truncate",children:B.name}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[B.teacher&&s.jsx("span",{className:`text-[10px] ${X?"text-green-100":"text-green-500"}`,children:B.teacher.full_name.split(" ")[0]}),X&&s.jsx("span",{className:"inline-flex items-center bg-white/30 text-[9px] px-1 py-0.5 rounded-full font-medium",children:""})]})]},B.id)})})})]})}),s.jsx("div",{className:"hidden md:block w-full",children:s.jsxs("div",{className:"bg-white/70 backdrop-blur border border-green-200 rounded-lg shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between gap-2 px-3 py-2 bg-gradient-to-r from-green-600 via-green-500 to-green-600",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Pt,{className:"h-3.5 w-3.5 text-white"}),s.jsx("h2",{className:"text-[12px] font-semibold text-white",children:" "})]}),i&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-[10px] text-white/80",children:":"}),s.jsx(lt,{className:"bg-white/20 text-white font-normal px-2 py-0 h-4 rounded-full text-[10px]",children:((Z=Y(i))==null?void 0:Z.split(" ")[0])||" "})]})]}),g!=="teacher"&&s.jsx("div",{className:"p-2 border-b border-green-100",children:s.jsxs("div",{className:"relative",children:[s.jsx(Nr,{className:"absolute right-2.5 top-[9px] h-3.5 w-3.5 text-green-500"}),s.jsx(fe,{placeholder:"  ...",className:"pr-8 h-8 text-xs border border-green-200 rounded-md focus:border-green-400 focus:ring-1 focus:ring-green-200 shadow-sm",value:x,onChange:B=>y(B.target.value)})]})}),r?s.jsxs("div",{className:"flex flex-col items-center justify-center p-4 gap-1.5",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"}),s.jsx("span",{className:"text-xs text-green-600",children:"  ..."})]}):w.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center gap-1.5 bg-green-50/50 m-2 rounded-lg border border-green-200",children:[s.jsx(Pt,{className:"h-8 w-8 text-green-200"}),s.jsx("h3",{className:"text-sm font-semibold text-green-800",children:"  "}),s.jsx("p",{className:"text-xs text-green-600",children:"       "})]}):s.jsx("div",{className:"space-y-1.5 max-h-[450px] overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-green-400/60 scrollbar-track-transparent",children:w.map(B=>{const X=i===B.id;return s.jsxs("button",{type:"button",onClick:()=>_(B.id),className:`
                        group w-full text-right relative rounded-lg px-3 py-2.5 transition-all duration-200
                        border flex flex-col gap-1
                        ${X?"bg-gradient-to-l from-green-700 via-green-600 to-green-500 text-white border-green-500 shadow-sm shadow-green-300/30":"bg-white hover:bg-green-50 text-green-800 border-green-200 hover:border-green-400"}
                        `,children:[s.jsx("span",{className:`
                          absolute right-0 top-0 h-full w-1 rounded-r-lg transition-all
                          ${X?"bg-white/90":"bg-green-300/0 group-hover:bg-green-300/60"}
                        `}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`
                          inline-flex items-center justify-center h-7 w-7 rounded-md text-xs font-semibold
                          ${X?"bg-white/20 text-white ring-1 ring-white/40":"bg-green-100 text-green-700 group-hover:bg-green-200"}
                          `,children:s.jsx(Pt,{className:"h-3.5 w-3.5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-bold truncate ${X?"text-white":"text-green-800"}`,children:B.name}),B.teacher&&s.jsxs("p",{className:`text-xs mt-0.5 truncate flex items-center gap-1
                            ${X?"text-green-100":"text-green-600 group-hover:text-green-700"}
                            `,children:[s.jsx(ci,{className:"h-3 w-3"}),B.teacher.full_name]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[X&&s.jsxs(lt,{variant:"outline",className:"border-white/60 text-[9px] leading-none px-1.5 py-0.5 bg-white/20 text-white",children:[s.jsx(Fu,{className:"h-2.5 w-2.5 mr-0.5"}),""]}),typeof(B==null?void 0:B.students_count)<"u"&&s.jsx("span",{className:`
                            inline-flex h-5 w-5 items-center justify-center rounded-full text-xs font-medium
                            ${X?"bg-white/30 text-white":"bg-green-100 text-green-700 group-hover:bg-green-200"}
                            `,title:" ",children:B.students_count})]})]})]},B.id)})})]})})]})}),s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"bg-white border border-green-200 rounded-xl shadow-md overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-100 via-green-200 to-green-300 px-3 py-2 sm:px-4 sm:py-3 border-b border-green-300",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 w-full sm:w-auto justify-center sm:justify-start",children:[s.jsx(ur,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-700"}),s.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-bold text-green-800 text-center sm:text-right",children:i?s.jsxs("span",{children:["  : ",z(i)]}):s.jsx("span",{children:"  "})})]}),i&&s.jsxs(H,{onClick:O,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white text-xs sm:text-sm rounded-lg shadow-sm flex items-center gap-1 mx-auto sm:mx-0",title:"  ",children:[s.jsx(Qr,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"inline",children:"  "})]})]})}),s.jsxs("div",{className:"p-3 sm:p-4",children:[s.jsx("div",{className:"bg-green-50 rounded-lg border border-green-200 p-2 sm:p-3 mb-3 sm:mb-4",children:s.jsx(lt,{variant:"outline",className:"text-green-800 border-green-400 text-xs sm:text-sm",children:c.length>0?`  : ${c.length}`:"   "})}),r?s.jsxs("div",{className:"text-center py-12 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"animate-spin h-8 w-8 border-3 border-green-500 border-t-transparent rounded-full mb-2"}),s.jsx("span",{className:"text-green-700 font-medium",children:" ..."})]}):i?c.length>0?s.jsx("div",{className:"overflow-hidden",children:s.jsx(ds,{data:c.map((B,X)=>({...B,id:`${B.study_circle_id}-${B.session_date}-${X}`})),cardGridColumns:{sm:1,md:1,lg:2,xl:3},cardWidth:"100%",columns:[{key:"session_date",header:" ",align:"right",render:B=>s.jsx("div",{className:"flex flex-col text-right",children:s.jsx("span",{className:"text-xs text-white-600",children:Cv(B.session_date)})})},{key:"time",header:" ",align:"right",render:B=>s.jsxs("div",{className:"flex flex-wrap items-center gap-1 max-w-full",children:[s.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-lg text-xs whitespace-nowrap",children:[s.jsx(Yr,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:xd(B.start_time)})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-purple-100 text-purple-800 px-2 py-1 rounded-lg text-xs whitespace-nowrap",children:[s.jsx(Yr,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:xd(B.end_time)})]})]})},{key:"notes",header:"",align:"right",render:B=>s.jsx("span",{className:"text-green-800 text-xs max-w-[200px] block",children:B.notes||""})},{key:"actions",header:" ",align:"center",render:B=>s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>k({study_circle_id:B.study_circle_id,session_date:B.session_date,start_time:B.start_time,end_time:B.end_time,notes:B.notes,teacher_id:B.teacher_id}),className:"bg-green-200 hover:bg-green-300 text-green-900 rounded-md p-2 transition-colors",title:" ",children:s.jsx(Qw,{className:"h-4 w-4"})}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>F({study_circle_id:B.study_circle_id,session_date:B.session_date,start_time:B.start_time,end_time:B.end_time,notes:B.notes,teacher_id:B.teacher_id}),className:"bg-red-100 hover:bg-red-200 text-red-700 rounded-md p-2 transition-colors",title:" ",children:s.jsx(Lr,{className:"h-4 w-4"})})]})}],emptyMessage:"   ",className:"overflow-hidden rounded-xl border border-green-300 shadow-md",getRowClassName:(B,X)=>`${X%2===0?"bg-green-50 hover:bg-green-100":"bg-white hover:bg-green-50"} cursor-pointer transition-colors`})}):s.jsx("div",{className:"py-16 text-center",children:s.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 max-w-md mx-auto border border-green-200 shadow-inner",children:[s.jsx(ur,{className:"w-12 h-12 text-green-300 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-green-800 mb-2",children:"   "}),s.jsx("p",{className:"text-green-600 text-sm mb-4",children:"      "}),s.jsxs(H,{onClick:O,className:"bg-green-600 hover:bg-green-700 text-white rounded-xl",children:[s.jsx(Qr,{className:"h-4 w-4 mr-1"}),"  "]})]})}):s.jsx("div",{className:"py-16 text-center",children:s.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 max-w-md mx-auto border border-green-200 shadow-inner",children:[s.jsx(Pt,{className:"w-12 h-12 text-green-300 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-green-800 mb-2",children:"   "}),s.jsx("p",{className:"text-green-600 text-sm",children:"           "})]})})]})]})})]})})]}),s.jsxs(us,{open:v,onOpenChange:p,title:"  ",description:"   ",onSave:j,saveButtonText:" ",cancelButtonText:"",maxWidth:"600px",mode:"add",isLoading:r,children:[s.jsx(Ye,{label:"",children:s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(fe,{id:"session_date",type:"date",value:S.session_date,onChange:B=>E({...S,session_date:B.target.value}),min:Vr(new Date,"yyyy-MM-dd")})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Ye,{label:" ",children:s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(fe,{id:"start_time",type:"time",value:S.start_time,onChange:B=>E({...S,start_time:B.target.value})})})}),s.jsx(Ye,{label:" ",children:s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(fe,{id:"end_time",type:"time",value:S.end_time,onChange:B=>E({...S,end_time:B.target.value})})})})]}),s.jsx(Ye,{label:"",children:s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(fs,{id:"notes",value:S.notes,onChange:B=>E({...S,notes:B.target.value}),placeholder:"    ...",className:"h-24"})})})]}),s.jsxs(us,{open:b,onOpenChange:N,title:"  ",description:"   ",onSave:A,saveButtonText:" ",cancelButtonText:"",maxWidth:"600px",mode:"edit",isLoading:r,children:[s.jsx(Ye,{label:"",children:s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(fe,{id:"edit_session_date",type:"date",value:S.session_date,onChange:B=>E({...S,session_date:B.target.value}),min:Vr(new Date,"yyyy-MM-dd")})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Ye,{label:" ",children:s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(fe,{id:"edit_start_time",type:"time",value:S.start_time,onChange:B=>E({...S,start_time:B.target.value})})})}),s.jsx(Ye,{label:" ",children:s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(fe,{id:"edit_end_time",type:"time",value:S.end_time,onChange:B=>E({...S,end_time:B.target.value})})})})]}),s.jsx(Ye,{label:"",children:s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(fs,{id:"edit_notes",value:S.notes,onChange:B=>E({...S,notes:B.target.value}),placeholder:"    ...",className:"h-24"})})})]}),s.jsx(T,{open:D,onOpenChange:I,title:"  ",description:"              .",onConfirm:R,detailsTitle:"   :",details:ee?{:Cv(ee.session_date),:ee.start_time&&ee.end_time?`${xd(ee.start_time)} - ${xd(ee.end_time||"")}`:"-",:ee.notes||"-"}:null,deleteButtonText:"  ",cancelButtonText:""})]})}const vd=e=>{if(!e)return" ";try{const[t,r]=e.split(":"),n=parseInt(t,10),a=n>=12?"":"";return`${n>12?n-12:n===0?12:n}:${r} ${a}`}catch{return e}},Ev=e=>{if(!e)return" ";try{const t=new Date(e);return isNaN(t.getTime())?"  ":t.toLocaleDateString("ar",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(t){return console.error("   :",t),e}};function Tv(e){switch(e){case"present":return"";case"absent":return"";case"late":return"";case"excused":return"";default:return" "}}function ml(e){switch(e){case"present":return"bg-green-100 text-green-800 border-green-200";case"absent":return"bg-red-100 text-red-800 border-red-200";case"late":return"bg-amber-100 text-amber-800 border-amber-200";case"excused":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}}const Pv=[{value:"present",label:""},{value:"absent",label:""},{value:"late",label:""},{value:"excused",label:""}];async function jM(e){const{data:t,error:r}=await de.from("attendance").upsert(e,{onConflict:"circle_session_id,student_id"}).select();return r?(console.error("Error upserting attendance records:",r),{success:!1,error:r.message}):{success:!0,data:t}}async function _M(e,t){try{const{data:r,error:n}=await de.from("students").select(`
        *,
        guardian:guardian_id (
          id,
          full_name,
          phone_number
        )
      `).eq("study_circle_id",e);if(n)throw console.error("Error fetching students:",n),new Error(n.message);const{data:a,error:o}=await de.from("attendance").select("*").eq("circle_session_id",t);if(o)throw console.error("Error fetching attendance:",o),new Error(o.message);return r.map(i=>{const l=a.find(c=>c.student_id===i.id)||null;return{student:i,attendance:l}})}catch(r){throw console.error("Error in getStudentsWithAttendanceForSession:",r),r}}const Ov=async e=>{if(!e||e.length===0)return{};try{const{data:t,error:r}=await de.from("students").select("id, study_circle_id").in("study_circle_id",e).is("deleted_at",null);if(r)return console.error("      :",r),{};const n={};return e.forEach(a=>{n[a]=0}),t.forEach(a=>{a.study_circle_id&&n.hasOwnProperty(a.study_circle_id)&&n[a.study_circle_id]++}),n}catch(t){return console.error("      :",t),{}}};function NM({onNavigate:e,currentUser:t}){const{toast:r}=Tn(),[n,a]=h.useState([]),[o,i]=h.useState([]),[l,c]=h.useState(""),[d,u]=h.useState([]),[m,f]=h.useState(null),[x,y]=h.useState([]),[g,w]=h.useState({}),[v,p]=h.useState(!1),[b,N]=h.useState({}),[S,E]=h.useState(!1),[D,I]=h.useState(!1),[ee,J]=h.useState(!1),[T,_]=h.useState(null),[O,j]=h.useState(!1),[k,A]=h.useState(""),[F,R]=h.useState({status:"present",late_minutes:0,note:""}),z=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="superadmin";h.useEffect(()=>{(async()=>{if(!t){r({title:"",description:"   ",variant:"destructive"}),e("/login");return}E(!0);try{if(z){const Q=await Ma();if(i(Q),Q.length>0){const ie=Q.map(le=>le.id),ne=await Ov(ie);N(ne),c(Q[0].id)}}else if(t.role==="teacher"){const Q=await Os(t.id);if(a(Q),Q.length>0){const ie=Q.map(le=>le.id),ne=await Ov(ie);N(ne),c(Q[0].id)}}else r({title:"",description:"      ",variant:"destructive"}),e("/")}catch(Q){console.error("   :",Q),r({title:"",description:"    ",variant:"destructive"})}finally{E(!1)}})()},[t,e,r,z]),h.useEffect(()=>{(async()=>{if(l){E(!0);try{const Q=await _l(l),ie=new Date;ie.setHours(0,0,0,0);const le=Q.filter(Pe=>{const He=new Date(Pe.session_date);return He.setHours(0,0,0,0),He>=ie}).sort((Pe,He)=>new Date(Pe.session_date).getTime()-new Date(He.session_date).getTime());u(le),f(null)}catch(Q){console.error("    :",Q),r({title:"",description:"     ",variant:"destructive"})}finally{E(!1)}}})()},[l,r]),h.useEffect(()=>{(async()=>{if(!l||!m||!m.id){y([]),w({});return}I(!0);try{const Q=await _M(l,m.id);y(Q);const ie={};Q.forEach(({student:ne,attendance:le})=>{ie[ne.id]={student_id:ne.id,status:(le==null?void 0:le.status)||"present",late_minutes:(le==null?void 0:le.late_minutes)||0,note:(le==null?void 0:le.note)||""}}),w(ie),p(!1)}catch(Q){console.error("     :",Q),r({title:"",description:"      ",variant:"destructive"})}finally{I(!1)}})()},[l,m,r]);const Y=V=>{c(V)},W=V=>{f(V)},Z=(V,Q)=>{w(ie=>({...ie,[V]:{...ie[V],status:Q,late_minutes:Q==="late"&&ie[V].late_minutes||0}})),p(!0)},B=V=>{_(V);const Q=g[V];R({status:Q.status,late_minutes:Q.late_minutes||0,note:Q.note||""}),j(!0)},X=()=>{T&&(w(V=>({...V,[T]:{...V[T],status:F.status,late_minutes:F.status==="late"?F.late_minutes:0,note:F.note}})),j(!1),_(null),p(!0))},K=async()=>{if(!l||!m||!m.id||!t){r({title:"",description:"    ",variant:"destructive"});return}J(!0);try{const V=Object.values(g).map(ie=>({circle_session_id:m.id,student_id:ie.student_id,status:ie.status,late_minutes:ie.status==="late"?ie.late_minutes:0,note:ie.note,recorded_by:t.id})),Q=await jM(V);Q.success?(r({title:" ",description:"    "}),p(!1)):r({title:"",description:Q.error||"     ",variant:"destructive"})}catch(V){console.error("    :",V),r({title:"",description:"       ",variant:"destructive"})}finally{J(!1)}},ae=V=>{const Q={...g};Object.keys(Q).forEach(ie=>{Q[ie]={...Q[ie],status:V,late_minutes:V==="late"&&Q[ie].late_minutes||0}}),w(Q),p(!0)},te=V=>{const ie=(z?o:n).find(ne=>ne.id===V);return ie?ie.name:"  "},me=V=>{if(!V)return"  ";const Q=ve.gradeOptions.find(ie=>ie.value===V);return Q?Q.label:V},je=()=>{if(!g||Object.keys(g).length===0)return null;const V={present:0,absent:0,late:0,excused:0,total:Object.keys(g).length};return Object.values(g).forEach(Q=>{V[Q.status]++}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs(lt,{variant:"outline",className:`${ml("present")} border-green-200`,children:[": ",V.present]}),s.jsxs(lt,{variant:"outline",className:`${ml("absent")} border-red-200`,children:[": ",V.absent]}),s.jsxs(lt,{variant:"outline",className:`${ml("late")} border-amber-200`,children:[": ",V.late]}),s.jsxs(lt,{variant:"outline",className:`${ml("excused")} border-blue-200`,children:[": ",V.excused]}),s.jsxs(lt,{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-200",children:[": ",V.total]})]})};return s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-0 sm:px-0 py-1 sm:py-2",children:[s.jsxs(ut,{children:[s.jsx(wt,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 duration-300 rounded-t-2xl shadow-md",children:s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(yt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(Yw,{className:"h-5 w-5 text-yellow-300"}),"  "]}),s.jsx(Rt,{className:"text-xs md:text-sm text-green-100 mt-1",children:"    .           ."})]})})}),s.jsx(ot,{className:"space-y-6",children:s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-2xl shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 via-green-500 to-green-700 p-4",children:s.jsxs("h2",{className:"text-xl font-semibold text-white mb-0 flex items-center gap-2",children:[s.jsx(Pt,{className:"h-5 w-5"})," "]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsx("div",{className:"relative",children:(t==null?void 0:t.role)!=="teacher"&&s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Nr,{className:"absolute right-3 top-2.5 h-4 w-4 text-green-400"}),s.jsx(fe,{placeholder:"  ...",className:"pr-10 pl-4 py-2 border-2 border-green-300 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all duration-200 shadow-sm",value:k,onChange:V=>A(V.target.value)})]})}),S?s.jsxs("div",{className:"text-center py-10",children:[s.jsx(Vn,{className:"h-7 w-7 animate-spin mx-auto mb-2 text-green-600"}),s.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"  ..."})]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 p-1",children:(z?o:n).map(V=>{var Q;return s.jsxs("div",{className:`group relative rounded-xl border border-green-200 bg-white shadow-md transition-all duration-300 cursor-pointer overflow-hidden hover:shadow-xl hover:scale-102 ${l===V.id?"bg-green-50 border-green-500 shadow-lg ring-2 ring-green-300":""}`,onClick:()=>Y(V.id),children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-100 to-green-200 opacity-0 group-hover:opacity-25 transition-opacity duration-500 rounded-xl pointer-events-none"}),s.jsxs("div",{className:"p-3 relative z-10",children:[s.jsx("div",{className:"border-b border-green-200 pb-1 mb-2 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold text-green-700 group-hover:scale-105 transition-transform duration-300",children:[s.jsx(ur,{className:"h-3.5 w-3.5 text-yellow-400 group-hover:animate-bounce"}),V.name]})}),s.jsxs("div",{className:"space-y-1 text-gray-600 text-xs",children:[z&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vm,{className:"h-2.5 w-2.5 text-green-600 group-hover:scale-125 transition-transform"}),s.jsx("span",{children:":"})]}),s.jsx("span",{className:"truncate max-w-[100px]",children:((Q=V.teacher)==null?void 0:Q.full_name)||" "})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pt,{className:"h-2.5 w-2.5 text-green-600 group-hover:scale-125 transition-transform"}),s.jsx("span",{children:" :"})]}),s.jsx(lt,{className:"text-xs px-1.5 py-0.5 bg-green-100 text-green-700 border border-green-200 rounded-md",children:b[V.id]||0})]}),V.max_students&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Is,{className:"h-2.5 w-2.5 text-green-600 group-hover:scale-125 transition-transform"}),s.jsx("span",{children:" :"})]}),s.jsxs("span",{className:"font-medium",children:[V.max_students," "]})]})]})]})]},V.id)})})]})]})}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl shadow-sm overflow-hidden",children:[s.jsx(wt,{className:"pb-4 bg-gradient-to-r from-green-700 via-green-500 to-green-700 p-4",children:s.jsx("div",{className:"flex justify-between  items-center",children:s.jsxs(yt,{className:"text-sm font-bold text-white flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gh,{className:"h-5 w-5 text-green-700"}),l?`   : ${te(l)}`:"   "]}),l&&s.jsx(Rt,{className:"text-gray-700 text-xs sm:text-sm mt-1 sm:mt-0",children:s.jsxs(lt,{variant:"outline",className:"bg-green-100 text-green-800 border-green-300 sm:text-sm ",children:[b[l]||0," "]})})]})})}),s.jsx(ot,{className:"p-4",children:l?S?s.jsx("div",{className:"text-center text-xs text-gray-500 mt-4",children:"  ..."}):d.length===0?s.jsx("div",{className:"text-center text-xs text-gray-500 mt-4",children:s.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[s.jsx(Sr,{className:"h-6 w-6 text-yellow-500 mb-2"}),s.jsx("p",{className:"font-medium text-yellow-700 mb-1",children:"     "}),s.jsx("p",{className:"text-gray-600",children:"     "})]})}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-80 overflow-y-auto p-2",children:d.map(V=>{const Q=(m==null?void 0:m.session_date)===V.session_date;return s.jsxs("div",{className:`relative rounded-2xl border transition-all duration-300 cursor-pointer overflow-hidden p-3
                                    ${Q?"bg-green-50 border-green-500 shadow-lg ring-1 ring-green-300 animate-pulse":"bg-white border-gray-300 hover:bg-green-50 hover:shadow-md hover:scale-102"}`,onClick:()=>W(V),children:[!Q&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-50 to-green-100 opacity-0 hover:opacity-25 transition-opacity rounded-2xl pointer-events-none"}),s.jsxs("div",{className:"relative z-10 flex flex-col gap-1 text-gray-700 text-xs md:text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 font-medium group-hover:scale-105 transition-transform duration-200",children:[s.jsx(Gh,{className:`h-4 w-4 text-green-700 ${Q?"animate-bounce":""}`}),Ev(V.session_date),(()=>{const ie=new Date(V.session_date),ne=new Date;return ie.setHours(0,0,0,0),ne.setHours(0,0,0,0),ie.getTime()===ne.getTime()?s.jsx(lt,{className:"mr-1 bg-green-500 hover:bg-green-600 text-white text-xs px-1.5 py-0.5 rounded animate-pulse",children:""}):null})()]}),s.jsx("div",{className:"text-xs flex gap-1",children:V.start_time&&V.end_time?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-green-600 font-semibold",children:vd(V.start_time)}),s.jsx("span",{className:"text-gray-400",children:"-"}),s.jsx("span",{className:"text-yellow-600 font-semibold",children:vd(V.end_time)})]}):s.jsx("span",{className:"text-gray-500",children:" "})})]})]},`${V.study_circle_id}-${V.session_date}`)})}):s.jsx("div",{className:"text-center text-xs text-gray-500 mt-4",children:"   "})})]}),s.jsx("div",{className:"mb-4"}),l&&m&&s.jsxs(ut,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsxs(wt,{className:"pb-3 bg-gradient-to-b from-green-900 via-green-500 to-green-200 border-b border-green-200 rounded-t-2xl shadow-md",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(yt,{className:"text-xl md:text-2xl font-extrabold text-white flex items-center gap-2",children:[s.jsx(Gh,{className:"h-5 w-5 text-yellow-500 animate-bounce"}),"  - ",te(l)]}),s.jsxs(Rt,{className:"text-xs md:text-sm text-green-800 mt-1",children:[" ",Ev(m.session_date),m.start_time&&m.end_time&&s.jsxs("span",{className:"ml-2 text-gray-700 flex items-center gap-2",children:[s.jsx(Yr,{className:"h-5 w-5 text-gray-500"}),s.jsx("span",{className:"text-green-700 font-semibold",children:vd(m.start_time)}),"  ",s.jsx("span",{className:"text-yellow-600 font-semibold",children:vd(m.end_time)})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 md:mt-0",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>ae("present"),className:`flex items-center gap-2 rounded-3xl border-2 border-green-500 text-green-800 \r
          hover:bg-green-100 hover:text-green-900 hover:scale-105 transition-all duration-200 px-4 py-2 font-semibold`,children:[s.jsx(Fu,{className:"h-4 w-4"}),"  "]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>ae("absent"),className:`flex items-center gap-2 rounded-3xl border-2 border-red-400 text-red-800 \r
          hover:bg-red-100 hover:text-red-900 hover:scale-105 transition-all duration-200 px-4 py-2 font-semibold`,children:[s.jsx(vo,{className:"h-4 w-4"}),"  "]})]})]}),je()]}),s.jsx(ot,{children:D?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Vn,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-islamic-green"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"   ..."})]}):x.length===0?s.jsxs("div",{className:"text-center py-12 bg-green-50 rounded-lg",children:[s.jsx(Sr,{className:"h-10 w-10 mx-auto mb-4 text-amber-500"}),s.jsx("h3",{className:"text-lg font-medium mb-2 text-green-800",children:"     "}),s.jsx("p",{className:"text-sm text-gray-600",children:"      .     ."})]}):s.jsx(ds,{data:x.map(V=>({...V,id:V.student.id})),columns:[{key:"student",header:"  ",align:"right",render:V=>s.jsxs("div",{className:"flex items-center gap-3 py-2",children:[s.jsx(vm,{className:"h-6 w-6 text-gray-400"}),s.jsxs("div",{className:"min-w-[200px]",children:[s.jsx("div",{className:"font-medium text-base",children:V.student.full_name}),V.student.guardian&&s.jsxs("div",{className:"text-sm text-blue-600",children:[s.jsx("span",{className:"font-medium",children:" :"})," ",V.student.guardian.full_name]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:me(V.student.grade_level||V.student.grade)})]})]})},{key:"status",header:"  ",align:"center",render:V=>{var Q,ie,ne,le,Pe,He;return s.jsxs(st,{value:((Q=g[V.student.id])==null?void 0:Q.status)||"present",onValueChange:qe=>Z(V.student.id,qe),children:[s.jsx(rt,{className:`w-36 font-medium text-base px-4 py-2 ${((ie=g[V.student.id])==null?void 0:ie.status)==="present"?"bg-green-100 text-green-800 border-green-300":((ne=g[V.student.id])==null?void 0:ne.status)==="absent"?"bg-red-100 text-red-800 border-red-300":((le=g[V.student.id])==null?void 0:le.status)==="late"?"bg-amber-100 text-amber-800 border-amber-300":((Pe=g[V.student.id])==null?void 0:Pe.status)==="excused"?"bg-blue-100 text-blue-800 border-blue-300":"bg-gray-100 text-gray-800 border-gray-300"}`,children:s.jsx(at,{placeholder:" ",children:Tv(((He=g[V.student.id])==null?void 0:He.status)||"present")})}),s.jsx(nt,{children:Pv.map(qe=>s.jsx(Ne,{value:qe.value,className:qe.value==="present"?"text-green-700 font-medium":qe.value==="absent"?"text-red-700 font-medium":qe.value==="late"?"text-amber-700 font-medium":qe.value==="excused"?"text-blue-700 font-medium":"",children:qe.label},qe.value))})]})}},{key:"late_minutes",header:"  ",align:"center",render:V=>{var Q,ie;return((Q=g[V.student.id])==null?void 0:Q.status)==="late"?s.jsx(fe,{type:"number",min:0,value:((ie=g[V.student.id])==null?void 0:ie.late_minutes)||0,onChange:ne=>{const le=parseInt(ne.target.value)||0;w(Pe=>({...Pe,[V.student.id]:{...Pe[V.student.id],late_minutes:le<0?0:le}})),p(!0)},className:"w-28 text-center text-base py-2 px-3 bg-amber-50 border-amber-300"}):s.jsx("span",{className:"text-gray-400 text-base",children:"-"})}},{key:"note",header:"  ",align:"right",render:V=>{var Q,ie;return(Q=g[V.student.id])!=null&&Q.note?s.jsxs("div",{className:"flex items-center gap-2 py-2",children:[s.jsx(Ww,{className:"h-5 w-5 text-gray-500"}),s.jsx("span",{className:"truncate max-w-[250px] text-base",children:(ie=g[V.student.id])==null?void 0:ie.note})]}):s.jsx("span",{className:"text-gray-400 text-base",children:"-"})}},{key:"actions",header:"  ",align:"center",render:V=>s.jsxs(H,{variant:"ghost",size:"lg",onClick:()=>B(V.student.id),className:"text-islamic-green hover:text-islamic-green/80 hover:bg-islamic-green/10 rounded-xl px-6 py-3 transition-colors",children:[s.jsx(Qw,{className:"h-5 w-5 mr-2"}),""]})}],emptyMessage:"  ",className:"overflow-x-auto rounded-xl border-2 border-green-300 shadow-lg text-base",getRowClassName:(V,Q)=>`${Q%2===0?"bg-green-50 hover:bg-green-100":"bg-white hover:bg-green-50"} cursor-pointer transition-colors py-3`})}),s.jsxs(Yi,{className:"flex justify-between items-center bg-gradient-to-r from-green-50 via-green-100 to-green-50 px-4 py-3 rounded-b-xl border-t border-green-200",children:[s.jsx(H,{variant:"default",onClick:K,disabled:!v||ee||x.length===0,className:"bg-green-600 hover:bg-green-700 text-white shadow-md transition-transform duration-200 hover:scale-105",children:ee?s.jsxs(s.Fragment,{children:[s.jsx(Vn,{className:"h-4 w-4 mr-2 animate-spin text-white"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Z0,{className:"h-4 w-4 mr-2 text-white"}),"  "]})}),v&&s.jsxs("p",{className:"text-amber-600 text-sm flex items-center gap-1 font-medium",children:[s.jsx(Sr,{className:"h-4 w-4 text-amber-500"}),"   "]})]})]})]})]})})]}),s.jsx(us,{title:" ",description:T&&(()=>{const V=x.find(ie=>ie.student.id===T),Q=V==null?void 0:V.student;return Q?s.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[s.jsx("div",{className:"font-medium",children:Q.full_name}),Q.guardian&&s.jsxs("div",{className:"text-xs text-blue-600",children:[s.jsx("span",{className:"font-medium",children:" :"})," ",Q.guardian.full_name]})]}):null})(),open:O,onOpenChange:j,onSave:X,saveButtonText:" ",cancelButtonText:"",mode:"edit",maxWidth:"450px",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ye,{label:" ",children:s.jsxs(st,{value:F.status,onValueChange:V=>R({...F,status:V}),children:[s.jsx(rt,{id:"attendance-status",className:`text-sm rounded-md ${ml(F.status)}`,children:s.jsx(at,{children:Tv(F.status)})}),s.jsx(nt,{children:Pv.map(V=>s.jsx(Ne,{value:V.value,children:V.label},V.value))})]})}),F.status==="late"&&s.jsx(Ye,{label:" ",children:s.jsx(fe,{id:"late-minutes",type:"number",min:0,value:F.late_minutes||0,onChange:V=>{const Q=parseInt(V.target.value)||0;R({...F,late_minutes:Q<0?0:Q})},className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2"})}),s.jsx(Ye,{label:"",children:s.jsx(fs,{id:"attendance-note",value:F.note||"",onChange:V=>R({...F,note:V.target.value}),placeholder:"     ",rows:3,className:"bg-gray-50 border-gray-300 rounded-md text-sm py-1 px-2"})})]})})]})}const Xa=class Xa{constructor(){Po(this,"tableName","memorization_records")}static getInstance(){return Xa.instance||(Xa.instance=new Xa),Xa.instance}async testConnection(){try{const{count:t,error:r}=await de.from(this.tableName).select("*",{count:"exact",head:!0});return r?(console.error("Error testing memorization records table:",r),!1):(console.log("Memorization records table is accessible, count:",t),!0)}catch(t){return console.error("Error in testConnection:",t),!1}}async getAllMemorizationRecords(){try{console.log("Fetching all memorization records...");const{data:t,error:r}=await de.from(this.tableName).select(`
          *,
          student:student_id (
            id,
            full_name,
            grade_level,
            study_circle:study_circle_id (
              id,
              name
            ),
            guardian:guardian_id (
              id,
              full_name,
              phone_number
            )
          ),
          recorder:recorded_by (
            id,
            full_name,
            role
          )
        `).order("date",{ascending:!1});if(r){console.error("Supabase error fetching memorization records with joins:",r),console.log("Trying to fetch basic data without joins...");const{data:n,error:a}=await de.from(this.tableName).select("*").order("date",{ascending:!1});if(a)throw console.error("Error fetching basic memorization records:",a),a;return console.log("Successfully fetched basic memorization records:",(n==null?void 0:n.length)||0,"records"),n}return console.log("Successfully fetched memorization records with joins:",(t==null?void 0:t.length)||0,"records"),t}catch(t){throw console.error("Unexpected error in getAllMemorizationRecords:",t),t}}async getMemorizationRecordsByStudentId(t){const{data:r,error:n}=await de.from(this.tableName).select(`
        *,
        student:student_id (
          id,
          full_name,
          grade_level,
          guardian:guardian_id (
            id,
            full_name,
            phone_number
          )
        ),
        recorder:recorded_by (
          id,
          full_name
        )
      `).eq("student_id",t).order("date",{ascending:!1});if(n)throw console.error(`Error fetching memorization records for student ${t}:`,n),n;return r}async getMemorizationRecordsByTeacher(t){try{console.log("Fetching memorization records for teacher:",t);const{data:r,error:n}=await de.from(this.tableName).select(`
          *,
          student:student_id (
            id,
            full_name,
            grade_level,
            study_circle:study_circle_id (
              id,
              name
            ),
            guardian:guardian_id (
              id,
              full_name,
              phone_number
            )
          ),
          recorder:recorded_by (
            id,
            full_name,
            role
          )
        `).eq("recorded_by",t).order("date",{ascending:!1});if(n)throw console.error(`Error fetching memorization records for teacher ${t}:`,n),n;return console.log(`Found ${r.length} memorization records for teacher ${t}`),r}catch(r){return console.error(`Unexpected error in getMemorizationRecordsByTeacher for ${t}:`,r),[]}}async getMemorizationRecordById(t){const{data:r,error:n}=await de.from(this.tableName).select(`
        *,
        student:student_id (
          id,
          full_name,
          grade_level,
          study_circle:study_circle_id (
            id,
            name
          )
        ),
        recorder:recorded_by (
          id,
          full_name
        )
      `).eq("id",t).single();if(n)throw console.error(`Error fetching memorization record ${t}:`,n),n;return r}async createMemorizationRecord(t){try{const{data:r,error:n}=await de.from(this.tableName).insert(t).select().maybeSingle();if(n)throw console.error("Error inserting memorization record:",n),n;if(!r)throw new Error("Failed to insert memorization record, no data returned");const{data:a,error:o}=await de.from(this.tableName).select(`
          *,
          student:student_id (
            id,
            full_name,
            grade_level,
            study_circle:study_circle_id (
              id,
              name
            ),
            guardian:guardian_id (
              id,
              full_name,
              phone_number
            )
          ),
          recorder:recorded_by (
            id,
            full_name,
            role
          )
        `).eq("id",r.id).maybeSingle();return o?(console.error("Error fetching complete memorization record:",o),r):a||r}catch(r){throw console.error("Error in createMemorizationRecord:",r),r}}async updateMemorizationRecord(t){try{const{id:r,...n}=t,{data:a,error:o}=await de.from(this.tableName).select("id").eq("id",r).maybeSingle();if(o)throw console.error(`Error checking if memorization record ${r} exists:`,o),o;if(!a)throw console.error(`Memorization record with ID ${r} does not exist`),new Error(`Memorization record with ID ${r} does not exist`);const{data:i,error:l,status:c,statusText:d}=await de.from(this.tableName).update(n).eq("id",r).select("*").maybeSingle();if(console.log(`Update response for record ${r}:`,{data:i,error:l}),l)throw console.error(`Error updating memorization record ${r}:`,l),l;let u=i;console.log(`Re-fetching data for record ${r} after update`);const{data:m,error:f}=await de.from(this.tableName).select("*").eq("id",r).maybeSingle();if(f)if(console.error(`Error refetching basic record data for ${r}:`,f),u)console.log(`Using updatedData from previous response for ${r}`);else throw f;else if(m)console.log(`Successfully re-fetched data for record ${r}`,m),u=m;else if(console.error(`Could not find updated record with ID ${r} during refetch`),!u)throw new Error(`Record with ID ${r} not found after update`);console.log(`Fetching complete record data with joins for ${r}`);const{data:x,error:y}=await de.from(this.tableName).select(`
          *,
          student:student_id (
            id,
            full_name,
            grade_level,
            study_circle:study_circle_id (
              id,
              name
            ),
            guardian:guardian_id (
              id,
              full_name,
              phone_number
            )
          ),
          recorder:recorded_by (
            id,
            full_name,
            role
          )
        `).eq("id",r).maybeSingle();return console.log(`Complete record fetch response for ${r}:`,{success:!y,hasData:!!x,dataStructure:x?Object.keys(x):null}),y?(console.error(`Error fetching complete memorization record ${r}:`,y),console.log(`Debug: basicData available for ID ${r}:`,!!u),u):x?(console.log(`Successfully updated memorization record ${r} with complete data`),x):(console.warn(`No full data returned for memorization record ${r}, using basic data`),u)}catch(r){throw console.error(`Error in updateMemorizationRecord for ID ${t.id}:`,r),r}}async deleteMemorizationRecord(t){const{error:r}=await de.from(this.tableName).delete().eq("id",t);if(r)throw console.error(`Error deleting memorization record ${t}:`,r),r}async getStudentMemorizationStats(t){const{data:r,error:n}=await de.from(this.tableName).select("*").eq("student_id",t);if(n)throw console.error(`Error fetching memorization stats for student ${t}:`,n),n;const a=r,o=a.filter(u=>u.type==="new").length,i=a.filter(u=>u.type==="review").length,l=a.filter(u=>u.type==="sabqi").length,c=a.filter(u=>u.score!==void 0&&u.score!==null),d=c.length>0?c.reduce((u,m)=>u+(m.score||0),0)/c.length:0;return{totalNew:o,totalReview:i,totalSabqi:l,avgScore:d}}};Po(Xa,"instance");let Km=Xa;const Ks=Km.getInstance(),Ym=async()=>{try{console.log("  ...");const{data:e,error:t}=await de.from("profiles").select("id, full_name, role").or("role.eq.teacher,role.eq.admin").is("deleted_at",null).order("full_name",{ascending:!0});return t?console.error("     :",t):console.log("  :",e==null?void 0:e.length),e}catch(e){return console.error("     :",e),[]}},Qm=async e=>{try{console.log("   :",e);const{data:t,error:r}=await de.from("study_circles").select("id").eq("teacher_id",e).is("deleted_at",null);if(r)return console.error("    :",r),[];if(!t||t.length===0)return console.log("    "),[];const n=t.map(i=>i.id);console.log("  :",n);const{data:a,error:o}=await de.from("students").select(`
        *,
        study_circle:study_circle_id (
          id,
          name,
          teacher_id
        ),
        guardian:guardian_id (
          id,
          full_name,
          phone_number
        )
      `).in("study_circle_id",n).is("deleted_at",null);return o?(console.error("    :",o),[]):(console.log(`   ${(a==null?void 0:a.length)||0}  `),a||[])}catch(t){return console.error("      :",t),[]}};function SM(e){switch(e){case"new":return" ";case"review":return"";case"sabqi":return" ";default:return e}}function kM(e){switch(e){case"new":return"bg-green-100 text-green-800 border-green-200";case"review":return"bg-blue-100 text-blue-800 border-blue-200";case"sabqi":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}}const Av=[{value:"new",label:" "},{value:"review",label:""},{value:"sabqi",label:" "}],Wo=[{number:1,name:"",ayahs:7},{number:2,name:"",ayahs:286},{number:3,name:" ",ayahs:200},{number:4,name:"",ayahs:176},{number:5,name:"",ayahs:120},{number:6,name:"",ayahs:165},{number:7,name:"",ayahs:206},{number:8,name:"",ayahs:75},{number:9,name:"",ayahs:129},{number:10,name:"",ayahs:109},{number:11,name:"",ayahs:123},{number:12,name:"",ayahs:111},{number:13,name:"",ayahs:43},{number:14,name:"",ayahs:52},{number:15,name:"",ayahs:99},{number:16,name:"",ayahs:128},{number:17,name:"",ayahs:111},{number:18,name:"",ayahs:110},{number:19,name:"",ayahs:98},{number:20,name:"",ayahs:135},{number:21,name:"",ayahs:112},{number:22,name:"",ayahs:78},{number:23,name:"",ayahs:118},{number:24,name:"",ayahs:64},{number:25,name:"",ayahs:77},{number:26,name:"",ayahs:227},{number:27,name:"",ayahs:93},{number:28,name:"",ayahs:88},{number:29,name:"",ayahs:69},{number:30,name:"",ayahs:60},{number:31,name:"",ayahs:34},{number:32,name:"",ayahs:30},{number:33,name:"",ayahs:73},{number:34,name:"",ayahs:54},{number:35,name:"",ayahs:45},{number:36,name:"",ayahs:83},{number:37,name:"",ayahs:182},{number:38,name:"",ayahs:88},{number:39,name:"",ayahs:75},{number:40,name:"",ayahs:85},{number:41,name:"",ayahs:54},{number:42,name:"",ayahs:53},{number:43,name:"",ayahs:89},{number:44,name:"",ayahs:59},{number:45,name:"",ayahs:37},{number:46,name:"",ayahs:35},{number:47,name:"",ayahs:38},{number:48,name:"",ayahs:29},{number:49,name:"",ayahs:18},{number:50,name:"",ayahs:45},{number:51,name:"",ayahs:60},{number:52,name:"",ayahs:49},{number:53,name:"",ayahs:62},{number:54,name:"",ayahs:55},{number:55,name:"",ayahs:78},{number:56,name:"",ayahs:96},{number:57,name:"",ayahs:29},{number:58,name:"",ayahs:22},{number:59,name:"",ayahs:24},{number:60,name:"",ayahs:13},{number:61,name:"",ayahs:14},{number:62,name:"",ayahs:11},{number:63,name:"",ayahs:11},{number:64,name:"",ayahs:18},{number:65,name:"",ayahs:12},{number:66,name:"",ayahs:12},{number:67,name:"",ayahs:30},{number:68,name:"",ayahs:52},{number:69,name:"",ayahs:52},{number:70,name:"",ayahs:44},{number:71,name:"",ayahs:28},{number:72,name:"",ayahs:28},{number:73,name:"",ayahs:20},{number:74,name:"",ayahs:56},{number:75,name:"",ayahs:40},{number:76,name:"",ayahs:31},{number:77,name:"",ayahs:50},{number:78,name:"",ayahs:40},{number:79,name:"",ayahs:46},{number:80,name:"",ayahs:42},{number:81,name:"",ayahs:29},{number:82,name:"",ayahs:19},{number:83,name:"",ayahs:36},{number:84,name:"",ayahs:25},{number:85,name:"",ayahs:22},{number:86,name:"",ayahs:17},{number:87,name:"",ayahs:19},{number:88,name:"",ayahs:26},{number:89,name:"",ayahs:30},{number:90,name:"",ayahs:20},{number:91,name:"",ayahs:15},{number:92,name:"",ayahs:21},{number:93,name:"",ayahs:11},{number:94,name:"",ayahs:8},{number:95,name:"",ayahs:8},{number:96,name:"",ayahs:19},{number:97,name:"",ayahs:5},{number:98,name:"",ayahs:8},{number:99,name:"",ayahs:8},{number:100,name:"",ayahs:11},{number:101,name:"",ayahs:11},{number:102,name:"",ayahs:8},{number:103,name:"",ayahs:3},{number:104,name:"",ayahs:9},{number:105,name:"",ayahs:5},{number:106,name:"",ayahs:4},{number:107,name:"",ayahs:7},{number:108,name:"",ayahs:3},{number:109,name:"",ayahs:6},{number:110,name:"",ayahs:3},{number:111,name:"",ayahs:5},{number:112,name:"",ayahs:4},{number:113,name:"",ayahs:5},{number:114,name:"",ayahs:6}];function so(e){const t=Wo.find(r=>r.number===e);return t?t.name:` ${e}`}function yd(e){return e.from_surah===e.to_surah?`${so(e.from_surah)} (${e.from_ayah} - ${e.to_ayah})`:`${so(e.from_surah)} (${e.from_ayah}) - ${so(e.to_surah)} (${e.to_ayah})`}function CM(e){return e==null?"-":e.toFixed(2)}function EM(e){if(!e)return" ";const t=[];return e.lahn_jali&&t.push(` : ${e.lahn_jali}`),e.lahn_khafi&&t.push(` : ${e.lahn_khafi}`),Object.entries(e).forEach(([r,n])=>{r!=="lahn_jali"&&r!=="lahn_khafi"&&n&&t.push(`${r}: ${n}`)}),t.length>0?t.join(" "):" "}const TM=({onNavigate:e,currentUser:t})=>{var Oe,Re,ht,ft,re,Ee,et;const[r,n]=h.useState([]),[a,o]=h.useState([]),[i,l]=h.useState([]),[c,d]=h.useState([]),[u,m]=h.useState([]),[f,x]=h.useState("all-students"),[y,g]=h.useState("all-teachers"),[w,v]=h.useState("all-circles"),[p,b]=h.useState(null),[N,S]=h.useState(!1),[E,D]=h.useState("all"),[I,ee]=h.useState(""),[J,T]=h.useState(!0),[_,O]=h.useState(t),[j,k]=h.useState((t==null?void 0:t.role)==="teacher"?"my-records":"all-records"),[A,F]=h.useState(!0);h.useState("cards");const[R,z]=h.useState(0),[Y,W]=h.useState(""),[Z,B]=h.useState(""),[X,K]=h.useState([]),[ae,te]=h.useState([]),[me,je]=h.useState(!1),[V,Q]=h.useState(null),{toast:ie}=Tn(),[ne,le]=h.useState({student_id:"",date:new Date().toISOString().split("T")[0],type:"new",from_surah:1,from_ayah:1,to_surah:1,to_ayah:1,score:void 0,tajweed_errors:void 0,notes:"",recorded_by:"",circle_id:""}),[Pe,He]=h.useState({});h.useEffect(()=>{(async()=>{try{if(T(!0),!await Ks.testConnection()){F(!1),ie({title:"    ",description:"      (create_memorization_table.sql)",variant:"destructive"}),T(!1);return}const se=t;console.log("MemorizationRecords - Current User:",se),O(se);const $e=new URLSearchParams(window.location.search).get("circle");if($e&&v($e),K([]),te([]),se&&se.role==="teacher"){console.log("Loading data for teacher role");const Te=await Qm(se.id);l(Te);const $=(await qm(se.id)).map(ze=>{const mt=Te.filter(rr=>rr.study_circle_id===ze.id||rr.study_circle&&rr.study_circle.id===ze.id);return{...ze,students_count:mt.length}});m($);const ke=await Ks.getMemorizationRecordsByTeacher(se.id);n(ke),o(ke),k("my-records")}else{console.log("Loading data for admin/superadmin role");const Te=await hc();l(Te);const kt=await Ym();console.log("   (admin/superadmin):",kt),!kt||kt.length===0?(console.warn("    !"),se&&(se.role==="admin"||se.role==="teacher")?(console.log("   ()   :",se),d([{id:se.id,full_name:se.full_name||" ",display_name:se.full_name||" ",role:se.role}])):d([])):d(kt);const ke=(await Ma()).map(mt=>{const rr=Te.filter(At=>At.study_circle_id===mt.id||At.study_circle&&At.study_circle.id===mt.id);return{...mt,students_count:rr.length}});m(ke);const ze=await Ks.getAllMemorizationRecords();n(ze),o(ze),k("all-records")}}catch(L){console.error("Error loading data:",L),ie({title:"",description:"    ",variant:"destructive"})}finally{T(!1)}})()},[ie,R]),h.useEffect(()=>{if(w&&w!=="all-circles"){const C=i.filter(L=>L.study_circle_id===w||L.study_circle&&L.study_circle.id===w);f!=="all-students"&&!C.some(L=>L.id===f)&&x("all-students")}},[w,i,f]),h.useEffect(()=>{console.log("Filtering criteria changed, updating filtered records"),console.log("Records to filter:",r.length),console.log("Filter criteria:",{circleId:w,studentId:f,teacherId:y,type:E,searchQuery:I?I.substring(0,20)+"...":"",activeTab:j});let C=[...r];if(w&&w!=="all-circles"){const L=i.filter(se=>se.study_circle&&se.study_circle.id===w).map(se=>se.id);L.length>0&&(C=C.filter(se=>L.includes(se.student_id)))}if(f&&f!=="all-students"&&(C=C.filter(L=>L.student_id===f)),y&&y!=="all-teachers"&&(C=C.filter(L=>{var se;return((se=L.recorder)==null?void 0:se.id)===y})),E!=="all"&&(C=C.filter(L=>L.type===E)),I.trim()){const L=I.toLowerCase();C=C.filter(se=>{var pe,$e,Te,kt,$,ke;return(($e=(pe=se.student)==null?void 0:pe.full_name)==null?void 0:$e.toLowerCase().includes(L))||(($=(kt=(Te=se.student)==null?void 0:Te.guardian)==null?void 0:kt.full_name)==null?void 0:$.toLowerCase().includes(L))||yd(se).toLowerCase().includes(L)||((ke=se.notes)==null?void 0:ke.toLowerCase().includes(L))})}j==="my-records"&&_&&(C=C.filter(L=>L.recorded_by===_.id)),console.log(`Filtered to ${C.length} records`),o(C)},[r,f,y,w,E,I,j,_,i]);const qe=(C,L)=>{const se=Wo.find(pe=>pe.number===L);se&&le(C==="from_surah"?pe=>({...pe,[C]:L,from_ayah:pe.from_ayah>se.ayahs?1:pe.from_ayah}):pe=>({...pe,[C]:L,to_ayah:pe.to_ayah>se.ayahs?1:pe.to_ayah}))},Ot=()=>{const C={};ne.student_id||(C.student_id="  "),ne.recorded_by||(C.recorded_by="  /"),ne.from_surah>ne.to_surah&&(C.from_surah="       "),ne.from_surah===ne.to_surah&&ne.from_ayah>ne.to_ayah&&(C.from_ayah="       ");const L=Wo.find(pe=>pe.number===ne.from_surah);L&&(ne.from_ayah<1||ne.from_ayah>L.ayahs)&&(C.from_ayah=`      1  ${L.ayahs}`);const se=Wo.find(pe=>pe.number===ne.to_surah);return se&&(ne.to_ayah<1||ne.to_ayah>se.ayahs)&&(C.to_ayah=`      1  ${se.ayahs}`),ne.score!==void 0&&(ne.score<0||ne.score>100)&&(C.score="     0  100"),He(C),Object.keys(C).length===0},q=async()=>{if(Ot())try{T(!0);const C={...ne,recorded_by:ne.recorded_by||(_?_.id:void 0)};"circle_id"in C&&delete C.circle_id;let L;if(p){const $e={id:p.id,...C};console.log("Updating record with data:",$e),L=await Ks.updateMemorizationRecord($e),console.log("Update response from service:",L),ie({title:" ",description:"    "})}else console.log("Creating new record with data:",C),L=await Ks.createMemorizationRecord(C),console.log("Create response from service:",L),ie({title:" ",description:"    "});console.log("Updating records state with saved record:",L);const se=p?r.map($e=>$e.id===L.id?{...L}:$e):[{...L},...r];console.log("Setting new records state with length:",se.length),n(se);let pe=[...se];if(w&&w!=="all-circles"){const $e=i.filter(Te=>Te.study_circle&&Te.study_circle.id===w).map(Te=>Te.id);$e.length>0&&(pe=pe.filter(Te=>$e.includes(Te.student_id)))}if(f&&f!=="all-students"&&(pe=pe.filter($e=>$e.student_id===f)),y&&y!=="all-teachers"&&(pe=pe.filter($e=>{var Te;return((Te=$e.recorder)==null?void 0:Te.id)===y})),E!=="all"&&(pe=pe.filter($e=>$e.type===E)),I.trim()){const $e=I.toLowerCase();pe=pe.filter(Te=>{var kt,$,ke,ze,mt,rr;return(($=(kt=Te.student)==null?void 0:kt.full_name)==null?void 0:$.toLowerCase().includes($e))||((mt=(ze=(ke=Te.student)==null?void 0:ke.guardian)==null?void 0:ze.full_name)==null?void 0:mt.toLowerCase().includes($e))||yd(Te).toLowerCase().includes($e)||((rr=Te.notes)==null?void 0:rr.toLowerCase().includes($e))})}j==="my-records"&&_&&(pe=pe.filter($e=>$e.recorded_by===_.id)),o(pe),S(!1),Kt(),console.log("Scheduling forced refresh after operation"),setTimeout(()=>{Ge()},300)}catch(C){console.error("Error saving record:",C);let L="    ";C instanceof Error&&(L+=`: ${C.message}`),ie({title:"",description:L,variant:"destructive"})}finally{T(!1)}},_e=async C=>{Q(C),je(!0)},Le=async()=>{if(V)try{T(!0),console.log(`Deleting record with ID: ${V}`),await Ks.deleteMemorizationRecord(V),console.log("Updating records state after deletion");const C=r.filter(L=>L.id!==V);n(C),o(L=>L.filter(se=>se.id!==V)),ie({title:" ",description:"    "}),console.log("Scheduling forced refresh after deletion"),setTimeout(()=>{Ge()},300)}catch(C){console.error("Error deleting record:",C);let L="    ";C instanceof Error&&(L+=`: ${C.message}`),ie({title:"",description:L,variant:"destructive"})}finally{T(!1)}},Ge=async()=>{console.log("Manual refresh of all data requested"),T(!0);try{let C;_&&_.role==="teacher"?(console.log("Reloading teacher-specific records"),C=await Ks.getMemorizationRecordsByTeacher(_.id)):(console.log("Reloading all records"),C=await Ks.getAllMemorizationRecords()),console.log(`Loaded ${C.length} records during refresh`),n(C);let L=[...C];if(w&&w!=="all-circles"){const se=i.filter(pe=>pe.study_circle&&pe.study_circle.id===w).map(pe=>pe.id);se.length>0&&(L=L.filter(pe=>se.includes(pe.student_id)))}if(f&&f!=="all-students"&&(L=L.filter(se=>se.student_id===f)),y&&y!=="all-teachers"&&(L=L.filter(se=>{var pe;return((pe=se.recorder)==null?void 0:pe.id)===y})),E!=="all"&&(L=L.filter(se=>se.type===E)),I.trim()){const se=I.toLowerCase();L=L.filter(pe=>{var $e,Te,kt,$,ke,ze;return((Te=($e=pe.student)==null?void 0:$e.full_name)==null?void 0:Te.toLowerCase().includes(se))||((ke=($=(kt=pe.student)==null?void 0:kt.guardian)==null?void 0:$.full_name)==null?void 0:ke.toLowerCase().includes(se))||yd(pe).toLowerCase().includes(se)||((ze=pe.notes)==null?void 0:ze.toLowerCase().includes(se))})}j==="my-records"&&_&&(L=L.filter(se=>se.recorded_by===_.id)),console.log(`Filtered to ${L.length} records after refresh`),o(L)}catch(C){console.error("Error during refresh:",C),ie({title:"  ",description:"    ",variant:"destructive"})}finally{T(!1),z(C=>C+1)}},$t=C=>{var L,se;if(b(C),le({student_id:C.student_id,date:C.date,type:C.type,from_surah:C.from_surah,from_ayah:C.from_ayah,to_surah:C.to_surah,to_ayah:C.to_ayah,score:C.score,tajweed_errors:C.tajweed_errors,notes:C.notes||"",recorded_by:C.recorded_by,circle_id:(L=C.student)!=null&&L.study_circle?C.student.study_circle.id:""}),W(C.recorded_by),C.recorded_by){const pe=u.filter(Te=>Te.teacher_id===C.recorded_by||Te.teacher&&Te.teacher.id===C.recorded_by);K(pe);const $e=(se=C.student)!=null&&se.study_circle?C.student.study_circle.id:"";if($e){B($e);const Te=i.filter(kt=>kt.study_circle&&kt.study_circle.id===$e);te(Te)}else{const Te=pe.map($=>$.id),kt=i.filter($=>$.study_circle&&Te.includes($.study_circle.id));te(kt)}}else K(u),te(i);S(!0),Xe(0)},Kt=()=>{(_==null?void 0:_.role)==="teacher"&&_.id,le({student_id:"",date:new Date().toISOString().split("T")[0],type:"new",from_surah:1,from_ayah:1,to_surah:1,to_ayah:1,score:void 0,tajweed_errors:void 0,notes:"",recorded_by:_?_.id:""}),b(null),He({})},Ct=()=>{if(Kt(),S(!0),console.log(`  .   : ${u.length}`),K(u),te(i),(_==null?void 0:_.role)==="teacher"){console.log(`  : ${_.id}`),W(_.id),le(L=>({...L,recorded_by:_.id}));const C=u.filter(L=>L.teacher_id===_.id||L.teacher&&L.teacher.id===_.id);K(C),B(""),le(L=>({...L,circle_id:"",student_id:""})),te([])}else K(u),te(i)},Qt=C=>{if(B(C),le(L=>({...L,circle_id:C})),C&&C!=="all-circles"){const L=i.filter(se=>se.study_circle&&se.study_circle.id===C);te(L),le(se=>({...se,student_id:""}))}else if(Y&&Y!=="all-teachers"){const L=X.map(pe=>pe.id),se=i.filter(pe=>pe.study_circle&&L.includes(pe.study_circle.id));te(se),le(pe=>({...pe,student_id:""}))}else te(i),le(L=>({...L,student_id:""}))},xt=(C,L)=>{le(se=>({...se,[C]:L})),He(se=>{const pe={...se};return C in pe&&delete pe[C],C==="from_ayah"&&pe.to_ayah&&delete pe.to_ayah,C==="to_ayah"&&pe.from_ayah&&delete pe.from_ayah,pe})},[_t,Xe]=h.useState(0),zt=[{key:"student",label:""},{key:"memorization",label:""},{key:"recitation",label:""}],Xt=C=>{const L={};return C===0&&(ne.recorded_by||(L.recorded_by="  "),ne.student_id||(L.student_id="  ")),C===1&&(ne.date||(L.date="  "),ne.type||(L.type="  "),ne.from_surah||(L.from_surah="  "),ne.to_surah||(L.to_surah="  "),ne.from_surah&&ne.to_surah&&ne.from_surah>ne.to_surah&&(L.to_surah="       "),(!ne.from_ayah||ne.from_ayah<1)&&(L.from_ayah="   "),(!ne.to_ayah||ne.to_ayah<1)&&(L.to_ayah="   "),ne.from_surah===ne.to_surah&&ne.from_ayah&&ne.to_ayah&&ne.from_ayah>ne.to_ayah&&(L.to_ayah="       ")),He(se=>({...se,...L})),Object.keys(L).length===0},M=()=>{Xt(_t)&&Xe(C=>Math.min(C+1,zt.length-1))},G=()=>Xe(C=>Math.max(C-1,0)),ge=(C,L)=>{const se=L===""?void 0:parseInt(L,10);le(pe=>({...pe,tajweed_errors:{...pe.tajweed_errors,[C]:se}}))},Me=h.useMemo(()=>{if(!c||c.length===0)return console.log("    !"),[];console.log("    :",c.length),console.log(" :",c.map(L=>({id:L.id,name:L.full_name,role:L.role})));let C=[];return(_==null?void 0:_.role)==="teacher"?(C=c.filter(L=>L.id===_.id),console.log(":   ",C.map(L=>({id:L.id,name:L.full_name,role:L.role})))):((_==null?void 0:_.role)==="admin"||(_==null?void 0:_.role)==="superadmin")&&(C=c,console.log("/:    ",C.map(L=>({id:L.id,name:L.full_name,role:L.role})))),console.log("   :",C.length),C},[c,_]),Ve=h.useMemo(()=>y==="all-teachers"?u:u.filter(C=>C.teacher_id===y||C.teacher&&C.teacher.id===y),[u,y]),Ie=h.useMemo(()=>{if(!i||i.length===0)return[];let C=[...i];if(y!=="all-teachers"){const L=Ve.map(se=>se.id);C=C.filter(se=>se.study_circle_id&&L.includes(se.study_circle_id)||se.study_circle&&L.includes(se.study_circle.id))}if(w!=="all-circles"&&(C=C.filter(L=>L.study_circle_id===w||L.study_circle&&L.study_circle.id===w)),I.trim()){const L=I.toLowerCase();C=C.filter(se=>{var pe,$e;return((pe=se.full_name)==null?void 0:pe.toLowerCase().includes(L))||se.guardian&&(($e=se.guardian.full_name)==null?void 0:$e.toLowerCase().includes(L))})}return C},[i,y,w,Ve,I]),be=C=>{if(C==="select-teacher"){xt("recorded_by",""),W(""),K([]),te([]),le(L=>({...L,circle_id:"",student_id:""}));return}if(xt("recorded_by",C),W(C),C&&C!=="all-teachers"){console.log(`Filtering circles for teacher: ${C}`);const L=u.filter(se=>se.teacher_id===C||se.teacher&&se.teacher.id===C);console.log(`Found ${L.length} circles for the selected teacher`),L.length===0?(console.log("No circles found for teacher, showing all circles"),K(u)):K(L),B(""),le(se=>({...se,circle_id:"",student_id:""})),te([])}else K(u),te(i)};return s.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-0 sm:px-0 py-1 sm:py-2",children:[s.jsxs(ut,{children:[s.jsx(wt,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 duration-300 rounded-t-2xl shadow-md",children:s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(yt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(Yw,{className:"h-5 w-5 text-yellow-300"}),"  "]}),s.jsx(Rt,{className:"text-sm md:text-sm text-green-100 mt-1",children:"          ."})]})})}),s.jsxs(ot,{children:[s.jsxs("div",{className:`flex flex-col md:flex-row justify-between items-center gap-4 mb-6 \r
                bg-white dark:bg-gray-900 p-4 rounded-2xl shadow-md border border-green-200 dark:border-green-700`,children:[s.jsx(uc,{value:j,onValueChange:k,className:"w-full md:w-[420px] bg-green-50 rounded-xl shadow-inner p-1",children:s.jsxs($i,{className:"grid w-full grid-cols-2 md:grid-cols-2 gap-1 rounded-xl bg-white dark:bg-gray-900 shadow-sm ring-1 ring-green-300",children:[s.jsxs(Gr,{value:"all-records",className:`\r
                              flex items-center justify-center gap-2 text-center text-sm font-medium\r
                              rounded-lg text-green-800\r
                              hover:bg-green-100 hover:text-green-900\r
                              data-[state=active]:bg-islamic-green\r
                              data-[state=active]:text-white\r
                              transition-all duration-300\r
                            `,title:" ",children:[" ",s.jsx("span",{className:"hidden sm:inline",children:" "})]}),s.jsxs(Gr,{value:"my-records",className:`\r
                              flex items-center justify-center gap-2 text-center text-sm font-medium\r
                              rounded-lg text-green-800\r
                              hover:bg-green-100 hover:text-green-900\r
                              data-[state=active]:bg-islamic-green\r
                              data-[state=active]:text-white\r
                              transition-all duration-300\r
                            `,title:" ",children:[" ",s.jsx("span",{className:"hidden sm:inline",children:""})]})]})}),s.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[s.jsxs(H,{variant:"outline",className:`flex items-center gap-2 rounded-3xl \r
                          bg-green-600 hover:bg-green-700 \r
                          dark:bg-green-700 dark:hover:bg-green-600 \r
                          text-white shadow-lg hover:scale-105 \r
                          transition-transform duration-200 \r
                          px-4 py-1.5 font-semibold`,onClick:Ge,title:" ",children:[s.jsx(Vn,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:""})]}),s.jsxs(H,{onClick:Ct,variant:"outline",className:`flex items-center gap-2 rounded-3xl \r
                          bg-green-600 hover:bg-green-700 \r
                          dark:bg-green-700 dark:hover:bg-green-600 \r
                          text-white shadow-lg hover:scale-105 \r
                          transition-transform duration-200 \r
                          px-4 py-1.5 font-semibold`,title:"  ",children:[s.jsx(Qr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"  "})]})]})]}),s.jsxs("div",{className:`flex flex-col md:flex-row justify-between items-center gap-4 mb-6 bg-white \r
                    dark:bg-gray-900 p-4 md:p-6 rounded-2xl shadow-md border border-green-200 dark:border-green-700`,children:[s.jsx("div",{className:"w-full md:flex-1 min-w-0 md:min-w-[180px]",children:s.jsx(fe,{title:"          ...",placeholder:"          ...",value:I,onChange:C=>ee(C.target.value),className:"w-full rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green focus:border-islamic-green text-sm text-gray-800 dark:text-gray-200 transition-all duration-200"})}),s.jsx("div",{className:"w-full md:min-w-[140px]",children:s.jsxs(st,{value:y,onValueChange:C=>{g(C),v("all-circles"),x("all-students")},children:[s.jsx(rt,{className:"w-full rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(at,{placeholder:"  "})}),s.jsxs(nt,{children:[s.jsx(Ne,{value:"all-teachers",children:" "}),Me.length>0?Me.map(C=>s.jsxs(Ne,{value:C.id,children:[C.full_name??` ${C.id.slice(0,4)}`,C.role&&(C.role==="teacher"?" ()":` (${C.role==="admin"?"":C.role})`)]},C.id)):s.jsx(Ne,{disabled:!0,value:"__no__",children:"    "})]})]})}),s.jsx("div",{className:"w-full md:min-w-[140px]",children:s.jsxs(st,{value:w,onValueChange:C=>{v(C),C!=="all-circles"&&x("all-students")},disabled:y==="all-teachers"&&Ve.length===0,children:[s.jsx(rt,{className:"w-full rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(at,{placeholder:y==="all-teachers"?"  ":Ve.length===0?"  ":" "})}),s.jsxs(nt,{children:[s.jsx(Ne,{value:"all-circles",children:" "}),Ve.map(C=>s.jsxs(Ne,{value:C.id,children:[C.name||` ${C.id}`," ",y==="all-teachers"&&C.teacher?` - ${C.teacher.full_name}`:""," (",C.students_count," )"]},C.id))]})]})}),s.jsx("div",{className:"w-full md:min-w-[140px]",children:s.jsxs(st,{value:f,onValueChange:x,disabled:Ie.length===0,children:[s.jsx(rt,{className:"w-full rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(at,{placeholder:Ie.length===0?"  ":"  "})}),s.jsxs(nt,{children:[s.jsx(Ne,{value:"all-students",children:" "}),Ie.map(C=>{var L;return s.jsx(Ne,{value:C.id,children:s.jsx("div",{className:"flex flex-col text-sm",children:s.jsxs("span",{className:"font-medium",children:[C.full_name," + ",(L=C.guardian)==null?void 0:L.full_name]})})},C.id)})]})]})}),s.jsx("div",{className:"w-full md:min-w-[120px]",children:s.jsxs(st,{value:E,onValueChange:D,children:[s.jsx(rt,{className:"w-full rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(at,{placeholder:"  "})}),s.jsxs(nt,{children:[s.jsx(Ne,{value:"all",children:" "}),Av.map(C=>s.jsx(Ne,{value:C.value,children:C.label},C.value))]})]})})]}),J?s.jsx("div",{className:"text-center py-10",children:" ..."}):a.length===0?s.jsx("h2",{className:"text-lg font-semibold text-green-800 rounded-2xl shadow-sm",children:"       "}):s.jsx(ds,{data:a.map(C=>({...C,id:C.id.toString()})),columns:[{key:"student",header:" ",align:"right",render:C=>{var L,se;return s.jsxs("div",{className:"font-medium text-right",children:[(L=C.student)==null?void 0:L.full_name,((se=C.student)==null?void 0:se.guardian)&&s.jsx("div",{className:"text-xs text-red-800 dark:text-red-800",children:" "+C.student.guardian.full_name})]})}},...j!=="my-records"?[{key:"teacher",header:" ",align:"right",render:C=>{var L;return((L=C.recorder)==null?void 0:L.full_name)||" "}}]:[],{key:"study_circle",header:" ",align:"right",render:C=>{var L;return(L=C.student)!=null&&L.study_circle?C.student.study_circle.name||` ${C.student.study_circle.id}`:" "}},{key:"date",header:" ",align:"right",render:C=>new Date(C.date).toLocaleDateString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit"})},{key:"type",header:" ",align:"right",render:C=>s.jsx(lt,{className:`${kM(C.type)} px-2 py-1 rounded-lg`,children:SM(C.type)})},{key:"memorization_range",header:"  ",align:"right",render:C=>{const L={...C,id:parseInt(C.id)};return yd(L)}},{key:"score",header:" ",align:"right",render:C=>CM(C.score)},{key:"tajweed_errors",header:"  ",align:"right",render:C=>EM(C.tajweed_errors)},{key:"recorder",header:"  ",align:"right",render:C=>{var L;return((L=C.recorder)==null?void 0:L.full_name)||" "}},{key:"actions",header:" ",align:"center",render:C=>s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>$t({...C,id:parseInt(C.id)}),className:"h-8 w-8 p-0 hover:bg-green-100 dark:hover:bg-green-700 transition-colors rounded-lg",title:"",children:s.jsx(Rr,{className:"h-4 w-4 text-green-600 dark:text-green-300"})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>_e(parseInt(C.id)),className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-700 transition-colors rounded-lg",title:"",children:s.jsx(Lr,{className:"h-4 w-4 text-red-500 dark:text-red-300"})})]})}],emptyMessage:"  ",className:"overflow-hidden rounded-xl border border-green-300 shadow-md text-xs",getRowClassName:(C,L)=>`${L%2===0?"bg-green-50 hover:bg-green-100":"bg-white hover:bg-green-50"} cursor-pointer transition-colors`})]})]}),s.jsx(ir,{open:N,onOpenChange:S,children:s.jsxs(lr,{dir:"rtl",className:"max-w-[95vw] sm:max-w-[640px] w-full overflow-hidden rounded-xl p-3 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100",children:[s.jsx(jr,{className:"pb-1",children:s.jsx(dr,{className:"text-xl font-bold text-center",children:s.jsx("h3",{className:"text-center leading-tight text-green-800 bg-gradient-to-r from-green-100 to-blue-100 py-2 px-3 rounded-lg",children:p?"   ":"    "})})}),s.jsxs("div",{dir:"rtl",className:"w-full",children:[s.jsx("ol",{className:"flex items-center w-full gap-1 sm:gap-2",children:zt.map((C,L)=>{const se=L===_t,pe=L<_t;return s.jsx("li",{className:"flex-1",children:s.jsxs("button",{type:"button",onClick:()=>L<_t?Xe(L):null,className:`w-full flex items-center justify-center sm:justify-between gap-2 p-2 rounded-lg text-xs sm:text-sm border transition-colors ${se?"bg-islamic-green text-white border-islamic-green":pe?"bg-green-100 text-green-800 border-green-200":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-700"}`,"aria-current":se?"step":void 0,"aria-disabled":!pe&&!se,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[L===0&&s.jsx(cu,{size:14}),L===1&&s.jsx(Z0,{size:14}),L===2&&s.jsx(Pt,{size:14}),s.jsx("span",{className:"hidden sm:inline",children:C.label})]}),s.jsxs("span",{className:"sm:hidden",children:[L+1,"/",zt.length]})]})},C.key)})}),s.jsx("div",{className:"mt-2 h-1.5 w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-islamic-green transition-all",style:{width:`${(_t+1)/zt.length*100}%`}})})]}),s.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400 whitespace-nowrap overflow-hidden overflow-ellipsis",children:ne.student_id?s.jsxs(s.Fragment,{children:[s.jsx("span",{children:": "}),s.jsxs("span",{children:[((Oe=ae.find(C=>C.id===ne.student_id))==null?void 0:Oe.full_name)??"",(ht=(Re=ae.find(C=>C.id===ne.student_id))==null?void 0:Re.guardian)!=null&&ht.full_name?` ${(re=(ft=ae.find(C=>C.id===ne.student_id))==null?void 0:ft.guardian)==null?void 0:re.full_name}`:""]})]}):s.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"  "})}),s.jsxs("div",{className:"p-4  bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 max-w-full overflow-x-hidden",children:[_t===0&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsxs(ye,{htmlFor:"teacher",className:"flex items-center gap-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(st,{value:ne.recorded_by||(_?_.id:""),onValueChange:C=>be(C),children:[s.jsx(rt,{id:"teacher",dir:"rtl",className:"text-right truncate max-w-full min-w-0",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{position:"popper",dir:"rtl",children:Me&&Me.length>0?Me.map(C=>s.jsxs(Ne,{value:C.id,children:[C.full_name||C.display_name||` ${C.id.slice(0,4)}`,C.role&&(C.role==="teacher"?" ()":` (${C.role==="admin"?"":C.role})`)]},C.id)):s.jsxs(Ne,{value:(_==null?void 0:_.id)||"initial",children:[(_==null?void 0:_.full_name)||" ",(_==null?void 0:_.role)&&(_.role==="teacher"?" ()":` (${_.role==="admin"?"":_.role})`)]})})]}),Pe.recorded_by&&s.jsx("p",{className:"text-sm text-red-500",children:Pe.recorded_by})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ye,{htmlFor:"circle",children:""}),s.jsxs(st,{value:ne.circle_id||"",onValueChange:C=>Qt(C),disabled:!ne.recorded_by,children:[s.jsx(rt,{id:"circle",dir:"rtl",className:"text-right truncate max-w-full min-w-0",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{position:"popper",dir:"rtl",children:X.length>0?X.map(C=>s.jsx(Ne,{value:C.id,children:C.name||` ${C.id.slice(0,4)}`},C.id)):s.jsx(Ne,{value:"no-circles",disabled:!0,children:"    "})})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs(ye,{htmlFor:"student",className:"flex items-center gap-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(st,{value:ne.student_id||"",onValueChange:C=>xt("student_id",C),disabled:!ne.recorded_by,children:[s.jsx(rt,{id:"student",dir:"rtl",className:"text-right truncate max-w-full min-w-0",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{position:"popper",dir:"rtl",className:"max-h-[300px]",children:ae.length>0?ae.map(C=>{var L;return s.jsxs(Ne,{value:C.id,children:[C.full_name||"  ",(L=C.guardian)!=null&&L.full_name?` - ${C.guardian.full_name}`:""]},C.id)}):s.jsx(Ne,{value:"no-students",disabled:!0,children:ne.circle_id?"     ":"   "})})]}),Pe.student_id&&s.jsx("p",{className:"text-sm text-red-500",children:Pe.student_id})]})]})}),_t===1&&s.jsxs("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto pr-1 pb-2",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"memorization_type",className:"flex items-center gap-1 mb-2 text-sm",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"flex flex-nowrap pb-1 -mx-2 px-2 gap-1 sm:gap-2 sm:flex-wrap mt-2",children:Av.map(C=>s.jsx("button",{type:"button",onClick:()=>xt("type",C.value),className:`px-2 py-1 sm:px-3 sm:py-1.5 rounded-lg text-[10px] sm:text-xs font-medium transition-all whitespace-nowrap flex-shrink-0
                          ${ne.type===C.value?"bg-islamic-green text-white shadow-md ring-2 ring-offset-1 ring-islamic-green":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:C.label},C.value))}),Pe.type&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:Pe.type})]}),s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"date",className:"flex items-center gap-1 mb-2 text-sm",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(fe,{id:"date",type:"date",dir:"rtl",className:"text-right h-9",value:ne.date||"",onChange:C=>xt("date",C.target.value)}),Pe.date&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:Pe.date})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-800/50 mb-3",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:" "}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"from_surah",className:"flex items-center gap-1 mb-1 text-xs",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(st,{value:ne.from_surah?ne.from_surah.toString():"",onValueChange:C=>qe("from_surah",parseInt(C)),children:[s.jsx(rt,{id:"from_surah",dir:"rtl",className:"text-right truncate h-9 text-xs",children:s.jsx(at,{placeholder:" ",children:ne.from_surah?`${ne.from_surah}. ${so(ne.from_surah)}`:" "})}),s.jsx(nt,{className:"max-h-[200px]",dir:"rtl",children:Wo.map(C=>s.jsxs(Ne,{value:C.number.toString(),children:[C.number,". ",so(C.number)]},C.number))})]}),Pe.from_surah&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:Pe.from_surah})]}),s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"from_ayah",className:"flex items-center gap-1 mb-1 text-xs",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(fe,{id:"from_ayah",type:"number",min:1,dir:"rtl",className:"text-right h-9 text-sm",value:ne.from_ayah||"",onChange:C=>xt("from_ayah",parseInt(C.target.value))}),Pe.from_ayah&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:Pe.from_ayah})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"to_surah",className:"flex items-center gap-1 mb-1 text-xs",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(st,{value:ne.to_surah?ne.to_surah.toString():"",onValueChange:C=>qe("to_surah",parseInt(C)),children:[s.jsx(rt,{id:"to_surah",dir:"rtl",className:"text-right truncate h-9 text-xs",children:s.jsx(at,{placeholder:" ",children:ne.to_surah?`${ne.to_surah}. ${so(ne.to_surah)}`:" "})}),s.jsx(nt,{className:"max-h-[200px]",dir:"rtl",children:Wo.map(C=>s.jsxs(Ne,{value:C.number.toString(),children:[C.number,". ",so(C.number)]},C.number))})]}),Pe.to_surah&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:Pe.to_surah})]}),s.jsxs("div",{children:[s.jsxs(ye,{htmlFor:"to_ayah",className:"flex items-center gap-1 mb-1 text-xs",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(fe,{id:"to_ayah",type:"number",min:1,dir:"rtl",className:"text-right h-9 text-sm",value:ne.to_ayah||"",onChange:C=>xt("to_ayah",parseInt(C.target.value))}),Pe.to_ayah&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:Pe.to_ayah})]})]})]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 p-2 rounded border border-gray-200 dark:border-gray-700",children:s.jsx("p",{children:"            ."})})]}),_t===2&&s.jsxs("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto pr-1 pb-2",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-5 rounded-2xl shadow-md border border-blue-200 dark:border-blue-700",children:s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{id:"score",label:" ",required:!0,value:ne.score,onChange:C=>xt("score",C)},{id:"lahn_jali",label:" ",hint:"( )",value:(Ee=ne.tajweed_errors)==null?void 0:Ee.lahn_jali,onChange:C=>ge("lahn_jali",C)},{id:"lahn_khafi",label:" ",hint:"( )",value:(et=ne.tajweed_errors)==null?void 0:et.lahn_khafi,onChange:C=>ge("lahn_khafi",C)}].map(C=>s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(ye,{htmlFor:C.id,className:"text-sm font-semibold text-gray-700 dark:text-gray-200 flex items-center gap-1 whitespace-nowrap",children:[C.label," ",C.required&&s.jsx("span",{className:"text-red-500",children:"*"}),C.hint&&s.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-400",children:C.hint})]}),s.jsx(fe,{id:C.id,type:"number",min:0,max:C.id==="score"?100:void 0,dir:"rtl",className:"h-10 text-right bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg px-3 text-sm focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-500 focus:outline-none",value:C.value||"",onChange:L=>{let se=parseFloat(L.target.value);isNaN(se)&&(se=void 0),C.id==="score"&&(se>100&&(se=100),se<0&&(se=0)),C.onChange(se)}}),C.id==="score"&&Pe.score&&s.jsx("p",{className:"text-xs text-red-500 mt-1 text-right",children:Pe.score})]},C.id))})})}),s.jsxs("div",{children:[s.jsx(ye,{htmlFor:"notes",className:"mb-2",children:""}),s.jsx(fs,{id:"notes",dir:"rtl",value:ne.notes||"",onChange:C=>xt("notes",C.target.value),placeholder:"    ...",className:"h-24 text-right"})]})]})]}),s.jsx(cr,{dir:"rtl",className:"flex items-center justify-between",children:s.jsx("table",{className:"w-full",children:s.jsx("tbody",{children:s.jsx("tr",{children:s.jsx("td",{className:"align-middle",children:s.jsxs("div",{className:"flex gap-2 justify-end items-center",children:[s.jsx(H,{type:"button",variant:"secondary",onClick:()=>S(!1),className:"bg-yellow-300 hover:bg-yellow-400 text-gray-800 text-sm px-4 py-2 rounded transition-all",children:""}),_t>0&&s.jsx(H,{type:"button",onClick:G,disabled:J,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 text-sm px-4 py-2 rounded transition-all",children:""}),_t<zt.length-1?s.jsx(H,{type:"button",onClick:M,disabled:J,className:"bg-islamic-green hover:bg-green-700 text-white text-sm px-4 py-2 rounded transition-all",children:""}):s.jsx(H,{type:"button",onClick:q,disabled:J,className:"bg-green-700 hover:bg-green-800 text-white text-sm px-4 py-2 rounded-lg transition-all shadow-sm focus:outline-none focus:ring-2 focus:ring-green-300",children:J?" ...":p?" ":" "})]})})})})})})]})}),s.jsx(Sn,{isOpen:me,onOpenChange:je,onConfirm:Le,isLoading:J,title:"   ",description:"                 .",deleteButtonText:"  ",cancelButtonText:""})]})},Ys="assessments",Qs={testConnection:async()=>{try{const{count:e}=await de.from(Ys).select("*",{count:"exact",head:!0});return!0}catch(e){return console.error("     :",e),!1}},getAllAssessments:async()=>{try{const{data:e,error:t}=await de.from(Ys).select(`
          *,
          student:student_id (
            id, 
            full_name, 
            guardian:guardian_id(id, full_name, phone_number)
          ),
          recorder:recorded_by (id, full_name, role)
        `).order("created_at",{ascending:!1});if(t)throw t;return e||[]}catch(e){return console.error("    :",e),[]}},getAssessmentsByStudentId:async e=>{try{const{data:t,error:r}=await de.from(Ys).select(`
          *,
          student:student_id (
            id, 
            full_name, 
            guardian:guardian_id(id, full_name, phone_number)
          ),
          recorder:recorded_by (id, full_name, role)
        `).eq("student_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){return console.error("    :",t),[]}},getAssessmentsByTeacher:async e=>{try{console.log("Fetching assessments for teacher:",e);const{data:t,error:r}=await de.from(Ys).select(`
          *,
          student:student_id (
            id, 
            full_name, 
            guardian:guardian_id(id, full_name, phone_number)
          ),
          recorder:recorded_by (id, full_name, role)
        `).eq("recorded_by",e).order("created_at",{ascending:!1});if(r)throw r;return console.log(`Found ${(t==null?void 0:t.length)||0} assessments for teacher ${e}`),t||[]}catch(t){return console.error("    :",t),[]}},getAssessmentById:async e=>{try{const{data:t,error:r}=await de.from(Ys).select(`
          *,
          student:student_id (id, full_name),
          recorder:recorded_by (id, full_name)
        `).eq("id",e).single();if(r)throw r;return t}catch(t){return console.error("   :",t),null}},createAssessment:async e=>{try{e.tajweed_score!==void 0&&e.memorization_score!==void 0&&e.recitation_score!==void 0&&e.total_score===void 0&&(e.total_score=((e.tajweed_score||0)+(e.memorization_score||0)+(e.recitation_score||0))/3);const{data:t,error:r}=await Gt.from(Ys).insert([e]).select(`
          *,
          student:student_id (id, full_name),
          recorder:recorded_by (id, full_name)
        `).single();if(r)throw r;return t}catch(t){throw console.error("    :",t),t}},updateAssessment:async e=>{try{const{id:t,...r}=e;r.tajweed_score!==void 0&&r.memorization_score!==void 0&&r.recitation_score!==void 0&&r.total_score===void 0&&(r.total_score=((r.tajweed_score||0)+(r.memorization_score||0)+(r.recitation_score||0))/3);const{data:n,error:a}=await Gt.from(Ys).update(r).eq("id",t).select(`
          *,
          student:student_id (id, full_name),
          recorder:recorded_by (id, full_name)
        `).single();if(a)throw a;return n}catch(t){throw console.error("   :",t),t}},deleteAssessment:async e=>{try{const{error:t}=await Gt.from(Ys).delete().eq("id",e);if(t)throw t}catch(t){throw console.error("   :",t),t}}},Jm=[{value:"juz",label:" "},{value:"half_quran",label:"  "},{value:"full_quran",label:"  "},{value:"periodic",label:" "}];function Dv(e){const t=Jm.find(r=>r.value===e);return t?t.label:" "}function PM(e){switch(e){case"juz":return"bg-blue-500";case"half_quran":return"bg-purple-500";case"full_quran":return"bg-green-500";case"periodic":return"bg-amber-500";default:return"bg-gray-500"}}function Mv(e){if(!e.from_surah||!e.to_surah)return" ";const t=oa.find(n=>n.number===e.from_surah),r=oa.find(n=>n.number===e.to_surah);return!t||!r?" ":t.number===r.number?` ${t.name} (${e.from_ayah} - ${e.to_ayah})`:`  ${t.name}  ${e.from_ayah}   ${r.name}  ${e.to_ayah}`}function bd(e){return e==null?" ":`${e} / 100`}const oa=[{number:1,name:"",ayahs:7},{number:2,name:"",ayahs:286},{number:3,name:" ",ayahs:200},{number:4,name:"",ayahs:176},{number:5,name:"",ayahs:120},{number:6,name:"",ayahs:165},{number:7,name:"",ayahs:206},{number:8,name:"",ayahs:75},{number:9,name:"",ayahs:129},{number:10,name:"",ayahs:109},{number:11,name:"",ayahs:123},{number:12,name:"",ayahs:111},{number:13,name:"",ayahs:43},{number:14,name:"",ayahs:52},{number:15,name:"",ayahs:99},{number:16,name:"",ayahs:128},{number:17,name:"",ayahs:111},{number:18,name:"",ayahs:110},{number:19,name:"",ayahs:98},{number:20,name:"",ayahs:135},{number:21,name:"",ayahs:112},{number:22,name:"",ayahs:78},{number:23,name:"",ayahs:118},{number:24,name:"",ayahs:64},{number:25,name:"",ayahs:77},{number:26,name:"",ayahs:227},{number:27,name:"",ayahs:93},{number:28,name:"",ayahs:88},{number:29,name:"",ayahs:69},{number:30,name:"",ayahs:60},{number:31,name:"",ayahs:34},{number:32,name:"",ayahs:30},{number:33,name:"",ayahs:73},{number:34,name:"",ayahs:54},{number:35,name:"",ayahs:45},{number:36,name:"",ayahs:83},{number:37,name:"",ayahs:182},{number:38,name:"",ayahs:88},{number:39,name:"",ayahs:75},{number:40,name:"",ayahs:85},{number:41,name:"",ayahs:54},{number:42,name:"",ayahs:53},{number:43,name:"",ayahs:89},{number:44,name:"",ayahs:59},{number:45,name:"",ayahs:37},{number:46,name:"",ayahs:35},{number:47,name:"",ayahs:38},{number:48,name:"",ayahs:29},{number:49,name:"",ayahs:18},{number:50,name:"",ayahs:45},{number:51,name:"",ayahs:60},{number:52,name:"",ayahs:49},{number:53,name:"",ayahs:62},{number:54,name:"",ayahs:55},{number:55,name:"",ayahs:78},{number:56,name:"",ayahs:96},{number:57,name:"",ayahs:29},{number:58,name:"",ayahs:22},{number:59,name:"",ayahs:24},{number:60,name:"",ayahs:13},{number:61,name:"",ayahs:14},{number:62,name:"",ayahs:11},{number:63,name:"",ayahs:11},{number:64,name:"",ayahs:18},{number:65,name:"",ayahs:12},{number:66,name:"",ayahs:12},{number:67,name:"",ayahs:30},{number:68,name:"",ayahs:52},{number:69,name:"",ayahs:52},{number:70,name:"",ayahs:44},{number:71,name:"",ayahs:28},{number:72,name:"",ayahs:28},{number:73,name:"",ayahs:20},{number:74,name:"",ayahs:56},{number:75,name:"",ayahs:40},{number:76,name:"",ayahs:31},{number:77,name:"",ayahs:50},{number:78,name:"",ayahs:40},{number:79,name:"",ayahs:46},{number:80,name:"",ayahs:42},{number:81,name:"",ayahs:29},{number:82,name:"",ayahs:19},{number:83,name:"",ayahs:36},{number:84,name:"",ayahs:25},{number:85,name:"",ayahs:22},{number:86,name:"",ayahs:17},{number:87,name:"",ayahs:19},{number:88,name:"",ayahs:26},{number:89,name:"",ayahs:30},{number:90,name:"",ayahs:20},{number:91,name:"",ayahs:15},{number:92,name:"",ayahs:21},{number:93,name:"",ayahs:11},{number:94,name:"",ayahs:8},{number:95,name:"",ayahs:8},{number:96,name:"",ayahs:19},{number:97,name:"",ayahs:5},{number:98,name:"",ayahs:8},{number:99,name:"",ayahs:8},{number:100,name:"",ayahs:11},{number:101,name:"",ayahs:11},{number:102,name:"",ayahs:8},{number:103,name:"",ayahs:3},{number:104,name:"",ayahs:9},{number:105,name:"",ayahs:5},{number:106,name:"",ayahs:4},{number:107,name:"",ayahs:7},{number:108,name:"",ayahs:3},{number:109,name:"",ayahs:6},{number:110,name:"",ayahs:3},{number:111,name:"",ayahs:5},{number:112,name:"",ayahs:4},{number:113,name:"",ayahs:5},{number:114,name:"",ayahs:6}];function Rv(e){const t=oa.find(r=>r.number===e);return t?t.name:" "}const OM=({onNavigate:e,currentUser:t})=>{var Kt,Ct,Qt,xt,_t,Xe,zt,Xt;const[r,n]=h.useState([]),[a,o]=h.useState([]),[i,l]=h.useState([]),[c,d]=h.useState([]),[u,m]=h.useState([]),[f,x]=h.useState("all-students"),[y,g]=h.useState("all-teachers"),[w,v]=h.useState("all-circles"),[p,b]=h.useState(null),[N,S]=h.useState(!1),[E,D]=h.useState("all"),[I,ee]=h.useState(""),[J,T]=h.useState(!0),[_,O]=h.useState(t),[j,k]=h.useState((t==null?void 0:t.role)==="teacher"?"my-assessments":"all-assessments"),[A,F]=h.useState(!0),[R,z]=h.useState("cards"),[Y,W]=h.useState(!1),[Z,B]=h.useState(null),{toast:X}=Tn(),[K,ae]=h.useState({student_id:"",date:new Date().toISOString().split("T")[0],type:"juz",from_surah:1,from_ayah:1,to_surah:1,to_ayah:1,tajweed_score:void 0,memorization_score:void 0,recitation_score:void 0,total_score:void 0,notes:"",recorded_by:""}),[te,me]=h.useState({});h.useEffect(()=>{(async()=>{try{if(T(!0),!await Qs.testConnection()){F(!1),X({title:"    ",description:"     ",variant:"destructive"}),T(!1);return}const ge=t;O(ge);const Ve=new URLSearchParams(window.location.search).get("circle");if(Ve&&v(Ve),ge&&ge.role==="teacher"){console.log("StudentAssessments - Loading data for teacher role");const Ie=await Qm(ge.id);l(Ie);const be=await qm(ge.id);m(be),d([{id:ge.id,full_name:ge.full_name||"",role:"teacher"}]),g(ge.id);const Oe=await Qs.getAssessmentsByTeacher(ge.id);n(Oe),o(Oe)}else{console.log("StudentAssessments - Loading data for admin/superadmin role");const[Ie,be,Oe,Re]=await Promise.all([hc(),Ym(),Qs.getAllAssessments(),Ma()]);if(Ie&&Ie.length>0){console.log(`  ${Ie.length} `);const ht=Ie.filter(et=>et.study_circle_id);console.log(`   : ${ht.length} (${Math.round(ht.length/Ie.length*100)}%)`);const ft=[...new Set(Ie.map(et=>et.study_circle_id).filter(Boolean))];console.log(`     : ${ft.length}`,ft);const re=Re.map(et=>et.id),Ee=ft.filter(et=>re.includes(et));console.log(`   : ${Ee.length}   ${ft.length}`),Ee.length<ft.length&&console.warn("          !")}l(Ie),d(be),n(Oe),o(Oe),m(Re)}T(!1)}catch(G){console.error("Error loading data for StudentAssessments:",G),X({title:"   ",description:"        ",variant:"destructive"}),T(!1)}})()},[t,X]),h.useEffect(()=>{if(r.length===0)return;let M=[...r];if(y!=="all-teachers"&&(M=M.filter(G=>G.recorded_by===y)),f!=="all-students"&&(M=M.filter(G=>G.student_id===f)),w!=="all-circles"){const G=i.filter(ge=>ge.study_circle_id===w).map(ge=>ge.id);M=M.filter(ge=>G.includes(ge.student_id))}if(E!=="all"&&(M=M.filter(G=>G.type===E)),I.trim()){const G=I.toLowerCase();M=M.filter(ge=>{var ft,re,Ee,et,C;const Me=i.find(L=>L.id===ge.student_id),Ve=((ft=Me==null?void 0:Me.full_name)==null?void 0:ft.toLowerCase())||"",Ie=c.find(L=>L.id===ge.recorded_by),be=((re=Ie==null?void 0:Ie.full_name)==null?void 0:re.toLowerCase())||"",Oe=((Ee=Rv(ge.from_surah))==null?void 0:Ee.toLowerCase())||"",Re=((et=Rv(ge.to_surah))==null?void 0:et.toLowerCase())||"",ht=((C=ge.notes)==null?void 0:C.toLowerCase())||"";return Ve.includes(G)||be.includes(G)||Oe.includes(G)||Re.includes(G)||ht.includes(G)})}o(M)},[r,y,f,w,E,I,i,c]);const je=()=>{let M=[];if(K.tajweed_score!==void 0&&M.push(K.tajweed_score),K.memorization_score!==void 0&&M.push(K.memorization_score),K.recitation_score!==void 0&&M.push(K.recitation_score),M.length===0)return;const G=M.reduce((ge,Me)=>ge+Me,0)/M.length;return Math.round(G*100)/100},V=h.useMemo(()=>c.filter(M=>{if((_==null?void 0:_.role)==="teacher")return M.id===_.id;if(w!=="all-circles"){const G=u.find(ge=>ge.id===w);if(G)return G.teacher_id===M.id}return!0}),[c,_,w,u]),Q=h.useMemo(()=>{if(i.length===0)return console.log("    "),[];if(N){if(w!=="all-circles"){const G=i.filter(ge=>ge.study_circle_id===w);return console.log(`    ${w}   :`,G.length),G}if(y!=="all-teachers"){const G=i.filter(Ie=>Ie.teacher_id===y),ge=u.filter(Ie=>Ie.teacher_id===y).map(Ie=>Ie.id),Me=i.filter(Ie=>Ie.study_circle_id&&ge.includes(Ie.study_circle_id)),Ve=[...new Set([...G,...Me])];return console.log(`    ${y}   :`,Ve.length),Ve}return console.log("     :",i.length),i}const M=i.filter(G=>{if(y!=="all-teachers"){const ge=u.filter(Me=>Me.teacher_id===y).map(Me=>Me.id);if(G.teacher_id!==y&&!(G.study_circle_id&&ge.includes(G.study_circle_id)))return!1}return!(w!=="all-circles"&&G.study_circle_id!==w)});return console.log("    :",{total:i.length,filtered:M.length,selectedTeacher:y,selectedCircle:w}),M},[i,y,w,N,u]),ie=h.useMemo(()=>u.filter(M=>y!=="all-teachers"?M.teacher_id===y:!0),[u,y]),ne=M=>{if(ae(G=>({...G,recorded_by:M})),y!==M&&M!=="all-teachers"){g(M);const G=u.filter(ge=>ge.teacher_id===M);G.length===1?le(G[0].id):G.length===0&&v("all-circles")}},le=M=>{if(v(M),M!=="all-circles"){const G=u.find(ge=>ge.id===M);G&&G.teacher_id&&G.teacher_id!==y&&(g(G.teacher_id),ae(ge=>({...ge,recorded_by:G.teacher_id})))}},Pe=(M,G)=>{ae(ge=>{var be;const Me={...ge,[M]:G},Ve=M==="from_surah"?"from_ayah":"to_ayah",Ie=((be=oa.find(Oe=>Oe.number===G))==null?void 0:be.ayahs)||1;return ge[Ve]>Ie&&(Me[Ve]=1),Me})},He=()=>{b(null),ae({student_id:"",date:new Date().toISOString().split("T")[0],type:"juz",from_surah:1,from_ayah:1,to_surah:1,to_ayah:1,tajweed_score:void 0,memorization_score:void 0,recitation_score:void 0,total_score:void 0,notes:"",recorded_by:_?_.id:""}),me({}),S(!0)},qe=M=>{b(M),ae({student_id:M.student_id,date:M.date.split("T")[0],type:M.type,from_surah:M.from_surah,from_ayah:M.from_ayah,to_surah:M.to_surah,to_ayah:M.to_ayah,tajweed_score:M.tajweed_score,memorization_score:M.memorization_score,recitation_score:M.recitation_score,total_score:M.total_score,notes:M.notes||"",recorded_by:M.recorded_by}),me({}),S(!0)},Ot=()=>{const M={};return K.student_id||(M.student_id="  "),K.recorded_by||(M.recorded_by="   "),K.from_surah>K.to_surah?M.from_surah="         ":K.from_surah===K.to_surah&&K.from_ayah>K.to_ayah&&(M.from_ayah="            "),K.tajweed_score!==void 0&&(K.tajweed_score<0||K.tajweed_score>100)&&(M.tajweed_score="     0  100"),K.memorization_score!==void 0&&(K.memorization_score<0||K.memorization_score>100)&&(M.memorization_score="     0  100"),K.recitation_score!==void 0&&(K.recitation_score<0||K.recitation_score>100)&&(M.recitation_score="     0  100"),me(M),Object.keys(M).length===0},q=async()=>{if(Ot())try{T(!0);const M=je(),G={...K,total_score:M};let ge;if(p){const Me={id:p.id,...G};try{await Qs.updateAssessment(Me),X({title:"   ",className:"bg-green-50 border-green-200"});const Ve=r.map(Ie=>Ie.id===p.id?{...Ie,...Me}:Ie);n(Ve),S(!1)}catch(Ve){X({title:"   ",description:Ve.message||"   ",variant:"destructive"})}}else try{const Me=await Qs.createAssessment(G);if(Me&&Me.id){X({title:"   ",className:"bg-green-50 border-green-200"});const Ve={id:Me.id,...G};n([Ve,...r]),S(!1)}else throw new Error("   ")}catch(Me){X({title:"   ",description:Me.message||"   ",variant:"destructive"})}}catch(M){console.error("Error saving assessment:",M),X({title:"   ",description:"      ",variant:"destructive"})}finally{T(!1)}},_e=async M=>{B(M),W(!0)},Le=async()=>{if(Z)try{T(!0),await Qs.deleteAssessment(Z.id),X({title:"   ",className:"bg-green-50 border-green-200"}),n(r.filter(M=>M.id!==Z.id))}catch(M){console.error("Error deleting assessment:",M),X({title:"   ",description:M.message||"      ",variant:"destructive"})}finally{T(!1)}},Ge=M=>{var be,Oe;const G=M.student,ge=i.find(Re=>Re.id===M.student_id),Me=G||ge,Ve=c.find(Re=>Re.id===M.recorded_by);let Ie;return(be=Me==null?void 0:Me.guardian)!=null&&be.full_name?Ie=Me.guardian.full_name:(Oe=ge==null?void 0:ge.guardian)!=null&&Oe.full_name&&(Ie=ge.guardian.full_name),{student:Me?Me.full_name:"  ",guardian:Ie||"   ",hasGuardian:!!Ie,teacher:Ve?Ve.full_name:"  ",type:Dv(M.type),typeColor:PM(M.type),range:Mv(M),score:bd(M.total_score),date:new Date(M.date).toLocaleDateString("ar-SA")}};if(!A)return s.jsxs("div",{className:"container mx-auto py-6 text-center",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:" "}),s.jsxs("div",{className:"p-6 bg-red-50 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-bold mb-2 text-red-700",children:"    "}),s.jsx("p",{className:"mb-4",children:"       ."}),s.jsx(H,{onClick:()=>e("/database-management"),children:"    "})]})]});const $t=async()=>{try{if(T(!0),X({title:"  ...",description:" "}),(_==null?void 0:_.role)==="teacher"){const M=await Qm(_.id);l(M);const G=await qm(_.id);m(G);const ge=await Qs.getAssessmentsByTeacher(_.id);n(ge),o(ge)}else{const[M,G,ge,Me]=await Promise.all([hc(),Ym(),Qs.getAllAssessments(),Ma()]);l(M),d(G),n(ge),o(ge),m(Me)}X({title:"   ",className:"bg-green-50 border-green-200"})}catch(M){console.error("Error refreshing data:",M),X({title:"   ",description:"        ",variant:"destructive"})}finally{T(!1)}};return s.jsxs("div",{className:"container mx-auto py-6",dir:"rtl",children:[s.jsxs(ut,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsx(wt,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(yt,{className:"text-xl md:text-2xl font-extrabold text-blue-50 flex items-center gap-2",children:[s.jsx(Bw,{className:"h-5 w-5 text-yellow-300"})," "]}),s.jsx(Rt,{className:"text-xs md:text-sm text-blue-100",children:"       "})]}),s.jsxs(H,{variant:"outline",className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:$t,children:[s.jsx(Vn,{className:"h-4 w-4"}),""]})]})}),s.jsx(ot,{children:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 bg-white dark:bg-gray-900 p-4 rounded-2xl shadow-md border border-green-200 dark:border-green-700",children:[s.jsx("div",{className:"flex-1 min-w-[180px]",children:s.jsx(fe,{placeholder:"          ...",value:I,onChange:M=>ee(M.target.value),className:"w-full rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green focus:border-islamic-green text-sm text-gray-800 dark:text-gray-200 transition-all duration-200"})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(st,{value:y,onValueChange:M=>{g(M),v("all-circles"),x("all-students")},children:[s.jsx(rt,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(at,{placeholder:"  "})}),s.jsxs(nt,{children:[s.jsx(Ne,{value:"all-teachers",children:" "}),V.length>0?V.map(M=>s.jsxs(Ne,{value:M.id,children:[M.full_name??` ${M.id.slice(0,4)}`,M.role&&(M.role==="teacher"?" ()":` (${M.role==="admin"?"":M.role})`)]},M.id)):s.jsx(Ne,{disabled:!0,value:"__no__",children:"    "})]})]})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(st,{value:w,onValueChange:M=>{if(console.log("  :",M),v(M),x("all-students"),M!=="all-circles"){const G=i.filter(ge=>ge.study_circle_id===M);console.log(`    (${M}):`,G.length),console.log("   :",G.map(ge=>ge.id)),G.length===0&&(console.log("     !"),console.log("     :",[...new Set(i.map(ge=>ge.study_circle_id))].filter(Boolean).join(", ")))}},disabled:y==="all-teachers"&&ie.length===0,children:[s.jsx(rt,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(at,{placeholder:y==="all-teachers"?"  ":ie.length===0?"  ":" "})}),s.jsxs(nt,{children:[s.jsx(Ne,{value:"all-circles",children:" "}),ie.map(M=>s.jsxs(Ne,{value:M.id,children:[M.name||` ${M.id}`," ",y==="all-teachers"&&M.teacher?` - ${M.teacher.full_name}`:""," (",M.students_count," )"]},M.id))]})]})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(st,{value:f,onValueChange:M=>{if(console.log("  :",M),x(M),M!=="all-students"){const G=i.find(ge=>ge.id===M);console.log("  :",{id:G==null?void 0:G.id,name:G==null?void 0:G.full_name,study_circle_id:G==null?void 0:G.study_circle_id,teacher_id:G==null?void 0:G.teacher_id})}},disabled:Q.length===0,children:[s.jsx(rt,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(at,{placeholder:Q.length===0?"  ":"  "})}),s.jsxs(nt,{children:[s.jsx(Ne,{value:"all-students",children:" "}),Q.map(M=>s.jsx(Ne,{value:M.id,children:s.jsxs("div",{className:"flex flex-col text-sm",children:[s.jsx("span",{className:"font-medium",children:M.full_name}),M.guardian&&M.guardian.full_name&&s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" : ",M.guardian.full_name]})]})},M.id))]})]})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(st,{value:E,onValueChange:D,disabled:Q.length===0,children:[s.jsx(rt,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(at,{placeholder:"  "})}),s.jsxs(nt,{children:[s.jsx(Ne,{value:"all",children:" "}),Jm.map(M=>s.jsx(Ne,{value:M.value,children:M.label},M.value))]})]})}),s.jsxs(H,{onClick:He,className:"bg-green-600 hover:bg-green-700 text-white rounded-xl flex items-center gap-2 px-3 py-1.5 shadow-md hover:scale-105 transition-transform duration-200 text-sm font-semibold ring-1 ring-green-500/30 hover:ring-2 hover:ring-green-500/50 active:scale-95",children:[s.jsx(Qr,{className:"w-3 h-3"}),"  "]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 bg-white dark:bg-gray-900 p-4 rounded-2xl shadow-md border border-green-200 dark:border-green-700",children:[s.jsx(uc,{value:j,onValueChange:k,className:"w-full md:w-[420px] bg-green-50 rounded-xl shadow-inner p-1",children:s.jsxs($i,{className:"grid w-full grid-cols-2 rounded-xl bg-white dark:bg-gray-900 shadow-sm ring-1 ring-green-300",children:[s.jsx(Gr,{value:"all-records",className:`\r
                                flex items-center justify-center gap-2 text-sm font-medium\r
                                rounded-lg\r
                                text-green-800\r
                                hover:bg-green-100 hover:text-green-900\r
                                data-[state=active]:bg-islamic-green\r
                                data-[state=active]:text-white\r
                                transition-all duration-300\r
                              `,children:"  "}),s.jsx(Gr,{value:"my-records",className:`\r
                              flex items-center justify-center gap-2 text-sm font-medium\r
                              rounded-lg\r
                              text-green-800\r
                              hover:bg-green-100 hover:text-green-900\r
                              data-[state=active]:bg-islamic-green\r
                              data-[state=active]:text-white\r
                              transition-all duration-300\r
                            `,children:" "})]})}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-lg p-1 bg-green-50 dark:bg-green-900 shadow-sm",children:[s.jsx(H,{variant:R==="table"?"default":"ghost",size:"sm",onClick:()=>z("table"),className:"flex items-center justify-center w-10 h-10 p-0 rounded-lg hover:bg-green-100 hover:scale-105 transition-transform duration-200",title:" ",children:s.jsx(k4,{className:"w-5 h-5 text-green-800"})}),s.jsx(H,{variant:R==="cards"?"default":"ghost",size:"sm",onClick:()=>z("cards"),className:"flex items-center justify-center w-10 h-10 p-0 rounded-lg hover:bg-green-100 hover:scale-105 transition-transform duration-200",title:" ",children:s.jsx(qw,{className:"w-5 h-5 text-green-800"})})]})]}),J?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),s.jsx("p",{className:"mt-4",children:"  ..."})]}):s.jsx(s.Fragment,{children:a.length===0?s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-xl text-gray-600",children:"      "}),s.jsx(H,{variant:"outline",className:"mt-4",onClick:()=>{g((_==null?void 0:_.role)==="teacher"?_.id:"all-teachers"),x("all-students"),v("all-circles"),D("all"),ee("")},children:"  "})]}):R==="table"?s.jsx("div",{className:"overflow-x-auto rounded-md border",children:s.jsxs(Oa,{children:[s.jsx(Aa,{children:s.jsxs(Ir,{children:[s.jsx(vt,{className:"text-right",children:""}),s.jsx(vt,{className:"text-right",children:""}),s.jsx(vt,{className:"text-right",children:""}),s.jsx(vt,{className:"text-right",children:""}),s.jsx(vt,{className:"text-right",children:""}),s.jsx(vt,{className:"text-right",children:""}),s.jsx(vt,{className:"text-right",children:""})]})}),s.jsx(Da,{children:a.map(M=>{const G=Ge(M);return s.jsxs(Ir,{children:[s.jsx(tt,{className:"font-medium",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:G.student}),G.hasGuardian&&s.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[s.jsx("span",{className:"font-medium text-blue-600",children:" :"}),s.jsx("span",{children:G.guardian})]})]})}),s.jsx(tt,{children:G.teacher}),s.jsx(tt,{children:s.jsx(lt,{className:`bg-${G.typeColor}-100 text-${G.typeColor}-800 border-${G.typeColor}-200`,children:G.type})}),s.jsx(tt,{dir:"rtl",children:G.range}),s.jsx(tt,{children:s.jsx(lt,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:G.score})}),s.jsx(tt,{children:G.date}),s.jsx(tt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>qe(M),children:s.jsx(Rr,{className:"h-4 w-4"})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>_e(M),children:s.jsx(Lr,{className:"h-4 w-4 text-red-500"})})]})})]},M.id)})})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(M=>{const G=Ge(M);return i.find(ge=>ge.id===M.student_id),s.jsxs(ut,{className:"overflow-hidden border border-gray-200 hover:border-gray-300 transition-all duration-200",children:[s.jsxs(wt,{className:"pb-2",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx(lt,{className:`bg-${G.typeColor}-100 text-${G.typeColor}-800 border-${G.typeColor}-200`,children:G.type}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>qe(M),className:"h-8 w-8",children:s.jsx(Rr,{className:"h-4 w-4"})}),s.jsx(H,{variant:"ghost",size:"icon",onClick:()=>_e(M),className:"h-8 w-8",children:s.jsx(Lr,{className:"h-4 w-4 text-red-500"})})]})]}),s.jsx(yt,{className:"text-xl mt-1",children:G.student}),G.hasGuardian&&s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"font-medium text-blue-600",children:" :"}),s.jsx("span",{children:G.guardian})]})]}),s.jsxs(ot,{className:"pb-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:""}),s.jsx("p",{className:"font-medium",children:G.teacher})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:""}),s.jsx("p",{className:"font-medium",children:G.date})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("p",{className:"text-gray-500",children:""}),s.jsx("p",{className:"font-medium",dir:"rtl",children:G.range})]})]}),s.jsxs("div",{className:"mt-3 border-t pt-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(C4,{className:"w-5 h-5 text-yellow-500"}),s.jsx("span",{className:"font-semibold",children:" "})]}),s.jsx(lt,{className:"text-lg py-1 px-3 bg-yellow-100 text-yellow-800 border-yellow-200",children:G.score})]}),(M.tajweed_score!==void 0||M.memorization_score!==void 0||M.recitation_score!==void 0)&&s.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[M.tajweed_score!==void 0&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500",children:""}),s.jsx("p",{className:"font-medium",children:bd(M.tajweed_score)})]}),M.memorization_score!==void 0&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500",children:""}),s.jsx("p",{className:"font-medium",children:bd(M.memorization_score)})]}),M.recitation_score!==void 0&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500",children:""}),s.jsx("p",{className:"font-medium",children:bd(M.recitation_score)})]})]})]}),M.notes&&s.jsxs("div",{className:"mt-3 border-t pt-3",children:[s.jsx("p",{className:"text-gray-500 text-sm",children:""}),s.jsx("p",{className:"text-sm mt-1 text-gray-700",children:M.notes})]})]})]},M.id)})})})]})})]}),s.jsx(ir,{open:N,onOpenChange:M=>{if(!M){const G=(_==null?void 0:_.role)==="teacher"?_.id:"all-teachers";y!==G&&g(G),w!=="all-circles"&&v("all-circles")}S(M)},children:s.jsxs(lr,{dir:"rtl",className:"sm:max-w-[520px] w-full rounded-xl p-3 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100",children:[s.jsxs(jr,{className:"pb-1",children:[s.jsx(dr,{className:"text-xl font-bold text-center",children:s.jsx("h3",{className:"text-center leading-tight text-green-800 bg-gradient-to-r from-green-100 to-blue-100 py-2 px-3 rounded-lg",children:p?"   ":"    "})}),p&&Q.length>0&&s.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-100 rounded-md",children:s.jsxs("div",{className:"flex flex-col gap-1 text-center",children:[s.jsxs("span",{className:"text-sm font-medium",children:[s.jsx("span",{className:"text-blue-700",children:":"})," ",(Kt=Q.find(M=>M.id===p.student_id))==null?void 0:Kt.full_name]}),s.jsxs("span",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"text-blue-700",children:" :"})," ",((Qt=(Ct=Q.find(M=>M.id===p.student_id))==null?void 0:Ct.guardian)==null?void 0:Qt.full_name)||"     "]})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 md:p-4 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs(uc,{defaultValue:"basic",className:"w-full",children:[s.jsxs($i,{className:"flex flex-row-reverse w-full mb-3 bg-gradient-to-r from-blue-100 to-green-100 p-1 rounded-lg",children:[s.jsx(Gr,{value:"basic",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-green-800 data-[state=active]:shadow-sm",children:s.jsx("span",{className:"flex items-center justify-center gap-1",children:"  "})}),s.jsx(Gr,{value:"range",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-green-800 data-[state=active]:shadow-sm",children:s.jsx("span",{className:"flex items-center justify-center gap-1",children:"  "})}),s.jsx(Gr,{value:"scores",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-green-800 data-[state=active]:shadow-sm",children:s.jsx("span",{className:"flex items-center justify-center gap-1",children:" "})})]}),s.jsx(cs,{value:"basic",className:"mt-0",children:s.jsxs("div",{className:"grid gap-3 py-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"grid gap-1 order-last ",children:[s.jsxs(ye,{htmlFor:"recorded_by",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(st,{value:K.recorded_by||(_?_.id:""),onValueChange:ne,children:[s.jsx(rt,{id:"recorded_by",className:"h-9 bg-white text-right",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{className:" text-right",children:V.length>0?V.map(M=>s.jsx(Ne,{value:M.id,className:" text-right",children:s.jsx("div",{className:"flex flex-col text-right",children:s.jsx("span",{className:"font-medium",children:M.full_name??` ${M.id.slice(0,4)}`})})},M.id)):s.jsx(Ne,{disabled:!0,value:"no-teachers",children:"   "})})]}),te.recorded_by&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:te.recorded_by})]}),s.jsxs("div",{className:"grid gap-1 order-first",children:[s.jsx(ye,{htmlFor:"circle_info",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:""}),s.jsxs(st,{value:w!=="all-circles"?w:"",onValueChange:le,children:[s.jsx(rt,{id:"circle_info",className:"h-9 bg-white text-right",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{className:" text-right",children:ie.length>0?ie.map(M=>s.jsx(Ne,{value:M.id,className:" text-right",children:M.name||` ${M.id}`},M.id)):s.jsx(Ne,{disabled:!0,value:"no-circles",children:"   "})})]})]})]}),s.jsxs("div",{className:"grid gap-1",children:[s.jsxs(ye,{htmlFor:"student_id",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(st,{value:K.student_id,onValueChange:M=>ae({...K,student_id:M}),children:[s.jsx(rt,{id:"student_id",className:"h-9 bg-white text-right",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{className:"text-right max-h-[200px]",children:Q.length>0?Q.map(M=>{var G,ge;return s.jsx(Ne,{value:M.id,className:"text-right",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:M.full_name}),s.jsxs("span",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"text-blue-700",children:" :"})," ",((ge=(G=Q.find(Me=>Me.id===K.student_id))==null?void 0:G.guardian)==null?void 0:ge.full_name)||"     "]})]})},M.id)}):s.jsx(Ne,{disabled:!0,value:"no-students",children:w!=="all-circles"?"     ":y!=="all-teachers"?"    ":"   "})})]}),te.student_id&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:te.student_id})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"grid gap-1 order-last",children:[s.jsxs(ye,{htmlFor:"date",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(fe,{id:"date",type:"date",className:"h-9 bg-white text-right",value:K.date,onChange:M=>ae({...K,date:M.target.value}),min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"grid gap-1 order-first",children:[s.jsxs(ye,{htmlFor:"type",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(st,{value:K.type,onValueChange:M=>ae({...K,type:M}),children:[s.jsx(rt,{id:"type",className:"h-9 bg-white text-right",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{className:" text-right",children:Jm.map(M=>s.jsx(Ne,{value:M.value,children:M.label},M.value))})]})]})]}),s.jsxs("div",{className:"grid gap-1",children:[s.jsx(ye,{htmlFor:"notes",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:""}),s.jsx(fs,{id:"notes",value:K.notes||"",onChange:M=>ae({...K,notes:M.target.value}),placeholder:"  ",className:"min-h-[70px] bg-white text-right"})]})]})}),s.jsx(cs,{value:"range",className:"mt-0",children:s.jsxs("div",{className:"grid gap-3 py-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"grid gap-1 order-last",children:[s.jsxs(ye,{htmlFor:"from_ayah",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(fe,{id:"from_ayah",type:"number",className:"h-9 bg-white text-right",min:"1",max:((xt=oa.find(M=>M.number===K.from_surah))==null?void 0:xt.ayahs)||1,value:K.from_ayah,onChange:M=>ae({...K,from_ayah:parseInt(M.target.value)})}),te.from_ayah&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:te.from_ayah})]}),s.jsxs("div",{className:"grid gap-1 order-first",children:[s.jsxs(ye,{htmlFor:"from_surah",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(st,{value:(_t=K.from_surah)==null?void 0:_t.toString(),onValueChange:M=>Pe("from_surah",parseInt(M)),children:[s.jsx(rt,{id:"from_surah",className:"h-9 bg-white text-right",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{className:" text-right max-h-[200px]",children:oa.map(M=>s.jsxs(Ne,{value:M.number.toString(),children:[M.name," (",M.number,")"]},M.number))})]}),te.from_surah&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:te.from_surah})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"grid gap-1 order-last",children:[s.jsxs(ye,{htmlFor:"to_surah",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(st,{value:(Xe=K.to_surah)==null?void 0:Xe.toString(),onValueChange:M=>Pe("to_surah",parseInt(M)),children:[s.jsx(rt,{id:"to_surah",className:"h-9 bg-white text-right",children:s.jsx(at,{placeholder:" "})}),s.jsx(nt,{className:" text-right max-h-[200px]",children:oa.map(M=>s.jsxs(Ne,{value:M.number.toString(),children:[M.name," (",M.number,")"]},M.number))})]}),te.to_surah&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:te.to_surah})]}),s.jsxs("div",{className:"grid gap-1 order-first",children:[s.jsxs(ye,{htmlFor:"to_ayah",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["  ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(fe,{id:"to_ayah",type:"number",className:"h-9 bg-white text-right",min:"1",max:((zt=oa.find(M=>M.number===K.to_surah))==null?void 0:zt.ayahs)||1,value:K.to_ayah,onChange:M=>ae({...K,to_ayah:parseInt(M.target.value)})}),te.to_ayah&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:te.to_ayah})]})]}),s.jsx("div",{dir:"rtl",className:"py-3 px-4 mt-2 bg-blue-50 rounded-lg text-sm border border-blue-100",children:s.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[s.jsx("span",{children:"  :"}),s.jsx("span",{className:"font-bold",children:K.from_surah&&K.to_surah?Mv(K):"  "})]})})]})}),s.jsx(cs,{value:"scores",className:"mt-0",children:s.jsxs("div",{className:"grid gap-3 py-2",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"grid gap-1 order-3",children:[s.jsx(ye,{htmlFor:"tajweed_score",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:s.jsx("span",{children:" "})}),s.jsx(fe,{id:"tajweed_score",type:"text",inputMode:"decimal",dir:"rtl",className:"h-9 bg-white text-right",value:K.tajweed_score!==void 0?K.tajweed_score:"",onChange:M=>{let G=parseFloat(M.target.value);isNaN(G)?G=void 0:G>100?G=100:G<0&&(G=0),ae({...K,tajweed_score:G})},placeholder:"0 - 100"}),te.tajweed_score&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:te.tajweed_score})]}),s.jsxs("div",{className:"grid gap-1 order-2",children:[s.jsx(ye,{htmlFor:"memorization_score",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:s.jsx("span",{children:" "})}),s.jsx(fe,{id:"memorization_score",type:"text",inputMode:"decimal",dir:"rtl",className:"h-9 bg-white text-right",value:K.memorization_score!==void 0?K.memorization_score:"",onChange:M=>{let G=parseFloat(M.target.value);isNaN(G)?G=void 0:G>100?G=100:G<0&&(G=0),ae({...K,memorization_score:G})},placeholder:"0 - 100"}),te.memorization_score&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:te.memorization_score})]}),s.jsxs("div",{className:"grid gap-1 order-1",children:[s.jsx(ye,{htmlFor:"recitation_score",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:s.jsx("span",{children:" "})}),s.jsx(fe,{id:"recitation_score",type:"text",inputMode:"decimal",dir:"rtl",className:"h-9 bg-white text-right",value:K.recitation_score!==void 0?K.recitation_score:"",onChange:M=>{let G=parseFloat(M.target.value);isNaN(G)?G=void 0:G>100?G=100:G<0&&(G=0),ae({...K,recitation_score:G})},placeholder:"0 - 100"}),te.recitation_score&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:te.recitation_score})]})]}),s.jsxs("div",{dir:"rtl",className:"p-4 bg-gradient-to-r from-amber-50 to-yellow-50 rounded-lg mt-3 border border-amber-100",children:[s.jsxs("div",{className:"flex flex-row-reverse justify-between items-center",children:[s.jsx("span",{className:"text-lg font-bold text-amber-700 px-3 py-1 bg-white rounded-lg shadow-sm",children:je()!==void 0?je():"-"}),s.jsx(ye,{htmlFor:"total_score",className:"font-bold text-right text-sm text-amber-800",children:" :"})]}),s.jsx("p",{className:"text-xs text-amber-700 mt-2 text-right",children:"(       )"})]})]})})]}),s.jsxs(cr,{dir:"rtl",className:"flex space-x-2 rtl:space-x-reverse justify-end",children:[s.jsx(H,{type:"button",onClick:q,disabled:J,children:J?" ...":p?"  ":"  "}),s.jsx(H,{type:"button",variant:"secondary",onClick:()=>S(!1),children:""})]})]})]})}),s.jsx(Sn,{isOpen:Y,onOpenChange:W,onConfirm:Le,isLoading:J,title:"  ",description:"        ",itemDetails:Z?{:((Xt=Z.student)==null?void 0:Xt.full_name)||"-",:Dv(Z.type),:new Date(Z.date).toLocaleDateString("ar-SA")}:null,detailsLabels:[{key:"",label:""},{key:"",label:" "},{key:"",label:" "}],deleteButtonText:"  ",cancelButtonText:""})]})};class Iv extends h.Component{constructor(){super(...arguments);Po(this,"state",{hasError:!1,error:null,errorInfo:null});Po(this,"handleReload",()=>{window.location.reload()});Po(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})})}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,n){console.error("Error boundary caught an error:",r,n),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?s.jsx("div",{className:"container mx-auto py-6 max-w-2xl",children:s.jsxs(ut,{className:"border-red-200",children:[s.jsx(wt,{children:s.jsx(yt,{className:"text-red-600 text-center",children:"   "})}),s.jsxs(ot,{className:"space-y-4",children:[s.jsx("p",{className:"text-center text-gray-600",children:"    .    ."}),this.state.error&&s.jsxs("div",{className:"bg-gray-100 p-4 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-sm mb-2",children:" :"}),s.jsx("p",{className:"text-sm text-red-600 font-mono",children:this.state.error.message})]}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx(H,{onClick:this.handleReset,variant:"outline",children:"  "}),s.jsx(H,{onClick:this.handleReload,children:"  "})]}),!1]})]})}):this.props.children}}const AM=new IE,DM=()=>{const[e,t]=h.useState("/"),[r,n]=h.useState(null),[a,o]=h.useState(null),[i,l]=h.useState(!1),c=()=>{l(!i)};h.useEffect(()=>{const x=()=>{const y=window.location.hash;if(y){const g=y.substring(1);t(g)}else t("/")};return x(),window.addEventListener("hashchange",x),()=>{window.removeEventListener("hashchange",x)}},[]),h.useEffect(()=>{const x=localStorage.getItem("currentUser"),y=localStorage.getItem("userRole");if(x&&y)try{const g=JSON.parse(x);o(g),n(y),console.log("App - Loaded user from localStorage:",{user:g,role:y,userRole:g.role}),g.role!==y&&console.warn("Warning: Role mismatch in localStorage:",{profileRole:g.role,storedRole:y})}catch(g){console.error("Error parsing stored user:",g)}},[]);const d=x=>{x.startsWith("/")?(t(x),x!=="/"?window.location.hash=x:history.pushState("",document.title,window.location.pathname+window.location.search)):window.location.href=x},u=async x=>{console.log("Login successful with user:",x);const y=["superadmin","admin","teacher"],g={id:x.id,full_name:x.full_name,role:y.includes(x.role)?x.role:"teacher",username:"",password_hash:""};localStorage.setItem("currentUser",JSON.stringify(g)),localStorage.setItem("userRole",x.role),console.log("Saving user to state:",{profile:g,role:x.role}),o(g),n(x.role),d("/")},m=()=>{localStorage.removeItem("currentUser"),localStorage.removeItem("userRole"),o(null),n(null),t("/"),history.pushState("",document.title,window.location.pathname+window.location.search)},f=()=>{switch(e){case"/":return s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/login":return s.jsx(jv,{onLogin:u,onNavigate:d});case"/parent-inquiry":return s.jsx(s7,{onNavigate:d});case"/students":return s.jsx(dM,{onNavigate:d,userRole:r,userId:a==null?void 0:a.id});case"/students-list":return r==="superadmin"||r==="admin"||r==="teacher"?s.jsx(uM,{onNavigate:d,userRole:r,userId:a==null?void 0:a.id}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/database-management":return r==="superadmin"||r==="admin"?s.jsx(_7,{onNavigate:d}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/user-management":return r==="superadmin"||r==="admin"?s.jsx(tM,{onNavigate:d,userRole:r}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/guardians":case"/guardians-list":return r==="superadmin"||r==="admin"||r==="teacher"?s.jsx(oM,{onNavigate:d,userRole:r,userId:a==null?void 0:a.id}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/study-circles":return r==="superadmin"||r==="admin"||r==="teacher"?s.jsx(fM,{onNavigate:d,userRole:r,userId:a==null?void 0:a.id}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/study-circle-schedules":return r==="superadmin"||r==="admin"||r==="teacher"?s.jsx(mM,{onNavigate:d,userRole:r,userId:a==null?void 0:a.id}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/supabase-test":return r==="superadmin"||r==="admin"?s.jsx(N7,{onNavigate:d}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/profile":return a?s.jsx(gM,{onNavigate:d,currentUser:a}):s.jsx(jv,{onLogin:u,onNavigate:d});case"/teacher-sessions":return console.log("Route /teacher-sessions - User Role:",r),console.log("Route /teacher-sessions - Current User:",a),console.log("Route /teacher-sessions - Condition Check:",(r==="teacher"||r==="admin"||r==="superadmin")&&a),(r==="teacher"||r==="admin"||r==="superadmin")&&a?s.jsx(wM,{onNavigate:d,currentUser:a}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/attendance-record":return(r==="teacher"||r==="admin"||r==="superadmin")&&a?s.jsx(NM,{onNavigate:d,currentUser:a}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/memorization-records":return(r==="teacher"||r==="admin"||r==="superadmin")&&a?s.jsx(Iv,{children:s.jsx(TM,{onNavigate:d,currentUser:a})}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});case"/student-assessments":return(r==="teacher"||r==="admin"||r==="superadmin")&&a?s.jsx(Iv,{children:s.jsx(OM,{onNavigate:d,currentUser:a})}):s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m});default:return setTimeout(()=>d("/"),0),s.jsx(sn,{onNavigate:d,userRole:r,currentUser:a,onLogout:m})}};return console.log("App rendering with:",{userRole:r,currentUser:a}),s.jsx(LE,{client:AM,children:s.jsxs(fE,{children:[s.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",dir:"rtl",children:[s.jsx(fP,{currentPath:e,onNavigate:d,userRole:r,currentUser:a,onLogout:m,onSidebarToggle:c}),s.jsxs("div",{className:"flex flex-1 pt-16 relative",children:[s.jsx("main",{className:`flex-1 transition-all duration-300 ease-in-out ${r?i?"md:mr-64":"md:mr-16":""} min-h-[calc(100vh-64px-196px)] md:min-h-[calc(100vh-64px-160px)] pb-4 px-2 sm:px-4 overflow-x-hidden`,children:s.jsx("div",{className:"max-w-full mx-auto",children:f()})}),r&&s.jsx("div",{className:`fixed top-16 right-0 h-[calc(100vh-64px)] ${i?"block":"hidden md:block"}`,children:s.jsx(b8,{onNavigate:d,onLogout:m,isOpen:i,setIsOpen:l,userRole:r})})]}),s.jsx(w8,{})]}),s.jsx(u5,{}),s.jsx(z5,{})]})})};const $v="550e8400-e29b-41d4-a716-446655440000",xf="superadmin",MM="$2a$10$0lnhiRBBZs4o8HsV5fWAR.ZsqR09MK0YO6iqpqFRhLfBGgw7gaJXq",RM=" ",IM=async()=>{try{const e=await Eg($v),t=await wv(xf);if(e){console.log("      :",e.username);return}if(t){console.log("       :",t.username);return}const r={id:$v,full_name:RM,role:"superadmin",username:xf,password_hash:MM};console.log("        ...");const n=await hD(r);n.success?console.log("     :",n.id):console.error("     :",n.message)}catch(e){console.error("     :",e)}try{const e=await wv(xf);e?console.log("        :",e.username):console.error("         !")}catch(e){console.error("        :",e)}},$M=async()=>{console.log("  ...");try{await IM(),console.log("   ")}catch(e){console.error("   :",e)}};$M();const LM=async e=>{try{const t=await kc(e);return console.log("  :",e),console.log("  :",t),t}catch(t){console.error("     :",t);return}};LM("Ketama@Admin2025");lw(document.getElementById("root")).render(s.jsx(sC,{basename:"/aya-system/",children:s.jsx(DM,{})}));export{as as _,nv as s};
