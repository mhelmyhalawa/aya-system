var gN=Object.defineProperty;var pN=(e,t,r)=>t in e?gN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Si=(e,t,r)=>(pN(e,typeof t!="symbol"?t+"":t,r),r),oh=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var te=(e,t,r)=>(oh(e,t,"read from private field"),r?r.call(e):t.get(e)),ht=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Ye=(e,t,r,n)=>(oh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);var Oc=(e,t,r,n)=>({set _(a){Ye(e,t,a,r)},get _(){return te(e,t,n)}}),xr=(e,t,r)=>(oh(e,t,"access private method"),r);function xN(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var ln=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Fv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var zv={exports:{}},uu={},Bv={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc=Symbol.for("react.element"),vN=Symbol.for("react.portal"),yN=Symbol.for("react.fragment"),bN=Symbol.for("react.strict_mode"),wN=Symbol.for("react.profiler"),jN=Symbol.for("react.provider"),_N=Symbol.for("react.context"),NN=Symbol.for("react.forward_ref"),SN=Symbol.for("react.suspense"),kN=Symbol.for("react.memo"),CN=Symbol.for("react.lazy"),M0=Symbol.iterator;function EN(e){return e===null||typeof e!="object"?null:(e=M0&&e[M0]||e["@@iterator"],typeof e=="function"?e:null)}var Uv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wv=Object.assign,Vv={};function Io(e,t,r){this.props=e,this.context=t,this.refs=Vv,this.updater=r||Uv}Io.prototype.isReactComponent={};Io.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Io.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hv(){}Hv.prototype=Io.prototype;function Bm(e,t,r){this.props=e,this.context=t,this.refs=Vv,this.updater=r||Uv}var Um=Bm.prototype=new Hv;Um.constructor=Bm;Wv(Um,Io.prototype);Um.isPureReactComponent=!0;var $0=Array.isArray,qv=Object.prototype.hasOwnProperty,Wm={current:null},Gv={key:!0,ref:!0,__self:!0,__source:!0};function Kv(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)qv.call(t,n)&&!Gv.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:cc,type:e,key:i,ref:o,props:a,_owner:Wm.current}}function TN(e,t){return{$$typeof:cc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Vm(e){return typeof e=="object"&&e!==null&&e.$$typeof===cc}function PN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var L0=/\/+/g;function lh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?PN(""+e.key):t.toString(36)}function cd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case cc:case vN:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+lh(o,0):n,$0(a)?(r="",e!=null&&(r=e.replace(L0,"$&/")+"/"),cd(a,t,r,"",function(d){return d})):a!=null&&(Vm(a)&&(a=TN(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(L0,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",$0(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+lh(i,l);o+=cd(i,t,r,c,a)}else if(c=EN(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+lh(i,l++),o+=cd(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ac(e,t,r){if(e==null)return e;var n=[],a=0;return cd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function ON(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ir={current:null},dd={transition:null},AN={ReactCurrentDispatcher:Ir,ReactCurrentBatchConfig:dd,ReactCurrentOwner:Wm};function Yv(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:Ac,forEach:function(e,t,r){Ac(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ac(e,function(){t++}),t},toArray:function(e){return Ac(e,function(t){return t})||[]},only:function(e){if(!Vm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=Io;tt.Fragment=yN;tt.Profiler=wN;tt.PureComponent=Bm;tt.StrictMode=bN;tt.Suspense=SN;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AN;tt.act=Yv;tt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Wv({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Wm.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)qv.call(t,c)&&!Gv.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:cc,type:e.type,key:a,ref:i,props:n,_owner:o}};tt.createContext=function(e){return e={$$typeof:_N,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jN,_context:e},e.Consumer=e};tt.createElement=Kv;tt.createFactory=function(e){var t=Kv.bind(null,e);return t.type=e,t};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:NN,render:e}};tt.isValidElement=Vm;tt.lazy=function(e){return{$$typeof:CN,_payload:{_status:-1,_result:e},_init:ON}};tt.memo=function(e,t){return{$$typeof:kN,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=dd.transition;dd.transition={};try{e()}finally{dd.transition=t}};tt.unstable_act=Yv;tt.useCallback=function(e,t){return Ir.current.useCallback(e,t)};tt.useContext=function(e){return Ir.current.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e){return Ir.current.useDeferredValue(e)};tt.useEffect=function(e,t){return Ir.current.useEffect(e,t)};tt.useId=function(){return Ir.current.useId()};tt.useImperativeHandle=function(e,t,r){return Ir.current.useImperativeHandle(e,t,r)};tt.useInsertionEffect=function(e,t){return Ir.current.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return Ir.current.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return Ir.current.useMemo(e,t)};tt.useReducer=function(e,t,r){return Ir.current.useReducer(e,t,r)};tt.useRef=function(e){return Ir.current.useRef(e)};tt.useState=function(e){return Ir.current.useState(e)};tt.useSyncExternalStore=function(e,t,r){return Ir.current.useSyncExternalStore(e,t,r)};tt.useTransition=function(){return Ir.current.useTransition()};tt.version="18.3.1";Bv.exports=tt;var h=Bv.exports;const he=Lv(h),Qv=xN({__proto__:null,default:he},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DN=h,RN=Symbol.for("react.element"),IN=Symbol.for("react.fragment"),MN=Object.prototype.hasOwnProperty,$N=DN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LN={key:!0,ref:!0,__self:!0,__source:!0};function Jv(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)MN.call(t,n)&&!LN.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:RN,type:e,key:i,ref:o,props:a,_owner:$N.current}}uu.Fragment=IN;uu.jsx=Jv;uu.jsxs=Jv;zv.exports=uu;var s=zv.exports,Xv={exports:{}},un={},Zv={exports:{}},ey={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,B){var X=M.length;M.push(B);e:for(;0<X;){var J=X-1>>>1,L=M[J];if(0<a(L,B))M[J]=B,M[X]=L,X=J;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var B=M[0],X=M.pop();if(X!==B){M[0]=X;e:for(var J=0,L=M.length,ne=L>>>1;J<ne;){var ae=2*(J+1)-1,Z=M[ae],se=ae+1,re=M[se];if(0>a(Z,X))se<L&&0>a(re,Z)?(M[J]=re,M[se]=X,J=se):(M[J]=Z,M[ae]=X,J=ae);else if(se<L&&0>a(re,X))M[J]=re,M[se]=X,J=se;else break e}}return B}function a(M,B){var X=M.sortIndex-B.sortIndex;return X!==0?X:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,m=3,v=!1,x=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var B=r(d);B!==null;){if(B.callback===null)n(d);else if(B.startTime<=M)n(d),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(d)}}function S(M){if(g=!1,w(M),!x)if(r(c)!==null)x=!0,D(C);else{var B=r(d);B!==null&&z(S,B.startTime-M)}}function C(M,B){x=!1,g&&(g=!1,y($),$=-1),v=!0;var X=m;try{for(w(B),f=r(c);f!==null&&(!(f.expirationTime>B)||M&&!A());){var J=f.callback;if(typeof J=="function"){f.callback=null,m=f.priorityLevel;var L=J(f.expirationTime<=B);B=e.unstable_now(),typeof L=="function"?f.callback=L:f===r(c)&&n(c),w(B)}else n(c);f=r(c)}if(f!==null)var ne=!0;else{var ae=r(d);ae!==null&&z(S,ae.startTime-B),ne=!1}return ne}finally{f=null,m=X,v=!1}}var T=!1,O=null,$=-1,Q=5,K=-1;function A(){return!(e.unstable_now()-K<Q)}function _(){if(O!==null){var M=e.unstable_now();K=M;var B=!0;try{B=O(!0,M)}finally{B?I():(T=!1,O=null)}}else T=!1}var I;if(typeof p=="function")I=function(){p(_)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,k=j.port2;j.port1.onmessage=_,I=function(){k.postMessage(null)}}else I=function(){b(_,0)};function D(M){O=M,T||(T=!0,I())}function z(M,B){$=b(function(){M(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){x||v||(x=!0,D(C))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var X=m;m=B;try{return M()}finally{m=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var X=m;m=M;try{return B()}finally{m=X}},e.unstable_scheduleCallback=function(M,B,X){var J=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?J+X:J):X=J,M){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=X+L,M={id:u++,callback:B,priorityLevel:M,startTime:X,expirationTime:L,sortIndex:-1},X>J?(M.sortIndex=X,t(d,M),r(c)===null&&M===r(d)&&(g?(y($),$=-1):g=!0,z(S,X-J))):(M.sortIndex=L,t(c,M),x||v||(x=!0,D(C))),M},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(M){var B=m;return function(){var X=m;m=B;try{return M.apply(this,arguments)}finally{m=X}}}})(ey);Zv.exports=ey;var FN=Zv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zN=h,cn=FN;function de(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ty=new Set,Il={};function xi(e,t){wo(e,t),wo(e+"Capture",t)}function wo(e,t){for(Il[e]=t,e=0;e<t.length;e++)ty.add(t[e])}var Cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),of=Object.prototype.hasOwnProperty,BN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F0={},z0={};function UN(e){return of.call(z0,e)?!0:of.call(F0,e)?!1:BN.test(e)?z0[e]=!0:(F0[e]=!0,!1)}function WN(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function VN(e,t,r,n){if(t===null||typeof t>"u"||WN(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mr(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fr[e]=new Mr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fr[t]=new Mr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fr[e]=new Mr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fr[e]=new Mr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fr[e]=new Mr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fr[e]=new Mr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fr[e]=new Mr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fr[e]=new Mr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fr[e]=new Mr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hm=/[\-:]([a-z])/g;function qm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hm,qm);fr[t]=new Mr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hm,qm);fr[t]=new Mr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hm,qm);fr[t]=new Mr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fr[e]=new Mr(e,1,!1,e.toLowerCase(),null,!1,!1)});fr.xlinkHref=new Mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fr[e]=new Mr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gm(e,t,r,n){var a=fr.hasOwnProperty(t)?fr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(VN(t,r,a,n)&&(r=null),n||a===null?UN(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ls=zN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dc=Symbol.for("react.element"),zi=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),Km=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),ry=Symbol.for("react.provider"),ny=Symbol.for("react.context"),Ym=Symbol.for("react.forward_ref"),cf=Symbol.for("react.suspense"),df=Symbol.for("react.suspense_list"),Qm=Symbol.for("react.memo"),ea=Symbol.for("react.lazy"),sy=Symbol.for("react.offscreen"),B0=Symbol.iterator;function Jo(e){return e===null||typeof e!="object"?null:(e=B0&&e[B0]||e["@@iterator"],typeof e=="function"?e:null)}var Bt=Object.assign,ch;function ul(e){if(ch===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ch=t&&t[1]||""}return`
`+ch+e}var dh=!1;function uh(e,t){if(!e||dh)return"";dh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{dh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ul(e):""}function HN(e){switch(e.tag){case 5:return ul(e.type);case 16:return ul("Lazy");case 13:return ul("Suspense");case 19:return ul("SuspenseList");case 0:case 2:case 15:return e=uh(e.type,!1),e;case 11:return e=uh(e.type.render,!1),e;case 1:return e=uh(e.type,!0),e;default:return""}}function uf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bi:return"Fragment";case zi:return"Portal";case lf:return"Profiler";case Km:return"StrictMode";case cf:return"Suspense";case df:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ny:return(e.displayName||"Context")+".Consumer";case ry:return(e._context.displayName||"Context")+".Provider";case Ym:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qm:return t=e.displayName||null,t!==null?t:uf(e.type)||"Memo";case ea:t=e._payload,e=e._init;try{return uf(e(t))}catch{}}return null}function qN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uf(t);case 8:return t===Km?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ja(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ay(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function GN(e){var t=ay(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rc(e){e._valueTracker||(e._valueTracker=GN(e))}function iy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ay(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Cd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function hf(e,t){var r=t.checked;return Bt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function U0(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ja(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oy(e,t){t=t.checked,t!=null&&Gm(e,"checked",t,!1)}function ff(e,t){oy(e,t);var r=ja(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mf(e,t.type,r):t.hasOwnProperty("defaultValue")&&mf(e,t.type,ja(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function W0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function mf(e,t,r){(t!=="number"||Cd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var hl=Array.isArray;function Xi(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ja(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function gf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(de(91));return Bt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function V0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(de(92));if(hl(r)){if(1<r.length)throw Error(de(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ja(r)}}function ly(e,t){var r=ja(t.value),n=ja(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function H0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ic,dy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ic.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ml(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var bl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KN=["Webkit","ms","Moz","O"];Object.keys(bl).forEach(function(e){KN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bl[t]=bl[e]})});function uy(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||bl.hasOwnProperty(e)&&bl[e]?(""+t).trim():t+"px"}function hy(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=uy(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var YN=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xf(e,t){if(t){if(YN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(de(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(de(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(de(61))}if(t.style!=null&&typeof t.style!="object")throw Error(de(62))}}function vf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yf=null;function Jm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bf=null,Zi=null,eo=null;function q0(e){if(e=hc(e)){if(typeof bf!="function")throw Error(de(280));var t=e.stateNode;t&&(t=pu(t),bf(e.stateNode,e.type,t))}}function fy(e){Zi?eo?eo.push(e):eo=[e]:Zi=e}function my(){if(Zi){var e=Zi,t=eo;if(eo=Zi=null,q0(e),t)for(e=0;e<t.length;e++)q0(t[e])}}function gy(e,t){return e(t)}function py(){}var hh=!1;function xy(e,t,r){if(hh)return e(t,r);hh=!0;try{return gy(e,t,r)}finally{hh=!1,(Zi!==null||eo!==null)&&(py(),my())}}function $l(e,t){var r=e.stateNode;if(r===null)return null;var n=pu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(de(231,t,typeof r));return r}var wf=!1;if(Cs)try{var Xo={};Object.defineProperty(Xo,"passive",{get:function(){wf=!0}}),window.addEventListener("test",Xo,Xo),window.removeEventListener("test",Xo,Xo)}catch{wf=!1}function QN(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var wl=!1,Ed=null,Td=!1,jf=null,JN={onError:function(e){wl=!0,Ed=e}};function XN(e,t,r,n,a,i,o,l,c){wl=!1,Ed=null,QN.apply(JN,arguments)}function ZN(e,t,r,n,a,i,o,l,c){if(XN.apply(this,arguments),wl){if(wl){var d=Ed;wl=!1,Ed=null}else throw Error(de(198));Td||(Td=!0,jf=d)}}function vi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function vy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function G0(e){if(vi(e)!==e)throw Error(de(188))}function eS(e){var t=e.alternate;if(!t){if(t=vi(e),t===null)throw Error(de(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return G0(a),e;if(i===n)return G0(a),t;i=i.sibling}throw Error(de(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(de(189))}}if(r.alternate!==n)throw Error(de(190))}if(r.tag!==3)throw Error(de(188));return r.stateNode.current===r?e:t}function yy(e){return e=eS(e),e!==null?by(e):null}function by(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=by(e);if(t!==null)return t;e=e.sibling}return null}var wy=cn.unstable_scheduleCallback,K0=cn.unstable_cancelCallback,tS=cn.unstable_shouldYield,rS=cn.unstable_requestPaint,Kt=cn.unstable_now,nS=cn.unstable_getCurrentPriorityLevel,Xm=cn.unstable_ImmediatePriority,jy=cn.unstable_UserBlockingPriority,Pd=cn.unstable_NormalPriority,sS=cn.unstable_LowPriority,_y=cn.unstable_IdlePriority,hu=null,os=null;function aS(e){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(hu,e,void 0,(e.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:lS,iS=Math.log,oS=Math.LN2;function lS(e){return e>>>=0,e===0?32:31-(iS(e)/oS|0)|0}var Mc=64,$c=4194304;function fl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Od(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=fl(l):(i&=o,i!==0&&(n=fl(i)))}else o=r&~a,o!==0?n=fl(o):i!==0&&(n=fl(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-zn(t),a=1<<r,n|=e[r],t&=~a;return n}function cS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dS(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-zn(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=cS(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function _f(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ny(){var e=Mc;return Mc<<=1,!(Mc&4194240)&&(Mc=64),e}function fh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function dc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zn(t),e[t]=r}function uS(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-zn(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Zm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-zn(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var gt=0;function Sy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ky,eg,Cy,Ey,Ty,Nf=!1,Lc=[],ma=null,ga=null,pa=null,Ll=new Map,Fl=new Map,ra=[],hS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y0(e,t){switch(e){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":Ll.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(t.pointerId)}}function Zo(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=hc(t),t!==null&&eg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function fS(e,t,r,n,a){switch(t){case"focusin":return ma=Zo(ma,e,t,r,n,a),!0;case"dragenter":return ga=Zo(ga,e,t,r,n,a),!0;case"mouseover":return pa=Zo(pa,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Ll.set(i,Zo(Ll.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Fl.set(i,Zo(Fl.get(i)||null,e,t,r,n,a)),!0}return!1}function Py(e){var t=Ga(e.target);if(t!==null){var r=vi(t);if(r!==null){if(t=r.tag,t===13){if(t=vy(r),t!==null){e.blockedOn=t,Ty(e.priority,function(){Cy(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ud(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Sf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);yf=n,r.target.dispatchEvent(n),yf=null}else return t=hc(r),t!==null&&eg(t),e.blockedOn=r,!1;t.shift()}return!0}function Q0(e,t,r){ud(e)&&r.delete(t)}function mS(){Nf=!1,ma!==null&&ud(ma)&&(ma=null),ga!==null&&ud(ga)&&(ga=null),pa!==null&&ud(pa)&&(pa=null),Ll.forEach(Q0),Fl.forEach(Q0)}function el(e,t){e.blockedOn===t&&(e.blockedOn=null,Nf||(Nf=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,mS)))}function zl(e){function t(a){return el(a,e)}if(0<Lc.length){el(Lc[0],e);for(var r=1;r<Lc.length;r++){var n=Lc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ma!==null&&el(ma,e),ga!==null&&el(ga,e),pa!==null&&el(pa,e),Ll.forEach(t),Fl.forEach(t),r=0;r<ra.length;r++)n=ra[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ra.length&&(r=ra[0],r.blockedOn===null);)Py(r),r.blockedOn===null&&ra.shift()}var to=Ls.ReactCurrentBatchConfig,Ad=!0;function gS(e,t,r,n){var a=gt,i=to.transition;to.transition=null;try{gt=1,tg(e,t,r,n)}finally{gt=a,to.transition=i}}function pS(e,t,r,n){var a=gt,i=to.transition;to.transition=null;try{gt=4,tg(e,t,r,n)}finally{gt=a,to.transition=i}}function tg(e,t,r,n){if(Ad){var a=Sf(e,t,r,n);if(a===null)_h(e,t,n,Dd,r),Y0(e,n);else if(fS(a,e,t,r,n))n.stopPropagation();else if(Y0(e,n),t&4&&-1<hS.indexOf(e)){for(;a!==null;){var i=hc(a);if(i!==null&&ky(i),i=Sf(e,t,r,n),i===null&&_h(e,t,n,Dd,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else _h(e,t,n,null,r)}}var Dd=null;function Sf(e,t,r,n){if(Dd=null,e=Jm(n),e=Ga(e),e!==null)if(t=vi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=vy(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dd=e,null}function Oy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nS()){case Xm:return 1;case jy:return 4;case Pd:case sS:return 16;case _y:return 536870912;default:return 16}default:return 16}}var ua=null,rg=null,hd=null;function Ay(){if(hd)return hd;var e,t=rg,r=t.length,n,a="value"in ua?ua.value:ua.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return hd=a.slice(e,1<n?1-n:void 0)}function fd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fc(){return!0}function J0(){return!1}function hn(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fc:J0,this.isPropagationStopped=J0,this}return Bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fc)},persist:function(){},isPersistent:Fc}),t}var Mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ng=hn(Mo),uc=Bt({},Mo,{view:0,detail:0}),xS=hn(uc),mh,gh,tl,fu=Bt({},uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tl&&(tl&&e.type==="mousemove"?(mh=e.screenX-tl.screenX,gh=e.screenY-tl.screenY):gh=mh=0,tl=e),mh)},movementY:function(e){return"movementY"in e?e.movementY:gh}}),X0=hn(fu),vS=Bt({},fu,{dataTransfer:0}),yS=hn(vS),bS=Bt({},uc,{relatedTarget:0}),ph=hn(bS),wS=Bt({},Mo,{animationName:0,elapsedTime:0,pseudoElement:0}),jS=hn(wS),_S=Bt({},Mo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),NS=hn(_S),SS=Bt({},Mo,{data:0}),Z0=hn(SS),kS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ES={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ES[e])?!!t[e]:!1}function sg(){return TS}var PS=Bt({},uc,{key:function(e){if(e.key){var t=kS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?CS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sg,charCode:function(e){return e.type==="keypress"?fd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OS=hn(PS),AS=Bt({},fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ep=hn(AS),DS=Bt({},uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sg}),RS=hn(DS),IS=Bt({},Mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),MS=hn(IS),$S=Bt({},fu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),LS=hn($S),FS=[9,13,27,32],ag=Cs&&"CompositionEvent"in window,jl=null;Cs&&"documentMode"in document&&(jl=document.documentMode);var zS=Cs&&"TextEvent"in window&&!jl,Dy=Cs&&(!ag||jl&&8<jl&&11>=jl),tp=String.fromCharCode(32),rp=!1;function Ry(e,t){switch(e){case"keyup":return FS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ui=!1;function BS(e,t){switch(e){case"compositionend":return Iy(t);case"keypress":return t.which!==32?null:(rp=!0,tp);case"textInput":return e=t.data,e===tp&&rp?null:e;default:return null}}function US(e,t){if(Ui)return e==="compositionend"||!ag&&Ry(e,t)?(e=Ay(),hd=rg=ua=null,Ui=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dy&&t.locale!=="ko"?null:t.data;default:return null}}var WS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function np(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!WS[e.type]:t==="textarea"}function My(e,t,r,n){fy(n),t=Rd(t,"onChange"),0<t.length&&(r=new ng("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var _l=null,Bl=null;function VS(e){Gy(e,0)}function mu(e){var t=Hi(e);if(iy(t))return e}function HS(e,t){if(e==="change")return t}var $y=!1;if(Cs){var xh;if(Cs){var vh="oninput"in document;if(!vh){var sp=document.createElement("div");sp.setAttribute("oninput","return;"),vh=typeof sp.oninput=="function"}xh=vh}else xh=!1;$y=xh&&(!document.documentMode||9<document.documentMode)}function ap(){_l&&(_l.detachEvent("onpropertychange",Ly),Bl=_l=null)}function Ly(e){if(e.propertyName==="value"&&mu(Bl)){var t=[];My(t,Bl,e,Jm(e)),xy(VS,t)}}function qS(e,t,r){e==="focusin"?(ap(),_l=t,Bl=r,_l.attachEvent("onpropertychange",Ly)):e==="focusout"&&ap()}function GS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mu(Bl)}function KS(e,t){if(e==="click")return mu(t)}function YS(e,t){if(e==="input"||e==="change")return mu(t)}function QS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wn=typeof Object.is=="function"?Object.is:QS;function Ul(e,t){if(Wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!of.call(t,a)||!Wn(e[a],t[a]))return!1}return!0}function ip(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function op(e,t){var r=ip(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ip(r)}}function Fy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zy(){for(var e=window,t=Cd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Cd(e.document)}return t}function ig(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function JS(e){var t=zy(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Fy(r.ownerDocument.documentElement,r)){if(n!==null&&ig(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=op(r,i);var o=op(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var XS=Cs&&"documentMode"in document&&11>=document.documentMode,Wi=null,kf=null,Nl=null,Cf=!1;function lp(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Cf||Wi==null||Wi!==Cd(n)||(n=Wi,"selectionStart"in n&&ig(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Nl&&Ul(Nl,n)||(Nl=n,n=Rd(kf,"onSelect"),0<n.length&&(t=new ng("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Wi)))}function zc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vi={animationend:zc("Animation","AnimationEnd"),animationiteration:zc("Animation","AnimationIteration"),animationstart:zc("Animation","AnimationStart"),transitionend:zc("Transition","TransitionEnd")},yh={},By={};Cs&&(By=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function gu(e){if(yh[e])return yh[e];if(!Vi[e])return e;var t=Vi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in By)return yh[e]=t[r];return e}var Uy=gu("animationend"),Wy=gu("animationiteration"),Vy=gu("animationstart"),Hy=gu("transitionend"),qy=new Map,cp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pa(e,t){qy.set(e,t),xi(t,[e])}for(var bh=0;bh<cp.length;bh++){var wh=cp[bh],ZS=wh.toLowerCase(),ek=wh[0].toUpperCase()+wh.slice(1);Pa(ZS,"on"+ek)}Pa(Uy,"onAnimationEnd");Pa(Wy,"onAnimationIteration");Pa(Vy,"onAnimationStart");Pa("dblclick","onDoubleClick");Pa("focusin","onFocus");Pa("focusout","onBlur");Pa(Hy,"onTransitionEnd");wo("onMouseEnter",["mouseout","mouseover"]);wo("onMouseLeave",["mouseout","mouseover"]);wo("onPointerEnter",["pointerout","pointerover"]);wo("onPointerLeave",["pointerout","pointerover"]);xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ml));function dp(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ZN(n,t,void 0,e),e.currentTarget=null}function Gy(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;dp(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;dp(a,l,d),i=c}}}if(Td)throw e=jf,Td=!1,jf=null,e}function Nt(e,t){var r=t[Af];r===void 0&&(r=t[Af]=new Set);var n=e+"__bubble";r.has(n)||(Ky(t,e,2,!1),r.add(n))}function jh(e,t,r){var n=0;t&&(n|=4),Ky(r,e,n,t)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function Wl(e){if(!e[Bc]){e[Bc]=!0,ty.forEach(function(r){r!=="selectionchange"&&(tk.has(r)||jh(r,!1,e),jh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bc]||(t[Bc]=!0,jh("selectionchange",!1,t))}}function Ky(e,t,r,n){switch(Oy(t)){case 1:var a=gS;break;case 4:a=pS;break;default:a=tg}r=a.bind(null,t,r,e),a=void 0,!wf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function _h(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ga(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}xy(function(){var d=i,u=Jm(r),f=[];e:{var m=qy.get(e);if(m!==void 0){var v=ng,x=e;switch(e){case"keypress":if(fd(r)===0)break e;case"keydown":case"keyup":v=OS;break;case"focusin":x="focus",v=ph;break;case"focusout":x="blur",v=ph;break;case"beforeblur":case"afterblur":v=ph;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=X0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=yS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=RS;break;case Uy:case Wy:case Vy:v=jS;break;case Hy:v=MS;break;case"scroll":v=xS;break;case"wheel":v=LS;break;case"copy":case"cut":case"paste":v=NS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=ep}var g=(t&4)!==0,b=!g&&e==="scroll",y=g?m!==null?m+"Capture":null:m;g=[];for(var p=d,w;p!==null;){w=p;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,y!==null&&(S=$l(p,y),S!=null&&g.push(Vl(p,S,w)))),b)break;p=p.return}0<g.length&&(m=new v(m,x,null,r,u),f.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",m&&r!==yf&&(x=r.relatedTarget||r.fromElement)&&(Ga(x)||x[Es]))break e;if((v||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,v?(x=r.relatedTarget||r.toElement,v=d,x=x?Ga(x):null,x!==null&&(b=vi(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=d),v!==x)){if(g=X0,S="onMouseLeave",y="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(g=ep,S="onPointerLeave",y="onPointerEnter",p="pointer"),b=v==null?m:Hi(v),w=x==null?m:Hi(x),m=new g(S,p+"leave",v,r,u),m.target=b,m.relatedTarget=w,S=null,Ga(u)===d&&(g=new g(y,p+"enter",x,r,u),g.target=w,g.relatedTarget=b,S=g),b=S,v&&x)t:{for(g=v,y=x,p=0,w=g;w;w=ki(w))p++;for(w=0,S=y;S;S=ki(S))w++;for(;0<p-w;)g=ki(g),p--;for(;0<w-p;)y=ki(y),w--;for(;p--;){if(g===y||y!==null&&g===y.alternate)break t;g=ki(g),y=ki(y)}g=null}else g=null;v!==null&&up(f,m,v,g,!1),x!==null&&b!==null&&up(f,b,x,g,!0)}}e:{if(m=d?Hi(d):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var C=HS;else if(np(m))if($y)C=YS;else{C=GS;var T=qS}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=KS);if(C&&(C=C(e,d))){My(f,C,r,u);break e}T&&T(e,m,d),e==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&mf(m,"number",m.value)}switch(T=d?Hi(d):window,e){case"focusin":(np(T)||T.contentEditable==="true")&&(Wi=T,kf=d,Nl=null);break;case"focusout":Nl=kf=Wi=null;break;case"mousedown":Cf=!0;break;case"contextmenu":case"mouseup":case"dragend":Cf=!1,lp(f,r,u);break;case"selectionchange":if(XS)break;case"keydown":case"keyup":lp(f,r,u)}var O;if(ag)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Ui?Ry(e,r)&&($="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&($="onCompositionStart");$&&(Dy&&r.locale!=="ko"&&(Ui||$!=="onCompositionStart"?$==="onCompositionEnd"&&Ui&&(O=Ay()):(ua=u,rg="value"in ua?ua.value:ua.textContent,Ui=!0)),T=Rd(d,$),0<T.length&&($=new Z0($,e,null,r,u),f.push({event:$,listeners:T}),O?$.data=O:(O=Iy(r),O!==null&&($.data=O)))),(O=zS?BS(e,r):US(e,r))&&(d=Rd(d,"onBeforeInput"),0<d.length&&(u=new Z0("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=O))}Gy(f,t)})}function Vl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Rd(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=$l(e,r),i!=null&&n.unshift(Vl(e,i,a)),i=$l(e,t),i!=null&&n.push(Vl(e,i,a))),e=e.return}return n}function ki(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function up(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=$l(r,i),c!=null&&o.unshift(Vl(r,c,l))):a||(c=$l(r,i),c!=null&&o.push(Vl(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var rk=/\r\n?/g,nk=/\u0000|\uFFFD/g;function hp(e){return(typeof e=="string"?e:""+e).replace(rk,`
`).replace(nk,"")}function Uc(e,t,r){if(t=hp(t),hp(e)!==t&&r)throw Error(de(425))}function Id(){}var Ef=null,Tf=null;function Pf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Of=typeof setTimeout=="function"?setTimeout:void 0,sk=typeof clearTimeout=="function"?clearTimeout:void 0,fp=typeof Promise=="function"?Promise:void 0,ak=typeof queueMicrotask=="function"?queueMicrotask:typeof fp<"u"?function(e){return fp.resolve(null).then(e).catch(ik)}:Of;function ik(e){setTimeout(function(){throw e})}function Nh(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),zl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);zl(t)}function xa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var $o=Math.random().toString(36).slice(2),ts="__reactFiber$"+$o,Hl="__reactProps$"+$o,Es="__reactContainer$"+$o,Af="__reactEvents$"+$o,ok="__reactListeners$"+$o,lk="__reactHandles$"+$o;function Ga(e){var t=e[ts];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Es]||r[ts]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=mp(e);e!==null;){if(r=e[ts])return r;e=mp(e)}return t}e=r,r=e.parentNode}return null}function hc(e){return e=e[ts]||e[Es],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(de(33))}function pu(e){return e[Hl]||null}var Df=[],qi=-1;function Oa(e){return{current:e}}function kt(e){0>qi||(e.current=Df[qi],Df[qi]=null,qi--)}function wt(e,t){qi++,Df[qi]=e.current,e.current=t}var _a={},_r=Oa(_a),Vr=Oa(!1),si=_a;function jo(e,t){var r=e.type.contextTypes;if(!r)return _a;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Hr(e){return e=e.childContextTypes,e!=null}function Md(){kt(Vr),kt(_r)}function gp(e,t,r){if(_r.current!==_a)throw Error(de(168));wt(_r,t),wt(Vr,r)}function Yy(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(de(108,qN(e)||"Unknown",a));return Bt({},r,n)}function $d(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_a,si=_r.current,wt(_r,e),wt(Vr,Vr.current),!0}function pp(e,t,r){var n=e.stateNode;if(!n)throw Error(de(169));r?(e=Yy(e,t,si),n.__reactInternalMemoizedMergedChildContext=e,kt(Vr),kt(_r),wt(_r,e)):kt(Vr),wt(Vr,r)}var ws=null,xu=!1,Sh=!1;function Qy(e){ws===null?ws=[e]:ws.push(e)}function ck(e){xu=!0,Qy(e)}function Aa(){if(!Sh&&ws!==null){Sh=!0;var e=0,t=gt;try{var r=ws;for(gt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ws=null,xu=!1}catch(a){throw ws!==null&&(ws=ws.slice(e+1)),wy(Xm,Aa),a}finally{gt=t,Sh=!1}}return null}var Gi=[],Ki=0,Ld=null,Fd=0,gn=[],pn=0,ai=null,js=1,_s="";function Ba(e,t){Gi[Ki++]=Fd,Gi[Ki++]=Ld,Ld=e,Fd=t}function Jy(e,t,r){gn[pn++]=js,gn[pn++]=_s,gn[pn++]=ai,ai=e;var n=js;e=_s;var a=32-zn(n)-1;n&=~(1<<a),r+=1;var i=32-zn(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,js=1<<32-zn(t)+a|r<<a|n,_s=i+e}else js=1<<i|r<<a|n,_s=e}function og(e){e.return!==null&&(Ba(e,1),Jy(e,1,0))}function lg(e){for(;e===Ld;)Ld=Gi[--Ki],Gi[Ki]=null,Fd=Gi[--Ki],Gi[Ki]=null;for(;e===ai;)ai=gn[--pn],gn[pn]=null,_s=gn[--pn],gn[pn]=null,js=gn[--pn],gn[pn]=null}var sn=null,rn=null,At=!1,Mn=null;function Xy(e,t){var r=xn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function xp(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,sn=e,rn=xa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,sn=e,rn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ai!==null?{id:js,overflow:_s}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=xn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,sn=e,rn=null,!0):!1;default:return!1}}function Rf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function If(e){if(At){var t=rn;if(t){var r=t;if(!xp(e,t)){if(Rf(e))throw Error(de(418));t=xa(r.nextSibling);var n=sn;t&&xp(e,t)?Xy(n,r):(e.flags=e.flags&-4097|2,At=!1,sn=e)}}else{if(Rf(e))throw Error(de(418));e.flags=e.flags&-4097|2,At=!1,sn=e}}}function vp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;sn=e}function Wc(e){if(e!==sn)return!1;if(!At)return vp(e),At=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pf(e.type,e.memoizedProps)),t&&(t=rn)){if(Rf(e))throw Zy(),Error(de(418));for(;t;)Xy(e,t),t=xa(t.nextSibling)}if(vp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(de(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){rn=xa(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}rn=null}}else rn=sn?xa(e.stateNode.nextSibling):null;return!0}function Zy(){for(var e=rn;e;)e=xa(e.nextSibling)}function _o(){rn=sn=null,At=!1}function cg(e){Mn===null?Mn=[e]:Mn.push(e)}var dk=Ls.ReactCurrentBatchConfig;function rl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(de(309));var n=r.stateNode}if(!n)throw Error(de(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(de(284));if(!r._owner)throw Error(de(290,e))}return e}function Vc(e,t){throw e=Object.prototype.toString.call(t),Error(de(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yp(e){var t=e._init;return t(e._payload)}function eb(e){function t(y,p){if(e){var w=y.deletions;w===null?(y.deletions=[p],y.flags|=16):w.push(p)}}function r(y,p){if(!e)return null;for(;p!==null;)t(y,p),p=p.sibling;return null}function n(y,p){for(y=new Map;p!==null;)p.key!==null?y.set(p.key,p):y.set(p.index,p),p=p.sibling;return y}function a(y,p){return y=wa(y,p),y.index=0,y.sibling=null,y}function i(y,p,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<p?(y.flags|=2,p):w):(y.flags|=2,p)):(y.flags|=1048576,p)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,p,w,S){return p===null||p.tag!==6?(p=Ah(w,y.mode,S),p.return=y,p):(p=a(p,w),p.return=y,p)}function c(y,p,w,S){var C=w.type;return C===Bi?u(y,p,w.props.children,S,w.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ea&&yp(C)===p.type)?(S=a(p,w.props),S.ref=rl(y,p,w),S.return=y,S):(S=bd(w.type,w.key,w.props,null,y.mode,S),S.ref=rl(y,p,w),S.return=y,S)}function d(y,p,w,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==w.containerInfo||p.stateNode.implementation!==w.implementation?(p=Dh(w,y.mode,S),p.return=y,p):(p=a(p,w.children||[]),p.return=y,p)}function u(y,p,w,S,C){return p===null||p.tag!==7?(p=ni(w,y.mode,S,C),p.return=y,p):(p=a(p,w),p.return=y,p)}function f(y,p,w){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ah(""+p,y.mode,w),p.return=y,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Dc:return w=bd(p.type,p.key,p.props,null,y.mode,w),w.ref=rl(y,null,p),w.return=y,w;case zi:return p=Dh(p,y.mode,w),p.return=y,p;case ea:var S=p._init;return f(y,S(p._payload),w)}if(hl(p)||Jo(p))return p=ni(p,y.mode,w,null),p.return=y,p;Vc(y,p)}return null}function m(y,p,w,S){var C=p!==null?p.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:l(y,p,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Dc:return w.key===C?c(y,p,w,S):null;case zi:return w.key===C?d(y,p,w,S):null;case ea:return C=w._init,m(y,p,C(w._payload),S)}if(hl(w)||Jo(w))return C!==null?null:u(y,p,w,S,null);Vc(y,w)}return null}function v(y,p,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(w)||null,l(p,y,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Dc:return y=y.get(S.key===null?w:S.key)||null,c(p,y,S,C);case zi:return y=y.get(S.key===null?w:S.key)||null,d(p,y,S,C);case ea:var T=S._init;return v(y,p,w,T(S._payload),C)}if(hl(S)||Jo(S))return y=y.get(w)||null,u(p,y,S,C,null);Vc(p,S)}return null}function x(y,p,w,S){for(var C=null,T=null,O=p,$=p=0,Q=null;O!==null&&$<w.length;$++){O.index>$?(Q=O,O=null):Q=O.sibling;var K=m(y,O,w[$],S);if(K===null){O===null&&(O=Q);break}e&&O&&K.alternate===null&&t(y,O),p=i(K,p,$),T===null?C=K:T.sibling=K,T=K,O=Q}if($===w.length)return r(y,O),At&&Ba(y,$),C;if(O===null){for(;$<w.length;$++)O=f(y,w[$],S),O!==null&&(p=i(O,p,$),T===null?C=O:T.sibling=O,T=O);return At&&Ba(y,$),C}for(O=n(y,O);$<w.length;$++)Q=v(O,y,$,w[$],S),Q!==null&&(e&&Q.alternate!==null&&O.delete(Q.key===null?$:Q.key),p=i(Q,p,$),T===null?C=Q:T.sibling=Q,T=Q);return e&&O.forEach(function(A){return t(y,A)}),At&&Ba(y,$),C}function g(y,p,w,S){var C=Jo(w);if(typeof C!="function")throw Error(de(150));if(w=C.call(w),w==null)throw Error(de(151));for(var T=C=null,O=p,$=p=0,Q=null,K=w.next();O!==null&&!K.done;$++,K=w.next()){O.index>$?(Q=O,O=null):Q=O.sibling;var A=m(y,O,K.value,S);if(A===null){O===null&&(O=Q);break}e&&O&&A.alternate===null&&t(y,O),p=i(A,p,$),T===null?C=A:T.sibling=A,T=A,O=Q}if(K.done)return r(y,O),At&&Ba(y,$),C;if(O===null){for(;!K.done;$++,K=w.next())K=f(y,K.value,S),K!==null&&(p=i(K,p,$),T===null?C=K:T.sibling=K,T=K);return At&&Ba(y,$),C}for(O=n(y,O);!K.done;$++,K=w.next())K=v(O,y,$,K.value,S),K!==null&&(e&&K.alternate!==null&&O.delete(K.key===null?$:K.key),p=i(K,p,$),T===null?C=K:T.sibling=K,T=K);return e&&O.forEach(function(_){return t(y,_)}),At&&Ba(y,$),C}function b(y,p,w,S){if(typeof w=="object"&&w!==null&&w.type===Bi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Dc:e:{for(var C=w.key,T=p;T!==null;){if(T.key===C){if(C=w.type,C===Bi){if(T.tag===7){r(y,T.sibling),p=a(T,w.props.children),p.return=y,y=p;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ea&&yp(C)===T.type){r(y,T.sibling),p=a(T,w.props),p.ref=rl(y,T,w),p.return=y,y=p;break e}r(y,T);break}else t(y,T);T=T.sibling}w.type===Bi?(p=ni(w.props.children,y.mode,S,w.key),p.return=y,y=p):(S=bd(w.type,w.key,w.props,null,y.mode,S),S.ref=rl(y,p,w),S.return=y,y=S)}return o(y);case zi:e:{for(T=w.key;p!==null;){if(p.key===T)if(p.tag===4&&p.stateNode.containerInfo===w.containerInfo&&p.stateNode.implementation===w.implementation){r(y,p.sibling),p=a(p,w.children||[]),p.return=y,y=p;break e}else{r(y,p);break}else t(y,p);p=p.sibling}p=Dh(w,y.mode,S),p.return=y,y=p}return o(y);case ea:return T=w._init,b(y,p,T(w._payload),S)}if(hl(w))return x(y,p,w,S);if(Jo(w))return g(y,p,w,S);Vc(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,p!==null&&p.tag===6?(r(y,p.sibling),p=a(p,w),p.return=y,y=p):(r(y,p),p=Ah(w,y.mode,S),p.return=y,y=p),o(y)):r(y,p)}return b}var No=eb(!0),tb=eb(!1),zd=Oa(null),Bd=null,Yi=null,dg=null;function ug(){dg=Yi=Bd=null}function hg(e){var t=zd.current;kt(zd),e._currentValue=t}function Mf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ro(e,t){Bd=e,dg=Yi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wr=!0),e.firstContext=null)}function bn(e){var t=e._currentValue;if(dg!==e)if(e={context:e,memoizedValue:t,next:null},Yi===null){if(Bd===null)throw Error(de(308));Yi=e,Bd.dependencies={lanes:0,firstContext:e}}else Yi=Yi.next=e;return t}var Ka=null;function fg(e){Ka===null?Ka=[e]:Ka.push(e)}function rb(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,fg(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ts(e,n)}function Ts(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ta=!1;function mg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ns(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function va(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,lt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ts(e,r)}return a=n.interleaved,a===null?(t.next=t,fg(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ts(e,r)}function md(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Zm(e,r)}}function bp(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ud(e,t,r,n){var a=e.updateQueue;ta=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,v=l.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(m=t,v=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){f=x.call(v,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(v,f,m):x,m==null)break e;f=Bt({},f,m);break e;case 2:ta=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=v,c=f):u=u.next=v,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(1);if(u===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);oi|=o,e.lanes=o,e.memoizedState=f}}function wp(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(de(191,a));a.call(n)}}}var fc={},ls=Oa(fc),ql=Oa(fc),Gl=Oa(fc);function Ya(e){if(e===fc)throw Error(de(174));return e}function gg(e,t){switch(wt(Gl,t),wt(ql,e),wt(ls,fc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pf(t,e)}kt(ls),wt(ls,t)}function So(){kt(ls),kt(ql),kt(Gl)}function sb(e){Ya(Gl.current);var t=Ya(ls.current),r=pf(t,e.type);t!==r&&(wt(ql,e),wt(ls,r))}function pg(e){ql.current===e&&(kt(ls),kt(ql))}var Ft=Oa(0);function Wd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var kh=[];function xg(){for(var e=0;e<kh.length;e++)kh[e]._workInProgressVersionPrimary=null;kh.length=0}var gd=Ls.ReactCurrentDispatcher,Ch=Ls.ReactCurrentBatchConfig,ii=0,zt=null,tr=null,or=null,Vd=!1,Sl=!1,Kl=0,uk=0;function vr(){throw Error(de(321))}function vg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Wn(e[r],t[r]))return!1;return!0}function yg(e,t,r,n,a,i){if(ii=i,zt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gd.current=e===null||e.memoizedState===null?gk:pk,e=r(n,a),Sl){i=0;do{if(Sl=!1,Kl=0,25<=i)throw Error(de(301));i+=1,or=tr=null,t.updateQueue=null,gd.current=xk,e=r(n,a)}while(Sl)}if(gd.current=Hd,t=tr!==null&&tr.next!==null,ii=0,or=tr=zt=null,Vd=!1,t)throw Error(de(300));return e}function bg(){var e=Kl!==0;return Kl=0,e}function Jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?zt.memoizedState=or=e:or=or.next=e,or}function wn(){if(tr===null){var e=zt.alternate;e=e!==null?e.memoizedState:null}else e=tr.next;var t=or===null?zt.memoizedState:or.next;if(t!==null)or=t,tr=e;else{if(e===null)throw Error(de(310));tr=e,e={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},or===null?zt.memoizedState=or=e:or=or.next=e}return or}function Yl(e,t){return typeof t=="function"?t(e):t}function Eh(e){var t=wn(),r=t.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=e;var n=tr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ii&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,zt.lanes|=u,oi|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Wn(n,t.memoizedState)||(Wr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,zt.lanes|=i,oi|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Th(e){var t=wn(),r=t.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Wn(i,t.memoizedState)||(Wr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function ab(){}function ib(e,t){var r=zt,n=wn(),a=t(),i=!Wn(n.memoizedState,a);if(i&&(n.memoizedState=a,Wr=!0),n=n.queue,wg(cb.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||or!==null&&or.memoizedState.tag&1){if(r.flags|=2048,Ql(9,lb.bind(null,r,n,a,t),void 0,null),cr===null)throw Error(de(349));ii&30||ob(r,t,a)}return a}function ob(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=zt.updateQueue,t===null?(t={lastEffect:null,stores:null},zt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lb(e,t,r,n){t.value=r,t.getSnapshot=n,db(t)&&ub(e)}function cb(e,t,r){return r(function(){db(t)&&ub(e)})}function db(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Wn(e,r)}catch{return!0}}function ub(e){var t=Ts(e,1);t!==null&&Bn(t,e,1,-1)}function jp(e){var t=Jn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:e},t.queue=e,e=e.dispatch=mk.bind(null,zt,e),[t.memoizedState,e]}function Ql(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=zt.updateQueue,t===null?(t={lastEffect:null,stores:null},zt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function hb(){return wn().memoizedState}function pd(e,t,r,n){var a=Jn();zt.flags|=e,a.memoizedState=Ql(1|t,r,void 0,n===void 0?null:n)}function vu(e,t,r,n){var a=wn();n=n===void 0?null:n;var i=void 0;if(tr!==null){var o=tr.memoizedState;if(i=o.destroy,n!==null&&vg(n,o.deps)){a.memoizedState=Ql(t,r,i,n);return}}zt.flags|=e,a.memoizedState=Ql(1|t,r,i,n)}function _p(e,t){return pd(8390656,8,e,t)}function wg(e,t){return vu(2048,8,e,t)}function fb(e,t){return vu(4,2,e,t)}function mb(e,t){return vu(4,4,e,t)}function gb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pb(e,t,r){return r=r!=null?r.concat([e]):null,vu(4,4,gb.bind(null,t,e),r)}function jg(){}function xb(e,t){var r=wn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&vg(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function vb(e,t){var r=wn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&vg(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function yb(e,t,r){return ii&21?(Wn(r,t)||(r=Ny(),zt.lanes|=r,oi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wr=!0),e.memoizedState=r)}function hk(e,t){var r=gt;gt=r!==0&&4>r?r:4,e(!0);var n=Ch.transition;Ch.transition={};try{e(!1),t()}finally{gt=r,Ch.transition=n}}function bb(){return wn().memoizedState}function fk(e,t,r){var n=ba(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},wb(e))jb(t,r);else if(r=rb(e,t,r,n),r!==null){var a=Dr();Bn(r,e,n,a),_b(r,t,n)}}function mk(e,t,r){var n=ba(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(wb(e))jb(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Wn(l,o)){var c=t.interleaved;c===null?(a.next=a,fg(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=rb(e,t,a,n),r!==null&&(a=Dr(),Bn(r,e,n,a),_b(r,t,n))}}function wb(e){var t=e.alternate;return e===zt||t!==null&&t===zt}function jb(e,t){Sl=Vd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function _b(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Zm(e,r)}}var Hd={readContext:bn,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},gk={readContext:bn,useCallback:function(e,t){return Jn().memoizedState=[e,t===void 0?null:t],e},useContext:bn,useEffect:_p,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,pd(4194308,4,gb.bind(null,t,e),r)},useLayoutEffect:function(e,t){return pd(4194308,4,e,t)},useInsertionEffect:function(e,t){return pd(4,2,e,t)},useMemo:function(e,t){var r=Jn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Jn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=fk.bind(null,zt,e),[n.memoizedState,e]},useRef:function(e){var t=Jn();return e={current:e},t.memoizedState=e},useState:jp,useDebugValue:jg,useDeferredValue:function(e){return Jn().memoizedState=e},useTransition:function(){var e=jp(!1),t=e[0];return e=hk.bind(null,e[1]),Jn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=zt,a=Jn();if(At){if(r===void 0)throw Error(de(407));r=r()}else{if(r=t(),cr===null)throw Error(de(349));ii&30||ob(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,_p(cb.bind(null,n,i,e),[e]),n.flags|=2048,Ql(9,lb.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Jn(),t=cr.identifierPrefix;if(At){var r=_s,n=js;r=(n&~(1<<32-zn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Kl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=uk++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pk={readContext:bn,useCallback:xb,useContext:bn,useEffect:wg,useImperativeHandle:pb,useInsertionEffect:fb,useLayoutEffect:mb,useMemo:vb,useReducer:Eh,useRef:hb,useState:function(){return Eh(Yl)},useDebugValue:jg,useDeferredValue:function(e){var t=wn();return yb(t,tr.memoizedState,e)},useTransition:function(){var e=Eh(Yl)[0],t=wn().memoizedState;return[e,t]},useMutableSource:ab,useSyncExternalStore:ib,useId:bb,unstable_isNewReconciler:!1},xk={readContext:bn,useCallback:xb,useContext:bn,useEffect:wg,useImperativeHandle:pb,useInsertionEffect:fb,useLayoutEffect:mb,useMemo:vb,useReducer:Th,useRef:hb,useState:function(){return Th(Yl)},useDebugValue:jg,useDeferredValue:function(e){var t=wn();return tr===null?t.memoizedState=e:yb(t,tr.memoizedState,e)},useTransition:function(){var e=Th(Yl)[0],t=wn().memoizedState;return[e,t]},useMutableSource:ab,useSyncExternalStore:ib,useId:bb,unstable_isNewReconciler:!1};function Pn(e,t){if(e&&e.defaultProps){t=Bt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function $f(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Bt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var yu={isMounted:function(e){return(e=e._reactInternals)?vi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Dr(),a=ba(e),i=Ns(n,a);i.payload=t,r!=null&&(i.callback=r),t=va(e,i,a),t!==null&&(Bn(t,e,a,n),md(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Dr(),a=ba(e),i=Ns(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=va(e,i,a),t!==null&&(Bn(t,e,a,n),md(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Dr(),n=ba(e),a=Ns(r,n);a.tag=2,t!=null&&(a.callback=t),t=va(e,a,n),t!==null&&(Bn(t,e,n,r),md(t,e,n))}};function Np(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ul(r,n)||!Ul(a,i):!0}function Nb(e,t,r){var n=!1,a=_a,i=t.contextType;return typeof i=="object"&&i!==null?i=bn(i):(a=Hr(t)?si:_r.current,n=t.contextTypes,i=(n=n!=null)?jo(e,a):_a),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Sp(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&yu.enqueueReplaceState(t,t.state,null)}function Lf(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},mg(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=bn(i):(i=Hr(t)?si:_r.current,a.context=jo(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&($f(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&yu.enqueueReplaceState(a,a.state,null),Ud(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ko(e,t){try{var r="",n=t;do r+=HN(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Ph(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ff(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var vk=typeof WeakMap=="function"?WeakMap:Map;function Sb(e,t,r){r=Ns(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Gd||(Gd=!0,Yf=n),Ff(e,t)},r}function kb(e,t,r){r=Ns(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Ff(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ff(e,t),typeof n!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function kp(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new vk;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Ak.bind(null,e,t,r),t.then(e,e))}function Cp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ep(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ns(-1,1),t.tag=2,va(r,t,1))),r.lanes|=1),e)}var yk=Ls.ReactCurrentOwner,Wr=!1;function Tr(e,t,r,n){t.child=e===null?tb(t,null,r,n):No(t,e.child,r,n)}function Tp(e,t,r,n,a){r=r.render;var i=t.ref;return ro(t,a),n=yg(e,t,r,n,i,a),r=bg(),e!==null&&!Wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ps(e,t,a)):(At&&r&&og(t),t.flags|=1,Tr(e,t,n,a),t.child)}function Pp(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Pg(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Cb(e,t,i,n,a)):(e=bd(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ul,r(o,n)&&e.ref===t.ref)return Ps(e,t,a)}return t.flags|=1,e=wa(i,n),e.ref=t.ref,e.return=t,t.child=e}function Cb(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Ul(i,n)&&e.ref===t.ref)if(Wr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Wr=!0);else return t.lanes=e.lanes,Ps(e,t,a)}return zf(e,t,r,n,a)}function Eb(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(Ji,en),en|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wt(Ji,en),en|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,wt(Ji,en),en|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,wt(Ji,en),en|=n;return Tr(e,t,a,r),t.child}function Tb(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function zf(e,t,r,n,a){var i=Hr(r)?si:_r.current;return i=jo(t,i),ro(t,a),r=yg(e,t,r,n,i,a),n=bg(),e!==null&&!Wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ps(e,t,a)):(At&&n&&og(t),t.flags|=1,Tr(e,t,r,a),t.child)}function Op(e,t,r,n,a){if(Hr(r)){var i=!0;$d(t)}else i=!1;if(ro(t,a),t.stateNode===null)xd(e,t),Nb(t,r,n),Lf(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=bn(d):(d=Hr(r)?si:_r.current,d=jo(t,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Sp(t,o,n,d),ta=!1;var m=t.memoizedState;o.state=m,Ud(t,n,o,a),c=t.memoizedState,l!==n||m!==c||Vr.current||ta?(typeof u=="function"&&($f(t,r,u,n),c=t.memoizedState),(l=ta||Np(t,r,l,n,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,nb(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Pn(t.type,l),o.props=d,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=bn(c):(c=Hr(r)?si:_r.current,c=jo(t,c));var v=r.getDerivedStateFromProps;(u=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Sp(t,o,n,c),ta=!1,m=t.memoizedState,o.state=m,Ud(t,n,o,a);var x=t.memoizedState;l!==f||m!==x||Vr.current||ta?(typeof v=="function"&&($f(t,r,v,n),x=t.memoizedState),(d=ta||Np(t,r,d,n,m,x,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Bf(e,t,r,n,i,a)}function Bf(e,t,r,n,a,i){Tb(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&pp(t,r,!1),Ps(e,t,i);n=t.stateNode,yk.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=No(t,e.child,null,i),t.child=No(t,null,l,i)):Tr(e,t,l,i),t.memoizedState=n.state,a&&pp(t,r,!0),t.child}function Pb(e){var t=e.stateNode;t.pendingContext?gp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gp(e,t.context,!1),gg(e,t.containerInfo)}function Ap(e,t,r,n,a){return _o(),cg(a),t.flags|=256,Tr(e,t,r,n),t.child}var Uf={dehydrated:null,treeContext:null,retryLane:0};function Wf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ob(e,t,r){var n=t.pendingProps,a=Ft.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),wt(Ft,a&1),e===null)return If(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ju(o,n,0,null),e=ni(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Wf(r),t.memoizedState=Uf,e):_g(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return bk(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=wa(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=wa(l,i):(i=ni(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Wf(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Uf,n}return i=e.child,e=i.sibling,n=wa(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function _g(e,t){return t=ju({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hc(e,t,r,n){return n!==null&&cg(n),No(t,e.child,null,r),e=_g(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bk(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Ph(Error(de(422))),Hc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=ju({mode:"visible",children:n.children},a,0,null),i=ni(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&No(t,e.child,null,o),t.child.memoizedState=Wf(o),t.memoizedState=Uf,i);if(!(t.mode&1))return Hc(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(de(419)),n=Ph(i,n,void 0),Hc(e,t,o,n)}if(l=(o&e.childLanes)!==0,Wr||l){if(n=cr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ts(e,a),Bn(n,e,a,-1))}return Tg(),n=Ph(Error(de(421))),Hc(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Dk.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,rn=xa(a.nextSibling),sn=t,At=!0,Mn=null,e!==null&&(gn[pn++]=js,gn[pn++]=_s,gn[pn++]=ai,js=e.id,_s=e.overflow,ai=t),t=_g(t,n.children),t.flags|=4096,t)}function Dp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Mf(e.return,t,r)}function Oh(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Ab(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Tr(e,t,n.children,r),n=Ft.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dp(e,r,t);else if(e.tag===19)Dp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(wt(Ft,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Wd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Oh(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Wd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Oh(t,!0,r,null,i);break;case"together":Oh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ps(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),oi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(de(153));if(t.child!==null){for(e=t.child,r=wa(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wa(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function wk(e,t,r){switch(t.tag){case 3:Pb(t),_o();break;case 5:sb(t);break;case 1:Hr(t.type)&&$d(t);break;case 4:gg(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;wt(zd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(wt(Ft,Ft.current&1),t.flags|=128,null):r&t.child.childLanes?Ob(e,t,r):(wt(Ft,Ft.current&1),e=Ps(e,t,r),e!==null?e.sibling:null);wt(Ft,Ft.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Ab(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),wt(Ft,Ft.current),n)break;return null;case 22:case 23:return t.lanes=0,Eb(e,t,r)}return Ps(e,t,r)}var Db,Vf,Rb,Ib;Db=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Vf=function(){};Rb=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ya(ls.current);var i=null;switch(r){case"input":a=hf(e,a),n=hf(e,n),i=[];break;case"select":a=Bt({},a,{value:void 0}),n=Bt({},n,{value:void 0}),i=[];break;case"textarea":a=gf(e,a),n=gf(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Id)}xf(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Il.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Il.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Nt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Ib=function(e,t,r,n){r!==n&&(t.flags|=4)};function nl(e,t){if(!At)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function yr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function jk(e,t,r){var n=t.pendingProps;switch(lg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(t),null;case 1:return Hr(t.type)&&Md(),yr(t),null;case 3:return n=t.stateNode,So(),kt(Vr),kt(_r),xg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mn!==null&&(Xf(Mn),Mn=null))),Vf(e,t),yr(t),null;case 5:pg(t);var a=Ya(Gl.current);if(r=t.type,e!==null&&t.stateNode!=null)Rb(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(de(166));return yr(t),null}if(e=Ya(ls.current),Wc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ts]=t,n[Hl]=i,e=(t.mode&1)!==0,r){case"dialog":Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":case"embed":Nt("load",n);break;case"video":case"audio":for(a=0;a<ml.length;a++)Nt(ml[a],n);break;case"source":Nt("error",n);break;case"img":case"image":case"link":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"input":U0(n,i),Nt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Nt("invalid",n);break;case"textarea":V0(n,i),Nt("invalid",n)}xf(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Uc(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Uc(n.textContent,l,e),a=["children",""+l]):Il.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Nt("scroll",n)}switch(r){case"input":Rc(n),W0(n,i,!0);break;case"textarea":Rc(n),H0(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Id)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cy(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ts]=t,e[Hl]=n,Db(e,t,!1,!1),t.stateNode=e;e:{switch(o=vf(r,n),r){case"dialog":Nt("cancel",e),Nt("close",e),a=n;break;case"iframe":case"object":case"embed":Nt("load",e),a=n;break;case"video":case"audio":for(a=0;a<ml.length;a++)Nt(ml[a],e);a=n;break;case"source":Nt("error",e),a=n;break;case"img":case"image":case"link":Nt("error",e),Nt("load",e),a=n;break;case"details":Nt("toggle",e),a=n;break;case"input":U0(e,n),a=hf(e,n),Nt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Bt({},n,{value:void 0}),Nt("invalid",e);break;case"textarea":V0(e,n),a=gf(e,n),Nt("invalid",e);break;default:a=n}xf(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?hy(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dy(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ml(e,c):typeof c=="number"&&Ml(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Il.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Nt("scroll",e):c!=null&&Gm(e,i,c,o))}switch(r){case"input":Rc(e),W0(e,n,!1);break;case"textarea":Rc(e),H0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ja(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Xi(e,!!n.multiple,i,!1):n.defaultValue!=null&&Xi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Id)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yr(t),null;case 6:if(e&&t.stateNode!=null)Ib(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(de(166));if(r=Ya(Gl.current),Ya(ls.current),Wc(t)){if(n=t.stateNode,r=t.memoizedProps,n[ts]=t,(i=n.nodeValue!==r)&&(e=sn,e!==null))switch(e.tag){case 3:Uc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Uc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ts]=t,t.stateNode=n}return yr(t),null;case 13:if(kt(Ft),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(At&&rn!==null&&t.mode&1&&!(t.flags&128))Zy(),_o(),t.flags|=98560,i=!1;else if(i=Wc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(de(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(de(317));i[ts]=t}else _o(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yr(t),i=!1}else Mn!==null&&(Xf(Mn),Mn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ft.current&1?rr===0&&(rr=3):Tg())),t.updateQueue!==null&&(t.flags|=4),yr(t),null);case 4:return So(),Vf(e,t),e===null&&Wl(t.stateNode.containerInfo),yr(t),null;case 10:return hg(t.type._context),yr(t),null;case 17:return Hr(t.type)&&Md(),yr(t),null;case 19:if(kt(Ft),i=t.memoizedState,i===null)return yr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)nl(i,!1);else{if(rr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wd(e),o!==null){for(t.flags|=128,nl(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return wt(Ft,Ft.current&1|2),t.child}e=e.sibling}i.tail!==null&&Kt()>Co&&(t.flags|=128,n=!0,nl(i,!1),t.lanes=4194304)}else{if(!n)if(e=Wd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),nl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!At)return yr(t),null}else 2*Kt()-i.renderingStartTime>Co&&r!==1073741824&&(t.flags|=128,n=!0,nl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Kt(),t.sibling=null,r=Ft.current,wt(Ft,n?r&1|2:r&1),t):(yr(t),null);case 22:case 23:return Eg(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?en&1073741824&&(yr(t),t.subtreeFlags&6&&(t.flags|=8192)):yr(t),null;case 24:return null;case 25:return null}throw Error(de(156,t.tag))}function _k(e,t){switch(lg(t),t.tag){case 1:return Hr(t.type)&&Md(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return So(),kt(Vr),kt(_r),xg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pg(t),null;case 13:if(kt(Ft),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(de(340));_o()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return kt(Ft),null;case 4:return So(),null;case 10:return hg(t.type._context),null;case 22:case 23:return Eg(),null;case 24:return null;default:return null}}var qc=!1,jr=!1,Nk=typeof WeakSet=="function"?WeakSet:Set,be=null;function Qi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Vt(e,t,n)}else r.current=null}function Hf(e,t,r){try{r()}catch(n){Vt(e,t,n)}}var Rp=!1;function Sk(e,t){if(Ef=Ad,e=zy(),ig(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,f=e,m=null;t:for(;;){for(var v;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===n&&(c=o),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Tf={focusedElem:e,selectionRange:r},Ad=!1,be=t;be!==null;)if(t=be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,be=e;else for(;be!==null;){t=be;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,b=x.memoizedState,y=t.stateNode,p=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Pn(t.type,g),b);y.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(S){Vt(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,be=e;break}be=t.return}return x=Rp,Rp=!1,x}function kl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Hf(t,r,i)}a=a.next}while(a!==n)}}function bu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function qf(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Mb(e){var t=e.alternate;t!==null&&(e.alternate=null,Mb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ts],delete t[Hl],delete t[Af],delete t[ok],delete t[lk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $b(e){return e.tag===5||e.tag===3||e.tag===4}function Ip(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$b(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gf(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Id));else if(n!==4&&(e=e.child,e!==null))for(Gf(e,t,r),e=e.sibling;e!==null;)Gf(e,t,r),e=e.sibling}function Kf(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Kf(e,t,r),e=e.sibling;e!==null;)Kf(e,t,r),e=e.sibling}var dr=null,Dn=!1;function Us(e,t,r){for(r=r.child;r!==null;)Lb(e,t,r),r=r.sibling}function Lb(e,t,r){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(hu,r)}catch{}switch(r.tag){case 5:jr||Qi(r,t);case 6:var n=dr,a=Dn;dr=null,Us(e,t,r),dr=n,Dn=a,dr!==null&&(Dn?(e=dr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):dr.removeChild(r.stateNode));break;case 18:dr!==null&&(Dn?(e=dr,r=r.stateNode,e.nodeType===8?Nh(e.parentNode,r):e.nodeType===1&&Nh(e,r),zl(e)):Nh(dr,r.stateNode));break;case 4:n=dr,a=Dn,dr=r.stateNode.containerInfo,Dn=!0,Us(e,t,r),dr=n,Dn=a;break;case 0:case 11:case 14:case 15:if(!jr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hf(r,t,o),a=a.next}while(a!==n)}Us(e,t,r);break;case 1:if(!jr&&(Qi(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Vt(r,t,l)}Us(e,t,r);break;case 21:Us(e,t,r);break;case 22:r.mode&1?(jr=(n=jr)||r.memoizedState!==null,Us(e,t,r),jr=n):Us(e,t,r);break;default:Us(e,t,r)}}function Mp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Nk),t.forEach(function(n){var a=Rk.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function kn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:dr=l.stateNode,Dn=!1;break e;case 3:dr=l.stateNode.containerInfo,Dn=!0;break e;case 4:dr=l.stateNode.containerInfo,Dn=!0;break e}l=l.return}if(dr===null)throw Error(de(160));Lb(i,o,a),dr=null,Dn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Vt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fb(t,e),t=t.sibling}function Fb(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kn(t,e),Qn(e),n&4){try{kl(3,e,e.return),bu(3,e)}catch(g){Vt(e,e.return,g)}try{kl(5,e,e.return)}catch(g){Vt(e,e.return,g)}}break;case 1:kn(t,e),Qn(e),n&512&&r!==null&&Qi(r,r.return);break;case 5:if(kn(t,e),Qn(e),n&512&&r!==null&&Qi(r,r.return),e.flags&32){var a=e.stateNode;try{Ml(a,"")}catch(g){Vt(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&oy(a,i),vf(l,o);var d=vf(l,i);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?hy(a,f):u==="dangerouslySetInnerHTML"?dy(a,f):u==="children"?Ml(a,f):Gm(a,u,f,d)}switch(l){case"input":ff(a,i);break;case"textarea":ly(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Xi(a,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?Xi(a,!!i.multiple,i.defaultValue,!0):Xi(a,!!i.multiple,i.multiple?[]:"",!1))}a[Hl]=i}catch(g){Vt(e,e.return,g)}}break;case 6:if(kn(t,e),Qn(e),n&4){if(e.stateNode===null)throw Error(de(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Vt(e,e.return,g)}}break;case 3:if(kn(t,e),Qn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{zl(t.containerInfo)}catch(g){Vt(e,e.return,g)}break;case 4:kn(t,e),Qn(e);break;case 13:kn(t,e),Qn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(kg=Kt())),n&4&&Mp(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(jr=(d=jr)||u,kn(t,e),jr=d):kn(t,e),Qn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(be=e,u=e.child;u!==null;){for(f=be=u;be!==null;){switch(m=be,v=m.child,m.tag){case 0:case 11:case 14:case 15:kl(4,m,m.return);break;case 1:Qi(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){Vt(n,r,g)}}break;case 5:Qi(m,m.return);break;case 22:if(m.memoizedState!==null){Lp(f);continue}}v!==null?(v.return=m,be=v):Lp(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{a=f.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=uy("display",o))}catch(g){Vt(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(g){Vt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kn(t,e),Qn(e),n&4&&Mp(e);break;case 21:break;default:kn(t,e),Qn(e)}}function Qn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if($b(r)){var n=r;break e}r=r.return}throw Error(de(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ml(a,""),n.flags&=-33);var i=Ip(e);Kf(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Ip(e);Gf(e,l,o);break;default:throw Error(de(161))}}catch(c){Vt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kk(e,t,r){be=e,zb(e)}function zb(e,t,r){for(var n=(e.mode&1)!==0;be!==null;){var a=be,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||qc;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||jr;l=qc;var d=jr;if(qc=o,(jr=c)&&!d)for(be=a;be!==null;)o=be,c=o.child,o.tag===22&&o.memoizedState!==null?Fp(a):c!==null?(c.return=o,be=c):Fp(a);for(;i!==null;)be=i,zb(i),i=i.sibling;be=a,qc=l,jr=d}$p(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,be=i):$p(e)}}function $p(e){for(;be!==null;){var t=be;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:jr||bu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!jr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Pn(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&wp(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}wp(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&zl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}jr||t.flags&512&&qf(t)}catch(m){Vt(t,t.return,m)}}if(t===e){be=null;break}if(r=t.sibling,r!==null){r.return=t.return,be=r;break}be=t.return}}function Lp(e){for(;be!==null;){var t=be;if(t===e){be=null;break}var r=t.sibling;if(r!==null){r.return=t.return,be=r;break}be=t.return}}function Fp(e){for(;be!==null;){var t=be;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{bu(4,t)}catch(c){Vt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Vt(t,a,c)}}var i=t.return;try{qf(t)}catch(c){Vt(t,i,c)}break;case 5:var o=t.return;try{qf(t)}catch(c){Vt(t,o,c)}}}catch(c){Vt(t,t.return,c)}if(t===e){be=null;break}var l=t.sibling;if(l!==null){l.return=t.return,be=l;break}be=t.return}}var Ck=Math.ceil,qd=Ls.ReactCurrentDispatcher,Ng=Ls.ReactCurrentOwner,vn=Ls.ReactCurrentBatchConfig,lt=0,cr=null,Zt=null,hr=0,en=0,Ji=Oa(0),rr=0,Jl=null,oi=0,wu=0,Sg=0,Cl=null,zr=null,kg=0,Co=1/0,vs=null,Gd=!1,Yf=null,ya=null,Gc=!1,ha=null,Kd=0,El=0,Qf=null,vd=-1,yd=0;function Dr(){return lt&6?Kt():vd!==-1?vd:vd=Kt()}function ba(e){return e.mode&1?lt&2&&hr!==0?hr&-hr:dk.transition!==null?(yd===0&&(yd=Ny()),yd):(e=gt,e!==0||(e=window.event,e=e===void 0?16:Oy(e.type)),e):1}function Bn(e,t,r,n){if(50<El)throw El=0,Qf=null,Error(de(185));dc(e,r,n),(!(lt&2)||e!==cr)&&(e===cr&&(!(lt&2)&&(wu|=r),rr===4&&na(e,hr)),qr(e,n),r===1&&lt===0&&!(t.mode&1)&&(Co=Kt()+500,xu&&Aa()))}function qr(e,t){var r=e.callbackNode;dS(e,t);var n=Od(e,e===cr?hr:0);if(n===0)r!==null&&K0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&K0(r),t===1)e.tag===0?ck(zp.bind(null,e)):Qy(zp.bind(null,e)),ak(function(){!(lt&6)&&Aa()}),r=null;else{switch(Sy(n)){case 1:r=Xm;break;case 4:r=jy;break;case 16:r=Pd;break;case 536870912:r=_y;break;default:r=Pd}r=Kb(r,Bb.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Bb(e,t){if(vd=-1,yd=0,lt&6)throw Error(de(327));var r=e.callbackNode;if(no()&&e.callbackNode!==r)return null;var n=Od(e,e===cr?hr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Yd(e,n);else{t=n;var a=lt;lt|=2;var i=Wb();(cr!==e||hr!==t)&&(vs=null,Co=Kt()+500,ri(e,t));do try{Pk();break}catch(l){Ub(e,l)}while(1);ug(),qd.current=i,lt=a,Zt!==null?t=0:(cr=null,hr=0,t=rr)}if(t!==0){if(t===2&&(a=_f(e),a!==0&&(n=a,t=Jf(e,a))),t===1)throw r=Jl,ri(e,0),na(e,n),qr(e,Kt()),r;if(t===6)na(e,n);else{if(a=e.current.alternate,!(n&30)&&!Ek(a)&&(t=Yd(e,n),t===2&&(i=_f(e),i!==0&&(n=i,t=Jf(e,i))),t===1))throw r=Jl,ri(e,0),na(e,n),qr(e,Kt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(de(345));case 2:Ua(e,zr,vs);break;case 3:if(na(e,n),(n&130023424)===n&&(t=kg+500-Kt(),10<t)){if(Od(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Dr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Of(Ua.bind(null,e,zr,vs),t);break}Ua(e,zr,vs);break;case 4:if(na(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-zn(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Kt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ck(n/1960))-n,10<n){e.timeoutHandle=Of(Ua.bind(null,e,zr,vs),n);break}Ua(e,zr,vs);break;case 5:Ua(e,zr,vs);break;default:throw Error(de(329))}}}return qr(e,Kt()),e.callbackNode===r?Bb.bind(null,e):null}function Jf(e,t){var r=Cl;return e.current.memoizedState.isDehydrated&&(ri(e,t).flags|=256),e=Yd(e,t),e!==2&&(t=zr,zr=r,t!==null&&Xf(t)),e}function Xf(e){zr===null?zr=e:zr.push.apply(zr,e)}function Ek(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Wn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function na(e,t){for(t&=~Sg,t&=~wu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-zn(t),n=1<<r;e[r]=-1,t&=~n}}function zp(e){if(lt&6)throw Error(de(327));no();var t=Od(e,0);if(!(t&1))return qr(e,Kt()),null;var r=Yd(e,t);if(e.tag!==0&&r===2){var n=_f(e);n!==0&&(t=n,r=Jf(e,n))}if(r===1)throw r=Jl,ri(e,0),na(e,t),qr(e,Kt()),r;if(r===6)throw Error(de(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ua(e,zr,vs),qr(e,Kt()),null}function Cg(e,t){var r=lt;lt|=1;try{return e(t)}finally{lt=r,lt===0&&(Co=Kt()+500,xu&&Aa())}}function li(e){ha!==null&&ha.tag===0&&!(lt&6)&&no();var t=lt;lt|=1;var r=vn.transition,n=gt;try{if(vn.transition=null,gt=1,e)return e()}finally{gt=n,vn.transition=r,lt=t,!(lt&6)&&Aa()}}function Eg(){en=Ji.current,kt(Ji)}function ri(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,sk(r)),Zt!==null)for(r=Zt.return;r!==null;){var n=r;switch(lg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Md();break;case 3:So(),kt(Vr),kt(_r),xg();break;case 5:pg(n);break;case 4:So();break;case 13:kt(Ft);break;case 19:kt(Ft);break;case 10:hg(n.type._context);break;case 22:case 23:Eg()}r=r.return}if(cr=e,Zt=e=wa(e.current,null),hr=en=t,rr=0,Jl=null,Sg=wu=oi=0,zr=Cl=null,Ka!==null){for(t=0;t<Ka.length;t++)if(r=Ka[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Ka=null}return e}function Ub(e,t){do{var r=Zt;try{if(ug(),gd.current=Hd,Vd){for(var n=zt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Vd=!1}if(ii=0,or=tr=zt=null,Sl=!1,Kl=0,Ng.current=null,r===null||r.return===null){rr=1,Jl=t,Zt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=hr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var v=Cp(o);if(v!==null){v.flags&=-257,Ep(v,o,l,i,t),v.mode&1&&kp(i,d,t),t=v,c=d;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){kp(i,d,t),Tg();break e}c=Error(de(426))}}else if(At&&l.mode&1){var b=Cp(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Ep(b,o,l,i,t),cg(ko(c,l));break e}}i=c=ko(c,l),rr!==4&&(rr=2),Cl===null?Cl=[i]:Cl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Sb(i,c,t);bp(i,y);break e;case 1:l=c;var p=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ya===null||!ya.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=kb(i,l,t);bp(i,S);break e}}i=i.return}while(i!==null)}Hb(r)}catch(C){t=C,Zt===r&&r!==null&&(Zt=r=r.return);continue}break}while(1)}function Wb(){var e=qd.current;return qd.current=Hd,e===null?Hd:e}function Tg(){(rr===0||rr===3||rr===2)&&(rr=4),cr===null||!(oi&268435455)&&!(wu&268435455)||na(cr,hr)}function Yd(e,t){var r=lt;lt|=2;var n=Wb();(cr!==e||hr!==t)&&(vs=null,ri(e,t));do try{Tk();break}catch(a){Ub(e,a)}while(1);if(ug(),lt=r,qd.current=n,Zt!==null)throw Error(de(261));return cr=null,hr=0,rr}function Tk(){for(;Zt!==null;)Vb(Zt)}function Pk(){for(;Zt!==null&&!tS();)Vb(Zt)}function Vb(e){var t=Gb(e.alternate,e,en);e.memoizedProps=e.pendingProps,t===null?Hb(e):Zt=t,Ng.current=null}function Hb(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=_k(r,t),r!==null){r.flags&=32767,Zt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rr=6,Zt=null;return}}else if(r=jk(r,t,en),r!==null){Zt=r;return}if(t=t.sibling,t!==null){Zt=t;return}Zt=t=e}while(t!==null);rr===0&&(rr=5)}function Ua(e,t,r){var n=gt,a=vn.transition;try{vn.transition=null,gt=1,Ok(e,t,r,n)}finally{vn.transition=a,gt=n}return null}function Ok(e,t,r,n){do no();while(ha!==null);if(lt&6)throw Error(de(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(de(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(uS(e,i),e===cr&&(Zt=cr=null,hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Gc||(Gc=!0,Kb(Pd,function(){return no(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=vn.transition,vn.transition=null;var o=gt;gt=1;var l=lt;lt|=4,Ng.current=null,Sk(e,r),Fb(r,e),JS(Tf),Ad=!!Ef,Tf=Ef=null,e.current=r,kk(r),rS(),lt=l,gt=o,vn.transition=i}else e.current=r;if(Gc&&(Gc=!1,ha=e,Kd=a),i=e.pendingLanes,i===0&&(ya=null),aS(r.stateNode),qr(e,Kt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Gd)throw Gd=!1,e=Yf,Yf=null,e;return Kd&1&&e.tag!==0&&no(),i=e.pendingLanes,i&1?e===Qf?El++:(El=0,Qf=e):El=0,Aa(),null}function no(){if(ha!==null){var e=Sy(Kd),t=vn.transition,r=gt;try{if(vn.transition=null,gt=16>e?16:e,ha===null)var n=!1;else{if(e=ha,ha=null,Kd=0,lt&6)throw Error(de(331));var a=lt;for(lt|=4,be=e.current;be!==null;){var i=be,o=i.child;if(be.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(be=d;be!==null;){var u=be;switch(u.tag){case 0:case 11:case 15:kl(8,u,i)}var f=u.child;if(f!==null)f.return=u,be=f;else for(;be!==null;){u=be;var m=u.sibling,v=u.return;if(Mb(u),u===d){be=null;break}if(m!==null){m.return=v,be=m;break}be=v}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}be=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,be=o;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:kl(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,be=y;break e}be=i.return}}var p=e.current;for(be=p;be!==null;){o=be;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,be=w;else e:for(o=p;be!==null;){if(l=be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:bu(9,l)}}catch(C){Vt(l,l.return,C)}if(l===o){be=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,be=S;break e}be=l.return}}if(lt=a,Aa(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(hu,e)}catch{}n=!0}return n}finally{gt=r,vn.transition=t}}return!1}function Bp(e,t,r){t=ko(r,t),t=Sb(e,t,1),e=va(e,t,1),t=Dr(),e!==null&&(dc(e,1,t),qr(e,t))}function Vt(e,t,r){if(e.tag===3)Bp(e,e,r);else for(;t!==null;){if(t.tag===3){Bp(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ya===null||!ya.has(n))){e=ko(r,e),e=kb(t,e,1),t=va(t,e,1),e=Dr(),t!==null&&(dc(t,1,e),qr(t,e));break}}t=t.return}}function Ak(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Dr(),e.pingedLanes|=e.suspendedLanes&r,cr===e&&(hr&r)===r&&(rr===4||rr===3&&(hr&130023424)===hr&&500>Kt()-kg?ri(e,0):Sg|=r),qr(e,t)}function qb(e,t){t===0&&(e.mode&1?(t=$c,$c<<=1,!($c&130023424)&&($c=4194304)):t=1);var r=Dr();e=Ts(e,t),e!==null&&(dc(e,t,r),qr(e,r))}function Dk(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),qb(e,r)}function Rk(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(de(314))}n!==null&&n.delete(t),qb(e,r)}var Gb;Gb=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vr.current)Wr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Wr=!1,wk(e,t,r);Wr=!!(e.flags&131072)}else Wr=!1,At&&t.flags&1048576&&Jy(t,Fd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;xd(e,t),e=t.pendingProps;var a=jo(t,_r.current);ro(t,r),a=yg(null,t,n,e,a,r);var i=bg();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hr(n)?(i=!0,$d(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,mg(t),a.updater=yu,t.stateNode=a,a._reactInternals=t,Lf(t,n,e,r),t=Bf(null,t,n,!0,i,r)):(t.tag=0,At&&i&&og(t),Tr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(xd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Mk(n),e=Pn(n,e),a){case 0:t=zf(null,t,n,e,r);break e;case 1:t=Op(null,t,n,e,r);break e;case 11:t=Tp(null,t,n,e,r);break e;case 14:t=Pp(null,t,n,Pn(n.type,e),r);break e}throw Error(de(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pn(n,a),zf(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pn(n,a),Op(e,t,n,a,r);case 3:e:{if(Pb(t),e===null)throw Error(de(387));n=t.pendingProps,i=t.memoizedState,a=i.element,nb(e,t),Ud(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ko(Error(de(423)),t),t=Ap(e,t,n,r,a);break e}else if(n!==a){a=ko(Error(de(424)),t),t=Ap(e,t,n,r,a);break e}else for(rn=xa(t.stateNode.containerInfo.firstChild),sn=t,At=!0,Mn=null,r=tb(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_o(),n===a){t=Ps(e,t,r);break e}Tr(e,t,n,r)}t=t.child}return t;case 5:return sb(t),e===null&&If(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Pf(n,a)?o=null:i!==null&&Pf(n,i)&&(t.flags|=32),Tb(e,t),Tr(e,t,o,r),t.child;case 6:return e===null&&If(t),null;case 13:return Ob(e,t,r);case 4:return gg(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=No(t,null,n,r):Tr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pn(n,a),Tp(e,t,n,a,r);case 7:return Tr(e,t,t.pendingProps,r),t.child;case 8:return Tr(e,t,t.pendingProps.children,r),t.child;case 12:return Tr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,wt(zd,n._currentValue),n._currentValue=o,i!==null)if(Wn(i.value,o)){if(i.children===a.children&&!Vr.current){t=Ps(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ns(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Mf(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(de(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Mf(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ro(t,r),a=bn(a),n=n(a),t.flags|=1,Tr(e,t,n,r),t.child;case 14:return n=t.type,a=Pn(n,t.pendingProps),a=Pn(n.type,a),Pp(e,t,n,a,r);case 15:return Cb(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pn(n,a),xd(e,t),t.tag=1,Hr(n)?(e=!0,$d(t)):e=!1,ro(t,r),Nb(t,n,a),Lf(t,n,a,r),Bf(null,t,n,!0,e,r);case 19:return Ab(e,t,r);case 22:return Eb(e,t,r)}throw Error(de(156,t.tag))};function Kb(e,t){return wy(e,t)}function Ik(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,t,r,n){return new Ik(e,t,r,n)}function Pg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mk(e){if(typeof e=="function")return Pg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ym)return 11;if(e===Qm)return 14}return 2}function wa(e,t){var r=e.alternate;return r===null?(r=xn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function bd(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Pg(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Bi:return ni(r.children,a,i,t);case Km:o=8,a|=8;break;case lf:return e=xn(12,r,t,a|2),e.elementType=lf,e.lanes=i,e;case cf:return e=xn(13,r,t,a),e.elementType=cf,e.lanes=i,e;case df:return e=xn(19,r,t,a),e.elementType=df,e.lanes=i,e;case sy:return ju(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ry:o=10;break e;case ny:o=9;break e;case Ym:o=11;break e;case Qm:o=14;break e;case ea:o=16,n=null;break e}throw Error(de(130,e==null?e:typeof e,""))}return t=xn(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function ni(e,t,r,n){return e=xn(7,e,n,t),e.lanes=r,e}function ju(e,t,r,n){return e=xn(22,e,n,t),e.elementType=sy,e.lanes=r,e.stateNode={isHidden:!1},e}function Ah(e,t,r){return e=xn(6,e,null,t),e.lanes=r,e}function Dh(e,t,r){return t=xn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $k(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fh(0),this.expirationTimes=fh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fh(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Og(e,t,r,n,a,i,o,l,c){return e=new $k(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},mg(i),e}function Lk(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zi,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Yb(e){if(!e)return _a;e=e._reactInternals;e:{if(vi(e)!==e||e.tag!==1)throw Error(de(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(de(171))}if(e.tag===1){var r=e.type;if(Hr(r))return Yy(e,r,t)}return t}function Qb(e,t,r,n,a,i,o,l,c){return e=Og(r,n,!0,e,a,i,o,l,c),e.context=Yb(null),r=e.current,n=Dr(),a=ba(r),i=Ns(n,a),i.callback=t??null,va(r,i,a),e.current.lanes=a,dc(e,a,n),qr(e,n),e}function _u(e,t,r,n){var a=t.current,i=Dr(),o=ba(a);return r=Yb(r),t.context===null?t.context=r:t.pendingContext=r,t=Ns(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=va(a,t,o),e!==null&&(Bn(e,a,o,i),md(e,a,o)),o}function Qd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Up(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ag(e,t){Up(e,t),(e=e.alternate)&&Up(e,t)}function Fk(){return null}var Jb=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dg(e){this._internalRoot=e}Nu.prototype.render=Dg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(de(409));_u(e,t,null,null)};Nu.prototype.unmount=Dg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;li(function(){_u(null,e,null,null)}),t[Es]=null}};function Nu(e){this._internalRoot=e}Nu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ey();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ra.length&&t!==0&&t<ra[r].priority;r++);ra.splice(r,0,e),r===0&&Py(e)}};function Rg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Su(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wp(){}function zk(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Qd(o);i.call(d)}}var o=Qb(t,n,e,0,null,!1,!1,"",Wp);return e._reactRootContainer=o,e[Es]=o.current,Wl(e.nodeType===8?e.parentNode:e),li(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Qd(c);l.call(d)}}var c=Og(e,0,!1,null,null,!1,!1,"",Wp);return e._reactRootContainer=c,e[Es]=c.current,Wl(e.nodeType===8?e.parentNode:e),li(function(){_u(t,c,r,n)}),c}function ku(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Qd(o);l.call(c)}}_u(t,o,e,a)}else o=zk(r,t,e,a,n);return Qd(o)}ky=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=fl(t.pendingLanes);r!==0&&(Zm(t,r|1),qr(t,Kt()),!(lt&6)&&(Co=Kt()+500,Aa()))}break;case 13:li(function(){var n=Ts(e,1);if(n!==null){var a=Dr();Bn(n,e,1,a)}}),Ag(e,1)}};eg=function(e){if(e.tag===13){var t=Ts(e,134217728);if(t!==null){var r=Dr();Bn(t,e,134217728,r)}Ag(e,134217728)}};Cy=function(e){if(e.tag===13){var t=ba(e),r=Ts(e,t);if(r!==null){var n=Dr();Bn(r,e,t,n)}Ag(e,t)}};Ey=function(){return gt};Ty=function(e,t){var r=gt;try{return gt=e,t()}finally{gt=r}};bf=function(e,t,r){switch(t){case"input":if(ff(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=pu(n);if(!a)throw Error(de(90));iy(n),ff(n,a)}}}break;case"textarea":ly(e,r);break;case"select":t=r.value,t!=null&&Xi(e,!!r.multiple,t,!1)}};gy=Cg;py=li;var Bk={usingClientEntryPoint:!1,Events:[hc,Hi,pu,fy,my,Cg]},sl={findFiberByHostInstance:Ga,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Uk={bundleType:sl.bundleType,version:sl.version,rendererPackageName:sl.rendererPackageName,rendererConfig:sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yy(e),e===null?null:e.stateNode},findFiberByHostInstance:sl.findFiberByHostInstance||Fk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{hu=Kc.inject(Uk),os=Kc}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bk;un.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rg(t))throw Error(de(200));return Lk(e,t,null,r)};un.createRoot=function(e,t){if(!Rg(e))throw Error(de(299));var r=!1,n="",a=Jb;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Og(e,1,!1,null,null,r,!1,n,a),e[Es]=t.current,Wl(e.nodeType===8?e.parentNode:e),new Dg(t)};un.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(de(188)):(e=Object.keys(e).join(","),Error(de(268,e)));return e=yy(t),e=e===null?null:e.stateNode,e};un.flushSync=function(e){return li(e)};un.hydrate=function(e,t,r){if(!Su(t))throw Error(de(200));return ku(null,e,t,!0,r)};un.hydrateRoot=function(e,t,r){if(!Rg(e))throw Error(de(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Jb;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Qb(t,null,e,1,r??null,a,!1,i,o),e[Es]=t.current,Wl(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Nu(t)};un.render=function(e,t,r){if(!Su(t))throw Error(de(200));return ku(null,e,t,!1,r)};un.unmountComponentAtNode=function(e){if(!Su(e))throw Error(de(40));return e._reactRootContainer?(li(function(){ku(null,null,e,!1,function(){e._reactRootContainer=null,e[Es]=null})}),!0):!1};un.unstable_batchedUpdates=Cg;un.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Su(r))throw Error(de(200));if(e==null||e._reactInternals===void 0)throw Error(de(38));return ku(e,t,r,!1,n)};un.version="18.3.1-next-f1338f8080-20240426";function Xb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xb)}catch(e){console.error(e)}}Xb(),Xv.exports=un;var yi=Xv.exports;const Zb=Lv(yi);var ew,Vp=yi;ew=Vp.createRoot,Vp.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jd(){return Jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jd.apply(this,arguments)}var Qa;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qa||(Qa={}));const Hp="popstate";function Wk(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Zf("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:rw(a)}return Hk(t,r,null,e)}function tw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vk(){return Math.random().toString(36).substr(2,8)}function qp(e,t){return{usr:e.state,key:e.key,idx:t}}function Zf(e,t,r,n){return r===void 0&&(r=null),Jd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?nw(t):t,{state:r,key:t&&t.key||n||Vk()})}function rw(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function nw(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Hk(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Qa.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Jd({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function f(){l=Qa.Pop;let b=u(),y=b==null?null:b-d;d=b,c&&c({action:l,location:g.location,delta:y})}function m(b,y){l=Qa.Push;let p=Zf(g.location,b,y);r&&r(p,b),d=u()+1;let w=qp(p,d),S=g.createHref(p);try{o.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(S)}i&&c&&c({action:l,location:g.location,delta:1})}function v(b,y){l=Qa.Replace;let p=Zf(g.location,b,y);r&&r(p,b),d=u();let w=qp(p,d),S=g.createHref(p);o.replaceState(w,"",S),i&&c&&c({action:l,location:g.location,delta:0})}function x(b){let y=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof b=="string"?b:rw(b);return p=p.replace(/ $/,"%20"),tw(y,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,y)}let g={get action(){return l},get location(){return e(a,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Hp,f),c=b,()=>{a.removeEventListener(Hp,f),c=null}},createHref(b){return t(a,b)},createURL:x,encodeLocation(b){let y=x(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:v,go(b){return o.go(b)}};return g}var Gp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Gp||(Gp={}));function qk(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const sw=["post","put","patch","delete"];new Set(sw);const Gk=["get",...sw];new Set(Gk);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},em.apply(this,arguments)}const Kk=h.createContext(null),aw=h.createContext(null);function Yk(){return h.useContext(aw)!=null}function Qk(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Qa.Pop,navigator:i,static:o=!1,future:l}=e;Yk()&&tw(!1);let c=t.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:i,static:o,future:em({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=nw(n));let{pathname:u="/",search:f="",hash:m="",state:v=null,key:x="default"}=n,g=h.useMemo(()=>{let b=qk(u,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:v,key:x},navigationType:a}},[c,u,f,m,v,x,a]);return g==null?null:h.createElement(Kk.Provider,{value:d},h.createElement(aw.Provider,{children:r,value:g}))}new Promise(()=>{});/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Jk="6";try{window.__reactRouterVersion=Jk}catch{}const Xk="startTransition",Kp=Qv[Xk];function Zk(e){let{basename:t,children:r,future:n,window:a}=e,i=h.useRef();i.current==null&&(i.current=Wk({window:a,v5Compat:!0}));let o=i.current,[l,c]=h.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=h.useCallback(f=>{d&&Kp?Kp(()=>c(f)):c(f)},[c,d]);return h.useLayoutEffect(()=>o.listen(u),[o,u]),h.createElement(Qk,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var Yp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Yp||(Yp={}));var Qp;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Qp||(Qp={}));const eC=1,tC=1e6;let Rh=0;function rC(){return Rh=(Rh+1)%Number.MAX_SAFE_INTEGER,Rh.toString()}const Ih=new Map,Jp=e=>{if(Ih.has(e))return;const t=setTimeout(()=>{Ih.delete(e),Tl({type:"REMOVE_TOAST",toastId:e})},tC);Ih.set(e,t)},nC=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,eC)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Jp(r):e.toasts.forEach(n=>{Jp(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},wd=[];let jd={toasts:[]};function Tl(e){jd=nC(jd,e),wd.forEach(t=>{t(jd)})}function sC({...e}){const t=rC(),r=a=>Tl({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Tl({type:"DISMISS_TOAST",toastId:t});return Tl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function _n(){const[e,t]=h.useState(jd);return h.useEffect(()=>(wd.push(t),()=>{const r=wd.indexOf(t);r>-1&&wd.splice(r,1)}),[e]),{...e,toast:sC,dismiss:r=>Tl({type:"DISMISS_TOAST",toastId:r})}}function Te(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function aC(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function iw(...e){return t=>e.forEach(r=>aC(r,t))}function ft(...e){return h.useCallback(iw(...e),e)}function iC(e,t=[]){let r=[];function n(i,o){const l=h.createContext(o),c=r.length;r=[...r,o];function d(f){const{scope:m,children:v,...x}=f,g=(m==null?void 0:m[e][c])||l,b=h.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:b,children:v})}function u(f,m){const v=(m==null?void 0:m[e][c])||l,x=h.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(o=>h.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,oC(a,...t)]}function oC(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Na=h.forwardRef((e,t)=>{const{children:r,...n}=e,a=h.Children.toArray(r),i=a.find(lC);if(i){const o=i.props.children,l=a.map(c=>c===i?h.Children.count(o)>1?h.Children.only(null):h.isValidElement(o)?o.props.children:null:c);return s.jsx(tm,{...n,ref:t,children:h.isValidElement(o)?h.cloneElement(o,void 0,l):null})}return s.jsx(tm,{...n,ref:t,children:r})});Na.displayName="Slot";var tm=h.forwardRef((e,t)=>{const{children:r,...n}=e;if(h.isValidElement(r)){const a=dC(r);return h.cloneElement(r,{...cC(n,r.props),ref:t?iw(t,a):a})}return h.Children.count(r)>1?h.Children.only(null):null});tm.displayName="SlotClone";var Ig=({children:e})=>s.jsx(s.Fragment,{children:e});function lC(e){return h.isValidElement(e)&&e.type===Ig}function cC(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{i(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function dC(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Mg(e){const t=e+"CollectionProvider",[r,n]=iC(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:g}=v,b=he.useRef(null),y=he.useRef(new Map).current;return s.jsx(a,{scope:x,itemMap:y,collectionRef:b,children:g})};o.displayName=t;const l=e+"CollectionSlot",c=he.forwardRef((v,x)=>{const{scope:g,children:b}=v,y=i(l,g),p=ft(x,y.collectionRef);return s.jsx(Na,{ref:p,children:b})});c.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",f=he.forwardRef((v,x)=>{const{scope:g,children:b,...y}=v,p=he.useRef(null),w=ft(x,p),S=i(d,g);return he.useEffect(()=>(S.itemMap.set(p,{ref:p,...y}),()=>void S.itemMap.delete(p))),s.jsx(Na,{[u]:"",ref:w,children:b})});f.displayName=d;function m(v){const x=i(e+"CollectionConsumer",v);return he.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(x.itemMap.values()).sort((S,C)=>y.indexOf(S.ref.current)-y.indexOf(C.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},m,n]}function uC(e,t){const r=h.createContext(t),n=i=>{const{children:o,...l}=i,c=h.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=h.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function bi(e,t=[]){let r=[];function n(i,o){const l=h.createContext(o),c=r.length;r=[...r,o];const d=f=>{var y;const{scope:m,children:v,...x}=f,g=((y=m==null?void 0:m[e])==null?void 0:y[c])||l,b=h.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:b,children:v})};d.displayName=i+"Provider";function u(f,m){var g;const v=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,x=h.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>h.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,hC(a,...t)]}function hC(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var fC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ke=fC.reduce((e,t)=>{const r=h.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?Na:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function ow(e,t){e&&yi.flushSync(()=>e.dispatchEvent(t))}function Gr(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function mC(e,t=globalThis==null?void 0:globalThis.document){const r=Gr(e);h.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var gC="DismissableLayer",rm="dismissableLayer.update",pC="dismissableLayer.pointerDownOutside",xC="dismissableLayer.focusOutside",Xp,lw=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lo=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=h.useContext(lw),[u,f]=h.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=h.useState({}),x=ft(t,O=>f(O)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),p=u?g.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,S=p>=y,C=yC(O=>{const $=O.target,Q=[...d.branches].some(K=>K.contains($));!S||Q||(a==null||a(O),o==null||o(O),O.defaultPrevented||l==null||l())},m),T=bC(O=>{const $=O.target;[...d.branches].some(K=>K.contains($))||(i==null||i(O),o==null||o(O),O.defaultPrevented||l==null||l())},m);return mC(O=>{p===d.layers.size-1&&(n==null||n(O),!O.defaultPrevented&&l&&(O.preventDefault(),l()))},m),h.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Xp=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Zp(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Xp)}},[u,m,r,d]),h.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Zp())},[u,d]),h.useEffect(()=>{const O=()=>v({});return document.addEventListener(rm,O),()=>document.removeEventListener(rm,O)},[]),s.jsx(Ke.div,{...c,ref:x,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:Te(e.onFocusCapture,T.onFocusCapture),onBlurCapture:Te(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Te(e.onPointerDownCapture,C.onPointerDownCapture)})});Lo.displayName=gC;var vC="DismissableLayerBranch",cw=h.forwardRef((e,t)=>{const r=h.useContext(lw),n=h.useRef(null),a=ft(t,n);return h.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Ke.div,{...e,ref:a})});cw.displayName=vC;function yC(e,t=globalThis==null?void 0:globalThis.document){const r=Gr(e),n=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){dw(pC,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function bC(e,t=globalThis==null?void 0:globalThis.document){const r=Gr(e),n=h.useRef(!1);return h.useEffect(()=>{const a=i=>{i.target&&!n.current&&dw(xC,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Zp(){const e=new CustomEvent(rm);document.dispatchEvent(e)}function dw(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?ow(a,i):a.dispatchEvent(i)}var wC=Lo,jC=cw,Nr=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},_C="Portal",mc=h.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=h.useState(!1);Nr(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Zb.createPortal(s.jsx(Ke.div,{...n,ref:t}),o):null});mc.displayName=_C;function NC(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var Fs=e=>{const{present:t,children:r}=e,n=SC(t),a=typeof r=="function"?r({present:n.isPresent}):h.Children.only(r),i=ft(n.ref,kC(a));return typeof r=="function"||n.isPresent?h.cloneElement(a,{ref:i}):null};Fs.displayName="Presence";function SC(e){const[t,r]=h.useState(),n=h.useRef({}),a=h.useRef(e),i=h.useRef("none"),o=e?"mounted":"unmounted",[l,c]=NC(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=Yc(n.current);i.current=l==="mounted"?d:"none"},[l]),Nr(()=>{const d=n.current,u=a.current;if(u!==e){const m=i.current,v=Yc(d);e?c("MOUNT"):v==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==v?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Nr(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,f=v=>{const g=Yc(n.current).includes(v.animationName);if(v.target===t&&g&&(c("ANIMATION_END"),!a.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=v=>{v.target===t&&(i.current=Yc(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function Yc(e){return(e==null?void 0:e.animationName)||"none"}function kC(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function ci({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=CC({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:n,l=Gr(r),c=h.useCallback(d=>{if(i){const f=typeof d=="function"?d(e):d;f!==e&&l(f)}else a(d)},[i,e,a,l]);return[o,c]}function CC({defaultProp:e,onChange:t}){const r=h.useState(e),[n]=r,a=h.useRef(n),i=Gr(t);return h.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}var EC="VisuallyHidden",gc=h.forwardRef((e,t)=>s.jsx(Ke.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));gc.displayName=EC;var TC=gc,$g="ToastProvider",[Lg,PC,OC]=Mg("Toast"),[uw,ID]=bi("Toast",[OC]),[AC,Cu]=uw($g),hw=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=h.useState(null),[d,u]=h.useState(0),f=h.useRef(!1),m=h.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${$g}\`. Expected non-empty \`string\`.`),s.jsx(Lg.Provider,{scope:t,children:s.jsx(AC,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>u(v=>v+1),[]),onToastRemove:h.useCallback(()=>u(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};hw.displayName=$g;var fw="ToastViewport",DC=["F8"],nm="toast.viewportPause",sm="toast.viewportResume",mw=h.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=DC,label:a="Notifications ({hotkey})",...i}=e,o=Cu(fw,r),l=PC(r),c=h.useRef(null),d=h.useRef(null),u=h.useRef(null),f=h.useRef(null),m=ft(t,f,o.onViewportChange),v=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;h.useEffect(()=>{const b=y=>{var w;n.length!==0&&n.every(S=>y[S]||y.code===S)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),h.useEffect(()=>{const b=c.current,y=f.current;if(x&&b&&y){const p=()=>{if(!o.isClosePausedRef.current){const T=new CustomEvent(nm);y.dispatchEvent(T),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const T=new CustomEvent(sm);y.dispatchEvent(T),o.isClosePausedRef.current=!1}},S=T=>{!b.contains(T.relatedTarget)&&w()},C=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",p),b.addEventListener("focusout",S),b.addEventListener("pointermove",p),b.addEventListener("pointerleave",C),window.addEventListener("blur",p),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",p),b.removeEventListener("focusout",S),b.removeEventListener("pointermove",p),b.removeEventListener("pointerleave",C),window.removeEventListener("blur",p),window.removeEventListener("focus",w)}}},[x,o.isClosePausedRef]);const g=h.useCallback(({tabbingDirection:b})=>{const p=l().map(w=>{const S=w.ref.current,C=[S,...qC(S)];return b==="forwards"?C:C.reverse()});return(b==="forwards"?p.reverse():p).flat()},[l]);return h.useEffect(()=>{const b=f.current;if(b){const y=p=>{var C,T,O;const w=p.altKey||p.ctrlKey||p.metaKey;if(p.key==="Tab"&&!w){const $=document.activeElement,Q=p.shiftKey;if(p.target===b&&Q){(C=d.current)==null||C.focus();return}const _=g({tabbingDirection:Q?"backwards":"forwards"}),I=_.findIndex(j=>j===$);Mh(_.slice(I+1))?p.preventDefault():Q?(T=d.current)==null||T.focus():(O=u.current)==null||O.focus()}};return b.addEventListener("keydown",y),()=>b.removeEventListener("keydown",y)}},[l,g]),s.jsxs(jC,{ref:c,role:"region","aria-label":a.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&s.jsx(am,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});Mh(b)}}),s.jsx(Lg.Slot,{scope:r,children:s.jsx(Ke.ol,{tabIndex:-1,...i,ref:m})}),x&&s.jsx(am,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});Mh(b)}})]})});mw.displayName=fw;var gw="ToastFocusProxy",am=h.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=Cu(gw,r);return s.jsx(gc,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});am.displayName=gw;var Eu="Toast",RC="toast.swipeStart",IC="toast.swipeMove",MC="toast.swipeCancel",$C="toast.swipeEnd",pw=h.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l=!0,c]=ci({prop:n,defaultProp:a,onChange:i});return s.jsx(Fs,{present:r||l,children:s.jsx(zC,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Gr(e.onPause),onResume:Gr(e.onResume),onSwipeStart:Te(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Te(e.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Te(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Te(e.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});pw.displayName=Eu;var[LC,FC]=uw(Eu,{onClose(){}}),zC=h.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:v,...x}=e,g=Cu(Eu,r),[b,y]=h.useState(null),p=ft(t,j=>y(j)),w=h.useRef(null),S=h.useRef(null),C=a||g.duration,T=h.useRef(0),O=h.useRef(C),$=h.useRef(0),{onToastAdd:Q,onToastRemove:K}=g,A=Gr(()=>{var k;(b==null?void 0:b.contains(document.activeElement))&&((k=g.viewport)==null||k.focus()),o()}),_=h.useCallback(j=>{!j||j===1/0||(window.clearTimeout($.current),T.current=new Date().getTime(),$.current=window.setTimeout(A,j))},[A]);h.useEffect(()=>{const j=g.viewport;if(j){const k=()=>{_(O.current),d==null||d()},D=()=>{const z=new Date().getTime()-T.current;O.current=O.current-z,window.clearTimeout($.current),c==null||c()};return j.addEventListener(nm,D),j.addEventListener(sm,k),()=>{j.removeEventListener(nm,D),j.removeEventListener(sm,k)}}},[g.viewport,C,c,d,_]),h.useEffect(()=>{i&&!g.isClosePausedRef.current&&_(C)},[i,C,g.isClosePausedRef,_]),h.useEffect(()=>(Q(),()=>K()),[Q,K]);const I=h.useMemo(()=>b?_w(b):null,[b]);return g.viewport?s.jsxs(s.Fragment,{children:[I&&s.jsx(BC,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),s.jsx(LC,{scope:r,onClose:A,children:yi.createPortal(s.jsx(Lg.ItemSlot,{scope:r,children:s.jsx(wC,{asChild:!0,onEscapeKeyDown:Te(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||A(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Ke.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:p,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Te(e.onKeyDown,j=>{j.key==="Escape"&&(l==null||l(j.nativeEvent),j.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:Te(e.onPointerDown,j=>{j.button===0&&(w.current={x:j.clientX,y:j.clientY})}),onPointerMove:Te(e.onPointerMove,j=>{if(!w.current)return;const k=j.clientX-w.current.x,D=j.clientY-w.current.y,z=!!S.current,M=["left","right"].includes(g.swipeDirection),B=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,X=M?B(0,k):0,J=M?0:B(0,D),L=j.pointerType==="touch"?10:2,ne={x:X,y:J},ae={originalEvent:j,delta:ne};z?(S.current=ne,Qc(IC,f,ae,{discrete:!1})):ex(ne,g.swipeDirection,L)?(S.current=ne,Qc(RC,u,ae,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(k)>L||Math.abs(D)>L)&&(w.current=null)}),onPointerUp:Te(e.onPointerUp,j=>{const k=S.current,D=j.target;if(D.hasPointerCapture(j.pointerId)&&D.releasePointerCapture(j.pointerId),S.current=null,w.current=null,k){const z=j.currentTarget,M={originalEvent:j,delta:k};ex(k,g.swipeDirection,g.swipeThreshold)?Qc($C,v,M,{discrete:!0}):Qc(MC,m,M,{discrete:!0}),z.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),BC=e=>{const{__scopeToast:t,children:r,...n}=e,a=Cu(Eu,t),[i,o]=h.useState(!1),[l,c]=h.useState(!1);return VC(()=>o(!0)),h.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(mc,{asChild:!0,children:s.jsx(gc,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},UC="ToastTitle",xw=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ke.div,{...n,ref:t})});xw.displayName=UC;var WC="ToastDescription",vw=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ke.div,{...n,ref:t})});vw.displayName=WC;var yw="ToastAction",bw=h.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(jw,{altText:r,asChild:!0,children:s.jsx(Fg,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${yw}\`. Expected non-empty \`string\`.`),null)});bw.displayName=yw;var ww="ToastClose",Fg=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=FC(ww,r);return s.jsx(jw,{asChild:!0,children:s.jsx(Ke.button,{type:"button",...n,ref:t,onClick:Te(e.onClick,a.onClose)})})});Fg.displayName=ww;var jw=h.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Ke.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function _w(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),HC(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(..._w(n))}}),t}function Qc(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?ow(a,i):a.dispatchEvent(i)}var ex=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function VC(e=()=>{}){const t=Gr(e);Nr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function HC(e){return e.nodeType===e.ELEMENT_NODE}function qC(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Mh(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var GC=hw,Nw=mw,Sw=pw,kw=xw,Cw=vw,Ew=bw,Tw=Fg;function Pw(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Pw(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ow(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Pw(e))&&(n&&(n+=" "),n+=t);return n}const tx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,rx=Ow,pc=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return rx(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],f=i==null?void 0:i[d];if(u===null)return null;const m=tx(u)||tx(f);return a[d][m]}),l=r&&Object.entries(r).reduce((d,u)=>{let[f,m]=u;return m===void 0||(d[f]=m),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:f,className:m,...v}=u;return Object.entries(v).every(x=>{let[g,b]=x;return Array.isArray(b)?b.includes({...i,...l}[g]):{...i,...l}[g]===b})?[...d,f,m]:d},[]);return rx(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Aw=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...YC,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Aw("lucide",a),...l},[...o.map(([d,u])=>h.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(e,t)=>{const r=h.forwardRef(({className:n,...a},i)=>h.createElement(QC,{ref:i,iconNode:t,className:Aw(`lucide-${KC(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=we("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=we("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=we("BookOpenCheck",[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=we("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=we("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=we("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=we("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=we("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=we("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=we("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=we("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=we("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=we("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=we("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=we("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=we("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=we("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=we("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=we("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=we("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=we("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=we("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=we("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=we("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=we("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=we("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=we("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=we("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=we("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=we("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=we("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=we("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=we("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=we("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=we("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=we("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=we("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=we("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=we("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=we("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=we("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=we("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=we("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=we("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Wg="-",v4=e=>{const t=b4(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Wg);return l[0]===""&&l.length!==1&&l.shift(),qw(l,t)||y4(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},qw=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?qw(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Wg);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},ox=/^\[(.+)\]$/,y4=e=>{if(ox.test(e)){const t=ox.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},b4=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return j4(Object.entries(e.classGroups),r).forEach(([i,o])=>{cm(o,n,i,t)}),n},cm=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:lx(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(w4(a)){cm(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{cm(o,lx(t,i),r,n)})})},lx=(e,t)=>{let r=e;return t.split(Wg).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},w4=e=>e.isThemeGetter,j4=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,_4=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},Gw="!",N4=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,f;for(let b=0;b<l.length;b++){let y=l[b];if(d===0){if(y===a&&(n||l.slice(b,b+i)===t)){c.push(l.slice(u,b)),u=b+i;continue}if(y==="/"){f=b;continue}}y==="["?d++:y==="]"&&d--}const m=c.length===0?l:l.substring(u),v=m.startsWith(Gw),x=v?m.substring(1):m,g=f&&f>u?f-u:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:x,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},S4=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},k4=e=>({cache:_4(e.cacheSize),parseClassName:N4(e),...v4(e)}),C4=/\s+/,E4=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(C4);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:v}=r(d);let x=!!v,g=n(x?m.substring(0,v):m);if(!g){if(!x){l=d+(l.length>0?" "+l:l);continue}if(g=n(m),!g){l=d+(l.length>0?" "+l:l);continue}x=!1}const b=S4(u).join(":"),y=f?b+Gw:b,p=y+g;if(i.includes(p))continue;i.push(p);const w=a(g,x);for(let S=0;S<w.length;++S){const C=w[S];i.push(y+C)}l=d+(l.length>0?" "+l:l)}return l};function T4(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Kw(t))&&(n&&(n+=" "),n+=r);return n}const Kw=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Kw(e[n]))&&(r&&(r+=" "),r+=t);return r};function P4(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((u,f)=>f(u),e());return r=k4(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=E4(c,r);return a(c,u),u}return function(){return i(T4.apply(null,arguments))}}const _t=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Yw=/^\[(?:([a-z-]+):)?(.+)\]$/i,O4=/^\d+\/\d+$/,A4=new Set(["px","full","screen"]),D4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,R4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,I4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,M4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gs=e=>so(e)||A4.has(e)||O4.test(e),Ws=e=>Fo(e,"length",H4),so=e=>!!e&&!Number.isNaN(Number(e)),Lh=e=>Fo(e,"number",so),al=e=>!!e&&Number.isInteger(Number(e)),L4=e=>e.endsWith("%")&&so(e.slice(0,-1)),He=e=>Yw.test(e),Vs=e=>D4.test(e),F4=new Set(["length","size","percentage"]),z4=e=>Fo(e,F4,Qw),B4=e=>Fo(e,"position",Qw),U4=new Set(["image","url"]),W4=e=>Fo(e,U4,G4),V4=e=>Fo(e,"",q4),il=()=>!0,Fo=(e,t,r)=>{const n=Yw.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},H4=e=>R4.test(e)&&!I4.test(e),Qw=()=>!1,q4=e=>M4.test(e),G4=e=>$4.test(e),K4=()=>{const e=_t("colors"),t=_t("spacing"),r=_t("blur"),n=_t("brightness"),a=_t("borderColor"),i=_t("borderRadius"),o=_t("borderSpacing"),l=_t("borderWidth"),c=_t("contrast"),d=_t("grayscale"),u=_t("hueRotate"),f=_t("invert"),m=_t("gap"),v=_t("gradientColorStops"),x=_t("gradientColorStopPositions"),g=_t("inset"),b=_t("margin"),y=_t("opacity"),p=_t("padding"),w=_t("saturate"),S=_t("scale"),C=_t("sepia"),T=_t("skew"),O=_t("space"),$=_t("translate"),Q=()=>["auto","contain","none"],K=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",He,t],_=()=>[He,t],I=()=>["",gs,Ws],j=()=>["auto",so,He],k=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],D=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",He],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[so,He];return{cacheSize:500,separator:":",theme:{colors:[il],spacing:[gs,Ws],blur:["none","",Vs,He],brightness:J(),borderColor:[e],borderRadius:["none","","full",Vs,He],borderSpacing:_(),borderWidth:I(),contrast:J(),grayscale:B(),hueRotate:J(),invert:B(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[L4,Ws],inset:A(),margin:A(),opacity:J(),padding:_(),saturate:J(),scale:J(),sepia:B(),skew:J(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[Vs]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...k(),He]}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:Q()}],"overscroll-x":[{"overscroll-x":Q()}],"overscroll-y":[{"overscroll-y":Q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",al,He]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",al,He]}],"grid-cols":[{"grid-cols":[il]}],"col-start-end":[{col:["auto",{span:["full",al,He]},He]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[il]}],"row-start-end":[{row:["auto",{span:[al,He]},He]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",He,t]}],"min-w":[{"min-w":[He,t,"min","max","fit"]}],"max-w":[{"max-w":[He,t,"none","full","min","max","fit","prose",{screen:[Vs]},Vs]}],h:[{h:[He,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[He,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Vs,Ws]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Lh]}],"font-family":[{font:[il]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",so,Lh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gs,He]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...D(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gs,Ws]}],"underline-offset":[{"underline-offset":["auto",gs,He]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...k(),B4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",z4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},W4]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...D(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:D()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...D()]}],"outline-offset":[{"outline-offset":[gs,He]}],"outline-w":[{outline:[gs,Ws]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[gs,Ws]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Vs,V4]}],"shadow-color":[{shadow:[il]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Vs,He]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[al,He]}],"translate-x":[{"translate-x":[$]}],"translate-y":[{"translate-y":[$]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[gs,Ws,Lh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Y4=P4(K4);function _e(...e){return Y4(Ow(e))}const Q4=GC,Jw=h.forwardRef(({className:e,...t},r)=>s.jsx(Nw,{ref:r,className:_e("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Jw.displayName=Nw.displayName;const J4=pc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Xw=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(Sw,{ref:n,className:_e(J4({variant:t}),e),...r}));Xw.displayName=Sw.displayName;const X4=h.forwardRef(({className:e,...t},r)=>s.jsx(Ew,{ref:r,className:_e("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));X4.displayName=Ew.displayName;const Zw=h.forwardRef(({className:e,...t},r)=>s.jsx(Tw,{ref:r,className:_e("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Pu,{className:"h-4 w-4"})}));Zw.displayName=Tw.displayName;const e1=h.forwardRef(({className:e,...t},r)=>s.jsx(kw,{ref:r,className:_e("text-sm font-semibold",e),...t}));e1.displayName=kw.displayName;const t1=h.forwardRef(({className:e,...t},r)=>s.jsx(Cw,{ref:r,className:_e("text-sm opacity-90",e),...t}));t1.displayName=Cw.displayName;function Z4(){const{toasts:e}=_n();return s.jsxs(Q4,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(Xw,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(e1,{children:r}),n&&s.jsx(t1,{children:n})]}),a,s.jsx(Zw,{})]},t)}),s.jsx(Jw,{})]})}var cx=["light","dark"],e5="(prefers-color-scheme: dark)",t5=h.createContext(void 0),r5={setTheme:e=>{},themes:[]},n5=()=>{var e;return(e=h.useContext(t5))!=null?e:r5};h.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?cx.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,b=!0)=>{let y=o?o[x]:x,p=g?x+"|| ''":`'${y}'`,w="";return a&&b&&!g&&cx.includes(x)&&(w+=`d.style.colorScheme = '${x}';`),r==="class"?g||y?w+=`c.add(${p})`:w+="null":y&&(w+=`d[s](n,${p})`),w},v=e?`!function(){${u}${m(e)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${e5}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return h.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:v}})});var s5=e=>{switch(e){case"success":return o5;case"info":return c5;case"warning":return l5;case"error":return d5;default:return null}},a5=Array(12).fill(0),i5=({visible:e})=>he.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},he.createElement("div",{className:"sonner-spinner"},a5.map((t,r)=>he.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),o5=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),l5=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),c5=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),d5=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),u5=()=>{let[e,t]=he.useState(document.hidden);return he.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},dm=1,h5=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:dm++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0;return n.then(async i=>{if(m5(i)&&!i.ok){a=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${i.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${i.status}`):t.description;this.create({id:r,type:"error",message:o,description:l})}else if(t.success!==void 0){a=!1;let o=typeof t.success=="function"?await t.success(i):t.success,l=typeof t.description=="function"?await t.description(i):t.description;this.create({id:r,type:"success",message:o,description:l})}}).catch(async i=>{if(t.error!==void 0){a=!1;let o=typeof t.error=="function"?await t.error(i):t.error,l=typeof t.description=="function"?await t.description(i):t.description;this.create({id:r,type:"error",message:o,description:l})}}).finally(()=>{var i;a&&(this.dismiss(r),r=void 0),(i=t.finally)==null||i.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||dm++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Zr=new h5,f5=(e,t)=>{let r=(t==null?void 0:t.id)||dm++;return Zr.addToast({title:e,...t,id:r}),r},m5=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",g5=f5,p5=()=>Zr.toasts;Object.assign(g5,{success:Zr.success,info:Zr.info,warning:Zr.warning,error:Zr.error,custom:Zr.custom,message:Zr.message,promise:Zr.promise,dismiss:Zr.dismiss,loading:Zr.loading},{getHistory:p5});function x5(e,{insertAt:t}={}){if(!e||typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}x5(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Jc(e){return e.label!==void 0}var v5=3,y5="32px",b5=4e3,w5=356,j5=14,_5=20,N5=200;function S5(...e){return e.filter(Boolean).join(" ")}var k5=e=>{var t,r,n,a,i,o,l,c,d,u;let{invert:f,toast:m,unstyled:v,interacting:x,setHeights:g,visibleToasts:b,heights:y,index:p,toasts:w,expanded:S,removeToast:C,defaultRichColors:T,closeButton:O,style:$,cancelButtonStyle:Q,actionButtonStyle:K,className:A="",descriptionClassName:_="",duration:I,position:j,gap:k,loadingIcon:D,expandByDefault:z,classNames:M,icons:B,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:J,cn:L}=e,[ne,ae]=he.useState(!1),[Z,se]=he.useState(!1),[re,ye]=he.useState(!1),[je,q]=he.useState(!1),[Y,oe]=he.useState(0),[De,W]=he.useState(0),ie=he.useRef(null),Ae=he.useRef(null),Re=p===0,It=p+1<=b,Xe=m.type,pt=m.dismissible!==!1,Mt=m.className||"",xt=m.descriptionClassName||"",Ut=he.useMemo(()=>y.findIndex(pe=>pe.toastId===m.id)||0,[y,m.id]),Qt=he.useMemo(()=>{var pe;return(pe=m.closeButton)!=null?pe:O},[m.closeButton,O]),Ht=he.useMemo(()=>m.duration||I||b5,[m.duration,I]),sr=he.useRef(0),$t=he.useRef(0),qt=he.useRef(0),Ve=he.useRef(null),[ar,Ct]=j.split("-"),R=he.useMemo(()=>y.reduce((pe,Oe,N)=>N>=Ut?pe:pe+Oe.height,0),[y,Ut]),G=u5(),ge=m.invert||f,Me=Xe==="loading";$t.current=he.useMemo(()=>Ut*k+R,[Ut,R]),he.useEffect(()=>{ae(!0)},[]),he.useLayoutEffect(()=>{if(!ne)return;let pe=Ae.current,Oe=pe.style.height;pe.style.height="auto";let N=pe.getBoundingClientRect().height;pe.style.height=Oe,W(N),g(E=>E.find(H=>H.toastId===m.id)?E.map(H=>H.toastId===m.id?{...H,height:N}:H):[{toastId:m.id,height:N,position:m.position},...E])},[ne,m.title,m.description,g,m.id]);let ze=he.useCallback(()=>{se(!0),oe($t.current),g(pe=>pe.filter(Oe=>Oe.toastId!==m.id)),setTimeout(()=>{C(m)},N5)},[m,C,g,$t]);he.useEffect(()=>{if(m.promise&&Xe==="loading"||m.duration===1/0||m.type==="loading")return;let pe,Oe=Ht;return S||x||J&&G?(()=>{if(qt.current<sr.current){let N=new Date().getTime()-sr.current;Oe=Oe-N}qt.current=new Date().getTime()})():Oe!==1/0&&(sr.current=new Date().getTime(),pe=setTimeout(()=>{var N;(N=m.onAutoClose)==null||N.call(m,m),ze()},Oe)),()=>clearTimeout(pe)},[S,x,z,m,Ht,ze,m.promise,Xe,J,G]),he.useEffect(()=>{let pe=Ae.current;if(pe){let Oe=pe.getBoundingClientRect().height;return W(Oe),g(N=>[{toastId:m.id,height:Oe,position:m.position},...N]),()=>g(N=>N.filter(E=>E.toastId!==m.id))}},[g,m.id]),he.useEffect(()=>{m.delete&&ze()},[ze,m.delete]);function Se(){return B!=null&&B.loading?he.createElement("div",{className:"sonner-loader","data-visible":Xe==="loading"},B.loading):D?he.createElement("div",{className:"sonner-loader","data-visible":Xe==="loading"},D):he.createElement(i5,{visible:Xe==="loading"})}return he.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ae,className:L(A,Mt,M==null?void 0:M.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,M==null?void 0:M.default,M==null?void 0:M[Xe],(r=m==null?void 0:m.classNames)==null?void 0:r[Xe]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:T,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":ne,"data-promise":!!m.promise,"data-removed":Z,"data-visible":It,"data-y-position":ar,"data-x-position":Ct,"data-index":p,"data-front":Re,"data-swiping":re,"data-dismissible":pt,"data-type":Xe,"data-invert":ge,"data-swipe-out":je,"data-expanded":!!(S||z&&ne),style:{"--index":p,"--toasts-before":p,"--z-index":w.length-p,"--offset":`${Z?Y:$t.current}px`,"--initial-height":z?"auto":`${De}px`,...$,...m.style},onPointerDown:pe=>{Me||!pt||(ie.current=new Date,oe($t.current),pe.target.setPointerCapture(pe.pointerId),pe.target.tagName!=="BUTTON"&&(ye(!0),Ve.current={x:pe.clientX,y:pe.clientY}))},onPointerUp:()=>{var pe,Oe,N,E;if(je||!pt)return;Ve.current=null;let H=Number(((pe=Ae.current)==null?void 0:pe.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ce=new Date().getTime()-((Oe=ie.current)==null?void 0:Oe.getTime()),Ne=Math.abs(H)/ce;if(Math.abs(H)>=_5||Ne>.11){oe($t.current),(N=m.onDismiss)==null||N.call(m,m),ze(),q(!0);return}(E=Ae.current)==null||E.style.setProperty("--swipe-amount","0px"),ye(!1)},onPointerMove:pe=>{var Oe;if(!Ve.current||!pt)return;let N=pe.clientY-Ve.current.y,E=pe.clientX-Ve.current.x,H=(ar==="top"?Math.min:Math.max)(0,N),ce=pe.pointerType==="touch"?10:2;Math.abs(H)>ce?(Oe=Ae.current)==null||Oe.style.setProperty("--swipe-amount",`${N}px`):Math.abs(E)>ce&&(Ve.current=null)}},Qt&&!m.jsx?he.createElement("button",{"aria-label":X,"data-disabled":Me,"data-close-button":!0,onClick:Me||!pt?()=>{}:()=>{var pe;ze(),(pe=m.onDismiss)==null||pe.call(m,m)},className:L(M==null?void 0:M.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},he.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),he.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||he.isValidElement(m.title)?m.jsx||m.title:he.createElement(he.Fragment,null,Xe||m.icon||m.promise?he.createElement("div",{"data-icon":"",className:L(M==null?void 0:M.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Se():null,m.type!=="loading"?m.icon||(B==null?void 0:B[Xe])||s5(Xe):null):null,he.createElement("div",{"data-content":"",className:L(M==null?void 0:M.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},he.createElement("div",{"data-title":"",className:L(M==null?void 0:M.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?he.createElement("div",{"data-description":"",className:L(_,xt,M==null?void 0:M.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),he.isValidElement(m.cancel)?m.cancel:m.cancel&&Jc(m.cancel)?he.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||Q,onClick:pe=>{var Oe,N;Jc(m.cancel)&&pt&&((N=(Oe=m.cancel).onClick)==null||N.call(Oe,pe),ze())},className:L(M==null?void 0:M.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,he.isValidElement(m.action)?m.action:m.action&&Jc(m.action)?he.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||K,onClick:pe=>{var Oe,N;Jc(m.action)&&(pe.defaultPrevented||((N=(Oe=m.action).onClick)==null||N.call(Oe,pe),ze()))},className:L(M==null?void 0:M.actionButton,(u=m==null?void 0:m.classNames)==null?void 0:u.actionButton)},m.action.label):null))};function dx(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var C5=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:a,closeButton:i,className:o,offset:l,theme:c="light",richColors:d,duration:u,style:f,visibleToasts:m=v5,toastOptions:v,dir:x=dx(),gap:g=j5,loadingIcon:b,icons:y,containerAriaLabel:p="Notifications",pauseWhenPageIsHidden:w,cn:S=S5}=e,[C,T]=he.useState([]),O=he.useMemo(()=>Array.from(new Set([r].concat(C.filter(J=>J.position).map(J=>J.position)))),[C,r]),[$,Q]=he.useState([]),[K,A]=he.useState(!1),[_,I]=he.useState(!1),[j,k]=he.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=he.useRef(null),z=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=he.useRef(null),B=he.useRef(!1),X=he.useCallback(J=>{var L;(L=C.find(ne=>ne.id===J.id))!=null&&L.delete||Zr.dismiss(J.id),T(ne=>ne.filter(({id:ae})=>ae!==J.id))},[C]);return he.useEffect(()=>Zr.subscribe(J=>{if(J.dismiss){T(L=>L.map(ne=>ne.id===J.id?{...ne,delete:!0}:ne));return}setTimeout(()=>{Zb.flushSync(()=>{T(L=>{let ne=L.findIndex(ae=>ae.id===J.id);return ne!==-1?[...L.slice(0,ne),{...L[ne],...J},...L.slice(ne+1)]:[J,...L]})})})}),[]),he.useEffect(()=>{if(c!=="system"){k(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?k("dark"):k("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:J})=>{k(J?"dark":"light")})},[c]),he.useEffect(()=>{C.length<=1&&A(!1)},[C]),he.useEffect(()=>{let J=L=>{var ne,ae;n.every(Z=>L[Z]||L.code===Z)&&(A(!0),(ne=D.current)==null||ne.focus()),L.code==="Escape"&&(document.activeElement===D.current||(ae=D.current)!=null&&ae.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[n]),he.useEffect(()=>{if(D.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,B.current=!1)}},[D.current]),C.length?he.createElement("section",{"aria-label":`${p} ${z}`,tabIndex:-1},O.map((J,L)=>{var ne;let[ae,Z]=J.split("-");return he.createElement("ol",{key:J,dir:x==="auto"?dx():x,tabIndex:-1,ref:D,className:o,"data-sonner-toaster":!0,"data-theme":j,"data-y-position":ae,"data-x-position":Z,style:{"--front-toast-height":`${((ne=$[0])==null?void 0:ne.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||y5,"--width":`${w5}px`,"--gap":`${g}px`,...f},onBlur:se=>{B.current&&!se.currentTarget.contains(se.relatedTarget)&&(B.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||B.current||(B.current=!0,M.current=se.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{_||A(!1)},onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},C.filter(se=>!se.position&&L===0||se.position===J).map((se,re)=>{var ye,je;return he.createElement(k5,{key:se.id,icons:y,index:re,toast:se,defaultRichColors:d,duration:(ye=v==null?void 0:v.duration)!=null?ye:u,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:t,visibleToasts:m,closeButton:(je=v==null?void 0:v.closeButton)!=null?je:i,interacting:_,position:J,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:X,toasts:C.filter(q=>q.position==se.position),heights:$.filter(q=>q.position==se.position),setHeights:Q,expandByDefault:a,gap:g,loadingIcon:b,expanded:K,pauseWhenPageIsHidden:w,cn:S})}))})):null};const E5=({...e})=>{const{theme:t="system"}=n5();return s.jsx(C5,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var T5=Qv["useId".toString()]||(()=>{}),P5=0;function Ss(e){const[t,r]=h.useState(T5());return Nr(()=>{e||r(n=>n??String(P5++))},[e]),e||(t?`radix-${t}`:"")}const O5=["top","right","bottom","left"],Sa=Math.min,tn=Math.max,Zd=Math.round,Xc=Math.floor,ka=e=>({x:e,y:e}),A5={left:"right",right:"left",bottom:"top",top:"bottom"},D5={start:"end",end:"start"};function um(e,t,r){return tn(e,Sa(t,r))}function As(e,t){return typeof e=="function"?e(t):e}function Ds(e){return e.split("-")[0]}function zo(e){return e.split("-")[1]}function Vg(e){return e==="x"?"y":"x"}function Hg(e){return e==="y"?"height":"width"}function Ca(e){return["top","bottom"].includes(Ds(e))?"y":"x"}function qg(e){return Vg(Ca(e))}function R5(e,t,r){r===void 0&&(r=!1);const n=zo(e),a=qg(e),i=Hg(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=eu(o)),[o,eu(o)]}function I5(e){const t=eu(e);return[hm(e),t,hm(t)]}function hm(e){return e.replace(/start|end/g,t=>D5[t])}function M5(e,t,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?i:o;default:return[]}}function $5(e,t,r,n){const a=zo(e);let i=M5(Ds(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(hm)))),i}function eu(e){return e.replace(/left|right|bottom|top/g,t=>A5[t])}function L5(e){return{top:0,right:0,bottom:0,left:0,...e}}function r1(e){return typeof e!="number"?L5(e):{top:e,right:e,bottom:e,left:e}}function tu(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function ux(e,t,r){let{reference:n,floating:a}=e;const i=Ca(t),o=qg(t),l=Hg(o),c=Ds(t),d=i==="y",u=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,m=n[l]/2-a[l]/2;let v;switch(c){case"top":v={x:u,y:n.y-a.height};break;case"bottom":v={x:u,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:f};break;case"left":v={x:n.x-a.width,y:f};break;default:v={x:n.x,y:n.y}}switch(zo(t)){case"start":v[o]-=m*(r&&d?-1:1);break;case"end":v[o]+=m*(r&&d?-1:1);break}return v}const F5=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:f}=ux(d,n,c),m=n,v={},x=0;for(let g=0;g<l.length;g++){const{name:b,fn:y}=l[g],{x:p,y:w,data:S,reset:C}=await y({x:u,y:f,initialPlacement:n,placement:m,strategy:a,middlewareData:v,rects:d,platform:o,elements:{reference:e,floating:t}});u=p??u,f=w??f,v={...v,[b]:{...v[b],...S}},C&&x<=50&&(x++,typeof C=="object"&&(C.placement&&(m=C.placement),C.rects&&(d=C.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):C.rects),{x:u,y:f}=ux(d,m,c)),g=-1)}return{x:u,y:f,placement:m,strategy:a,middlewareData:v}};async function Zl(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:v=0}=As(t,e),x=r1(v),b=l[m?f==="floating"?"reference":"floating":f],y=tu(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),p=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},C=tu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:p,offsetParent:w,strategy:c}):p);return{top:(y.top-C.top+x.top)/S.y,bottom:(C.bottom-y.bottom+x.bottom)/S.y,left:(y.left-C.left+x.left)/S.x,right:(C.right-y.right+x.right)/S.x}}const z5=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=As(e,t)||{};if(d==null)return{};const f=r1(u),m={x:r,y:n},v=qg(a),x=Hg(v),g=await o.getDimensions(d),b=v==="y",y=b?"top":"left",p=b?"bottom":"right",w=b?"clientHeight":"clientWidth",S=i.reference[x]+i.reference[v]-m[v]-i.floating[x],C=m[v]-i.reference[v],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let O=T?T[w]:0;(!O||!await(o.isElement==null?void 0:o.isElement(T)))&&(O=l.floating[w]||i.floating[x]);const $=S/2-C/2,Q=O/2-g[x]/2-1,K=Sa(f[y],Q),A=Sa(f[p],Q),_=K,I=O-g[x]-A,j=O/2-g[x]/2+$,k=um(_,j,I),D=!c.arrow&&zo(a)!=null&&j!==k&&i.reference[x]/2-(j<_?K:A)-g[x]/2<0,z=D?j<_?j-_:j-I:0;return{[v]:m[v]+z,data:{[v]:k,centerOffset:j-k-z,...D&&{alignmentOffset:z}},reset:D}}}),B5=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...b}=As(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=Ds(a),p=Ca(l),w=Ds(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(d.floating)),C=m||(w||!g?[eu(l)]:I5(l)),T=x!=="none";!m&&T&&C.push(...$5(l,g,x,S));const O=[l,...C],$=await Zl(t,b),Q=[];let K=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&Q.push($[y]),f){const j=R5(a,o,S);Q.push($[j[0]],$[j[1]])}if(K=[...K,{placement:a,overflows:Q}],!Q.every(j=>j<=0)){var A,_;const j=(((A=i.flip)==null?void 0:A.index)||0)+1,k=O[j];if(k)return{data:{index:j,overflows:K},reset:{placement:k}};let D=(_=K.filter(z=>z.overflows[0]<=0).sort((z,M)=>z.overflows[1]-M.overflows[1])[0])==null?void 0:_.placement;if(!D)switch(v){case"bestFit":{var I;const z=(I=K.filter(M=>{if(T){const B=Ca(M.placement);return B===p||B==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(B=>B>0).reduce((B,X)=>B+X,0)]).sort((M,B)=>M[1]-B[1])[0])==null?void 0:I[0];z&&(D=z);break}case"initialPlacement":D=l;break}if(a!==D)return{reset:{placement:D}}}return{}}}};function hx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function fx(e){return O5.some(t=>e[t]>=0)}const U5=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=As(e,t);switch(n){case"referenceHidden":{const i=await Zl(t,{...a,elementContext:"reference"}),o=hx(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fx(o)}}}case"escaped":{const i=await Zl(t,{...a,altBoundary:!0}),o=hx(i,r.floating);return{data:{escapedOffsets:o,escaped:fx(o)}}}default:return{}}}}};async function W5(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Ds(r),l=zo(r),c=Ca(r)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,f=As(t,e);let{mainAxis:m,crossAxis:v,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(v=l==="end"?x*-1:x),c?{x:v*u,y:m*d}:{x:m*d,y:v*u}}const V5=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await W5(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},H5=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:y,y:p}=b;return{x:y,y:p}}},...c}=As(e,t),d={x:r,y:n},u=await Zl(t,c),f=Ca(Ds(a)),m=Vg(f);let v=d[m],x=d[f];if(i){const b=m==="y"?"top":"left",y=m==="y"?"bottom":"right",p=v+u[b],w=v-u[y];v=um(p,v,w)}if(o){const b=f==="y"?"top":"left",y=f==="y"?"bottom":"right",p=x+u[b],w=x-u[y];x=um(p,x,w)}const g=l.fn({...t,[m]:v,[f]:x});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[m]:i,[f]:o}}}}}},q5=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=As(e,t),u={x:r,y:n},f=Ca(a),m=Vg(f);let v=u[m],x=u[f];const g=As(l,t),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=m==="y"?"height":"width",S=i.reference[m]-i.floating[w]+b.mainAxis,C=i.reference[m]+i.reference[w]-b.mainAxis;v<S?v=S:v>C&&(v=C)}if(d){var y,p;const w=m==="y"?"width":"height",S=["top","left"].includes(Ds(a)),C=i.reference[f]-i.floating[w]+(S&&((y=o.offset)==null?void 0:y[f])||0)+(S?0:b.crossAxis),T=i.reference[f]+i.reference[w]+(S?0:((p=o.offset)==null?void 0:p[f])||0)-(S?b.crossAxis:0);x<C?x=C:x>T&&(x=T)}return{[m]:v,[f]:x}}}},G5=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=As(e,t),u=await Zl(t,d),f=Ds(a),m=zo(a),v=Ca(a)==="y",{width:x,height:g}=i.floating;let b,y;f==="top"||f==="bottom"?(b=f,y=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,b=m==="end"?"top":"bottom");const p=g-u.top-u.bottom,w=x-u.left-u.right,S=Sa(g-u[b],p),C=Sa(x-u[y],w),T=!t.middlewareData.shift;let O=S,$=C;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&($=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(O=p),T&&!m){const K=tn(u.left,0),A=tn(u.right,0),_=tn(u.top,0),I=tn(u.bottom,0);v?$=x-2*(K!==0||A!==0?K+A:tn(u.left,u.right)):O=g-2*(_!==0||I!==0?_+I:tn(u.top,u.bottom))}await c({...t,availableWidth:$,availableHeight:O});const Q=await o.getDimensions(l.floating);return x!==Q.width||g!==Q.height?{reset:{rects:!0}}:{}}}};function Ou(){return typeof window<"u"}function Bo(e){return n1(e)?(e.nodeName||"").toLowerCase():"#document"}function an(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function hs(e){var t;return(t=(n1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function n1(e){return Ou()?e instanceof Node||e instanceof an(e).Node:!1}function Vn(e){return Ou()?e instanceof Element||e instanceof an(e).Element:!1}function us(e){return Ou()?e instanceof HTMLElement||e instanceof an(e).HTMLElement:!1}function mx(e){return!Ou()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof an(e).ShadowRoot}function xc(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Hn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function K5(e){return["table","td","th"].includes(Bo(e))}function Au(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Gg(e){const t=Kg(),r=Vn(e)?Hn(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function Y5(e){let t=Ea(e);for(;us(t)&&!To(t);){if(Gg(t))return t;if(Au(t))return null;t=Ea(t)}return null}function Kg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function To(e){return["html","body","#document"].includes(Bo(e))}function Hn(e){return an(e).getComputedStyle(e)}function Du(e){return Vn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ea(e){if(Bo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||mx(e)&&e.host||hs(e);return mx(t)?t.host:t}function s1(e){const t=Ea(e);return To(t)?e.ownerDocument?e.ownerDocument.body:e.body:us(t)&&xc(t)?t:s1(t)}function ec(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=s1(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=an(a);if(i){const l=fm(o);return t.concat(o,o.visualViewport||[],xc(a)?a:[],l&&r?ec(l):[])}return t.concat(a,ec(a,[],r))}function fm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function a1(e){const t=Hn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=us(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=Zd(r)!==i||Zd(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Yg(e){return Vn(e)?e:e.contextElement}function ao(e){const t=Yg(e);if(!us(t))return ka(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=a1(t);let o=(i?Zd(r.width):r.width)/n,l=(i?Zd(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Q5=ka(0);function i1(e){const t=an(e);return!Kg()||!t.visualViewport?Q5:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function J5(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==an(e)?!1:t}function di(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=Yg(e);let o=ka(1);t&&(n?Vn(n)&&(o=ao(n)):o=ao(e));const l=J5(i,r,n)?i1(i):ka(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,f=a.height/o.y;if(i){const m=an(i),v=n&&Vn(n)?an(n):n;let x=m,g=fm(x);for(;g&&n&&v!==x;){const b=ao(g),y=g.getBoundingClientRect(),p=Hn(g),w=y.left+(g.clientLeft+parseFloat(p.paddingLeft))*b.x,S=y.top+(g.clientTop+parseFloat(p.paddingTop))*b.y;c*=b.x,d*=b.y,u*=b.x,f*=b.y,c+=w,d+=S,x=an(g),g=fm(x)}}return tu({width:u,height:f,x:c,y:d})}function X5(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=hs(n),l=t?Au(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=ka(1);const u=ka(0),f=us(n);if((f||!f&&!i)&&((Bo(n)!=="body"||xc(o))&&(c=Du(n)),us(n))){const m=di(n);d=ao(n),u.x=m.x+n.clientLeft,u.y=m.y+n.clientTop}return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x,y:r.y*d.y-c.scrollTop*d.y+u.y}}function Z5(e){return Array.from(e.getClientRects())}function mm(e,t){const r=Du(e).scrollLeft;return t?t.left+r:di(hs(e)).left+r}function eE(e){const t=hs(e),r=Du(e),n=e.ownerDocument.body,a=tn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=tn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+mm(e);const l=-r.scrollTop;return Hn(n).direction==="rtl"&&(o+=tn(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function tE(e,t){const r=an(e),n=hs(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=Kg();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function rE(e,t){const r=di(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=us(e)?ao(e):ka(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function gx(e,t,r){let n;if(t==="viewport")n=tE(e,r);else if(t==="document")n=eE(hs(e));else if(Vn(t))n=rE(t,r);else{const a=i1(e);n={...t,x:t.x-a.x,y:t.y-a.y}}return tu(n)}function o1(e,t){const r=Ea(e);return r===t||!Vn(r)||To(r)?!1:Hn(r).position==="fixed"||o1(r,t)}function nE(e,t){const r=t.get(e);if(r)return r;let n=ec(e,[],!1).filter(l=>Vn(l)&&Bo(l)!=="body"),a=null;const i=Hn(e).position==="fixed";let o=i?Ea(e):e;for(;Vn(o)&&!To(o);){const l=Hn(o),c=Gg(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||xc(o)&&!c&&o1(e,o))?n=n.filter(u=>u!==o):a=l,o=Ea(o)}return t.set(e,n),n}function sE(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?Au(t)?[]:nE(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const f=gx(t,u,a);return d.top=tn(f.top,d.top),d.right=Sa(f.right,d.right),d.bottom=Sa(f.bottom,d.bottom),d.left=tn(f.left,d.left),d},gx(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function aE(e){const{width:t,height:r}=a1(e);return{width:t,height:r}}function iE(e,t,r){const n=us(t),a=hs(t),i=r==="fixed",o=di(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=ka(0);if(n||!n&&!i)if((Bo(t)!=="body"||xc(a))&&(l=Du(t)),n){const v=di(t,!0,i,t);c.x=v.x+t.clientLeft,c.y=v.y+t.clientTop}else a&&(c.x=mm(a));let d=0,u=0;if(a&&!n&&!i){const v=a.getBoundingClientRect();u=v.top+l.scrollTop,d=v.left+l.scrollLeft-mm(a,v)}const f=o.left+l.scrollLeft-c.x-d,m=o.top+l.scrollTop-c.y-u;return{x:f,y:m,width:o.width,height:o.height}}function Fh(e){return Hn(e).position==="static"}function px(e,t){if(!us(e)||Hn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return hs(e)===r&&(r=r.ownerDocument.body),r}function l1(e,t){const r=an(e);if(Au(e))return r;if(!us(e)){let a=Ea(e);for(;a&&!To(a);){if(Vn(a)&&!Fh(a))return a;a=Ea(a)}return r}let n=px(e,t);for(;n&&K5(n)&&Fh(n);)n=px(n,t);return n&&To(n)&&Fh(n)&&!Gg(n)?r:n||Y5(e)||r}const oE=async function(e){const t=this.getOffsetParent||l1,r=this.getDimensions,n=await r(e.floating);return{reference:iE(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function lE(e){return Hn(e).direction==="rtl"}const cE={convertOffsetParentRelativeRectToViewportRelativeRect:X5,getDocumentElement:hs,getClippingRect:sE,getOffsetParent:l1,getElementRects:oE,getClientRects:Z5,getDimensions:aE,getScale:ao,isElement:Vn,isRTL:lE};function dE(e,t){let r=null,n;const a=hs(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:d,top:u,width:f,height:m}=e.getBoundingClientRect();if(l||t(),!f||!m)return;const v=Xc(u),x=Xc(a.clientWidth-(d+f)),g=Xc(a.clientHeight-(u+m)),b=Xc(d),p={rootMargin:-v+"px "+-x+"px "+-g+"px "+-b+"px",threshold:tn(0,Sa(1,c))||1};let w=!0;function S(C){const T=C[0].intersectionRatio;if(T!==c){if(!w)return o();T?o(!1,T):n=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(S,{...p,root:a.ownerDocument})}catch{r=new IntersectionObserver(S,p)}r.observe(e)}return o(!0),i}function uE(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Yg(e),u=a||i?[...d?ec(d):[],...ec(t)]:[];u.forEach(y=>{a&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const f=d&&l?dE(d,r):null;let m=-1,v=null;o&&(v=new ResizeObserver(y=>{let[p]=y;p&&p.target===d&&v&&(v.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=v)==null||w.observe(t)})),r()}),d&&!c&&v.observe(d),v.observe(t));let x,g=c?di(e):null;c&&b();function b(){const y=di(e);g&&(y.x!==g.x||y.y!==g.y||y.width!==g.width||y.height!==g.height)&&r(),g=y,x=requestAnimationFrame(b)}return r(),()=>{var y;u.forEach(p=>{a&&p.removeEventListener("scroll",r),i&&p.removeEventListener("resize",r)}),f==null||f(),(y=v)==null||y.disconnect(),v=null,c&&cancelAnimationFrame(x)}}const hE=V5,fE=H5,mE=B5,gE=G5,pE=U5,xx=z5,xE=q5,vE=(e,t,r)=>{const n=new Map,a={platform:cE,...r},i={...a.platform,_c:n};return F5(e,t,{...a,platform:i})};var _d=typeof document<"u"?h.useLayoutEffect:h.useEffect;function ru(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!ru(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!ru(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function c1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function vx(e,t){const r=c1(e);return Math.round(t*r)/r}function zh(e){const t=h.useRef(e);return _d(()=>{t.current=e}),t}function yE(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,f]=h.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,v]=h.useState(n);ru(m,n)||v(n);const[x,g]=h.useState(null),[b,y]=h.useState(null),p=h.useCallback(M=>{M!==T.current&&(T.current=M,g(M))},[]),w=h.useCallback(M=>{M!==O.current&&(O.current=M,y(M))},[]),S=i||x,C=o||b,T=h.useRef(null),O=h.useRef(null),$=h.useRef(u),Q=c!=null,K=zh(c),A=zh(a),_=zh(d),I=h.useCallback(()=>{if(!T.current||!O.current)return;const M={placement:t,strategy:r,middleware:m};A.current&&(M.platform=A.current),vE(T.current,O.current,M).then(B=>{const X={...B,isPositioned:_.current!==!1};j.current&&!ru($.current,X)&&($.current=X,yi.flushSync(()=>{f(X)}))})},[m,t,r,A,_]);_d(()=>{d===!1&&$.current.isPositioned&&($.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[d]);const j=h.useRef(!1);_d(()=>(j.current=!0,()=>{j.current=!1}),[]),_d(()=>{if(S&&(T.current=S),C&&(O.current=C),S&&C){if(K.current)return K.current(S,C,I);I()}},[S,C,I,K,Q]);const k=h.useMemo(()=>({reference:T,floating:O,setReference:p,setFloating:w}),[p,w]),D=h.useMemo(()=>({reference:S,floating:C}),[S,C]),z=h.useMemo(()=>{const M={position:r,left:0,top:0};if(!D.floating)return M;const B=vx(D.floating,u.x),X=vx(D.floating,u.y);return l?{...M,transform:"translate("+B+"px, "+X+"px)",...c1(D.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:B,top:X}},[r,l,D.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:I,refs:k,elements:D,floatingStyles:z}),[u,I,k,D,z])}const bE=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?xx({element:n.current,padding:a}).fn(r):{}:n?xx({element:n,padding:a}).fn(r):{}}}},wE=(e,t)=>({...hE(e),options:[e,t]}),jE=(e,t)=>({...fE(e),options:[e,t]}),_E=(e,t)=>({...xE(e),options:[e,t]}),NE=(e,t)=>({...mE(e),options:[e,t]}),SE=(e,t)=>({...gE(e),options:[e,t]}),kE=(e,t)=>({...pE(e),options:[e,t]}),CE=(e,t)=>({...bE(e),options:[e,t]});var EE="Arrow",d1=h.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Ke.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});d1.displayName=EE;var TE=d1;function PE(e,t=[]){let r=[];function n(i,o){const l=h.createContext(o),c=r.length;r=[...r,o];function d(f){const{scope:m,children:v,...x}=f,g=(m==null?void 0:m[e][c])||l,b=h.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:b,children:v})}function u(f,m){const v=(m==null?void 0:m[e][c])||l,x=h.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(o=>h.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,OE(a,...t)]}function OE(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function AE(e){const[t,r]=h.useState(void 0);return Nr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Qg="Popper",[u1,Uo]=PE(Qg),[DE,h1]=u1(Qg),f1=e=>{const{__scopePopper:t,children:r}=e,[n,a]=h.useState(null);return s.jsx(DE,{scope:t,anchor:n,onAnchorChange:a,children:r})};f1.displayName=Qg;var m1="PopperAnchor",g1=h.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=h1(m1,r),o=h.useRef(null),l=ft(t,o);return h.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(Ke.div,{...a,ref:l})});g1.displayName=m1;var Jg="PopperContent",[RE,IE]=u1(Jg),p1=h.forwardRef((e,t)=>{var re,ye,je,q,Y,oe;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:v="optimized",onPlaced:x,...g}=e,b=h1(Jg,r),[y,p]=h.useState(null),w=ft(t,De=>p(De)),[S,C]=h.useState(null),T=AE(S),O=(T==null?void 0:T.width)??0,$=(T==null?void 0:T.height)??0,Q=n+(i!=="center"?"-"+i:""),K=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},A=Array.isArray(d)?d:[d],_=A.length>0,I={padding:K,boundary:A.filter($E),altBoundary:_},{refs:j,floatingStyles:k,placement:D,isPositioned:z,middlewareData:M}=yE({strategy:"fixed",placement:Q,whileElementsMounted:(...De)=>uE(...De,{animationFrame:v==="always"}),elements:{reference:b.anchor},middleware:[wE({mainAxis:a+$,alignmentAxis:o}),c&&jE({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?_E():void 0,...I}),c&&NE({...I}),SE({...I,apply:({elements:De,rects:W,availableWidth:ie,availableHeight:Ae})=>{const{width:Re,height:It}=W.reference,Xe=De.floating.style;Xe.setProperty("--radix-popper-available-width",`${ie}px`),Xe.setProperty("--radix-popper-available-height",`${Ae}px`),Xe.setProperty("--radix-popper-anchor-width",`${Re}px`),Xe.setProperty("--radix-popper-anchor-height",`${It}px`)}}),S&&CE({element:S,padding:l}),LE({arrowWidth:O,arrowHeight:$}),m&&kE({strategy:"referenceHidden",...I})]}),[B,X]=y1(D),J=Gr(x);Nr(()=>{z&&(J==null||J())},[z,J]);const L=(re=M.arrow)==null?void 0:re.x,ne=(ye=M.arrow)==null?void 0:ye.y,ae=((je=M.arrow)==null?void 0:je.centerOffset)!==0,[Z,se]=h.useState();return Nr(()=>{y&&se(window.getComputedStyle(y).zIndex)},[y]),s.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:z?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z,"--radix-popper-transform-origin":[(q=M.transformOrigin)==null?void 0:q.x,(Y=M.transformOrigin)==null?void 0:Y.y].join(" "),...((oe=M.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(RE,{scope:r,placedSide:B,onArrowChange:C,arrowX:L,arrowY:ne,shouldHideArrow:ae,children:s.jsx(Ke.div,{"data-side":B,"data-align":X,...g,ref:w,style:{...g.style,animation:z?void 0:"none"}})})})});p1.displayName=Jg;var x1="PopperArrow",ME={top:"bottom",right:"left",bottom:"top",left:"right"},v1=h.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=IE(x1,n),o=ME[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(TE,{...a,ref:r,style:{...a.style,display:"block"}})})});v1.displayName=x1;function $E(e){return e!==null}var LE=e=>({name:"transformOrigin",options:e,fn(t){var b,y,p;const{placement:r,rects:n,middlewareData:a}=t,o=((b=a.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=y1(r),f={start:"0%",center:"50%",end:"100%"}[u],m=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,v=(((p=a.arrow)==null?void 0:p.y)??0)+c/2;let x="",g="";return d==="bottom"?(x=o?f:`${m}px`,g=`${-c}px`):d==="top"?(x=o?f:`${m}px`,g=`${n.floating.height+c}px`):d==="right"?(x=`${-c}px`,g=o?f:`${v}px`):d==="left"&&(x=`${n.floating.width+c}px`,g=o?f:`${v}px`),{data:{x,y:g}}}});function y1(e){const[t,r="center"]=e.split("-");return[t,r]}var b1=f1,Ru=g1,Xg=p1,Zg=v1,[Iu,MD]=bi("Tooltip",[Uo]),e0=Uo(),w1="TooltipProvider",FE=700,yx="tooltip.open",[zE,j1]=Iu(w1),_1=e=>{const{__scopeTooltip:t,delayDuration:r=FE,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,[o,l]=h.useState(!0),c=h.useRef(!1),d=h.useRef(0);return h.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),s.jsx(zE,{scope:t,isOpenDelayed:o,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:h.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:h.useCallback(u=>{c.current=u},[]),disableHoverableContent:a,children:i})};_1.displayName=w1;var N1="Tooltip",[$D,Mu]=Iu(N1),gm="TooltipTrigger",BE=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Mu(gm,r),i=j1(gm,r),o=e0(r),l=h.useRef(null),c=ft(t,l,a.onTriggerChange),d=h.useRef(!1),u=h.useRef(!1),f=h.useCallback(()=>d.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(Ru,{asChild:!0,...o,children:s.jsx(Ke.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Te(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Te(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Te(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Te(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Te(e.onBlur,a.onClose),onClick:Te(e.onClick,a.onClose)})})});BE.displayName=gm;var UE="TooltipPortal",[LD,WE]=Iu(UE,{forceMount:void 0}),Po="TooltipContent",S1=h.forwardRef((e,t)=>{const r=WE(Po,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=Mu(Po,e.__scopeTooltip);return s.jsx(Fs,{present:n||o.open,children:o.disableHoverableContent?s.jsx(k1,{side:a,...i,ref:t}):s.jsx(VE,{side:a,...i,ref:t})})}),VE=h.forwardRef((e,t)=>{const r=Mu(Po,e.__scopeTooltip),n=j1(Po,e.__scopeTooltip),a=h.useRef(null),i=ft(t,a),[o,l]=h.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:f}=n,m=h.useCallback(()=>{l(null),f(!1)},[f]),v=h.useCallback((x,g)=>{const b=x.currentTarget,y={x:x.clientX,y:x.clientY},p=KE(y,b.getBoundingClientRect()),w=YE(y,p),S=QE(g.getBoundingClientRect()),C=XE([...w,...S]);l(C),f(!0)},[f]);return h.useEffect(()=>()=>m(),[m]),h.useEffect(()=>{if(c&&u){const x=b=>v(b,u),g=b=>v(b,c);return c.addEventListener("pointerleave",x),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",g)}}},[c,u,v,m]),h.useEffect(()=>{if(o){const x=g=>{const b=g.target,y={x:g.clientX,y:g.clientY},p=(c==null?void 0:c.contains(b))||(u==null?void 0:u.contains(b)),w=!JE(y,o);p?m():w&&(m(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,u,o,d,m]),s.jsx(k1,{...e,ref:i})}),[HE,qE]=Iu(N1,{isInside:!1}),k1=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Mu(Po,r),d=e0(r),{onClose:u}=c;return h.useEffect(()=>(document.addEventListener(yx,u),()=>document.removeEventListener(yx,u)),[u]),h.useEffect(()=>{if(c.trigger){const f=m=>{const v=m.target;v!=null&&v.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),s.jsx(Lo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:s.jsxs(Xg,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(Ig,{children:n}),s.jsx(HE,{scope:r,isInside:!0,children:s.jsx(TC,{id:c.contentId,role:"tooltip",children:a||n})})]})})});S1.displayName=Po;var C1="TooltipArrow",GE=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=e0(r);return qE(C1,r).isInside?null:s.jsx(Zg,{...a,...n,ref:t})});GE.displayName=C1;function KE(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function YE(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function QE(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function JE(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i].x,c=t[i].y,d=t[o].x,u=t[o].y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}function XE(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),ZE(t)}function ZE(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var e3=_1,E1=S1;const t3=e3,r3=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(E1,{ref:n,sideOffset:t,className:_e("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));r3.displayName=E1.displayName;var $u=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lu=typeof window>"u"||"Deno"in globalThis;function On(){}function n3(e,t){return typeof e=="function"?e(t):e}function s3(e){return typeof e=="number"&&e>=0&&e!==1/0}function a3(e,t){return Math.max(e+(t||0)-Date.now(),0)}function bx(e,t){return typeof e=="function"?e(t):e}function i3(e,t){return typeof e=="function"?e(t):e}function wx(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==t0(o,t.options))return!1}else if(!rc(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function jx(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(tc(t.options.mutationKey)!==tc(i))return!1}else if(!rc(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function t0(e,t){return((t==null?void 0:t.queryKeyHashFn)||tc)(e)}function tc(e){return JSON.stringify(e,(t,r)=>pm(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function rc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!rc(e[r],t[r])):!1}function T1(e,t){if(e===t)return e;const r=_x(e)&&_x(t);if(r||pm(e)&&pm(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d];(!r&&n.includes(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=T1(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===o&&c===a?e:l}return t}function _x(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function pm(e){if(!Nx(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Nx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Nx(e){return Object.prototype.toString.call(e)==="[object Object]"}function o3(e){return new Promise(t=>{setTimeout(t,e)})}function l3(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?T1(e,t):t}function c3(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function d3(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var r0=Symbol();function P1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===r0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Xa,ia,ho,Pv,u3=(Pv=class extends $u{constructor(){super();ht(this,Xa,void 0);ht(this,ia,void 0);ht(this,ho,void 0);Ye(this,ho,t=>{if(!Lu&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){te(this,ia)||this.setEventListener(te(this,ho))}onUnsubscribe(){var t;this.hasListeners()||((t=te(this,ia))==null||t.call(this),Ye(this,ia,void 0))}setEventListener(t){var r;Ye(this,ho,t),(r=te(this,ia))==null||r.call(this),Ye(this,ia,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){te(this,Xa)!==t&&(Ye(this,Xa,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof te(this,Xa)=="boolean"?te(this,Xa):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Xa=new WeakMap,ia=new WeakMap,ho=new WeakMap,Pv),O1=new u3,fo,oa,mo,Ov,h3=(Ov=class extends $u{constructor(){super();ht(this,fo,!0);ht(this,oa,void 0);ht(this,mo,void 0);Ye(this,mo,t=>{if(!Lu&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){te(this,oa)||this.setEventListener(te(this,mo))}onUnsubscribe(){var t;this.hasListeners()||((t=te(this,oa))==null||t.call(this),Ye(this,oa,void 0))}setEventListener(t){var r;Ye(this,mo,t),(r=te(this,oa))==null||r.call(this),Ye(this,oa,t(this.setOnline.bind(this)))}setOnline(t){te(this,fo)!==t&&(Ye(this,fo,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return te(this,fo)}},fo=new WeakMap,oa=new WeakMap,mo=new WeakMap,Ov),nu=new h3;function f3(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function m3(e){return Math.min(1e3*2**e,3e4)}function A1(e){return(e??"online")==="online"?nu.isOnline():!0}var D1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Bh(e){return e instanceof D1}function R1(e){let t=!1,r=0,n=!1,a;const i=f3(),o=g=>{var b;n||(m(new D1(g)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>O1.isFocused()&&(e.networkMode==="always"||nu.isOnline())&&e.canRun(),u=()=>A1(e.networkMode)&&e.canRun(),f=g=>{var b;n||(n=!0,(b=e.onSuccess)==null||b.call(e,g),a==null||a(),i.resolve(g))},m=g=>{var b;n||(n=!0,(b=e.onError)==null||b.call(e,g),a==null||a(),i.reject(g))},v=()=>new Promise(g=>{var b;a=y=>{(n||d())&&g(y)},(b=e.onPause)==null||b.call(e)}).then(()=>{var g;a=void 0,n||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(n)return;let g;const b=r===0?e.initialPromise:void 0;try{g=b??e.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(f).catch(y=>{var T;if(n)return;const p=e.retry??(Lu?0:3),w=e.retryDelay??m3,S=typeof w=="function"?w(r,y):w,C=p===!0||typeof p=="number"&&r<p||typeof p=="function"&&p(r,y);if(t||!C){m(y);return}r++,(T=e.onFail)==null||T.call(e,r,y),o3(S).then(()=>d()?void 0:v()).then(()=>{t?m(y):x()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():v().then(x),i)}}function g3(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=l=>setTimeout(l,0);const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Or=g3(),Za,Av,I1=(Av=class{constructor(){ht(this,Za,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),s3(this.gcTime)&&Ye(this,Za,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Lu?1/0:5*60*1e3))}clearGcTimeout(){te(this,Za)&&(clearTimeout(te(this,Za)),Ye(this,Za,void 0))}},Za=new WeakMap,Av),go,po,fn,wr,oc,ei,An,ps,Dv,p3=(Dv=class extends I1{constructor(t){super();ht(this,An);ht(this,go,void 0);ht(this,po,void 0);ht(this,fn,void 0);ht(this,wr,void 0);ht(this,oc,void 0);ht(this,ei,void 0);Ye(this,ei,!1),Ye(this,oc,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ye(this,fn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ye(this,go,v3(this.options)),this.state=t.state??te(this,go),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=te(this,wr))==null?void 0:t.promise}setOptions(t){this.options={...te(this,oc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&te(this,fn).remove(this)}setData(t,r){const n=l3(this.state.data,t,this.options);return xr(this,An,ps).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){xr(this,An,ps).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=te(this,wr))==null?void 0:n.promise;return(a=te(this,wr))==null||a.cancel(t),r?r.then(On).catch(On):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(te(this,go))}isActive(){return this.observers.some(t=>i3(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===r0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!a3(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=te(this,wr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=te(this,wr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),te(this,fn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(te(this,wr)&&(te(this,ei)?te(this,wr).cancel({revert:!0}):te(this,wr).cancelRetry()),this.scheduleGc()),te(this,fn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xr(this,An,ps).call(this,{type:"invalidate"})}fetch(t,r){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(te(this,wr))return te(this,wr).continueRetry(),te(this,wr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,a=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Ye(this,ei,!0),n.signal)})},i=()=>{const f=P1(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return a(m),Ye(this,ei,!1),this.options.persister?this.options.persister(f,m,this):f(m)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),Ye(this,po,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&xr(this,An,ps).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=f=>{var m,v,x,g;Bh(f)&&f.silent||xr(this,An,ps).call(this,{type:"error",error:f}),Bh(f)||((v=(m=te(this,fn).config).onError)==null||v.call(m,f,this),(g=(x=te(this,fn).config).onSettled)==null||g.call(x,this.state.data,f,this)),this.scheduleGc()};return Ye(this,wr,R1({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,v,x,g;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(b){l(b);return}(v=(m=te(this,fn).config).onSuccess)==null||v.call(m,f,this),(g=(x=te(this,fn).config).onSettled)==null||g.call(x,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,m)=>{xr(this,An,ps).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{xr(this,An,ps).call(this,{type:"pause"})},onContinue:()=>{xr(this,An,ps).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),te(this,wr).start()}},go=new WeakMap,po=new WeakMap,fn=new WeakMap,wr=new WeakMap,oc=new WeakMap,ei=new WeakMap,An=new WeakSet,ps=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...x3(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Bh(a)&&a.revert&&te(this,po)?{...te(this,po),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Or.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),te(this,fn).notify({query:this,type:"updated",action:t})})},Dv);function x3(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:A1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function v3(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Xn,Rv,y3=(Rv=class extends $u{constructor(t={}){super();ht(this,Xn,void 0);this.config=t,Ye(this,Xn,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??t0(a,r);let o=this.get(i);return o||(o=new p3({cache:this,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){te(this,Xn).has(t.queryHash)||(te(this,Xn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=te(this,Xn).get(t.queryHash);r&&(t.destroy(),r===t&&te(this,Xn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Or.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return te(this,Xn).get(t)}getAll(){return[...te(this,Xn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>wx(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>wx(t,n)):r}notify(t){Or.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Or.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Or.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Xn=new WeakMap,Rv),Zn,Er,ti,es,Qs,Iv,b3=(Iv=class extends I1{constructor(t){super();ht(this,es);ht(this,Zn,void 0);ht(this,Er,void 0);ht(this,ti,void 0);this.mutationId=t.mutationId,Ye(this,Er,t.mutationCache),Ye(this,Zn,[]),this.state=t.state||w3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){te(this,Zn).includes(t)||(te(this,Zn).push(t),this.clearGcTimeout(),te(this,Er).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ye(this,Zn,te(this,Zn).filter(r=>r!==t)),this.scheduleGc(),te(this,Er).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){te(this,Zn).length||(this.state.status==="pending"?this.scheduleGc():te(this,Er).remove(this))}continue(){var t;return((t=te(this,ti))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,o,l,c,d,u,f,m,v,x,g,b,y,p,w,S,C,T,O;Ye(this,ti,R1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:($,Q)=>{xr(this,es,Qs).call(this,{type:"failed",failureCount:$,error:Q})},onPause:()=>{xr(this,es,Qs).call(this,{type:"pause"})},onContinue:()=>{xr(this,es,Qs).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>te(this,Er).canRun(this)}));const r=this.state.status==="pending",n=!te(this,ti).canStart();try{if(!r){xr(this,es,Qs).call(this,{type:"pending",variables:t,isPaused:n}),await((i=(a=te(this,Er).config).onMutate)==null?void 0:i.call(a,t,this));const Q=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));Q!==this.state.context&&xr(this,es,Qs).call(this,{type:"pending",context:Q,variables:t,isPaused:n})}const $=await te(this,ti).start();return await((d=(c=te(this,Er).config).onSuccess)==null?void 0:d.call(c,$,t,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,$,t,this.state.context)),await((v=(m=te(this,Er).config).onSettled)==null?void 0:v.call(m,$,null,this.state.variables,this.state.context,this)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,$,null,t,this.state.context)),xr(this,es,Qs).call(this,{type:"success",data:$}),$}catch($){try{throw await((y=(b=te(this,Er).config).onError)==null?void 0:y.call(b,$,t,this.state.context,this)),await((w=(p=this.options).onError)==null?void 0:w.call(p,$,t,this.state.context)),await((C=(S=te(this,Er).config).onSettled)==null?void 0:C.call(S,void 0,$,this.state.variables,this.state.context,this)),await((O=(T=this.options).onSettled)==null?void 0:O.call(T,void 0,$,t,this.state.context)),$}finally{xr(this,es,Qs).call(this,{type:"error",error:$})}}finally{te(this,Er).runNext(this)}}},Zn=new WeakMap,Er=new WeakMap,ti=new WeakMap,es=new WeakSet,Qs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Or.batch(()=>{te(this,Zn).forEach(n=>{n.onMutationUpdate(t)}),te(this,Er).notify({mutation:this,type:"updated",action:t})})},Iv);function w3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xr,lc,Mv,j3=(Mv=class extends $u{constructor(t={}){super();ht(this,Xr,void 0);ht(this,lc,void 0);this.config=t,Ye(this,Xr,new Map),Ye(this,lc,Date.now())}build(t,r,n){const a=new b3({mutationCache:this,mutationId:++Oc(this,lc)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){const r=Zc(t),n=te(this,Xr).get(r)??[];n.push(t),te(this,Xr).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=Zc(t);if(te(this,Xr).has(r)){const a=(n=te(this,Xr).get(r))==null?void 0:n.filter(i=>i!==t);a&&(a.length===0?te(this,Xr).delete(r):te(this,Xr).set(r,a))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=te(this,Xr).get(Zc(t)))==null?void 0:n.find(a=>a.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=te(this,Xr).get(Zc(t)))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Or.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...te(this,Xr).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>jx(r,n))}findAll(t={}){return this.getAll().filter(r=>jx(t,r))}notify(t){Or.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Or.batch(()=>Promise.all(t.map(r=>r.continue().catch(On))))}},Xr=new WeakMap,lc=new WeakMap,Mv);function Zc(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Sx(e){return{onFetch:(t,r)=>{var u,f,m,v,x;const n=t.options,a=(m=(f=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((v=t.state.data)==null?void 0:v.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},y=P1(t.options,t.fetchOptions),p=async(w,S,C)=>{if(g)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const T={queryKey:t.queryKey,pageParam:S,direction:C?"backward":"forward",meta:t.options.meta};b(T);const O=await y(T),{maxPages:$}=t.options,Q=C?d3:c3;return{pages:Q(w.pages,O,$),pageParams:Q(w.pageParams,S,$)}};if(a&&i.length){const w=a==="backward",S=w?_3:kx,C={pages:i,pageParams:o},T=S(n,C);l=await p(C,T,w)}else{const w=e??i.length;do{const S=c===0?o[0]??n.initialPageParam:kx(n,l);if(c>0&&S==null)break;l=await p(l,S),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var g,b;return(b=(g=t.options).persister)==null?void 0:b.call(g,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function kx(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function _3(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Wt,la,ca,xo,vo,da,yo,bo,$v,N3=($v=class{constructor(e={}){ht(this,Wt,void 0);ht(this,la,void 0);ht(this,ca,void 0);ht(this,xo,void 0);ht(this,vo,void 0);ht(this,da,void 0);ht(this,yo,void 0);ht(this,bo,void 0);Ye(this,Wt,e.queryCache||new y3),Ye(this,la,e.mutationCache||new j3),Ye(this,ca,e.defaultOptions||{}),Ye(this,xo,new Map),Ye(this,vo,new Map),Ye(this,da,0)}mount(){Oc(this,da)._++,te(this,da)===1&&(Ye(this,yo,O1.subscribe(async e=>{e&&(await this.resumePausedMutations(),te(this,Wt).onFocus())})),Ye(this,bo,nu.subscribe(async e=>{e&&(await this.resumePausedMutations(),te(this,Wt).onOnline())})))}unmount(){var e,t;Oc(this,da)._--,te(this,da)===0&&((e=te(this,yo))==null||e.call(this),Ye(this,yo,void 0),(t=te(this,bo))==null||t.call(this),Ye(this,bo,void 0))}isFetching(e){return te(this,Wt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return te(this,la).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=te(this,Wt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=te(this,Wt).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(bx(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return te(this,Wt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=te(this,Wt).get(n.queryHash),i=a==null?void 0:a.state.data,o=n3(t,i);if(o!==void 0)return te(this,Wt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Or.batch(()=>te(this,Wt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=te(this,Wt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=te(this,Wt);Or.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=te(this,Wt),n={type:"active",...e};return Or.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=Or.batch(()=>te(this,Wt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(On).catch(On)}invalidateQueries(e={},t={}){return Or.batch(()=>{if(te(this,Wt).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=Or.batch(()=>te(this,Wt).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(On)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(On)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=te(this,Wt).build(this,t);return r.isStaleByTime(bx(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(On).catch(On)}fetchInfiniteQuery(e){return e.behavior=Sx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(On).catch(On)}ensureInfiniteQueryData(e){return e.behavior=Sx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return nu.isOnline()?te(this,la).resumePausedMutations():Promise.resolve()}getQueryCache(){return te(this,Wt)}getMutationCache(){return te(this,la)}getDefaultOptions(){return te(this,ca)}setDefaultOptions(e){Ye(this,ca,e)}setQueryDefaults(e,t){te(this,xo).set(tc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...te(this,xo).values()];let r={};return t.forEach(n=>{rc(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){te(this,vo).set(tc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...te(this,vo).values()];let r={};return t.forEach(n=>{rc(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...te(this,ca).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=t0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===r0&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...te(this,ca).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){te(this,Wt).clear(),te(this,la).clear()}},Wt=new WeakMap,la=new WeakMap,ca=new WeakMap,xo=new WeakMap,vo=new WeakMap,da=new WeakMap,yo=new WeakMap,bo=new WeakMap,$v),S3=h.createContext(void 0),k3=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(S3.Provider,{value:e,children:t}));const Fu=pc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-islamic-green hover:text-white",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-islamic-green hover:text-white",secondary:"bg-secondary text-secondary-foreground hover:bg-islamic-green hover:text-white",ghost:"hover:bg-islamic-green hover:text-white",link:"text-primary underline-offset-4 hover:underline hover:text-islamic-green"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),V=h.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?Na:"button";return s.jsx(o,{className:_e(Fu({variant:t,size:r,className:e})),ref:i,...a})});V.displayName="Button";const M1="/assets/logo-57627ad7.png",C3="modulepreload",E3=function(e){return"/"+e},Cx={},Ln=function(t,r,n){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=E3(i),i in Cx)return;Cx[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=a.length-1;u>=0;u--){const f=a[u];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":C3,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((u,f)=>{d.addEventListener("load",u),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},T3=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ln(()=>Promise.resolve().then(()=>Wo),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class n0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class P3 extends n0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ex extends n0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Tx extends n0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xm||(xm={}));var O3=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class A3{constructor(t,{headers:r={},customFetch:n,region:a=xm.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=T3(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return O3(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(g=>{throw new P3(g)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new Ex(f);if(!f.ok)throw new Tx(f);let v=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return v==="application/json"?x=yield f.json():v==="application/octet-stream"?x=yield f.blob():v==="text/event-stream"?x=f:v==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof Tx||a instanceof Ex?a.context:void 0}}})}}var Br={},s0={},zu={},vc={},Bu={},Uu={},D3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oo=D3();const R3=Oo.fetch,$1=Oo.fetch.bind(Oo),L1=Oo.Headers,I3=Oo.Request,M3=Oo.Response,Wo=Object.freeze(Object.defineProperty({__proto__:null,Headers:L1,Request:I3,Response:M3,default:$1,fetch:R3},Symbol.toStringTag,{value:"Module"})),$3=Fv(Wo);var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});let L3=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Wu.default=L3;var F1=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uu,"__esModule",{value:!0});const F3=F1($3),z3=F1(Wu);let B3=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=F3.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,f=null,m=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&b&&b.length>1&&(f=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,m=406,v="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(u=[],d=null,m=200,v="OK")}catch{i.status===404&&g===""?(m=204,v="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,v="OK"),d&&this.shouldThrowOnError)throw new z3.default(d)}return{error:d,data:u,count:f,status:m,statusText:v}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Uu.default=B3;var U3=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bu,"__esModule",{value:!0});const W3=U3(Uu);let V3=class extends W3.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Bu.default=V3;var H3=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vc,"__esModule",{value:!0});const q3=H3(Bu);let G3=class extends q3.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};vc.default=G3;var K3=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zu,"__esModule",{value:!0});const ol=K3(vc);let Y3=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new ol.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ol.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new ol.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new ol.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ol.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};zu.default=Y3;var Vu={},Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.version=void 0;Hu.version="0.0.0-automated";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.DEFAULT_HEADERS=void 0;const Q3=Hu;Vu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Q3.version}`};var z1=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s0,"__esModule",{value:!0});const J3=z1(zu),X3=z1(vc),Z3=Vu;let eT=class B1{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},Z3.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new J3.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new B1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{l.searchParams.append(u,f)})):(o="POST",c=r);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new X3.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};s0.default=eT;var Vo=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Br,"__esModule",{value:!0});Br.PostgrestError=Br.PostgrestBuilder=Br.PostgrestTransformBuilder=Br.PostgrestFilterBuilder=Br.PostgrestQueryBuilder=Br.PostgrestClient=void 0;const U1=Vo(s0);Br.PostgrestClient=U1.default;const W1=Vo(zu);Br.PostgrestQueryBuilder=W1.default;const V1=Vo(vc);Br.PostgrestFilterBuilder=V1.default;const H1=Vo(Bu);Br.PostgrestTransformBuilder=H1.default;const q1=Vo(Uu);Br.PostgrestBuilder=q1.default;const G1=Vo(Wu);Br.PostgrestError=G1.default;var tT=Br.default={PostgrestClient:U1.default,PostgrestQueryBuilder:W1.default,PostgrestFilterBuilder:V1.default,PostgrestTransformBuilder:H1.default,PostgrestBuilder:q1.default,PostgrestError:G1.default};const{PostgrestClient:rT,PostgrestQueryBuilder:VD,PostgrestFilterBuilder:HD,PostgrestTransformBuilder:qD,PostgrestBuilder:GD,PostgrestError:KD}=tT;function nT(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const sT=nT(),aT="2.11.15",iT=`realtime-js/${aT}`,oT="1.0.0",K1=1e4,lT=1e3;var Ol;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ol||(Ol={}));var br;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(br||(br={}));var Rn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Rn||(Rn={}));var vm;(function(e){e.websocket="websocket"})(vm||(vm={}));var Ha;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ha||(Ha={}));class cT{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Y1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var vt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(vt||(vt={}));const Px=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=dT(o,e,t,a),i),{})},dT=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?Q1(i,o):ym(o)},Q1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return mT(t,r)}switch(e){case vt.bool:return uT(t);case vt.float4:case vt.float8:case vt.int2:case vt.int4:case vt.int8:case vt.numeric:case vt.oid:return hT(t);case vt.json:case vt.jsonb:return fT(t);case vt.timestamp:return gT(t);case vt.abstime:case vt.date:case vt.daterange:case vt.int4range:case vt.int8range:case vt.money:case vt.reltime:case vt.text:case vt.time:case vt.timestamptz:case vt.timetz:case vt.tsrange:case vt.tstzrange:return ym(t);default:return ym(t)}},ym=e=>e,uT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},hT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},fT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},mT=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Q1(t,l))}return e},gT=e=>typeof e=="string"?e.replace(" ","T"):e,J1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Uh{constructor(t,r,n={},a=K1){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ox;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ox||(Ox={}));class Al{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Al.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Al.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Al.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const f=i[d];if(f){const m=u.map(b=>b.presence_ref),v=f.map(b=>b.presence_ref),x=u.filter(b=>v.indexOf(b.presence_ref)<0),g=f.filter(b=>m.indexOf(b.presence_ref)<0);x.length>0&&(l[d]=x),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const f=t[l].map(v=>v.presence_ref),m=u.filter(v=>f.indexOf(v.presence_ref)<0);t[l].unshift(...m)}n(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ax;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ax||(Ax={}));var Dx;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Dx||(Dx={}));var ys;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ys||(ys={}));class a0{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=br.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Uh(this,Rn.join,this.params,this.timeout),this.rejoinTimer=new Y1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=br.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=br.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=br.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=br.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rn.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Al(this),this.broadcastEndpointURL=J1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==br.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(ys.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(ys.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){t==null||t(ys.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,v=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,x=[];for(let g=0;g<v;g++){const b=m[g],{filter:{event:y,schema:p,table:w,filter:S}}=b,C=u&&u[g];if(C&&C.event===y&&C.schema===p&&C.table===w&&C.filter===S)x.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),this.state=br.errored,t==null||t(ys.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(ys.SUBSCRIBED);return}}).receive("error",u=>{this.state=br.errored,t==null||t(ys.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ys.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=br.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Uh(this,Rn.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Uh(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Rn;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var x,g,b;return((x=v.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(g=v.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(v=>v.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var x,g,b,y,p,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const S=v.id,C=(x=v.filter)===null||x===void 0?void 0:x.event;return S&&((g=r.ids)===null||g===void 0?void 0:g.includes(S))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(p=(y=v==null?void 0:v.filter)===null||y===void 0?void 0:y.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return S==="*"||S===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:g,table:b,commit_timestamp:y,type:p,errors:w}=x;m=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:y,eventType:p,new:{},old:{},errors:w}),this._getPayloadRecords(x))}v.callback(m,n)})}_isClosed(){return this.state===br.closed}_isJoined(){return this.state===br.joined}_isJoining(){return this.state===br.joining}_isLeaving(){return this.state===br.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&a0.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Rn.close,{},t)}_onError(t){this._on(Rn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=br.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Px(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Px(t.columns,t.old_record)),r}}const Rx=()=>{},pT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xT{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=K1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rx,this.ref=0,this.logger=Rx,this.conn=null,this.sendBuffer=[],this.serializer=new cT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Ln(()=>Promise.resolve().then(()=>Wo),void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${vm.websocket}`,this.httpEndpoint=J1(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Y1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=sT),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:oT}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ol.connecting:return Ha.Connecting;case Ol.open:return Ha.Open;case Ol.closing:return Ha.Closing;default:return Ha.Closed}}isConnected(){return this.connectionState()===Ha.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new a0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:iT};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Rn.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(lT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:i,ref:o}=r;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Rn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([pT],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class i0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ir(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class vT extends i0{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bm extends i0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var yT=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const X1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ln(()=>Promise.resolve().then(()=>Wo),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},bT=()=>yT(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ln(()=>Promise.resolve().then(()=>Wo),void 0)).Response:Response}),wm=e=>{if(Array.isArray(e))return e.map(r=>wm(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=wm(n)}),t},wT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var wi=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const Wh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jT=(e,t,r)=>wi(void 0,void 0,void 0,function*(){const n=yield bT();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new vT(Wh(a),i,o))}).catch(a=>{t(new bm(Wh(a),a))}):t(new bm(Wh(e),e))}),_T=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(wT(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r))};function yc(e,t,r,n,a,i){return wi(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,_T(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>jT(c,l,n))})})}function su(e,t,r,n){return wi(this,void 0,void 0,function*(){return yc(e,"GET",t,r,n)})}function bs(e,t,r,n,a){return wi(this,void 0,void 0,function*(){return yc(e,"POST",t,n,a,r)})}function jm(e,t,r,n,a){return wi(this,void 0,void 0,function*(){return yc(e,"PUT",t,n,a,r)})}function NT(e,t,r,n){return wi(this,void 0,void 0,function*(){return yc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Z1(e,t,r,n,a){return wi(this,void 0,void 0,function*(){return yc(e,"DELETE",t,n,a,r)})}var Lr=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const ST={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ix={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class kT{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=X1(a)}uploadOrUpdate(t,r,n,a){return Lr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ix),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),f=yield(t=="PUT"?jm:bs)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(ir(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Lr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Ix.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield jm(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(ir(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Lr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield bs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new i0("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}update(t,r,n){return Lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Lr(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(ir(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Lr(this,void 0,void 0,function*(){try{return{data:{path:(yield bs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(ir(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Lr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield bs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(ir(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Lr(this,void 0,void 0,function*(){try{const a=yield bs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(ir(a))return{data:null,error:a};throw a}})}download(t,r){return Lr(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield su(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ir(l))return{data:null,error:l};throw l}})}info(t){return Lr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield su(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:wm(n),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}exists(t){return Lr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield NT(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ir(n)&&n instanceof bm){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return Lr(this,void 0,void 0,function*(){try{return{data:yield Z1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}list(t,r,n){return Lr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},ST),r),{prefix:t||""});return{data:yield bs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(ir(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const CT="2.10.4",ET={"X-Client-Info":`storage-js/${CT}`};var Ci=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class TT{constructor(t,r={},n,a){const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},ET),r),this.fetch=X1(n)}listBuckets(){return Ci(this,void 0,void 0,function*(){try{return{data:yield su(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ir(t))return{data:null,error:t};throw t}})}getBucket(t){return Ci(this,void 0,void 0,function*(){try{return{data:yield su(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ci(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Ci(this,void 0,void 0,function*(){try{return{data:yield jm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ci(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ci(this,void 0,void 0,function*(){try{return{data:yield Z1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}}class PT extends TT{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new kT(this.url,this.headers,t,this.fetch)}}const OT="2.53.0";let vl="";typeof Deno<"u"?vl="deno":typeof document<"u"?vl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vl="react-native":vl="node";const AT={"X-Client-Info":`supabase-js-${vl}/${OT}`},DT={headers:AT},RT={schema:"public"},IT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},MT={};var $T=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const LT=e=>{let t;return e?t=e:typeof fetch>"u"?t=$1:t=fetch,(...r)=>t(...r)},FT=()=>typeof Headers>"u"?L1:Headers,zT=(e,t,r)=>{const n=LT(r),a=FT();return(i,o)=>$T(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var BT=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};function UT(e){return e.endsWith("/")?e:e+"/"}function WT(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:f}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>BT(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const ej="2.71.1",Mi=30*1e3,_m=3,Vh=_m*Mi,VT="http://localhost:9999",HT="supabase.auth.token",qT={"X-Client-Info":`gotrue-js/${ej}`},Nm="X-Supabase-Api-Version",tj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},GT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,KT=10*60*1e3;class o0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class YT extends o0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function QT(e){return We(e)&&e.name==="AuthApiError"}class rj extends o0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Da extends o0{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Js extends Da{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function JT(e){return We(e)&&e.name==="AuthSessionMissingError"}class ed extends Da{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class td extends Da{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class rd extends Da{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function XT(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}class Mx extends Da{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sm extends Da{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Hh(e){return We(e)&&e.name==="AuthRetryableFetchError"}class $x extends Da{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class km extends Da{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lx=` 	
\r=`.split(""),ZT=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Lx.length;t+=1)e[Lx[t].charCodeAt(0)]=-2;for(let t=0;t<au.length;t+=1)e[au[t].charCodeAt(0)]=t;return e})();function Fx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(au[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(au[n]),t.queuedBits-=6}}function nj(e,t,r){const n=ZT[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function zx(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{rP(o,n,r)};for(let o=0;o<e.length;o+=1)nj(e.charCodeAt(o),a,i);return t.join("")}function eP(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tP(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}eP(n,t)}}function rP(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function nP(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)nj(e.charCodeAt(a),r,n);return new Uint8Array(t)}function sP(e){const t=[];return tP(e,r=>t.push(r)),new Uint8Array(t)}function aP(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Fx(a,r,n)),Fx(null,r,n),t.join("")}function iP(e){return Math.round(Date.now()/1e3)+e}function oP(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const En=()=>typeof window<"u"&&typeof document<"u",Fa={tested:!1,writable:!1},sj=()=>{if(!En())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fa.tested)return Fa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Fa.tested=!0,Fa.writable=!0}catch{Fa.tested=!0,Fa.writable=!1}return Fa.writable};function lP(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const aj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ln(()=>Promise.resolve().then(()=>Wo),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},cP=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",$i=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},za=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Hs=async(e,t)=>{await e.removeItem(t)};class qu{constructor(){this.promise=new qu.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}qu.promiseConstructor=Promise;function qh(e){const t=e.split(".");if(t.length!==3)throw new km("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!GT.test(t[n]))throw new km("JWT not in base64url format");return{header:JSON.parse(zx(t[0])),payload:JSON.parse(zx(t[1])),signature:nP(t[2]),raw:{header:t[0],payload:t[1]}}}async function dP(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function uP(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function hP(e){return("0"+e.toString(16)).substr(-2)}function fP(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,hP).join("")}async function mP(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function gP(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await mP(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ei(e,t,r=!1){const n=fP();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await $i(e,`${t}-code-verifier`,a);const i=await gP(n);return[i,n===i?"plain":"s256"]}const pP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xP(e){const t=e.headers.get(Nm);if(!t||!t.match(pP))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function vP(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function yP(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ti(e){if(!bP.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gh(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bx(e){return JSON.parse(JSON.stringify(e))}var wP=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Wa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jP=[502,503,504];async function Ux(e){var t;if(!cP(e))throw new Sm(Wa(e),0);if(jP.includes(e.status))throw new Sm(Wa(e),e.status);let r;try{r=await e.json()}catch(i){throw new rj(Wa(i),i)}let n;const a=xP(e);if(a&&a.getTime()>=tj["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new $x(Wa(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Js}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new $x(Wa(r),e.status,r.weak_password.reasons);throw new YT(Wa(r),e.status||500,n)}const _P=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function et(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Nm]||(i[Nm]=tj["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await NP(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function NP(e,t,r,n,a,i){const o=_P(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Sm(Wa(c),0)}if(l.ok||await Ux(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Ux(c)}}function xs(e){var t;let r=null;EP(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=iP(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Wx(e){const t=xs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function sa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function SP(e){return{data:e,error:null}}function kP(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=wP(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function CP(e){return e}function EP(e){return e.access_token&&e.refresh_token&&e.expires_in}const Kh=["global","local","others"];var TP=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class PP{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=aj(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Kh[0]){if(Kh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Kh.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:sa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=TP(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:kP,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(We(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:sa})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:CP});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);d[`${b}Page`]=g}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(We(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Ti(t);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:sa})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ti(t);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:sa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ti(t);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:sa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ti(t.userId);try{const{data:r,error:n}=await et(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(We(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ti(t.userId),Ti(t.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}}function Vx(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function OP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Pi={debug:!!(globalThis&&sj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ij extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class AP extends ij{}async function DP(e,t,r){Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new AP(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Pi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}OP();const RP={url:VT,storageKey:HT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Hx(e,t,r){return await r()}const Oi={};class nc{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=nc.nextInstanceID,nc.nextInstanceID+=1,this.instanceID>0&&En()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},RP),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new PP({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=aj(a.fetch),this.lock=a.lock||Hx,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:En()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=DP:this.lock=Hx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:sj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vx(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Vx(this.memoryStorage)),En()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Oi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Oi[this.storageKey]=Object.assign(Object.assign({},Oi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Oi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Oi[this.storageKey]=Object.assign(Object.assign({},Oi[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ej}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=lP(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),En()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),XT(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return We(r)?{error:r}:{error:new rj("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:xs}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(We(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:u,password:f,options:m}=t;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await Ei(this.storage,this.storageKey)),i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:v,code_challenge_method:x},xform:xs})}else if("phone"in t){const{phone:u,password:f,options:m}=t;i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:xs})}else throw new td("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(We(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Wx})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Wx})}else throw new td("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ed}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(We(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,c,d,u,f,m,v;let x,g;if("message"in t)x=t.message,g=t.signature;else{const{chain:b,wallet:y,statement:p,options:w}=t;let S;if(En())if(typeof y=="object")S=y;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))S=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const C=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const T=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),p?{statement:p}:null));let O;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")O=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)O=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)x=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),g=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${C.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const T=await S.signMessage(new TextEncoder().encode(x),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=T}}try{const{data:b,error:y}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:aP(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:xs});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new ed}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(We(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await za(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:xs});if(await Hs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ed}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(We(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:xs}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ed}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(We(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ei(this.storage,this.storageKey));const{error:f}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new td("You must provide either an email or phone number.")}catch(l){if(We(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:xs});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(We(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ei(this.storage,this.storageKey)),await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:SP})}catch(i){if(We(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Js;const{error:a}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(We(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await et(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await et(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new td("You must provide either an email or phone number and a type")}catch(r){if(We(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await za(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Vh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await za(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Gh()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:sa}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Js}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:sa})})}catch(r){if(We(r))return JT(r)&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Js;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ei(this.storage,this.storageKey));const{data:d,error:u}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:sa});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Js;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=qh(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(We(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Js;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(We(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!En())throw new rd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new rd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Mx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Mx("No code detected.");const{data:p,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new rd("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let m=u+f;c&&(m=parseInt(c));const v=m-u;v*1e3<=Mi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const x=m-f;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,u);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(We(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await za(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(QT(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=oP(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ei(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(We(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:f,error:m}=i;if(m)throw m;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",v,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return En()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(We(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await uP(async a=>(a>0&&await dP(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xs})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Hh(i)&&Date.now()+o-n<Mi})}catch(n){if(this._debug(r,"error",n),We(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),En()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await za(this.storage,this.storageKey);if(a&&this.userStorage){let o=await za(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await $i(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Gh()}else if(a&&!a.user&&!a.user){const o=await za(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Hs(this.storage,this.storageKey+"-user"),await $i(this.storage,this.storageKey,a)):a.user=Gh()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Vh;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Vh}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Hh(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Js;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new qu;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Js;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),We(i)){const o={session:null,error:i};return Hh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await $i(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=Bx(a);await $i(this.storage,this.storageKey,i)}else{const a=Bx(r);await $i(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Hs(this.storage,this.storageKey),await Hs(this.storage,this.storageKey+"-code-verifier"),await Hs(this.storage,this.storageKey+"-user"),this.userStorage&&await Hs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&En()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Mi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Mi}ms, refresh threshold is ${_m} ticks`),a<=_m&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ij)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!En()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ei(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await et(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await et(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(We(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(We(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=qh(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+KT>a)return n;const{data:i,error:o}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:x}=await this.getSession();if(x||!v.session)return{data:null,error:x};n=v.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=qh(n);r!=null&&r.allowExpired||vP(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:a,signature:o},error:null}}const u=yP(a.alg),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,sP(`${l}.${c}`)))throw new km("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}}nc.nextInstanceID=0;const IP=nc;class MP extends IP{constructor(t){super(t)}}var $P=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class LP{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=UT(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:RT,realtime:MT,auth:Object.assign(Object.assign({},IT),{storageKey:d}),global:DT},f=WT(n??{},u);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=zT(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new rT(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new PT(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new A3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return $P(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new MP({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new xT(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const l0=(e,t,r)=>new LP(e,t,r);function FP(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}FP()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fs="https://ikeicbxkjgdhhofuhehr.supabase.co",c0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlrZWljYnhramdkaGhvZnVoZWhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3ODQzNzQsImV4cCI6MjA2OTM2MDM3NH0.4Qv_Z37pH_clIOHBDnNg_e0qpJ4AAEU20YvP_ETxOGc",qn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlrZWljYnhramdkaGhvZnVoZWhyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Mzc4NDM3NCwiZXhwIjoyMDY5MzYwMzc0fQ.8tIOgbkb2S8o1rcskLVYAiFSD2BqwGfttrX2KHSNVko";console.log("SupabaseKeys: تهيئة مع المفاتيح:",{url:fs,anonKey:`${c0.substring(0,10)}...`,serviceKey:`${qn.substring(0,10)}...`});const sc=c0,io=qn;console.log("SUPABASE_URL:",fs);console.log("SUPABASE_KEY (أول 15 حرف):",sc.substring(0,15)+"...");console.log("SUPABASE_SERVICE_KEY (أول 15 حرف):",io.substring(0,15)+"...");const le=l0(fs,sc,{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"ketama-auth-storage",detectSessionInUrl:!0}}),Rt=l0(fs,io,{auth:{autoRefreshToken:!1,persistSession:!1},global:{headers:{apikey:io,Authorization:`Bearer ${io}`}}}),jn="profiles",cs="guardians",Kr="students",Dl="student_teacher_history",zP="sessions",BP="session_students",UP="daily_followups",WP="monthly_exams",VP="student_monthly_result",Ho="circle_sessions";let Rl=null;const Fn=e=>{Rl=e;try{localStorage.setItem("ketama_user_jwt",e),console.log("تم تعيين JWT token للمستخدم:",e.substring(0,15)+"...")}catch(t){console.error("فشل في تخزين JWT token في localStorage:",t)}},HP=()=>{if(!Rl)try{const e=localStorage.getItem("ketama_user_jwt");e&&(Rl=e,console.log("تم استرجاع JWT token من localStorage:",e.substring(0,15)+"..."))}catch(e){console.error("فشل في استرجاع JWT token من localStorage:",e)}return Rl},qP=()=>{Rl=null;try{localStorage.removeItem("ketama_user_jwt"),console.log("تم مسح JWT token للمستخدم")}catch(e){console.error("فشل في مسح JWT token من localStorage:",e)}},GP=e=>(console.log("إنشاء عميل Supabase مع JWT token:",e.substring(0,15)+"..."),l0(fs,sc,{global:{headers:{apikey:sc,Authorization:`Bearer ${e}`}}})),qx=Object.freeze(Object.defineProperty({__proto__:null,CIRCLE_SESSIONS_TABLE:Ho,DAILY_FOLLOWUPS_TABLE:UP,GUARDIANS_TABLE:cs,MONTHLY_EXAMS_TABLE:WP,MONTHLY_RESULTS_VIEW:VP,PROFILES_TABLE:jn,SESSIONS_TABLE:zP,SESSION_STUDENTS_TABLE:BP,STUDENTS_TABLE:Kr,SUPABASE_KEY:sc,SUPABASE_SERVICE_KEY:io,clearUserJWTToken:qP,createSupabaseClientWithToken:GP,default:le,getUserJWTToken:HP,setUserJWTToken:Fn,supabase:le,supabaseAdmin:Rt,teacher_HISTORY_TABLE:Dl},Symbol.toStringTag,{value:"Module"}));function KP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oj={exports:{}};const YP={},QP=Object.freeze(Object.defineProperty({__proto__:null,default:YP},Symbol.toStringTag,{value:"Module"})),JP=Fv(QP);(function(e){/**
 * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bcrypt.js for details
 */(function(t,r){typeof KP=="function"&&e&&e.exports?e.exports=r():(t.dcodeIO=t.dcodeIO||{}).bcrypt=r()})(ln,function(){var t={},r=null;function n(A){if(e&&e.exports)try{return JP.randomBytes(A)}catch{}try{var _;return(self.crypto||self.msCrypto).getRandomValues(_=new Uint32Array(A)),Array.prototype.slice.call(_)}catch{}if(!r)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return r(A)}var a=!1;try{n(1),a=!0}catch{}r=null,t.setRandomFallback=function(A){r=A},t.genSaltSync=function(A,_){if(A=A||g,typeof A!="number")throw Error("Illegal arguments: "+typeof A+", "+typeof _);A<4?A=4:A>31&&(A=31);var I=[];return I.push("$2a$"),A<10&&I.push("0"),I.push(A.toString()),I.push("$"),I.push(f(n(x),x)),I.join("")},t.genSalt=function(A,_,I){if(typeof _=="function"&&(I=_,_=void 0),typeof A=="function"&&(I=A,A=void 0),typeof A>"u")A=g;else if(typeof A!="number")throw Error("illegal arguments: "+typeof A);function j(k){o(function(){try{k(null,t.genSaltSync(A))}catch(D){k(D)}})}if(I){if(typeof I!="function")throw Error("Illegal callback: "+typeof I);j(I)}else return new Promise(function(k,D){j(function(z,M){if(z){D(z);return}k(M)})})},t.hashSync=function(A,_){if(typeof _>"u"&&(_=g),typeof _=="number"&&(_=t.genSaltSync(_)),typeof A!="string"||typeof _!="string")throw Error("Illegal arguments: "+typeof A+", "+typeof _);return K(A,_)},t.hash=function(A,_,I,j){function k(D){typeof A=="string"&&typeof _=="number"?t.genSalt(_,function(z,M){K(A,M,D,j)}):typeof A=="string"&&typeof _=="string"?K(A,_,D,j):o(D.bind(this,Error("Illegal arguments: "+typeof A+", "+typeof _)))}if(I){if(typeof I!="function")throw Error("Illegal callback: "+typeof I);k(I)}else return new Promise(function(D,z){k(function(M,B){if(M){z(M);return}D(B)})})};function i(A,_){for(var I=0,j=0,k=0,D=A.length;k<D;++k)A.charCodeAt(k)===_.charCodeAt(k)?++I:++j;return I<0?!1:j===0}t.compareSync=function(A,_){if(typeof A!="string"||typeof _!="string")throw Error("Illegal arguments: "+typeof A+", "+typeof _);return _.length!==60?!1:i(t.hashSync(A,_.substr(0,_.length-31)),_)},t.compare=function(A,_,I,j){function k(D){if(typeof A!="string"||typeof _!="string"){o(D.bind(this,Error("Illegal arguments: "+typeof A+", "+typeof _)));return}if(_.length!==60){o(D.bind(this,null,!1));return}t.hash(A,_.substr(0,29),function(z,M){z?D(z):D(null,i(M,_))},j)}if(I){if(typeof I!="function")throw Error("Illegal callback: "+typeof I);k(I)}else return new Promise(function(D,z){k(function(M,B){if(M){z(M);return}D(B)})})},t.getRounds=function(A){if(typeof A!="string")throw Error("Illegal arguments: "+typeof A);return parseInt(A.split("$")[2],10)},t.getSalt=function(A){if(typeof A!="string")throw Error("Illegal arguments: "+typeof A);if(A.length!==60)throw Error("Illegal hash length: "+A.length+" != 60");return A.substring(0,29)};var o=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function l(A){var _=[],I=0;return v.encodeUTF16toUTF8(function(){return I>=A.length?null:A.charCodeAt(I++)},function(j){_.push(j)}),_}var c="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),d=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],u=String.fromCharCode;function f(A,_){var I=0,j=[],k,D;if(_<=0||_>A.length)throw Error("Illegal len: "+_);for(;I<_;){if(k=A[I++]&255,j.push(c[k>>2&63]),k=(k&3)<<4,I>=_){j.push(c[k&63]);break}if(D=A[I++]&255,k|=D>>4&15,j.push(c[k&63]),k=(D&15)<<2,I>=_){j.push(c[k&63]);break}D=A[I++]&255,k|=D>>6&3,j.push(c[k&63]),j.push(c[D&63])}return j.join("")}function m(A,_){var I=0,j=A.length,k=0,D=[],z,M,B,X,J,L;if(_<=0)throw Error("Illegal len: "+_);for(;I<j-1&&k<_&&(L=A.charCodeAt(I++),z=L<d.length?d[L]:-1,L=A.charCodeAt(I++),M=L<d.length?d[L]:-1,!(z==-1||M==-1||(J=z<<2>>>0,J|=(M&48)>>4,D.push(u(J)),++k>=_||I>=j)||(L=A.charCodeAt(I++),B=L<d.length?d[L]:-1,B==-1)||(J=(M&15)<<4>>>0,J|=(B&60)>>2,D.push(u(J)),++k>=_||I>=j)));)L=A.charCodeAt(I++),X=L<d.length?d[L]:-1,J=(B&3)<<6>>>0,J|=X,D.push(u(J)),++k;var ne=[];for(I=0;I<k;I++)ne.push(D[I].charCodeAt(0));return ne}var v=function(){var A={};return A.MAX_CODEPOINT=1114111,A.encodeUTF8=function(_,I){var j=null;for(typeof _=="number"&&(j=_,_=function(){return null});j!==null||(j=_())!==null;)j<128?I(j&127):j<2048?(I(j>>6&31|192),I(j&63|128)):j<65536?(I(j>>12&15|224),I(j>>6&63|128),I(j&63|128)):(I(j>>18&7|240),I(j>>12&63|128),I(j>>6&63|128),I(j&63|128)),j=null},A.decodeUTF8=function(_,I){for(var j,k,D,z,M=function(B){B=B.slice(0,B.indexOf(null));var X=Error(B.toString());throw X.name="TruncatedError",X.bytes=B,X};(j=_())!==null;)if(!(j&128))I(j);else if((j&224)===192)(k=_())===null&&M([j,k]),I((j&31)<<6|k&63);else if((j&240)===224)((k=_())===null||(D=_())===null)&&M([j,k,D]),I((j&15)<<12|(k&63)<<6|D&63);else if((j&248)===240)((k=_())===null||(D=_())===null||(z=_())===null)&&M([j,k,D,z]),I((j&7)<<18|(k&63)<<12|(D&63)<<6|z&63);else throw RangeError("Illegal starting byte: "+j)},A.UTF16toUTF8=function(_,I){for(var j,k=null;(j=k!==null?k:_())!==null;){if(j>=55296&&j<=57343&&(k=_())!==null&&k>=56320&&k<=57343){I((j-55296)*1024+k-56320+65536),k=null;continue}I(j)}k!==null&&I(k)},A.UTF8toUTF16=function(_,I){var j=null;for(typeof _=="number"&&(j=_,_=function(){return null});j!==null||(j=_())!==null;)j<=65535?I(j):(j-=65536,I((j>>10)+55296),I(j%1024+56320)),j=null},A.encodeUTF16toUTF8=function(_,I){A.UTF16toUTF8(_,function(j){A.encodeUTF8(j,I)})},A.decodeUTF8toUTF16=function(_,I){A.decodeUTF8(_,function(j){A.UTF8toUTF16(j,I)})},A.calculateCodePoint=function(_){return _<128?1:_<2048?2:_<65536?3:4},A.calculateUTF8=function(_){for(var I,j=0;(I=_())!==null;)j+=A.calculateCodePoint(I);return j},A.calculateUTF16asUTF8=function(_){var I=0,j=0;return A.UTF16toUTF8(_,function(k){++I,j+=A.calculateCodePoint(k)}),[I,j]},A}();Date.now=Date.now||function(){return+new Date};var x=16,g=10,b=16,y=100,p=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],w=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],S=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function C(A,_,I,j){var k,D=A[_],z=A[_+1];return D^=I[0],k=j[D>>>24],k+=j[256|D>>16&255],k^=j[512|D>>8&255],k+=j[768|D&255],z^=k^I[1],k=j[z>>>24],k+=j[256|z>>16&255],k^=j[512|z>>8&255],k+=j[768|z&255],D^=k^I[2],k=j[D>>>24],k+=j[256|D>>16&255],k^=j[512|D>>8&255],k+=j[768|D&255],z^=k^I[3],k=j[z>>>24],k+=j[256|z>>16&255],k^=j[512|z>>8&255],k+=j[768|z&255],D^=k^I[4],k=j[D>>>24],k+=j[256|D>>16&255],k^=j[512|D>>8&255],k+=j[768|D&255],z^=k^I[5],k=j[z>>>24],k+=j[256|z>>16&255],k^=j[512|z>>8&255],k+=j[768|z&255],D^=k^I[6],k=j[D>>>24],k+=j[256|D>>16&255],k^=j[512|D>>8&255],k+=j[768|D&255],z^=k^I[7],k=j[z>>>24],k+=j[256|z>>16&255],k^=j[512|z>>8&255],k+=j[768|z&255],D^=k^I[8],k=j[D>>>24],k+=j[256|D>>16&255],k^=j[512|D>>8&255],k+=j[768|D&255],z^=k^I[9],k=j[z>>>24],k+=j[256|z>>16&255],k^=j[512|z>>8&255],k+=j[768|z&255],D^=k^I[10],k=j[D>>>24],k+=j[256|D>>16&255],k^=j[512|D>>8&255],k+=j[768|D&255],z^=k^I[11],k=j[z>>>24],k+=j[256|z>>16&255],k^=j[512|z>>8&255],k+=j[768|z&255],D^=k^I[12],k=j[D>>>24],k+=j[256|D>>16&255],k^=j[512|D>>8&255],k+=j[768|D&255],z^=k^I[13],k=j[z>>>24],k+=j[256|z>>16&255],k^=j[512|z>>8&255],k+=j[768|z&255],D^=k^I[14],k=j[D>>>24],k+=j[256|D>>16&255],k^=j[512|D>>8&255],k+=j[768|D&255],z^=k^I[15],k=j[z>>>24],k+=j[256|z>>16&255],k^=j[512|z>>8&255],k+=j[768|z&255],D^=k^I[16],A[_]=z^I[b+1],A[_+1]=D,A}function T(A,_){for(var I=0,j=0;I<4;++I)j=j<<8|A[_]&255,_=(_+1)%A.length;return{key:j,offp:_}}function O(A,_,I){for(var j=0,k=[0,0],D=_.length,z=I.length,M,B=0;B<D;B++)M=T(A,j),j=M.offp,_[B]=_[B]^M.key;for(B=0;B<D;B+=2)k=C(k,0,_,I),_[B]=k[0],_[B+1]=k[1];for(B=0;B<z;B+=2)k=C(k,0,_,I),I[B]=k[0],I[B+1]=k[1]}function $(A,_,I,j){for(var k=0,D=[0,0],z=I.length,M=j.length,B,X=0;X<z;X++)B=T(_,k),k=B.offp,I[X]=I[X]^B.key;for(k=0,X=0;X<z;X+=2)B=T(A,k),k=B.offp,D[0]^=B.key,B=T(A,k),k=B.offp,D[1]^=B.key,D=C(D,0,I,j),I[X]=D[0],I[X+1]=D[1];for(X=0;X<M;X+=2)B=T(A,k),k=B.offp,D[0]^=B.key,B=T(A,k),k=B.offp,D[1]^=B.key,D=C(D,0,I,j),j[X]=D[0],j[X+1]=D[1]}function Q(A,_,I,j,k){var D=S.slice(),z=D.length,M;if(I<4||I>31)if(M=Error("Illegal number of rounds (4-31): "+I),j){o(j.bind(this,M));return}else throw M;if(_.length!==x)if(M=Error("Illegal salt length: "+_.length+" != "+x),j){o(j.bind(this,M));return}else throw M;I=1<<I>>>0;var B,X,J=0,L;Int32Array?(B=new Int32Array(p),X=new Int32Array(w)):(B=p.slice(),X=w.slice()),$(_,A,B,X);function ne(){if(k&&k(J/I),J<I)for(var Z=Date.now();J<I&&(J=J+1,O(A,B,X),O(_,B,X),!(Date.now()-Z>y)););else{for(J=0;J<64;J++)for(L=0;L<z>>1;L++)C(D,L<<1,B,X);var se=[];for(J=0;J<z;J++)se.push((D[J]>>24&255)>>>0),se.push((D[J]>>16&255)>>>0),se.push((D[J]>>8&255)>>>0),se.push((D[J]&255)>>>0);if(j){j(null,se);return}else return se}j&&o(ne)}if(typeof j<"u")ne();else for(var ae;;)if(typeof(ae=ne())<"u")return ae||[]}function K(A,_,I,j){var k;if(typeof A!="string"||typeof _!="string")if(k=Error("Invalid string / salt: Not a string"),I){o(I.bind(this,k));return}else throw k;var D,z;if(_.charAt(0)!=="$"||_.charAt(1)!=="2")if(k=Error("Invalid salt version: "+_.substring(0,2)),I){o(I.bind(this,k));return}else throw k;if(_.charAt(2)==="$")D=String.fromCharCode(0),z=3;else{if(D=_.charAt(2),D!=="a"&&D!=="b"&&D!=="y"||_.charAt(3)!=="$")if(k=Error("Invalid salt revision: "+_.substring(2,4)),I){o(I.bind(this,k));return}else throw k;z=4}if(_.charAt(z+2)>"$")if(k=Error("Missing salt rounds"),I){o(I.bind(this,k));return}else throw k;var M=parseInt(_.substring(z,z+1),10)*10,B=parseInt(_.substring(z+1,z+2),10),X=M+B,J=_.substring(z+3,z+25);A+=D>="a"?"\0":"";var L=l(A),ne=m(J,x);function ae(Z){var se=[];return se.push("$2"),D>="a"&&se.push(D),se.push("$"),X<10&&se.push("0"),se.push(X.toString()),se.push("$"),se.push(f(ne,ne.length)),se.push(f(Z,S.length*4-1)),se.join("")}if(typeof I>"u")return ae(Q(L,ne,X));Q(L,ne,X,function(Z,se){Z?I(Z,null):I(null,ae(se))},j)}return t.encodeBase64=f,t.decodeBase64=m,t})})(oj);var lj=oj.exports;const bc=async e=>await lj.hash(e,10),cj=async(e,t)=>await lj.compare(e,t);let dj=null;const uj=e=>`${e.toLowerCase()}@kotama.example.com`,hj=async(e,t)=>{try{const r=uj(e);console.log("محاولة تسجيل الدخول باستخدام البريد الوهمي:",r);const{data:n,error:a}=await le.auth.signInWithPassword({email:r,password:t});return a?a.message.includes("Invalid login credentials")?(console.log("لم يتم العثور على المستخدم في نظام المصادقة المدمج"),{success:!1,error:{message:"المستخدم غير مسجل في نظام المصادقة"}}):(console.error("خطأ في تسجيل الدخول:",a.message),{success:!1,error:a}):(console.log("تم تسجيل الدخول بنجاح باستخدام نظام المصادقة المدمج"),Fn(n.session.access_token),dj=n.user,{success:!0,user:n.user,token:n.session.access_token})}catch(r){return console.error("خطأ غير متوقع في تسجيل الدخول:",r),{success:!1,error:{message:"حدث خطأ غير متوقع أثناء تسجيل الدخول"}}}},XP=async(e,t)=>{var r;try{if(console.log("محاولة تسجيل الدخول للمستخدم المخصص:",{id:e.id,username:e.username,role:e.role}),!e.password_hash)return console.error("لا توجد كلمة مرور مشفرة للمستخدم!"),{success:!1,error:{message:"بيانات المستخدم غير صالحة"}};console.log("التحقق من كلمة المرور..."),console.log("password_hash المخزنة:",e.password_hash.substring(0,20)+"...");try{const u=await cj(t,e.password_hash);if(console.log("نتيجة التحقق من كلمة المرور:",u),!u)return console.error("فشل التحقق من كلمة المرور"),{success:!1,error:{message:"كلمة المرور غير صحيحة"}}}catch(u){if(console.error("حدث خطأ أثناء التحقق من كلمة المرور:",u),t!==e.password_hash)return{success:!1,error:{message:"كلمة المرور غير صحيحة"}};console.log("تم التحقق من كلمة المرور بالطريقة المباشرة")}console.log("محاولة تسجيل الدخول باستخدام نظام المصادقة المدمج...");const n=await hj(e.username,t);if(n.success)return console.log("نجاح تسجيل الدخول باستخدام نظام المصادقة المدمج"),{success:!0,user:e,token:n.token};console.log("فشل تسجيل الدخول باستخدام نظام المصادقة المدمج، محاولة تسجيل المستخدم...");const a=await fj(e,t);if(a.success&&a.session){console.log("تم تسجيل المستخدم بنجاح في نظام المصادقة المدمج والحصول على token");const u=a.session.access_token;return Fn(u),{success:!0,user:e,token:u}}console.log("محاولة الحصول على JWT token من الجلسة الحالية...");const{data:i,error:o}=await le.auth.getSession();o&&console.error("خطأ في الحصول على الجلسة:",o.message);const l=(r=i==null?void 0:i.session)==null?void 0:r.access_token;if(l)return console.log("تم العثور على JWT token في الجلسة الحالية"),Fn(l),{success:!0,user:e,token:l};console.log("لم يتم العثور على JWT token في الجلسة الحالية، محاولة تسجيل الدخول المجهول...");const c=await le.auth.signInAnonymously();if(c.error){console.error("خطأ في تسجيل الدخول المجهول:",c.error.message),console.log("محاولة إنشاء token مخصص باستخدام مفتاح الخدمة...");try{const u=io;return Fn(u),console.log("تم إنشاء token بديل باستخدام مفتاح الخدمة"),{success:!0,user:e,token:u}}catch(u){return console.error("فشل إنشاء token بديل:",u),{success:!1,error:c.error}}}const d=c.data.session.access_token;return console.log("تم الحصول على token مجهول بنجاح"),Fn(d),{success:!0,user:e,token:d}}catch(n){return console.error("خطأ غير متوقع في تسجيل الدخول المخصص:",n),{success:!1,error:n}}},fj=async(e,t)=>{var r,n;try{const a=uj(e.username);console.log("تسجيل المستخدم المخصص في نظام المصادقة المدمج:",{email:a,username:e.username});try{const{data:l,error:c}=await le.auth.signInWithPassword({email:a,password:t});if(l&&l.session)return console.log("المستخدم موجود بالفعل في نظام المصادقة المدمج، تسجيل الدخول مباشرة"),Fn(l.session.access_token),{success:!0,session:l.session,user:l.user}}catch(l){console.log("فشل التحقق من وجود المستخدم في نظام المصادقة المدمج:",l)}console.log("محاولة تسجيل المستخدم في نظام المصادقة المدمج..."),console.log("البيانات المستخدمة للتسجيل:",{email:a,hasPassword:!!t,metaData:{full_name:e.full_name,role:e.role,username:e.username,custom_profile_id:e.id}});const{data:i,error:o}=await le.auth.signUp({email:a,password:t,options:{data:{full_name:e.full_name,role:e.role,username:e.username,custom_profile_id:e.id}}});return o?(console.error("خطأ في تسجيل المستخدم في نظام المصادقة المدمج:",o.message),{success:!1,error:o}):(console.log("تم تسجيل المستخدم بنجاح في نظام المصادقة المدمج:",{userId:(r=i.user)==null?void 0:r.id,email:(n=i.user)==null?void 0:n.email}),{success:!0,user:i.user,session:i.session})}catch(a){return console.error("خطأ غير متوقع في تسجيل المستخدم:",a),{success:!1,error:a}}},iu=async()=>{const{error:e}=await le.auth.signOut();return e?(console.error("خطأ في تسجيل الخروج:",e.message),{success:!1,error:e}):(Fn(null),dj=null,{success:!0})},ZP=async()=>{try{console.log("التحقق من حالة المصادقة الحالية...");const{data:e,error:t}=await le.auth.getSession();return t?(console.error("خطأ في الحصول على الجلسة:",t.message),{success:!1,error:t}):e!=null&&e.session?(console.log("المستخدم مسجل الدخول، الجلسة موجودة:",{userId:e.session.user.id,expires:new Date(e.session.expires_at*1e3).toISOString()}),Fn(e.session.access_token),{success:!0,isAuthenticated:!0,user:e.session.user,token:e.session.access_token}):(console.log("المستخدم غير مسجل الدخول، لا توجد جلسة"),{success:!0,isAuthenticated:!1})}catch(e){return console.error("خطأ غير متوقع في التحقق من حالة المصادقة:",e),{success:!1,error:e}}},e6=async e=>{try{const t=le.auth.admin;if(!t)return{success:!1,message:"لا تتوفر صلاحيات مدير لحذف المستخدم"};const{error:r}=await t.deleteUser(e);return r?(console.error("خطأ في حذف المستخدم من نظام المصادقة:",r),{success:!1,message:`فشل في حذف المستخدم: ${r.message}`}):{success:!0,message:"تم حذف المستخدم بنجاح"}}catch(t){return console.error("خطأ غير متوقع في حذف المستخدم:",t),{success:!1,message:"حدث خطأ أثناء محاولة حذف المستخدم"}}};function t6({currentPath:e,onNavigate:t,userRole:r,currentUser:n,onLogout:a,onSidebarToggle:i}){const o=l=>{switch(l){case"superadmin":return"مدير";case"admin":return"مشرف";case"teacher":return"معلم";case"guardian":return"ولي أمر";default:return"مستخدم"}};return s.jsx(s.Fragment,{children:s.jsx("header",{className:"bg-gradient-to-r from-green-950 via-green-900 to-green-950 border-b border-green-800/60 shadow-xl backdrop-blur-md text-white fixed top-0 right-0 left-0 z-50 h-16 md:h-16",children:s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 h-full flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:`p-1 bg-gradient-to-br from-green-50 via-white to-green-100 \r
                        rounded-full border border-green-300/60 shadow-xl \r
                        cursor-pointer hover:scale-110 hover:shadow-2xl \r
                        hover:ring-10 hover:ring-green-400/60 transition-all duration-300`,onClick:()=>t("/"),title:"الصفحة الرئيسية",children:s.jsx("img",{src:M1,alt:"شعار مكتب آية",className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 object-contain drop-shadow-md"})}),s.jsxs("div",{className:"text-right",children:[s.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold leading-tight text-green-100 drop-shadow-sm",children:"مكتب آية"}),s.jsx("p",{className:"text-xs sm:text-sm text-green-300/80 hidden sm:block",children:"نظام إدارة تحفيظ القرآن الكريم"})]})]}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-4",children:[r&&n&&s.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-green-800/30 border border-green-700/40 px-2 sm:px-3 py-1 sm:py-1.5 rounded-xl cursor-pointer hover:bg-green-700/50 hover:border-green-600/60 transition-all duration-300 shadow-md",onClick:()=>t("/profile"),title:"عرض وتعديل بياناتي الشخصية",children:[s.jsx(Pl,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-300"}),s.jsxs("span",{className:"text-xs sm:text-sm text-green-100",children:["مرحباً ",s.jsx("span",{className:"font-semibold",children:n.full_name})," | ",s.jsx("span",{className:"text-green-300/80",children:o(r)})]})]}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>t("/"),className:"text-green-100 hover:bg-green-800/50 rounded-xl transition-all duration-300 h-8 w-8 sm:h-9 sm:w-9",title:"الصفحة الرئيسية",children:s.jsx(Fw,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>t("/parent-inquiry"),className:"text-green-100 hover:bg-green-800/50 rounded-xl transition-all duration-300 h-8 w-8 sm:h-9 sm:w-9",title:"استعلام أولياء الأمور",children:s.jsx(nn,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),r?s.jsx(V,{variant:"ghost",size:"icon",onClick:async()=>{a&&(await iu(),a())},className:"text-red-300 hover:bg-red-800/40 hover:text-red-200 rounded-xl transition-all duration-300 h-8 w-8 sm:h-9 sm:w-9",title:"تسجيل الخروج",children:s.jsx(im,{className:"h-4 w-4 sm:h-5 sm:w-5"})}):s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>t("/login"),className:"text-green-100 hover:bg-green-800/50 rounded-xl transition-all duration-300 h-8 w-8 sm:h-9 sm:w-9",title:"تسجيل الدخول",children:s.jsx(u4,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:i,className:"text-green-100 hover:bg-green-800/50 rounded-xl transition-all duration-300 h-8 w-8 sm:h-9 sm:w-9 sm:hidden",title:"القائمة",children:s.jsx(Ww,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]})]})})})}var Yh=0;function d0(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Gx()),document.body.insertAdjacentElement("beforeend",e[1]??Gx()),Yh++,()=>{Yh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Yh--}},[])}function Gx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Qh="focusScope.autoFocusOnMount",Jh="focusScope.autoFocusOnUnmount",Kx={bubbles:!1,cancelable:!0},r6="FocusScope",Gu=h.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=h.useState(null),d=Gr(a),u=Gr(i),f=h.useRef(null),m=ft(t,g=>c(g)),v=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(n){let g=function(w){if(v.paused||!l)return;const S=w.target;l.contains(S)?f.current=S:Xs(f.current,{select:!0})},b=function(w){if(v.paused||!l)return;const S=w.relatedTarget;S!==null&&(l.contains(S)||Xs(f.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const C of w)C.removedNodes.length>0&&Xs(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const p=new MutationObserver(y);return l&&p.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),p.disconnect()}}},[n,l,v.paused]),h.useEffect(()=>{if(l){Qx.add(v);const g=document.activeElement;if(!l.contains(g)){const y=new CustomEvent(Qh,Kx);l.addEventListener(Qh,d),l.dispatchEvent(y),y.defaultPrevented||(n6(l6(mj(l)),{select:!0}),document.activeElement===g&&Xs(l))}return()=>{l.removeEventListener(Qh,d),setTimeout(()=>{const y=new CustomEvent(Jh,Kx);l.addEventListener(Jh,u),l.dispatchEvent(y),y.defaultPrevented||Xs(g??document.body,{select:!0}),l.removeEventListener(Jh,u),Qx.remove(v)},0)}}},[l,d,u,v]);const x=h.useCallback(g=>{if(!r&&!n||v.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(b&&y){const p=g.currentTarget,[w,S]=s6(p);w&&S?!g.shiftKey&&y===S?(g.preventDefault(),r&&Xs(w,{select:!0})):g.shiftKey&&y===w&&(g.preventDefault(),r&&Xs(S,{select:!0})):y===p&&g.preventDefault()}},[r,n,v.paused]);return s.jsx(Ke.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});Gu.displayName=r6;function n6(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Xs(n,{select:t}),document.activeElement!==r)return}function s6(e){const t=mj(e),r=Yx(t,e),n=Yx(t.reverse(),e);return[r,n]}function mj(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Yx(e,t){for(const r of e)if(!a6(r,{upTo:t}))return r}function a6(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function i6(e){return e instanceof HTMLInputElement&&"select"in e}function Xs(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&i6(e)&&t&&e.select()}}var Qx=o6();function o6(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Jx(e,t),e.unshift(t)},remove(t){var r;e=Jx(e,t),(r=e[0])==null||r.resume()}}}function Jx(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function l6(e){return e.filter(t=>t.tagName!=="A")}var c6=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ai=new WeakMap,nd=new WeakMap,sd={},Xh=0,gj=function(e){return e&&(e.host||gj(e.parentNode))},d6=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=gj(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},u6=function(e,t,r,n){var a=d6(t,Array.isArray(e)?e:[e]);sd[r]||(sd[r]=new WeakMap);var i=sd[r],o=[],l=new Set,c=new Set(a),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};a.forEach(d);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))u(m);else try{var v=m.getAttribute(n),x=v!==null&&v!=="false",g=(Ai.get(m)||0)+1,b=(i.get(m)||0)+1;Ai.set(m,g),i.set(m,b),o.push(m),g===1&&x&&nd.set(m,!0),b===1&&m.setAttribute(r,"true"),x||m.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return u(t),l.clear(),Xh++,function(){o.forEach(function(f){var m=Ai.get(f)-1,v=i.get(f)-1;Ai.set(f,m),i.set(f,v),m||(nd.has(f)||f.removeAttribute(n),nd.delete(f)),v||f.removeAttribute(r)}),Xh--,Xh||(Ai=new WeakMap,Ai=new WeakMap,nd=new WeakMap,sd={})}},u0=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=t||c6(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),u6(n,a,r,"aria-hidden")):function(){return null}},rs=function(){return rs=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},rs.apply(this,arguments)};function pj(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function h6(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Nd="right-scroll-bar-position",Sd="width-before-scroll-bar",f6="with-scroll-bars-hidden",m6="--removed-body-scroll-bar-size";function Zh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function g6(e,t){var r=h.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var p6=typeof window<"u"?h.useLayoutEffect:h.useEffect,Xx=new WeakMap;function x6(e,t){var r=g6(t||null,function(n){return e.forEach(function(a){return Zh(a,n)})});return p6(function(){var n=Xx.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||Zh(l,null)}),i.forEach(function(l){a.has(l)||Zh(l,o)})}Xx.set(r,e)},[e]),r}function v6(e){return e}function y6(e,t){t===void 0&&(t=v6);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function b6(e){e===void 0&&(e={});var t=y6(null);return t.options=rs({async:!0,ssr:!1},e),t}var xj=function(e){var t=e.sideCar,r=pj(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return h.createElement(n,rs({},r))};xj.isSideCarExport=!0;function w6(e,t){return e.useMedium(t),xj}var vj=b6(),ef=function(){},Ku=h.forwardRef(function(e,t){var r=h.useRef(null),n=h.useState({onScrollCapture:ef,onWheelCapture:ef,onTouchMoveCapture:ef}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,f=e.shards,m=e.sideCar,v=e.noIsolation,x=e.inert,g=e.allowPinchZoom,b=e.as,y=b===void 0?"div":b,p=e.gapMode,w=pj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,C=x6([r,t]),T=rs(rs({},w),a);return h.createElement(h.Fragment,null,u&&h.createElement(S,{sideCar:vj,removeScrollBar:d,shards:f,noIsolation:v,inert:x,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:p}),o?h.cloneElement(h.Children.only(l),rs(rs({},T),{ref:C})):h.createElement(y,rs({},T,{className:c,ref:C}),l))});Ku.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ku.classNames={fullWidth:Sd,zeroRight:Nd};var Zx,j6=function(){if(Zx)return Zx;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _6(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=j6();return t&&e.setAttribute("nonce",t),e}function N6(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function S6(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var k6=function(){var e=0,t=null;return{add:function(r){e==0&&(t=_6())&&(N6(t,r),S6(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},C6=function(){var e=k6();return function(t,r){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},yj=function(){var e=C6(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},E6={left:0,top:0,right:0,gap:0},tf=function(e){return parseInt(e||"",10)||0},T6=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[tf(r),tf(n),tf(a)]},P6=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return E6;var t=T6(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},O6=yj(),oo="data-scroll-locked",A6=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(f6,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(oo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Nd,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Sd,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Nd," .").concat(Nd,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Sd," .").concat(Sd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(oo,`] {
    `).concat(m6,": ").concat(l,`px;
  }
`)},ev=function(){var e=parseInt(document.body.getAttribute(oo)||"0",10);return isFinite(e)?e:0},D6=function(){h.useEffect(function(){return document.body.setAttribute(oo,(ev()+1).toString()),function(){var e=ev()-1;e<=0?document.body.removeAttribute(oo):document.body.setAttribute(oo,e.toString())}},[])},R6=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;D6();var i=h.useMemo(function(){return P6(a)},[a]);return h.createElement(O6,{styles:A6(i,!t,a,r?"":"!important")})},Cm=!1;if(typeof window<"u")try{var ad=Object.defineProperty({},"passive",{get:function(){return Cm=!0,!0}});window.addEventListener("test",ad,ad),window.removeEventListener("test",ad,ad)}catch{Cm=!1}var Di=Cm?{passive:!1}:!1,I6=function(e){return e.tagName==="TEXTAREA"},bj=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!I6(e)&&r[t]==="visible")},M6=function(e){return bj(e,"overflowY")},$6=function(e){return bj(e,"overflowX")},tv=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=wj(e,n);if(a){var i=jj(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},L6=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},F6=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},wj=function(e,t){return e==="v"?M6(t):$6(t)},jj=function(e,t){return e==="v"?L6(t):F6(t)},z6=function(e,t){return e==="h"&&t==="rtl"?-1:1},B6=function(e,t,r,n,a){var i=z6(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),d=!1,u=o>0,f=0,m=0;do{var v=jj(e,l),x=v[0],g=v[1],b=v[2],y=g-b-i*x;(x||y)&&wj(e,l)&&(f+=y,m+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(a&&Math.abs(f)<1||!a&&o>f)||!u&&(a&&Math.abs(m)<1||!a&&-o>m))&&(d=!0),d},id=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rv=function(e){return[e.deltaX,e.deltaY]},nv=function(e){return e&&"current"in e?e.current:e},U6=function(e,t){return e[0]===t[0]&&e[1]===t[1]},W6=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},V6=0,Ri=[];function H6(e){var t=h.useRef([]),r=h.useRef([0,0]),n=h.useRef(),a=h.useState(V6++)[0],i=h.useState(yj)[0],o=h.useRef(e);h.useEffect(function(){o.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=h6([e.lockRef.current],(e.shards||[]).map(nv),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var y=id(g),p=r.current,w="deltaX"in g?g.deltaX:p[0]-y[0],S="deltaY"in g?g.deltaY:p[1]-y[1],C,T=g.target,O=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in g&&O==="h"&&T.type==="range")return!1;var $=tv(O,T);if(!$)return!0;if($?C=O:(C=O==="v"?"h":"v",$=tv(O,T)),!$)return!1;if(!n.current&&"changedTouches"in g&&(w||S)&&(n.current=C),!C)return!0;var Q=n.current||C;return B6(Q,b,g,Q==="h"?w:S,!0)},[]),c=h.useCallback(function(g){var b=g;if(!(!Ri.length||Ri[Ri.length-1]!==i)){var y="deltaY"in b?rv(b):id(b),p=t.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&U6(C.delta,y)})[0];if(p&&p.should){b.cancelable&&b.preventDefault();return}if(!p){var w=(o.current.shards||[]).map(nv).filter(Boolean).filter(function(C){return C.contains(b.target)}),S=w.length>0?l(b,w[0]):!o.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),d=h.useCallback(function(g,b,y,p){var w={name:g,delta:b,target:y,should:p,shadowParent:q6(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),u=h.useCallback(function(g){r.current=id(g),n.current=void 0},[]),f=h.useCallback(function(g){d(g.type,rv(g),g.target,l(g,e.lockRef.current))},[]),m=h.useCallback(function(g){d(g.type,id(g),g.target,l(g,e.lockRef.current))},[]);h.useEffect(function(){return Ri.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Di),document.addEventListener("touchmove",c,Di),document.addEventListener("touchstart",u,Di),function(){Ri=Ri.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Di),document.removeEventListener("touchmove",c,Di),document.removeEventListener("touchstart",u,Di)}},[]);var v=e.removeScrollBar,x=e.inert;return h.createElement(h.Fragment,null,x?h.createElement(i,{styles:W6(a)}):null,v?h.createElement(R6,{gapMode:e.gapMode}):null)}function q6(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const G6=w6(vj,H6);var _j=h.forwardRef(function(e,t){return h.createElement(Ku,rs({},e,{ref:t,sideCar:G6}))});_j.classNames=Ku.classNames;const h0=_j;var f0="Popover",[Nj,YD]=bi(f0,[Uo]),wc=Uo(),[K6,Ra]=Nj(f0),Sj=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=wc(t),c=h.useRef(null),[d,u]=h.useState(!1),[f=!1,m]=ci({prop:n,defaultProp:a,onChange:i});return s.jsx(b1,{...l,children:s.jsx(K6,{scope:t,contentId:Ss(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(v=>!v),[m]),hasCustomAnchor:d,onCustomAnchorAdd:h.useCallback(()=>u(!0),[]),onCustomAnchorRemove:h.useCallback(()=>u(!1),[]),modal:o,children:r})})};Sj.displayName=f0;var kj="PopoverAnchor",Y6=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Ra(kj,r),i=wc(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return h.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Ru,{...i,...n,ref:t})});Y6.displayName=kj;var Cj="PopoverTrigger",Ej=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Ra(Cj,r),i=wc(r),o=ft(t,a.triggerRef),l=s.jsx(Ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Dj(a.open),...n,ref:o,onClick:Te(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Ru,{asChild:!0,...i,children:l})});Ej.displayName=Cj;var m0="PopoverPortal",[Q6,J6]=Nj(m0,{forceMount:void 0}),Tj=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Ra(m0,t);return s.jsx(Q6,{scope:t,forceMount:r,children:s.jsx(Fs,{present:r||i.open,children:s.jsx(mc,{asChild:!0,container:a,children:n})})})};Tj.displayName=m0;var Ao="PopoverContent",Pj=h.forwardRef((e,t)=>{const r=J6(Ao,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Ra(Ao,e.__scopePopover);return s.jsx(Fs,{present:n||i.open,children:i.modal?s.jsx(X6,{...a,ref:t}):s.jsx(Z6,{...a,ref:t})})});Pj.displayName=Ao;var X6=h.forwardRef((e,t)=>{const r=Ra(Ao,e.__scopePopover),n=h.useRef(null),a=ft(t,n),i=h.useRef(!1);return h.useEffect(()=>{const o=n.current;if(o)return u0(o)},[]),s.jsx(h0,{as:Na,allowPinchZoom:!0,children:s.jsx(Oj,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Te(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Te(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Te(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Z6=h.forwardRef((e,t)=>{const r=Ra(Ao,e.__scopePopover),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(Oj,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Oj=h.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...f}=e,m=Ra(Ao,r),v=wc(r);return d0(),s.jsx(Gu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Lo,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(Xg,{"data-state":Dj(m.open),role:"dialog",id:m.contentId,...v,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Aj="PopoverClose",e8=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Ra(Aj,r);return s.jsx(Ke.button,{type:"button",...n,ref:t,onClick:Te(e.onClick,()=>a.onOpenChange(!1))})});e8.displayName=Aj;var t8="PopoverArrow",r8=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=wc(r);return s.jsx(Zg,{...a,...n,ref:t})});r8.displayName=t8;function Dj(e){return e?"open":"closed"}var n8=Sj,s8=Ej,a8=Tj,Rj=Pj;const i8=n8,o8=s8,Ij=h.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(a8,{children:s.jsx(Rj,{ref:a,align:t,sideOffset:r,className:_e("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Ij.displayName=Rj.displayName;function l8({userRole:e,onNavigate:t,onLogout:r,isOpen:n,setIsOpen:a}){const[i,o]=h.useState(!1),[l,c]=h.useState({studentManagement:!1,systemManagement:!1,circleManagement:!1}),d=n!==void 0?n:i,u=a||o,f=e==="superadmin"||e==="admin"||e==="teacher",m=e==="superadmin"||e==="admin"||e==="teacher",v=[(e==="superadmin"||e==="admin"||e==="teacher")&&{icon:s.jsx(XC,{className:"h-5 w-5"}),label:"إدارة الحلقات",isSubmenu:!0,key:"circleManagement",subItems:[(e==="superadmin"||e==="admin")&&{icon:s.jsx(Yt,{className:"h-5 w-5"}),label:"بيانات الحلقات",path:"/study-circles"},(e==="superadmin"||e==="admin")&&{icon:s.jsx(Ar,{className:"h-5 w-5"}),label:"جدولة الحلقات",path:"/study-circle-schedules"},(e==="superadmin"||e==="admin")&&{icon:s.jsx(Mw,{className:"h-5 w-5"}),label:"تسجيل الجلسات",path:"/teacher-sessions"},{icon:s.jsx(Os,{className:"h-5 w-5"}),label:"سجل الحضور",path:"/attendance-record"},m&&{icon:s.jsx(ZC,{className:"h-5 w-5"}),label:"سجل الحفظ والمراجعة",path:"/memorization-records"}].filter(Boolean)},(f||m)&&{icon:s.jsx(Xl,{className:"h-5 w-5"}),label:"إدارة الطلاب",isSubmenu:!0,key:"studentManagement",subItems:[f&&{icon:s.jsx(as,{className:"h-5 w-5"}),label:"بيانات أولياء الأمور",path:"/guardians-list"},m&&{icon:s.jsx(x4,{className:"h-5 w-5"}),label:"بيانات الطلاب",path:"/students-list"},m&&{icon:s.jsx(JC,{className:"h-5 w-5"}),label:"الاختبارات والتقييمات",path:"/student-assessments"}].filter(Boolean)},{icon:s.jsx(nn,{className:"h-5 w-5"}),label:"استعلام ولي أمر",path:"/parent-inquiry"},(e==="superadmin"||e==="admin"||e==="teacher")&&{icon:s.jsx(Lw,{className:"h-5 w-5"}),label:"الإشعارات والرسائل",isSubmenu:!0,key:"notificationsManagement",subItems:[{icon:s.jsx(Uw,{className:"h-5 w-5"}),label:"إرسال إشعار",path:"/send-notification"},{icon:s.jsx(c4,{className:"h-5 w-5"}),label:"سجل الإشعارات",path:"/notifications-log"}]},e==="teacher"&&{icon:s.jsx(ax,{className:"h-5 w-5"}),label:"إعدادات المعلم",isSubmenu:!0,key:"teacherSettings",subItems:[{icon:s.jsx(p4,{className:"h-5 w-5"}),label:"بياناتي الشخصية",path:"/profile"}]},(e==="superadmin"||e==="admin")&&{icon:s.jsx(ax,{className:"h-5 w-5"}),label:"إعدادات النظام",isSubmenu:!0,key:"systemManagement",subItems:[{icon:s.jsx(Os,{className:"h-5 w-5"}),label:"بيانات المستخدمين",path:"/user-management"}]}].filter(Boolean);return v.length===0?null:s.jsxs(s.Fragment,{children:[d&&s.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:()=>u(!1)}),s.jsx("div",{className:_e("fixed right-0 top-16 h-[calc(100vh-64px)] w-64 shadow-2xl z-50 transition-transform duration-300 ease-in-out transform",d?"translate-x-0":"translate-x-full"),children:s.jsxs("div",{className:"flex flex-col h-full backdrop-blur-lg bg-black/50 border-l border-green-700/30",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-green-400/30 bg-gradient-to-l from-green-900/80 via-green-800/60 to-transparent",children:[s.jsx("h2",{className:"text-lg font-bold text-green-100 tracking-wide",children:"القائمة الرئيسية"}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>u(!1),className:"text-white hover:bg-white/20 transition-all",children:s.jsx(Pu,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"flex-1 p-4 space-y-3 overflow-y-auto scrollbar-thin scrollbar-thumb-green-500/50 scrollbar-track-transparent",children:v.map((x,g)=>s.jsx("div",{className:"group",children:x.isSubmenu?s.jsxs("div",{className:"space-y-1",children:[s.jsxs(V,{variant:"ghost",className:"w-full justify-between gap-3 text-right text-green-100 hover:bg-green-700/50 hover:text-white transition-all duration-200 rounded-lg px-2 py-1",onClick:()=>c(b=>({...b,[x.key]:!b[x.key]})),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[x.icon,s.jsx("span",{className:"font-medium",children:x.label})]}),l[x.key]?s.jsx(Iw,{className:"h-4 w-4"}):s.jsx(zg,{className:"h-4 w-4"})]}),l[x.key]&&s.jsx("div",{className:"pr-4 space-y-1 border-r-2 border-green-400/40 mr-2",children:x.subItems.map((b,y)=>s.jsxs(V,{variant:"ghost",className:"w-full justify-start gap-3 text-right text-green-200 hover:bg-green-700/50 hover:text-white transition-all duration-200 rounded-md px-2 py-1",onClick:()=>{t(b.path),u(!1)},children:[b.icon,s.jsx("span",{children:b.label})]},y))})]}):s.jsxs(V,{variant:"ghost",className:"w-full justify-start gap-3 text-right text-green-100 hover:bg-green-700/50 hover:text-white transition-all duration-200 rounded-md px-2 py-1",onClick:()=>{t(x.path),u(!1)},children:[x.icon,s.jsx("span",{children:x.label})]})},g))}),s.jsx("div",{className:"p-4 border-t border-green-400/30 bg-gradient-to-t from-green-900/80 via-green-800/60 to-transparent",children:s.jsxs(V,{variant:"ghost",className:"w-full justify-start gap-3 text-right text-red-300 hover:bg-red-700/40 hover:text-red-200 transition-all duration-200 rounded-md px-2 py-1",onClick:async()=>{r&&(await iu(),r()),u(!1)},children:[s.jsx(im,{className:"h-5 w-5"}),s.jsx("span",{children:"تسجيل الخروج"})]})})]})}),s.jsx("div",{className:_e("sticky right-0 top-16 h-[calc(100vh-64px)] w-16 shadow-2xl z-40 transition-all duration-300 ease-in-out","bg-gradient-to-b from-green-900 to-green-800",d?"translate-x-full":"translate-x-0"),children:s.jsxs("div",{className:"flex h-full flex-col py-4 backdrop-blur-md bg-green-900/10",children:[s.jsx("div",{className:"mb-6 flex justify-center",children:s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>u(!0),className:"text-white/80 transition-all duration-200 hover:scale-110 hover:bg-white/10 hover:text-white",title:"فتح القائمة",children:s.jsx(Ww,{className:"h-5 w-5"})})}),s.jsx("div",{className:"flex-1 flex flex-col items-center space-y-4 py-4 bg-green-900",children:v.map((x,g)=>s.jsx("div",{children:x.isSubmenu?s.jsxs(i8,{children:[s.jsx(o8,{asChild:!0,children:s.jsx(V,{variant:"ghost",size:"icon",title:x.label,className:"text-white/70 transition-all duration-300 transform hover:scale-110 hover:bg-gradient-to-br hover:from-green-700/20 hover:to-green-900/30 hover:text-white shadow-sm hover:shadow-green-500/40 rounded-lg",children:x.icon})}),s.jsx(Ij,{className:"min-w-[220px] border border-green-800/50 bg-green-900/90 p-3 text-white shadow-2xl backdrop-blur-md rounded-xl",side:"left",align:"start",sideOffset:0,children:s.jsxs("div",{className:"flex flex-col space-y-2 bg-gradient-to-b from-green-800/80 to-green-900/90 p-2 rounded-xl shadow-inner shadow-green-900/50",children:[s.jsx("div",{className:"text-center mb-2 pb-2 rounded-md font-semibold text-white bg-gradient-to-br from-green-600 to-green-500 shadow-lg shadow-green-800/50 border border-green-700/50",children:x.label}),s.jsx("div",{className:"flex flex-col space-y-1 p-2 rounded-lg border border-green-600/50 bg-green-800/80",children:x.subItems.map((b,y)=>s.jsx(V,{variant:"ghost",size:"sm",className:"w-full justify-start px-3 py-2 text-right text-green-200 transition-all duration-300 hover:bg-green-700 hover:text-white rounded-md shadow-sm hover:shadow-md hover:shadow-green-500/40",onClick:()=>t(b.path),children:s.jsxs("div",{className:"flex w-full items-center gap-2",children:[s.jsx("div",{className:"flex-shrink-0",children:b.icon}),s.jsx("span",{className:"flex-1 text-right",children:b.label})]})},y))})]})})]}):s.jsx(V,{variant:"ghost",size:"icon",title:x.label,className:"text-white/70 transition-all duration-300 transform hover:scale-110 hover:bg-gradient-to-br hover:from-green-700/20 hover:to-green-900/30 hover:text-white shadow-sm hover:shadow-green-500/40 rounded-lg",onClick:()=>t(x.path),children:x.icon})},g))}),s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(V,{variant:"ghost",size:"icon",title:"تسجيل الخروج",className:"text-red-500 transition-all duration-200 hover:scale-110 hover:bg-red-900/20 hover:text-red-400",onClick:async()=>{r&&(await iu(),r())},children:s.jsx(im,{className:"h-5 w-5"})})})]})})]})}function c8(){const e=new Date().getFullYear();return s.jsx("footer",{className:"bg-green-900/95 text-green-100 py-6 border-t border-green-700 mt-auto shadow-inner",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-center space-y-2",children:[s.jsxs("p",{className:"text-sm md:text-base font-medium",children:["حقوق النشر © ",e," — مكتب آية لتحفيظ القرآن الكريم"]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-200",children:[s.jsx("span",{children:"تم التطوير بكل"}),s.jsx(l4,{className:"h-4 w-4 text-red-500 fill-red-500 animate-pulse"}),s.jsx("span",{className:"hidden sm:inline",children:"من أجل خدمة كتاب الله"})]})]})})})}const nt=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:_e("rounded-md border bg-card text-card-foreground shadow-md p-4",e),...t}));nt.displayName="Card";const ut=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:_e("flex flex-col space-y-1 p-4",e),...t}));ut.displayName="CardHeader";const dt=h.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:_e("text-lg font-semibold leading-tight tracking-normal",e),...t}));dt.displayName="CardTitle";const Dt=h.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:_e("text-xs text-muted-foreground",e),...t}));Dt.displayName="CardDescription";const Ze=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:_e("p-4 pt-2",e),...t}));Ze.displayName="CardContent";const qo=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:_e("flex items-center p-4 pt-2",e),...t}));qo.displayName="CardFooter";const d8="/assets/quran-hero-15097ebb.jpg",u8="/assets/0-e5cfb332.jpg",h8="/assets/1-3035405c.jpg",f8="/assets/2-cdf85064.jpg",m8="/assets/3-b371715f.jpg",g8="/assets/4-5b6add07.jpg",p8="/assets/5-49c036c6.jpg";function Gn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ui(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Mj=6048e5,x8=864e5;let v8={};function Yu(){return v8}function ac(e,t){var l,c,d,u;const r=Yu(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Gn(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function ou(e){return ac(e,{weekStartsOn:1})}function $j(e){const t=Gn(e),r=t.getFullYear(),n=ui(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=ou(n),i=ui(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=ou(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function sv(e){const t=Gn(e);return t.setHours(0,0,0,0),t}function av(e){const t=Gn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function y8(e,t){const r=sv(e),n=sv(t),a=+r-av(r),i=+n-av(n);return Math.round((a-i)/x8)}function b8(e){const t=$j(e),r=ui(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ou(r)}function w8(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function j8(e){if(!w8(e)&&typeof e!="number")return!1;const t=Gn(e);return!isNaN(Number(t))}function _8(e){const t=Gn(e),r=ui(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const N8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},S8=(e,t,r)=>{let n;const a=N8[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function lo(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const k8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},C8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},E8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},T8={date:lo({formats:k8,defaultWidth:"full"}),time:lo({formats:C8,defaultWidth:"full"}),dateTime:lo({formats:E8,defaultWidth:"full"})},P8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},O8=(e,t,r,n)=>P8[e];function ns(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const A8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},D8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},R8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},I8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},M8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},L8=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},F8={ordinalNumber:L8,era:ns({values:A8,defaultWidth:"wide"}),quarter:ns({values:D8,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ns({values:R8,defaultWidth:"wide"}),day:ns({values:I8,defaultWidth:"wide"}),dayPeriod:ns({values:M8,defaultWidth:"wide",formattingValues:$8,defaultFormattingWidth:"wide"})};function ss(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?B8(l,f=>f.test(o)):z8(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function z8(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function B8(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Lj(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const U8=/^(\d+)(th|st|nd|rd)?/i,W8=/\d+/i,V8={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},H8={any:[/^b/i,/^(a|c)/i]},q8={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},G8={any:[/1/i,/2/i,/3/i,/4/i]},K8={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Y8={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Q8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},J8={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},X8={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Z8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eO={ordinalNumber:Lj({matchPattern:U8,parsePattern:W8,valueCallback:e=>parseInt(e,10)}),era:ss({matchPatterns:V8,defaultMatchWidth:"wide",parsePatterns:H8,defaultParseWidth:"any"}),quarter:ss({matchPatterns:q8,defaultMatchWidth:"wide",parsePatterns:G8,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ss({matchPatterns:K8,defaultMatchWidth:"wide",parsePatterns:Y8,defaultParseWidth:"any"}),day:ss({matchPatterns:Q8,defaultMatchWidth:"wide",parsePatterns:J8,defaultParseWidth:"any"}),dayPeriod:ss({matchPatterns:X8,defaultMatchWidth:"any",parsePatterns:Z8,defaultParseWidth:"any"})},tO={code:"en-US",formatDistance:S8,formatLong:T8,formatRelative:O8,localize:F8,match:eO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rO(e){const t=Gn(e);return y8(t,_8(t))+1}function nO(e){const t=Gn(e),r=+ou(t)-+b8(t);return Math.round(r/Mj)+1}function Fj(e,t){var u,f,m,v;const r=Gn(e),n=r.getFullYear(),a=Yu(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((v=(m=a.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=ui(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=ac(o,t),c=ui(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=ac(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function sO(e,t){var l,c,d,u;const r=Yu(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=Fj(e,t),i=ui(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),ac(i,t)}function aO(e,t){const r=Gn(e),n=+ac(r,t)-+sO(r,t);return Math.round(n/Mj)+1}function mt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const qs={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return mt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):mt(r+1,2)},d(e,t){return mt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return mt(e.getHours()%12||12,t.length)},H(e,t){return mt(e.getHours(),t.length)},m(e,t){return mt(e.getMinutes(),t.length)},s(e,t){return mt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return mt(a,t.length)}},Ii={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iv={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return qs.y(e,t)},Y:function(e,t,r,n){const a=Fj(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return mt(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):mt(i,t.length)},R:function(e,t){const r=$j(e);return mt(r,t.length)},u:function(e,t){const r=e.getFullYear();return mt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return mt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return mt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return qs.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return mt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=aO(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):mt(a,t.length)},I:function(e,t,r){const n=nO(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):mt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):qs.d(e,t)},D:function(e,t,r){const n=rO(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):mt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return mt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return mt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return mt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Ii.noon:n===0?a=Ii.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Ii.evening:n>=12?a=Ii.afternoon:n>=4?a=Ii.morning:a=Ii.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return qs.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):qs.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):mt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):mt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):qs.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):qs.s(e,t)},S:function(e,t){return qs.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return lv(n);case"XXXX":case"XX":return Va(n);case"XXXXX":case"XXX":default:return Va(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return lv(n);case"xxxx":case"xx":return Va(n);case"xxxxx":case"xxx":default:return Va(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ov(n,":");case"OOOO":default:return"GMT"+Va(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ov(n,":");case"zzzz":default:return"GMT"+Va(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return mt(n,t.length)},T:function(e,t,r){const n=e.getTime();return mt(n,t.length)}};function ov(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+mt(i,2)}function lv(e,t){return e%60===0?(e>0?"-":"+")+mt(Math.abs(e)/60,2):Va(e,t)}function Va(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=mt(Math.trunc(n/60),2),i=mt(n%60,2);return r+a+t+i}const cv=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},zj=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},iO=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return cv(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",cv(n,t)).replace("{{time}}",zj(a,t))},oO={p:zj,P:iO},lO=/^D+$/,cO=/^Y+$/,dO=["D","DD","YY","YYYY"];function uO(e){return lO.test(e)}function hO(e){return cO.test(e)}function fO(e,t,r){const n=mO(e,t,r);if(console.warn(n),dO.includes(e))throw new RangeError(n)}function mO(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xO=/^'([^]*?)'?$/,vO=/''/g,yO=/[a-zA-Z]/;function dv(e,t,r){var u,f,m,v,x,g,b,y;const n=Yu(),a=(r==null?void 0:r.locale)??n.locale??tO,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((v=(m=n.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((g=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((y=(b=n.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,l=Gn(e);if(!j8(l))throw new RangeError("Invalid time value");let c=t.match(pO).map(p=>{const w=p[0];if(w==="p"||w==="P"){const S=oO[w];return S(p,a.formatLong)}return p}).join("").match(gO).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const w=p[0];if(w==="'")return{isToken:!1,value:bO(p)};if(iv[w])return{isToken:!0,value:p};if(w.match(yO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(p=>{if(!p.isToken)return p.value;const w=p.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&hO(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&uO(w))&&fO(w,t,String(e));const S=iv[w[0]];return S(l,w,a.localize,d)}).join("")}function bO(e){const t=e.match(xO);return t?t[1].replace(vO,"'"):e}const wO={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},jO=(e,t,r)=>{const n=wO[e];let a;return typeof n=="string"?a=n:t===1?a=n.one:t===2?a=n.two:t<=10?a=n.threeToTen.replace("{{count}}",String(t)):a=n.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"خلال "+a:"منذ "+a:a},_O={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},NO={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},SO={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kO={date:lo({formats:_O,defaultWidth:"full"}),time:lo({formats:NO,defaultWidth:"full"}),dateTime:lo({formats:SO,defaultWidth:"full"})},CO={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},EO=e=>CO[e],TO={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},PO={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},OO={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},AO={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},DO={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},RO={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},IO=e=>String(e),MO={ordinalNumber:IO,era:ns({values:TO,defaultWidth:"wide"}),quarter:ns({values:PO,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ns({values:OO,defaultWidth:"wide"}),day:ns({values:AO,defaultWidth:"wide"}),dayPeriod:ns({values:DO,defaultWidth:"wide",formattingValues:RO,defaultFormattingWidth:"wide"})},$O=/^(\d+)(th|st|nd|rd)?/i,LO=/\d+/i,FO={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},zO={any:[/قبل/,/بعد/]},BO={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},UO={any:[/1/i,/2/i,/3/i,/4/i]},WO={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},VO={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},HO={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},qO={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},GO={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},KO={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},YO={ordinalNumber:Lj({matchPattern:$O,parsePattern:LO,valueCallback:e=>parseInt(e,10)}),era:ss({matchPatterns:FO,defaultMatchWidth:"wide",parsePatterns:zO,defaultParseWidth:"any"}),quarter:ss({matchPatterns:BO,defaultMatchWidth:"wide",parsePatterns:UO,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ss({matchPatterns:WO,defaultMatchWidth:"wide",parsePatterns:VO,defaultParseWidth:"any"}),day:ss({matchPatterns:HO,defaultMatchWidth:"wide",parsePatterns:qO,defaultParseWidth:"any"}),dayPeriod:ss({matchPatterns:GO,defaultMatchWidth:"any",parsePatterns:KO,defaultParseWidth:"any"})},QO={code:"ar",formatDistance:jO,formatLong:kO,formatRelative:EO,localize:MO,match:YO,options:{weekStartsOn:6,firstWeekContainsDate:1}};function JO({userRole:e,userId:t}){var b,y,p,w,S;const[r,n]=h.useState(!0),[a,i]=h.useState(null),[o,l]=h.useState({totalCircles:0,totalStudents:0,totalTeachers:0,todayAbsences:0,supervisorCircles:0,supervisorStudents:0,supervisorTeachers:0,teacherCircles:0,teacherStudents:0,teacherAbsences:0,recentMemorizations:[],recentAssessments:[],teacherNotes:[],availableCircles:[],sessionSchedules:[]}),c=new Date,d=dv(c,"yyyy-MM-dd");h.useEffect(()=>{async function C(){n(!0),i(null);try{let T={totalCircles:0,totalStudents:0,totalTeachers:0,todayAbsences:0};try{const O=await u();T={...T,...O}}catch(O){console.error("خطأ في جلب الإحصائيات العامة:",O)}if(t)try{if(e==="superadmin"){const O=await f();T={...T,...O}}else if(e==="admin"){const O=await m(t);T={...T,...O}}else if(e==="teacher"){const O=await v(t);T={...T,...O}}}catch(O){console.error("خطأ في جلب الإحصائيات الخاصة بالمستخدم:",O)}else try{const O=await x();T={...T,...O}}catch(O){console.error("خطأ في جلب إحصائيات الزوار:",O)}l(T)}catch(T){console.error("خطأ في جلب الإحصائيات:",T),i("حدث خطأ أثناء جلب الإحصائيات. الرجاء المحاولة مرة أخرى.")}finally{n(!1)}}C()},[t,e,d]);const u=async()=>{const C={totalCircles:0,totalStudents:0,totalTeachers:0,todayAbsences:0};try{const{count:T,error:O}=await le.from("study_circles").select("*",{count:"exact",head:!0});O?console.error("خطأ في جلب عدد الحلقات:",O):C.totalCircles=T||0}catch(T){console.error("استثناء في جلب عدد الحلقات:",T)}try{const{count:T,error:O}=await le.from("students").select("*",{count:"exact",head:!0});O?console.error("خطأ في جلب عدد الطلاب:",O):C.totalStudents=T||0}catch(T){console.error("استثناء في جلب عدد الطلاب:",T)}try{const{count:T,error:O}=await le.from("profiles").select("*",{count:"exact",head:!0}).eq("role","teacher");O?console.error("خطأ في جلب عدد المعلمين:",O):C.totalTeachers=T||0}catch(T){console.error("استثناء في جلب عدد المعلمين:",T)}try{const{count:T,error:O}=await le.from("attendance_records").select("*",{count:"exact",head:!0}).eq("status","absent").gte("date",`${d}T00:00:00`).lt("date",`${d}T23:59:59`);O?console.error("خطأ في جلب عدد الغياب:",O):C.todayAbsences=T||0}catch(T){console.error("استثناء في جلب عدد الغياب:",T)}return C},f=async()=>({}),m=async C=>{const T={supervisorCircles:0,supervisorStudents:0,supervisorTeachers:0};try{const{count:O,error:$}=await le.from("study_circles").select("*",{count:"exact",head:!0}).eq("supervisor_id",C);$?console.error("خطأ في جلب عدد حلقات المشرف:",$):T.supervisorCircles=O||0}catch(O){console.error("استثناء في جلب عدد حلقات المشرف:",O)}try{const{count:O,error:$}=await le.from("profiles").select("*",{count:"exact",head:!0}).eq("role","teacher").eq("supervisor_id",C);$?console.error("خطأ في جلب عدد معلمي المشرف:",$):T.supervisorTeachers=O||0}catch(O){console.error("استثناء في جلب عدد معلمي المشرف:",O)}try{const{data:O,error:$}=await le.from("study_circles").select("id").eq("supervisor_id",C);if(!$&&O&&O.length>0){const Q=O.map(_=>_.id),{count:K,error:A}=await le.from("students").select("*",{count:"exact",head:!0}).in("study_circle_id",Q);A?console.error("خطأ في جلب عدد طلاب المشرف:",A):T.supervisorStudents=K||0}else $&&console.error("خطأ في جلب معرفات حلقات المشرف:",$)}catch(O){console.error("استثناء في جلب عدد طلاب المشرف:",O)}return T},v=async C=>{const T={teacherCircles:0,teacherStudents:0,teacherAbsences:0,recentMemorizations:[],recentAssessments:[]};try{const{count:O,error:$}=await le.from("study_circles").select("*",{count:"exact",head:!0}).eq("teacher_id",C);$?console.error("خطأ في جلب عدد حلقات المعلم:",$):T.teacherCircles=O||0;const{data:Q,error:K}=await le.from("study_circles").select("id").eq("teacher_id",C);if(!K&&Q&&Q.length>0){const A=Q.map(_=>_.id);try{const{count:_,error:I}=await le.from("students").select("*",{count:"exact",head:!0}).in("study_circle_id",A);I?console.error("خطأ في جلب عدد طلاب المعلم:",I):T.teacherStudents=_||0}catch(_){console.error("استثناء في جلب عدد طلاب المعلم:",_)}try{const{count:_,error:I}=await le.from("attendance_records").select("*",{count:"exact",head:!0}).in("study_circle_id",A).eq("status","absent").gte("date",`${d}T00:00:00`).lt("date",`${d}T23:59:59`);I?console.error("خطأ في جلب عدد غياب طلاب المعلم:",I):T.teacherAbsences=_||0}catch(_){console.error("استثناء في جلب عدد غياب طلاب المعلم:",_)}try{const{data:_,error:I}=await le.from("memorization_records").select("id, student_id, date, surah, from_verse, to_verse, students(full_name)").in("study_circle_id",A).order("date",{ascending:!1}).limit(10);I?console.error("خطأ في جلب سجلات حفظ الطلاب:",I):T.recentMemorizations=_||[]}catch(_){console.error("استثناء في جلب سجلات حفظ الطلاب:",_)}try{const{data:_,error:I}=await le.from("assessments").select("id, student_id, date, score, type, students(full_name)").in("study_circle_id",A).order("date",{ascending:!1}).limit(10);I?console.error("خطأ في جلب تقييمات الطلاب:",I):T.recentAssessments=_||[]}catch(_){console.error("استثناء في جلب تقييمات الطلاب:",_)}}else K&&console.error("خطأ في جلب معرفات حلقات المعلم:",K)}catch(O){console.error("استثناء في جلب إحصائيات المعلم:",O)}return T},x=async()=>{const C={availableCircles:[],sessionSchedules:[]};try{const{data:T,error:O}=await le.from("study_circles").select("id, name, teacher_id, profiles(full_name), capacity, current_students").eq("is_open_for_registration",!0).limit(5);O?console.error("خطأ في جلب الحلقات المتاحة:",O):C.availableCircles=T||[]}catch(T){console.error("استثناء في جلب الحلقات المتاحة:",T)}try{const{data:T,error:O}=await le.from("circle_schedules").select("id, study_circle_id, day, start_time, end_time, study_circles(name)").order("day").limit(10);O?console.error("خطأ في جلب مواعيد الجلسات:",O):C.sessionSchedules=T||[]}catch(T){console.error("استثناء في جلب مواعيد الجلسات:",T)}return C};if(r)return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(C=>s.jsx(nt,{className:"border border-green-200 shadow-md",children:s.jsxs(Ze,{className:"p-6",children:[s.jsx("div",{className:"h-16 bg-gray-200 animate-pulse rounded-md mb-2"}),s.jsx("div",{className:"h-8 bg-gray-100 animate-pulse rounded-md"})]})},C))});if(a)return s.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-md mb-6",children:[s.jsx(Rr,{className:"inline-block mr-2 h-5 w-5"}),a]});const g=dv(c,"EEEE d MMMM yyyy",{locale:QO});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"mb-4 text-center",children:[s.jsx("p",{className:"text-gray-600 mb-1",children:"إحصائيات اليوم"}),s.jsx("h2",{className:"text-xl font-semibold text-islamic-green",children:g})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(e==="superadmin"||e==="admin")&&s.jsxs(s.Fragment,{children:[s.jsx(Fr,{title:"إجمالي الحلقات",value:o.totalCircles,icon:s.jsx(Yt,{className:"h-8 w-8 text-green-600"}),color:"bg-green-50 border-green-200",textColor:"text-green-700"}),s.jsx(Fr,{title:"إجمالي الطلاب",value:o.totalStudents,icon:s.jsx(Os,{className:"h-8 w-8 text-blue-600"}),color:"bg-blue-50 border-blue-200",textColor:"text-blue-700"}),s.jsx(Fr,{title:"إجمالي المعلمين",value:o.totalTeachers,icon:s.jsx(xl,{className:"h-8 w-8 text-purple-600"}),color:"bg-purple-50 border-purple-200",textColor:"text-purple-700"}),s.jsx(Fr,{title:"غياب اليوم",value:o.todayAbsences,icon:s.jsx(Rr,{className:"h-8 w-8 text-amber-600"}),color:"bg-amber-50 border-amber-200",textColor:"text-amber-700"})]}),e==="admin"&&s.jsxs(s.Fragment,{children:[s.jsx(Fr,{title:"الحلقات تحت إشرافك",value:o.supervisorCircles||0,icon:s.jsx(Yt,{className:"h-8 w-8 text-teal-600"}),color:"bg-teal-50 border-teal-200",textColor:"text-teal-700"}),s.jsx(Fr,{title:"الطلاب في حلقاتك",value:o.supervisorStudents||0,icon:s.jsx(Os,{className:"h-8 w-8 text-pink-600"}),color:"bg-pink-50 border-pink-200",textColor:"text-pink-700"})]}),e==="teacher"&&s.jsxs(s.Fragment,{children:[s.jsx(Fr,{title:"حلقاتك الدراسية",value:o.teacherCircles||0,icon:s.jsx(Xl,{className:"h-8 w-8 text-indigo-600"}),color:"bg-indigo-50 border-indigo-200",textColor:"text-indigo-700"}),s.jsx(Fr,{title:"طلابك",value:o.teacherStudents||0,icon:s.jsx(Pl,{className:"h-8 w-8 text-emerald-600"}),color:"bg-emerald-50 border-emerald-200",textColor:"text-emerald-700"}),s.jsx(Fr,{title:"الغياب في حلقاتك اليوم",value:o.teacherAbsences||0,icon:s.jsx(Rr,{className:"h-8 w-8 text-red-600"}),color:"bg-red-50 border-red-200",textColor:"text-red-700"}),s.jsx(Fr,{title:"آخر التقييمات",value:((b=o.recentAssessments)==null?void 0:b.length)||0,icon:s.jsx(a4,{className:"h-8 w-8 text-orange-600"}),color:"bg-orange-50 border-orange-200",textColor:"text-orange-700"})]}),!e&&s.jsxs(s.Fragment,{children:[s.jsx(Fr,{title:"الحلقات المتاحة",value:((y=o.availableCircles)==null?void 0:y.length)||0,icon:s.jsx(Yt,{className:"h-8 w-8 text-green-600"}),color:"bg-green-50 border-green-200",textColor:"text-green-700"}),s.jsx(Fr,{title:"مواعيد الجلسات",value:((p=o.sessionSchedules)==null?void 0:p.length)||0,icon:s.jsx(Ar,{className:"h-8 w-8 text-blue-600"}),color:"bg-blue-50 border-blue-200",textColor:"text-blue-700"}),s.jsx(Fr,{title:"إجمالي الحلقات",value:o.totalCircles,icon:s.jsx(Xl,{className:"h-8 w-8 text-purple-600"}),color:"bg-purple-50 border-purple-200",textColor:"text-purple-700"}),s.jsx(Fr,{title:"جلسات اليوم",value:((S=(w=o.sessionSchedules)==null?void 0:w.filter(C=>C.day===new Date().getDay()))==null?void 0:S.length)||0,icon:s.jsx(dn,{className:"h-8 w-8 text-amber-600"}),color:"bg-amber-50 border-amber-200",textColor:"text-amber-700"})]})]}),e==="teacher"&&o.recentMemorizations&&o.recentMemorizations.length>0&&s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-islamic-green border-r-4 border-islamic-green pr-2",children:"آخر سجلات الحفظ"}),s.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-green-200",children:s.jsxs("table",{className:"min-w-full divide-y divide-green-200",children:[s.jsx("thead",{className:"bg-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:"الطالب"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:"التاريخ"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:"السورة"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:"من آية"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:"إلى آية"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-green-100",children:o.recentMemorizations.map(C=>{var T;return s.jsxs("tr",{className:"hover:bg-green-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(T=C.students)==null?void 0:T.full_name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(C.date).toLocaleDateString("ar-EG")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.surah}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.from_verse}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.to_verse})]},C.id)})})]})})]}),!e&&o.availableCircles&&o.availableCircles.length>0&&s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-islamic-green border-r-4 border-islamic-green pr-2",children:"الحلقات المتاحة للتسجيل"}),s.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-green-200",children:s.jsxs("table",{className:"min-w-full divide-y divide-green-200",children:[s.jsx("thead",{className:"bg-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:"اسم الحلقة"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:"المعلم"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:"السعة"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-green-700 uppercase tracking-wider",children:"عدد الطلاب الحاليين"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-green-100",children:o.availableCircles.map(C=>{var T;return s.jsxs("tr",{className:"hover:bg-green-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(T=C.profiles)==null?void 0:T.full_name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.capacity}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.current_students})]},C.id)})})]})})]})]})}function Fr({title:e,value:t,icon:r,color:n="bg-white",textColor:a="text-gray-800"}){return s.jsx(nt,{className:`shadow-md ${n}`,children:s.jsx(Ze,{className:"p-6",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:e}),s.jsx("p",{className:`text-3xl font-bold ${a}`,children:t})]}),s.jsx("div",{className:"p-3 rounded-full bg-white/70 shadow-sm",children:r})]})})})}const ll=[{src:d8,title:"نظام متابعة حفظ القرآن الكريم",subtitle:"تعلم، احفظ، واستمر في رحلتك مع كتاب الله"},{src:u8,title:"رحلة الحفظ والتعلم",subtitle:"خطوة بخطوة نحو إتقان كتاب الله"},{src:h8,title:"حفظ القرآن",subtitle:"منهجية متكاملة للحفظ والمراجعة"},{src:f8,title:"متابعة التقدم",subtitle:"نظام متكامل لمتابعة مستوى الطلاب"},{src:m8,title:"تعليم القرآن الكريم",subtitle:"أفضل الأساليب التعليمية الحديثة"},{src:g8,title:"التواصل المستمر",subtitle:"تواصل فعال بين المعلمين وأولياء الأمور"},{src:p8,title:"التطوير المستمر",subtitle:"نسعى دائمًا لتطوير منظومة التحفيظ"}],Jr=({onNavigate:e,userRole:t,currentUser:r})=>{const[n,a]=h.useState(0),i=t==="parent"?null:t,o=()=>{a(d=>d===ll.length-1?0:d+1)},l=()=>{a(d=>d===0?ll.length-1:d-1)};h.useEffect(()=>{const d=setInterval(()=>{o()},5e3);return()=>clearInterval(d)},[]);const c=()=>t?t==="teacher"?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[s.jsxs(V,{onClick:()=>e("/students"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:"👦"}),"  إدارة الطلاب"]}),s.jsxs(V,{onClick:()=>e("/study-circles"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:"📚"}),"  حلقاتي الدراسية"]})]}):t==="admin"||t==="superadmin"?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[s.jsxs(V,{onClick:()=>e("/students-list"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:"👦"}),"  قائمة الطلاب"]}),s.jsxs(V,{onClick:()=>e("/guardians-list"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:"👨‍👩‍👧‍👦"}),"   قائمة أولياء الأمور"]}),s.jsxs(V,{onClick:()=>e("/study-circles"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:"📚"}),"  إدارة الحلقات الدراسية"]}),s.jsxs(V,{onClick:()=>e("/parent-inquiry"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:"👨‍👩‍👧‍👦"})," استعلام أولياء الأمور"]}),t==="superadmin"&&s.jsxs(V,{onClick:()=>e("/database-management"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:"🗄️"}),"  إدارة قاعدة البيانات"]}),t==="superadmin"&&s.jsxs(V,{onClick:()=>e("/user-management"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:"👤"}),"  إدارة المستخدمين"]})]}):t==="parent"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:s.jsxs(V,{onClick:()=>e("/parent-inquiry"),className:"h-12 text-lg",children:[s.jsx("span",{children:"👦"}),"  عرض معلومات الطالب"]})}):null:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[s.jsxs(V,{onClick:()=>e("/login"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:"🔑"})," تسجيل الدخول"]}),s.jsxs(V,{onClick:()=>e("/parent-inquiry"),className:"h-7 px-3 rounded-full font-bold border border-green-500 text-green-600 bg-white hover:bg-green-600 hover:text-white transition-colors duration-300",children:[s.jsx("span",{children:"👨‍👩‍👧‍👦"})," استعلام أولياء الأمور"]})]});return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"mb-12 flex justify-center font-arabic",children:s.jsxs("div",{className:`w-full max-w-5xl rounded-3xl overflow-hidden shadow-2xl relative \r
                  border-2 border-green-600 bg-gradient-to-tr from-green-950/90 via-green-800/80 to-emerald-700/70`,children:[s.jsx("div",{className:"absolute inset-0 bg-[url('/patterns/islamic-pattern.svg')] opacity-10 pointer-events-none"}),s.jsxs("div",{className:"relative h-72 md:h-96 flex items-center justify-center",children:[s.jsx("img",{src:ll[n].src,alt:ll[n].title,className:"w-full h-full object-contain transition-all duration-700 ease-in-out drop-shadow-xl"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-green-950/70 via-green-800/20 to-transparent"})]}),s.jsx("button",{onClick:l,className:`absolute left-4 top-1/2 -translate-y-1/2 bg-green-700/80 border border-green-400/50 \r
                 text-white p-4 rounded-full backdrop-blur-md hover:bg-green-600 shadow-xl \r
                 transition-all transform hover:scale-110`,"aria-label":"الصورة السابقة",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{onClick:o,className:`absolute right-4 top-1/2 -translate-y-1/2 bg-green-700/80 border border-green-400/50 \r
                 text-white p-4 rounded-full backdrop-blur-md hover:bg-green-600 shadow-xl \r
                 transition-all transform hover:scale-110`,"aria-label":"الصورة التالية",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),s.jsx("div",{className:"absolute bottom-5 left-0 right-0 flex justify-center gap-3",children:ll.map((d,u)=>s.jsx("button",{onClick:()=>a(u),className:`h-4 w-4 rounded-full border-2 transition-all duration-300 shadow-md
                      ${u===n?"bg-gradient-to-r from-green-500 to-emerald-400 scale-125 border-yellow-300":"bg-white/30 hover:bg-white/80 border-green-200"}`,"aria-label":`الانتقال إلى الصورة رقم ${u+1}`},u))})]})}),s.jsxs(nt,{className:"mb-8",children:[s.jsxs(ut,{className:"text-center",children:[s.jsx(dt,{className:"text-3xl font-bold",children:"مرحباً بك في نظام متابعة حفظ القرآن الكريم"}),r&&s.jsxs(Dt,{className:"text-xl mt-2",children:[r.full_name," - ",t==="superadmin"?"مدير":t==="admin"?"مشرف":t==="teacher"?"معلم":"ولي أمر"]})]}),s.jsxs(Ze,{children:[s.jsx("p",{className:"text-lg mb-4",children:"هذا النظام يساعد على متابعة تقدم الطلاب في حفظ القرآن الكريم، وتسهيل التواصل بين المعلمين وأولياء الأمور."}),c()]})]}),t&&t!=="parent"&&s.jsxs(nt,{className:"mb-8 border-islamic-green/30 shadow-md",children:[s.jsxs(ut,{children:[s.jsx(dt,{className:"text-xl font-bold text-islamic-green",children:"إحصائيات النظام"}),s.jsx(Dt,{children:"نظرة عامة على أداء حلقات التحفيظ والطلاب"})]}),s.jsx(Ze,{children:s.jsx(JO,{userRole:i,userId:r==null?void 0:r.id})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(nt,{children:[s.jsx(ut,{children:s.jsx(dt,{children:"للمعلمين"})}),s.jsx(Ze,{children:s.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[s.jsx("li",{children:"تسجيل الطلاب الجدد"}),s.jsx("li",{children:"تسجيل المتابعة اليومية"}),s.jsx("li",{children:"تسجيل نتائج الاختبارات الشهرية"}),s.jsx("li",{children:"إدارة بيانات أولياء الأمور"})]})})]}),s.jsxs(nt,{children:[s.jsx(ut,{children:s.jsx(dt,{children:"لأولياء الأمور"})}),s.jsx(Ze,{children:s.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[s.jsx("li",{children:"متابعة تقدم الطالب"}),s.jsx("li",{children:"الاطلاع على المتابعة اليومية"}),s.jsx("li",{children:"الاطلاع على نتائج الاختبارات الشهرية"}),s.jsx("li",{children:"التواصل مع المعلمين"})]})})]})]})]})})},me=h.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:_e("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));me.displayName="Input";var XO="Label",Bj=h.forwardRef((e,t)=>s.jsx(Ke.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Bj.displayName=XO;var Uj=Bj;const ZO=pc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ee=h.forwardRef(({className:e,...t},r)=>s.jsx(Uj,{ref:r,className:_e(ZO(),e),...t}));ee.displayName=Uj.displayName;console.log("SupabaseREST: تهيئة مع المفاتيح:",{url:fs,anonKey:`${c0.substring(0,10)}...`,serviceKey:`${qn.substring(0,10)}...`});const eA=async e=>{try{console.log("SupabaseREST: إنشاء ملف شخصي جديد"),console.log("SupabaseREST: استخدام مفتاح الخدمة لإنشاء سجل في جدول profiles المحمي");const t={"Content-Type":"application/json",apikey:qn,Authorization:`Bearer ${qn}`,Prefer:"return=representation"},r=JSON.stringify([e]),n=await fetch(`${fs}/rest/v1/profiles`,{method:"POST",headers:t,body:r});if(n.ok){const i=await n.json();return console.log("SupabaseREST: تم إنشاء الملف الشخصي بنجاح باستخدام مفتاح الخدمة"),{success:!0,data:i}}const a=await n.text();return console.error("SupabaseREST: فشل إنشاء الملف الشخصي:",{status:n.status,statusText:n.statusText,error:a}),{success:!1,error:a,status:n.status,statusText:n.statusText}}catch(t){return console.error("SupabaseREST: خطأ أثناء إنشاء ملف شخصي:",t),{success:!1,error:String(t)}}},tA=async(e,t)=>{try{console.log(`SupabaseREST: تحديث ملف شخصي للمستخدم ${e}`),console.log("SupabaseREST: استخدام مفتاح الخدمة لتحديث سجل في جدول profiles المحمي");const r={"Content-Type":"application/json",apikey:qn,Authorization:`Bearer ${qn}`,Prefer:"return=representation"},n=await fetch(`${fs}/rest/v1/profiles?id=eq.${e}`,{method:"PATCH",headers:r,body:JSON.stringify(t)});if(n.ok){const i=await n.json();return console.log("SupabaseREST: تم تحديث الملف الشخصي بنجاح باستخدام مفتاح الخدمة"),{success:!0,data:i}}const a=await n.text();return console.error("SupabaseREST: فشل تحديث الملف الشخصي:",{status:n.status,statusText:n.statusText,error:a}),{success:!1,error:a,status:n.status,statusText:n.statusText}}catch(r){return console.error("SupabaseREST: خطأ أثناء تحديث الملف الشخصي:",r),{success:!1,error:String(r)}}},uv=async e=>{try{console.log(`SupabaseREST: البحث عن مستخدم بواسطة اسم المستخدم: ${e}`),console.log("SupabaseREST: استخدام مفتاح الخدمة للبحث في جدول profiles المحمي");const t={"Content-Type":"application/json",apikey:qn,Authorization:`Bearer ${qn}`},r=await fetch(`${fs}/rest/v1/profiles?username=ilike.${encodeURIComponent(e)}&limit=1`,{method:"GET",headers:t});if(r.ok){const a=await r.json();if(console.log(`SupabaseREST: تم العثور على ${a.length} مستخدم`),a&&a.length>0)return{success:!0,data:a[0]}}const n=await r.text();return console.error("SupabaseREST: فشل البحث عن المستخدم:",{status:r.status,statusText:r.statusText,error:n}),{success:!1,error:"لم يتم العثور على المستخدم"}}catch(t){return console.error("SupabaseREST: خطأ أثناء البحث عن المستخدم:",t),{success:!1,error:String(t)}}},rf=async(e,t,r=null)=>{try{console.log(`SupabaseREST: تحديث محاولات تسجيل الدخول للمستخدم ${e} إلى ${t}`);const n={login_attempts:t};r&&(n.last_login_at=r),console.log("SupabaseREST: استخدام مفتاح الخدمة لتحديث محاولات تسجيل الدخول في جدول profiles المحمي");const a={"Content-Type":"application/json",apikey:qn,Authorization:`Bearer ${qn}`,Prefer:"return=representation"},i=await fetch(`${fs}/rest/v1/profiles?id=eq.${e}`,{method:"PATCH",headers:a,body:JSON.stringify(n)});if(i.ok){const l=await i.json();return console.log("SupabaseREST: تم تحديث محاولات تسجيل الدخول بنجاح باستخدام مفتاح الخدمة"),{success:!0,data:l}}const o=await i.text();return console.error("SupabaseREST: فشل تحديث محاولات تسجيل الدخول:",{status:i.status,statusText:i.statusText,error:o}),{success:!1,error:o,status:i.status,statusText:i.statusText}}catch(n){return console.error("SupabaseREST: خطأ أثناء تحديث محاولات تسجيل الدخول:",n),{success:!1,error:String(n)}}},ic=e=>({id:e.id,full_name:e.full_name,role:e.role,username:e.username,password_hash:e.password_hash,login_attempts:e.login_attempts,last_login_at:e.last_login_at,created_at:e.created_at}),Qu=e=>!e||!Array.isArray(e)?[]:e.map(t=>ic(t)),rA=e=>{const t=e.id||crypto.randomUUID();return console.log("Mapping guardian to Supabase format with ID:",t),{id:t,full_name:e.full_name,phone_number:e.phone_number,email:e.email,address:e.address}},Wj=e=>({id:e.id,full_name:e.full_name,phone_number:e.phone_number,email:e.email,address:e.address,created_at:e.created_at,updated_at:e.updated_at}),nA=e=>!e||!Array.isArray(e)?[]:e.map(t=>Wj(t)),Vj=e=>({id:e.id||crypto.randomUUID(),guardian_id:e.guardian_id,study_circle_id:e.study_circle_id,full_name:e.full_name,date_of_birth:e.date_of_birth,gender:e.gender||"male",phone_number:e.phone_number,email:e.email,enrollment_date:e.enrollment_date||new Date().toISOString().split("T")[0],grade_level:e.grade_level,notes:e.notes}),g0=e=>({id:e.id,guardian_id:e.guardian_id,study_circle_id:e.study_circle_id,full_name:e.full_name,date_of_birth:e.date_of_birth,gender:e.gender,phone_number:e.phone_number,email:e.email,enrollment_date:e.enrollment_date,grade_level:e.grade_level,notes:e.notes,created_at:e.created_at,updated_at:e.updated_at,guardian:e.guardian,study_circle:e.study_circle,memorized_parts:e.memorized_parts}),Ju=e=>!e||!Array.isArray(e)?(console.log("No results to map or results is not an array"),[]):(e.length>0&&console.log("Mapping students with relationships. First student:",{id:e[0].id,full_name:e[0].full_name,has_guardian:!!e[0].guardian,has_teacher:!!e[0].teacher}),e.map(t=>({...g0(t),guardian:t.guardian||null,study_circle:t.study_circle||null,memorized_parts:t.memorized_parts||null,grade:t.grade_level,grade_level:t.grade_level}))),sA=e=>({id:e.id,student_id:e.student_id,teacher_id:e.teacher_id,study_circle_id:e.study_circle_id,study_circle:e.study_circle||null,start_date:e.start_date,end_date:e.end_date}),aA=e=>!e||!Array.isArray(e)?[]:e.map(t=>sA(t)),p0=async e=>{try{const{data:t,error:r}=await le.from(jn).select("*").eq("id",e).single();return r?(console.error("خطأ في استرجاع الملف الشخصي:",r),null):t?ic(t):null}catch(t){return console.error("خطأ في استرجاع الملف الشخصي:",t),null}},hv=async e=>{try{const{data:t,error:r}=await le.from(jn).select("*").eq("username",e).single();return r?(console.error("خطأ في استرجاع الملف الشخصي بواسطة اسم المستخدم:",r),null):t?ic(t):null}catch(t){return console.error("خطأ في استرجاع الملف الشخصي بواسطة اسم المستخدم:",t),null}},iA=async e=>{try{const t={id:e.id,full_name:e.full_name,role:e.role,username:e.username,password_hash:e.password_hash,login_attempts:0},{data:r,error:n}=await Rt.from(jn).insert([t]).select();return n?(console.error("خطأ في إنشاء الملف الشخصي باستخدام كلمة مرور مشفرة:",n),n.code==="23505"?{success:!1,message:"اسم المستخدم موجود بالفعل. يرجى اختيار اسم مستخدم آخر."}:{success:!1,message:`فشل في إنشاء الملف الشخصي: ${n.message}`}):{success:!0,id:r&&r[0]?r[0].id:void 0,message:"تم إنشاء الملف الشخصي بنجاح"}}catch(t){return console.error("خطأ في إنشاء الملف الشخصي باستخدام كلمة مرور مشفرة:",t),{success:!1,message:"حدث خطأ أثناء إنشاء الملف الشخصي"}}},oA=async e=>{var t;try{const r=await bc(e.password),n={id:e.id,full_name:e.full_name,role:e.role,username:e.username,password_hash:r,login_attempts:0};console.log("محاولة إضافة مستخدم جديد باستخدام REST API"),console.log("بيانات المستخدم:",JSON.stringify(n));const a=await eA(n);if(!a.success)return console.error("فشل في إنشاء الملف الشخصي:",a.error),(t=a.error)!=null&&t.includes("duplicate key value violates unique constraint")?{success:!1,message:"اسم المستخدم موجود بالفعل. يرجى اختيار اسم مستخدم آخر."}:{success:!1,message:"فشل في إنشاء الملف الشخصي: "+a.error};console.log("محاولة تسجيل المستخدم في نظام المصادقة المدمج...");const i=a.data&&a.data[0]?a.data[0].id:e.id;if(i){const o={id:i,username:e.username,role:e.role},l=await fj(o,e.password);l.success?console.log("تم تسجيل المستخدم بنجاح في نظام المصادقة المدمج"):console.warn("لم يتم تسجيل المستخدم في نظام المصادقة المدمج:",l.error)}return{success:!0,id:i,message:"تم إنشاء الملف الشخصي بنجاح"}}catch(r){return console.error("خطأ في إنشاء الملف الشخصي:",r),{success:!1,message:"حدث خطأ أثناء إنشاء الملف الشخصي"}}},Hj=async e=>{var t;try{const r={...e};e.password&&(r.password_hash=await bc(e.password),delete r.password),console.log("تحديث ملف المستخدم باستخدام REST API");const n=await tA(e.id,r);return n.success?{success:!0,message:"تم تحديث الملف الشخصي بنجاح"}:(console.error("فشل في تحديث الملف الشخصي:",n.error),(t=n.error)!=null&&t.includes("duplicate key value violates unique constraint")?{success:!1,message:"اسم المستخدم موجود بالفعل. يرجى اختيار اسم مستخدم آخر."}:{success:!1,message:"فشل في تحديث الملف الشخصي: "+n.error})}catch(r){return console.error("خطأ في تحديث الملف الشخصي:",r),{success:!1,message:"حدث خطأ أثناء تحديث الملف الشخصي"}}},Xu=async()=>{try{const{data:e,error:t}=await le.from(jn).select("*").or("role.eq.teacher,role.eq.admin");return t?(console.error("خطأ في استرجاع المعلمين:",t),[]):Qu(e||[])}catch(e){return console.error("خطأ في استرجاع المعلمين:",e),[]}},lA=async()=>{try{const{data:e,error:t}=await le.from(jn).select("*").or("role.eq.teacher,role.is.null");return t?(console.error("خطأ في استرجاع المعلمين:",t),[]):Qu(e||[])}catch(e){return console.error("خطأ في استرجاع المعلمين:",e),[]}},cA=async()=>{try{const{data:e,error:t}=await le.from(jn).select("*").eq("role","admin");return t?(console.error("خطأ في استرجاع المسؤولين:",t),[]):Qu(e||[])}catch(e){return console.error("خطأ في استرجاع المسؤولين:",e),[]}},dA=async e=>{try{console.log("محاولة تسجيل الدخول باستخدام:",{username:e.username});const t=await ZP();t.success&&t.isAuthenticated&&(console.log("المستخدم مسجل الدخول بالفعل. إجراء تسجيل الخروج..."),await iu()),console.log("محاولة تسجيل الدخول باستخدام نظام مصادقة Supabase المدمج...");const r=await hj(e.username,e.password);if(r.success&&r.token){console.log("نجاح تسجيل الدخول باستخدام نظام المصادقة المدمج");const c=await uv(e.username);if(c.success&&c.data){const d=c.data,u=ic(d);Fn(r.token);const f=new Date().toISOString();return await rf(d.id,0,f),{success:!0,user:u,token:r.token,message:"تم تسجيل الدخول بنجاح"}}else console.log("تم تسجيل الدخول ولكن لم يتم العثور على ملف المستخدم. إنشاء ملف مستخدم جديد...")}console.log("فشل تسجيل الدخول المباشر، محاولة البحث عن المستخدم باستخدام REST API...");const n=await uv(e.username);if(!n.success||!n.data)return console.error("خطأ في العثور على المستخدم:",n.error),{success:!1,message:"اسم المستخدم أو كلمة المرور غير صحيحة"};const a=n.data;console.log("تم العثور على المستخدم:",{id:a.id,username:a.username,role:a.role});const i=await XP(a,e.password);if(!i.success){const c=(a.login_attempts||0)+1;return await rf(a.id,c),{success:!1,message:"اسم المستخدم أو كلمة المرور غير صحيحة"}}i.token&&Fn(i.token);const o=new Date().toISOString();return await rf(a.id,0,o),{success:!0,user:ic(a),token:i.token,message:"تم تسجيل الدخول بنجاح"}}catch(t){return console.error("خطأ في تسجيل الدخول:",t),{success:!1,message:"حدث خطأ أثناء تسجيل الدخول"}}},uA=async(e,t,r)=>{try{const{data:n,error:a}=await le.from(jn).select("*").eq("id",e).single();if(a||!n)return console.error("خطأ في العثور على المستخدم:",a),{success:!1,message:"المستخدم غير موجود"};if(!await cj(t,n.password_hash))return{success:!1,message:"كلمة المرور الحالية غير صحيحة"};const o=await bc(r),{error:l}=await Rt.from(jn).update({password_hash:o}).eq("id",e);return l?(console.error("خطأ في تحديث كلمة المرور:",l),{success:!1,message:"فشل في تحديث كلمة المرور"}):{success:!0,message:"تم تحديث كلمة المرور بنجاح"}}catch(n){return console.error("خطأ في تغيير كلمة المرور:",n),{success:!1,message:"حدث خطأ أثناء تغيير كلمة المرور"}}},hA=async(e,t)=>{try{const r=await bc(t),{error:n}=await Rt.from(jn).update({password_hash:r}).eq("id",e);return n?(console.error("خطأ في تحديث كلمة المرور:",n),{success:!1,message:"فشل في تحديث كلمة المرور"}):{success:!0,message:"تم تحديث كلمة المرور بنجاح"}}catch(r){return console.error("خطأ في تغيير كلمة المرور:",r),{success:!1,message:"حدث خطأ أثناء تغيير كلمة المرور"}}},fA=async e=>{try{const{error:t}=await Rt.from(jn).delete().eq("id",e);if(t)return console.error("خطأ في حذف الملف الشخصي:",t),{success:!1,message:`فشل في حذف الملف الشخصي: ${t.message}`};try{await e6(e)}catch(r){console.warn("لم يتم حذف المستخدم من نظام المصادقة المدمج:",r)}return{success:!0,message:"تم حذف الملف الشخصي بنجاح"}}catch(t){return console.error("خطأ في حذف الملف الشخصي:",t),{success:!1,message:"حدث خطأ أثناء حذف الملف الشخصي"}}},mA=async()=>{try{const{data:e,error:t}=await le.from(jn).select("*").eq("role","superadmin");return t?(console.error("خطأ في استرجاع المعلمين الرئيسيين:",t),[]):Qu(e||[])}catch(e){return console.error("خطأ في استرجاع المعلمين الرئيسيين:",e),[]}},Ie={generalError:"خطأ",generalWarning:"تنبيه",requiredField:"هذا الحقل مطلوب",invalidInput:"قيمة غير صالحة",dataError:"خطأ في البيانات",searchError:"خطأ في البحث",missingCredentials:"يرجى إدخال اسم المستخدم وكلمة المرور",permissionError:"خطأ في الصلاحيات",accessDenied:"لا تملك صلاحيات للوصول إلى هذه الصفحة",incorrectRole:(e,t)=>`لقد قمت بتسجيل الدخول كـ ${e} وليس كـ ${t}`,loginFailed:"فشل تسجيل الدخول",invalidCredentials:"اسم المستخدم أو كلمة المرور غير صحيحة",loginError:"حدث خطأ أثناء تسجيل الدخول، يرجى المحاولة مرة أخرى",saveFailed:"فشل حفظ البيانات",deleteFailed:"فشل حذف البيانات",updateFailed:"فشل تحديث البيانات",fetchFailed:"فشل جلب البيانات",operationFailed:"فشلت العملية",connectionError:"خطأ في الاتصال بالخادم",databaseError:"خطأ في قاعدة البيانات",errorLoadingData:"فشل في تحميل البيانات",consoleLoginError:"خطأ في تسجيل الدخول:",consoleUserLoadError:"حدث خطأ أثناء تحميل المستخدمين:",consoleUserSaveError:"حدث خطأ أثناء حفظ بيانات المستخدم:",consoleExportDataError:"خطأ في تصدير البيانات:",consoleImportFileError:"خطأ في استيراد الملف:",consoleParsingJsonError:"خطأ في تحليل ملف JSON:",consoleStudentDetailsError:"خطأ في جلب تفاصيل الطالب:",consoleStudentSaveError:"خطأ في حفظ بيانات الطالب:",consoleEmailSendError:"فشل إرسال البريد الإلكتروني:",consoleStudentDataSubmitError:"خطأ أثناء تسجيل بيانات الطالب:",consoleStudentsFetchError:"خطأ في جلب بيانات الطلاب:",invalidEmail:"بريد إلكتروني غير صالح",invalidPhone:"رقم هاتف غير صالح",invalidName:"اسم غير صالح",invalidDate:"تاريخ غير صالح",passwordMismatch:"كلمات المرور غير متطابقة",weakPassword:"كلمة المرور ضعيفة"},Em={loginSuccess:"تم تسجيل الدخول",welcome:e=>`مرحبًا بك ${e}`,saveSuccess:"تم حفظ البيانات بنجاح",deleteSuccess:"تم حذف البيانات بنجاح",updateSuccess:"تم تحديث البيانات بنجاح",operationSuccess:"تمت العملية بنجاح",completed:"تم الإكمال بنجاح"},gA={submit:"إرسال",save:"حفظ",cancel:"إلغاء",edit:"تعديل",delete:"حذف",add:"إضافة",close:"إغلاق",back:"رجوع",next:"التالي",previous:"السابق",confirm:"تأكيد",search:"بحث",filter:"تصفية",reset:"إعادة ضبط",refresh:"تحديث",download:"تنزيل",upload:"رفع",print:"طباعة",login:"تسجيل الدخول",logout:"تسجيل الخروج",loading:"جاري التحميل...",processing:"جاري المعالجة...",saving:"جاري الحفظ...",deleting:"جاري الحذف...",updating:"جاري التحديث...",menu:"القائمة",home:"الرئيسية",dashboard:"لوحة التحكم",settings:"الإعدادات",profile:"الملف الشخصي",yes:"نعم",no:"لا",all:"الكل",none:"لا شيء",from:"من",to:"إلى",today:"اليوم",yesterday:"الأمس",tomorrow:"غداً",noData:"لا توجد بيانات",noResults:"لا توجد نتائج",moreInfo:"مزيد من المعلومات"},Cn={title:"تسجيل الدخول",description:"مكتب آية - نظام إدارة مسابقة تحفيظ القرآن الكريم",userType:"نوع المستخدم",superadmin:"مدير",admin:"مشرف المكتب",teacher:"معلم",username:"اسم المستخدم",usernamePrompt:"أدخل اسم المستخدم",usernamePlaceholder:"أدخل اسم المستخدم",password:"كلمة المرور",passwordPrompt:"أدخل كلمة المرور",login:"تسجيل الدخول",loginInProgress:"جاري تسجيل الدخول...",processing:"جاري المعالجة...",changePasswordDescription:"أدخل اسم المستخدم وكلمة المرور الحالية لتغيير كلمة المرور الخاصة بك",loginInfoTitle:"تسجيل الدخول إلى النظام:",loginInfoMessage1:"يرجى استخدام بيانات الاعتماد التي تم توفيرها لك من قبل مدير.",loginInfoMessage2:"إذا كنت تواجه مشكلة في تسجيل الدخول، يرجى التواصل مع المشرف.",returnToHome:"العودة للصفحة الرئيسية"},xe={title:"إدارة الطلاب",description:"قم بإضافة وتعديل وعرض بيانات الطلاب",addStudent:"إضافة طالب جديد",editStudent:"تعديل بيانات الطالب",deleteStudent:"حذف الطالب",deleteSuccess:"تم حذف الطالب بنجاح",deleteConfirmation:"هل أنت متأكد من رغبتك في حذف هذا الطالب؟",deleteDescription:"سيؤدي هذا إلى حذف جميع سجلات الطالب من النظام بشكل نهائي.",confirm:"تأكيد الحذف",cancel:"إلغاء",unexpectedError:"حدث خطأ غير متوقع",fullName:"اسم الطالب/الطالبة",fullNameError:"اسم الطالب لا يجب أن يحتوي على مسافات",guardianName:"ولي الأمر",teacherName:"المعلم المتابع",teacherPlaceholder:"اختر المعلم المتابع",teacherForStudent:"هذا الطالب تحت إشراف المعلم:",studyCircleName:"الحلقة الدراسية",studyCirclePlaceholder:"اختر الحلقة الدراسية",grade:"الصف الدراسي",age:"العمر",dateOfBirth:"تاريخ الميلاد",lastQuranProgress:"آخر حفظ",quranProgressPlaceholder:"اختر آخر ما تم حفظه",phoneNumber:"رقم الهاتف",email:"البريد الإلكتروني",address:"ملاحظات",notes:"ملاحظات",actions:"الإجراءات",save:"حفظ",search:"بحث",searchPlaceholder:"البحث بالاسم أو رقم الهاتف",noStudents:"لا يوجد طلاب",addStudentPrompt:"قم بإضافة طالب جديد للبدء",loading:"جاري التحميل...",requiredField:"* حقل مطلوب",optionalField:"(اختياري)",updateSuccess:"تم تحديث بيانات الطالب بنجاح",addSuccess:"تم إضافة الطالب بنجاح",incompleteData:"بيانات غير مكتملة",incompleteDataMessage:"الرجاء تعبئة جميع الحقول المطلوبة",accessDenied:"ليس لديك صلاحية الوصول",accessDeniedMessage:"ليس لديك صلاحية للوصول لهذه الصفحة.",returnToHome:"العودة للصفحة الرئيسية",editTooltip:"تعديل",deleteTooltip:"حذف",viewTooltip:"عرض",noSearchResults:"لا توجد نتائج للبحث",tryAnotherSearch:"حاول تغيير كلمات البحث أو استخدام مصطلحات مختلفة",filters:"تصفية",export:"تصدير",refresh:"تحديث",totalStudents:"إجمالي الطلاب",showing:"عرض",from:"من أصل",student:"طالب",gender:"الجنس",genderOptions:[{value:"male",label:"ذكر"},{value:"female",label:"أنثى"}],studentsList:"قائمة الطلاب",filterByGrade:"تصفية حسب الصف",filterByStatus:"تصفية حسب الحالة",name:"الاسم",parentName:"اسم ولي الأمر",phone:"رقم الهاتف",status:"الحالة",active:"نشط",inactive:"غير نشط",import:"استيراد البيانات",delete:"حذف",gradeOptions:[{value:"kg1",label:"رياض أطفال أولى (KG1)"},{value:"kg2",label:"رياض أطفال ثانية (KG2)"},{value:"p1",label:"الصف الأول الابتدائي"},{value:"p2",label:"الصف الثاني الابتدائي"},{value:"p3",label:"الصف الثالث الابتدائي"},{value:"p4",label:"الصف الرابع الابتدائي"},{value:"p5",label:"الصف الخامس الابتدائي"},{value:"p6",label:"الصف السادس الابتدائي"},{value:"m1",label:"الصف الأول الإعدادي"},{value:"m2",label:"الصف الثاني الإعدادي"},{value:"m3",label:"الصف الثالث الإعدادي"},{value:"h1",label:"الصف الأول الثانوي"},{value:"h2",label:"الصف الثاني الثانوي"},{value:"h3",label:"الصف الثالث الثانوي"},{value:"u1",label:"السنة الأولى الجامعية (الفرقة الأولى)"},{value:"u2",label:"السنة الثانية الجامعية (الفرقة الثانية)"},{value:"u3",label:"السنة الثالثة الجامعية (الفرقة الثالثة)"},{value:"u4",label:"السنة الرابعة الجامعية (الفرقة الرابعة)"},{value:"u5",label:"السنة الخامسة الجامعية (مثل الطب أو الصيدلة)"},{value:"u6",label:"السنة السادسة الجامعية (لبعض الكليات - طب مثلاً)"},{value:"pg",label:"دراسات عليا (تمهيدي ماجستير / دبلومة)"},{value:"ma",label:"ماجستير"},{value:"phd",label:"دكتوراه"},{value:"Other",label:"أخرى"}],quranPartsOptions:[{value:"less_than_one",label:"أقل من جزء"},{value:"part_1",label:"الجزء الأول"},{value:"part_2",label:"الجزء الثاني"},{value:"part_3",label:"الجزء الثالث"},{value:"part_4",label:"الجزء الرابع"},{value:"part_5",label:"الجزء الخامس"},{value:"part_6",label:"الجزء السادس"},{value:"part_7",label:"الجزء السابع"},{value:"part_8",label:"الجزء الثامن"},{value:"part_9",label:"الجزء التاسع"},{value:"part_10",label:"الجزء العاشر"},{value:"part_11",label:"الجزء الحادي عشر"},{value:"part_12",label:"الجزء الثاني عشر"},{value:"part_13",label:"الجزء الثالث عشر"},{value:"part_14",label:"الجزء الرابع عشر"},{value:"part_15",label:"الجزء الخامس عشر"},{value:"part_16",label:"الجزء السادس عشر"},{value:"part_17",label:"الجزء السابع عشر"},{value:"part_18",label:"الجزء الثامن عشر"},{value:"part_19",label:"الجزء التاسع عشر"},{value:"part_20",label:"الجزء العشرون"},{value:"part_21",label:"الجزء الحادي والعشرون"},{value:"part_22",label:"الجزء الثاني والعشرون"},{value:"part_23",label:"الجزء الثالث والعشرون"},{value:"part_24",label:"الجزء الرابع والعشرون"},{value:"part_25",label:"الجزء الخامس والعشرون"},{value:"part_26",label:"الجزء السادس والعشرون"},{value:"part_27",label:"الجزء السابع والعشرون"},{value:"part_28",label:"الجزء الثامن والعشرون"},{value:"part_29",label:"الجزء التاسع والعشرون"},{value:"part_30",label:"الجزء الثلاثون"},{value:"complete",label:"حفظ القرآن الكريم كاملاً"}]},ue={title:"إدارة المستخدمين",addUser:"إضافة مستخدم جديد",usersList:"قائمة المستخدمين",searchPlaceholder:"البحث عن مستخدم...",filterByRole:"تصفية حسب الدور",username:"اسم المستخدم",fullName:"الاسم الكامل",role:"الدور",circleCount:"عدد الحلقات",lastLogin:"آخر تسجيل دخول",status:"الحالة",actions:"إجراءات",noUsers:"لا يوجد مستخدمين",active:"نشط",inactive:"غير نشط",superadmin:"مدير",admin:"مشرف المكتب",teacher:"معلم",addUserForm:{title:"إضافة مستخدم جديد",username:"اسم المستخدم",fullName:"الاسم الكامل",password:"كلمة المرور",confirmPassword:"تأكيد كلمة المرور",role:"الدور",email:"البريد الإلكتروني",phone:"رقم الهاتف",status:"الحالة",submit:"إضافة المستخدم",cancel:"إلغاء"},editUserForm:{title:"تعديل بيانات المستخدم",submit:"تحديث البيانات",resetPassword:"إعادة تعيين كلمة المرور"},changePasswordForm:{title:"تغيير كلمة المرور",currentPassword:"كلمة المرور الحالية",newPassword:"كلمة المرور الجديدة",confirmNewPassword:"تأكيد كلمة المرور الجديدة",submit:"تغيير كلمة المرور",cancel:"إلغاء",success:"تم تغيير كلمة المرور بنجاح",error:"فشل تغيير كلمة المرور",incorrectPassword:"كلمة المرور الحالية غير صحيحة",passwordsMismatch:"كلمة المرور الجديدة غير متطابقة مع التأكيد"},deleteConfirmation:"هل أنت متأكد من رغبتك في حذف هذا المستخدم؟ لا يمكن التراجع عن هذه العملية.",description:"إدارة حسابات مشرفي النظام ومشرفي المكتب والمعلمين",superadmins:"مشرفي النظام",administrators:"مشرفي المكتب",teachers:"المعلمين",addNewSuperadmin:"إضافة مشرف نظام جديد",addNewAdmin:"إضافة مشرف مكتب جديد",addNewteacher:"إضافة معلم جديد",loading:"جاري تحميل البيانات...",noSuperadmins:"لا يوجد مشرفي نظام حالياً",noAdmins:"لا يوجد مشرفي مكتب حالياً",noteachers:"لا يوجد معلمين حالياً",addSuperadminText:"يمكنك إضافة مشرف نظام جديد باستخدام زر الإضافة",addAdminText:"يمكنك إضافة مشرف مكتب جديد باستخدام زر الإضافة",addteacherText:"يمكنك إضافة معلم جديد باستخدام زر الإضافة",accessDenied:"غير مصرح بالوصول",accessDeniedMessage:"ليس لديك صلاحية للوصول إلى هذه الصفحة.",returnToHome:"العودة للصفحة الرئيسية",incompleteData:"بيانات غير مكتملة",incompleteDataMessage:"يرجى ملء جميع الحقول المطلوبة.",addSuccess:"تمت الإضافة بنجاح",addSuccessMessage:"تم إضافة المستخدم الجديد بنجاح.",addFailed:"فشلت عملية الإضافة",updateSuccess:"تم التحديث بنجاح",updateSuccessMessage:"تم تحديث بيانات المستخدم بنجاح.",updateFailed:"فشلت عملية التحديث",deleteSuccess:"تم الحذف بنجاح",deleteSuccessMessage:"تم حذف المستخدم بنجاح.",deleteFailed:"فشلت عملية الحذف",unexpectedError:"خطأ غير متوقع أثناء معالجة طلبك.",passwordKeep:"(اترك فارغاً للإبقاء على كلمة المرور الحالية)",enterPassword:"أدخل كلمة المرور",enterNewPassword:"أدخل كلمة المرور الجديدة (اختياري)",chooseRole:"اختر الدور",cancel:"إلغاء",saveChanges:"حفظ التغييرات",neverLoggedIn:"لم يسجل الدخول بعد",editTooltip:"تعديل",deleteTooltip:"حذف",changePasswordTooltip:"تغيير كلمة المرور",editText:"تعديل",deleteText:"حذف",changePasswordText:"تغيير كلمة المرور",adminEditRestriction:"فقط مدير يمكنه تعديل بيانات مشرفي المكتب",onlyMainAdminCanEdit:"فقط مدير يمكنه تعديل بيانات مشرفي المكتب",loadError:{title:"خطأ في تحميل البيانات",description:"حدث خطأ أثناء محاولة تحميل بيانات المستخدمين."},addUserError:"حدث خطأ أثناء إضافة المستخدم.",updateUserError:"حدث خطأ أثناء تحديث بيانات المستخدم.",deleteUserError:"حدث خطأ أثناء حذف المستخدم.",deleteConfirmationTitle:"تأكيد الحذف",deleteConfirmationMessage:"هل أنت متأكد من رغبتك في حذف هذا المستخدم؟ هذه العملية لا يمكن التراجع عنها.",confirm:"تأكيد",cannotEditSuperadmin:"لا يمكن تعديل بيانات مدير",cannotDeleteSuperadmin:"لا يمكن حذف مدير",teacherRestrictions:"المعلم يمكنه فقط تغيير كلمة المرور الخاصة به",teacherProfileTitle:"بياناتي الشخصية",teacherProfileDescription:"إدارة بياناتك الشخصية وكلمة المرور"},er={title:"إدارة قاعدة البيانات",backup:"نسخ احتياطي لقاعدة البيانات",restore:"استعادة قاعدة البيانات",backupHistory:"سجل النسخ الاحتياطي",createBackup:"إنشاء نسخة احتياطية جديدة",lastBackup:"آخر نسخة احتياطية",backupSize:"حجم النسخة الاحتياطية",backupDate:"تاريخ النسخة الاحتياطية",restoreFromFile:"استعادة من ملف",restoreFromServer:"استعادة من الخادم",deleteBackup:"حذف النسخة الاحتياطية",selectBackupFile:"اختر ملف النسخة الاحتياطية",databaseStatus:"حالة قاعدة البيانات",databaseSize:"حجم قاعدة البيانات",databaseLastUpdate:"آخر تحديث لقاعدة البيانات",tables:"الجداول",records:"السجلات",optimizeDatabase:"تحسين أداء قاعدة البيانات",backupInProgress:"جاري إنشاء نسخة احتياطية...",restoreInProgress:"جاري استعادة قاعدة البيانات...",backupSuccess:"تم إنشاء النسخة الاحتياطية بنجاح",restoreSuccess:"تم استعادة قاعدة البيانات بنجاح",confirmRestore:"هل أنت متأكد من رغبتك في استعادة قاعدة البيانات؟ سيتم استبدال البيانات الحالية.",functionNotAvailable:"هذه الوظيفة غير متاحة حاليًا",studentsImportProgress:e=>`تم قراءة ${e} طالب من الملف، جاري استيراد البيانات...`,studentsImportSuccess:"تم استيراد البيانات بنجاح",description:"أدوات لإدارة قاعدة البيانات المدمجة في التطبيق",databaseLabel:"قاعدة البيانات:",exportTitle:"تصدير البيانات",exportDescription:"تصدير بيانات الطلاب إلى ملف",exportJsonButton:"تصدير البيانات كملف JSON",importTitle:"استيراد البيانات",importDescription:"استيراد بيانات الطلاب من مصادر مختلفة",importJsonButton:"استيراد من ملف JSON",backupTitle:"النسخ الاحتياطي",backupDescription:"إنشاء نسخة احتياطية من قاعدة البيانات",createBackupButton:"إنشاء نسخة احتياطية",clearTitle:"خطير: مسح البيانات",clearDescription:"حذف جميع البيانات من قاعدة البيانات",clearButton:"مسح قاعدة البيانات",returnToStudentsButton:"العودة إلى قائمة الطلاب"},Ce={title:"إدارة أولياء الأمور",description:"إدارة بيانات أولياء أمور الطلاب",addGuardian:"إضافة ولي أمر جديد",editGuardian:"تعديل بيانات ولي أمر",deleteGuardian:"حذف ولي أمر",fullName:"الاسم الكامل",phoneNumber:"رقم الهاتف",email:"البريد الإلكتروني",address:"العنوان",actions:"إجراءات",searchPlaceholder:"البحث عن ولي أمر...",search:"بحث",cancel:"إلغاء",save:"حفظ",delete:"حذف",confirm:"تأكيد",loading:"جاري التحميل...",noGuardians:"لا يوجد أولياء أمور",addGuardianPrompt:"قم بإضافة ولي أمر جديد باستخدام زر الإضافة",optionalField:"(اختياري)",deleteConfirmation:"هل أنت متأكد من رغبتك في حذف هذا الولي؟",deleteDescription:"سيتم حذف جميع البيانات المرتبطة بهذا الولي.",unexpectedError:"حدث خطأ غير متوقع",incompleteData:"بيانات غير مكتملة",incompleteDataMessage:"يرجى ملء جميع الحقول المطلوبة",accessDenied:"غير مصرح بالوصول",accessDeniedMessage:"ليس لديك الصلاحيات اللازمة للوصول إلى هذه الصفحة",returnToHome:"العودة إلى الصفحة الرئيسية",deleteSuccess:"تم حذف ولي الأمر بنجاح",editSuccess:"تم تعديل بيانات ولي الأمر بنجاح",addSuccess:"تم إضافة ولي الأمر بنجاح",addGuardianDescription:"أدخل بيانات ولي الأمر الجديد",editGuardianDescription:"قم بتعديل بيانات ولي الأمر",deleteTooltip:"حذف ولي الأمر",noSearchResults:"لا توجد نتائج للبحث",tryAnotherSearch:"حاول تغيير كلمات البحث أو استخدام مصطلحات مختلفة",requiredField:"* حقل مطلوب",updateSuccess:"تم تحديث بيانات ولي الأمر بنجاح",editTooltip:"تعديل",viewTooltip:"عرض",filters:"تصفية",export:"تصدير",refresh:"تحديث",totalGuardians:"إجمالي أولياء الأمور",showing:"عرض",from:"من أصل",guardian:"ولي أمر",studentCount:"عدد الطلاب"},at={title:"إدارة الحلقات الدراسية",description:"إدارة الحلقات الدراسية وتعيين المعلمين والطلاب",name:"اسم الحلقة",teacher:"المعلم المسؤول",location:"المكان",schedule:"الجدول الزمني",maxStudents:"الحد الأقصى للطلاب",addCircle:"إضافة حلقة جديدة",editCircle:"تعديل الحلقة",deleteCircle:"حذف الحلقة",viewStudents:"عرض الطلاب",noCircles:"لا توجد حلقات دراسية",addCirclePrompt:"إضافة حلقة دراسية جديدة",incompleteData:"بيانات غير مكتملة",incompleteDataMessage:"يرجى ملء جميع الحقول الإلزامية",addSuccess:"تم إنشاء الحلقة بنجاح",updateSuccess:"تم تحديث الحلقة بنجاح",deleteSuccess:"تم حذف الحلقة بنجاح",confirmDelete:"هل أنت متأكد من حذف هذه الحلقة؟",addForm:{title:"إضافة حلقة دراسية جديدة",submit:"إضافة"},editForm:{title:"تعديل بيانات الحلقة",submit:"حفظ التغييرات"},editTooltip:"تعديل الحلقة",deleteTooltip:"حذف الحلقة",viewStudentsTooltip:"عرض طلاب الحلقة",loading:"جاري تحميل الحلقات...",selectTeacher:"اختر المعلم",enterNumber:"أدخل رقمًا",noTeachers:"لا يوجد معلمين متاحين",cancel:"إلغاء"};function fv({onLogin:e,onNavigate:t}){const[r,n]=h.useState(""),[a,i]=h.useState(""),[o,l]=h.useState(!1),[c,d]=h.useState(!1),{toast:u}=_n(),[f,m]=h.useState(!1);h.useState(""),h.useState(""),h.useState(""),h.useState(""),h.useState(!1),h.useState(!1),h.useState(!1),h.useState(!1);const v=async x=>{if(x.preventDefault(),!r||!a){u({title:Ie.dataError,description:Ie.missingCredentials,variant:"destructive"});return}d(!0);try{const g=await dA({username:r,password:a});g.success&&g.user?(u({title:Em.loginSuccess,description:Em.welcome(g.user.full_name)}),e(g.user),t("/")):u({title:Ie.loginFailed,description:g.message||Ie.invalidCredentials,variant:"destructive"})}catch(g){console.error("Login error:",g),u({title:Ie.generalError,description:Ie.loginError,variant:"destructive"})}finally{d(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-b from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 bg-cover bg-center",style:{backgroundImage:"url('/src/assets/quran-hero.jpg')"},children:s.jsx("div",{className:"w-full max-w-sm",children:s.jsxs(nt,{className:"border border-islamic-green/20 shadow-xl rounded-2xl backdrop-blur-sm bg-white/90 dark:bg-gray-900/80",children:[s.jsxs(ut,{className:"text-center space-y-2 pb-2",children:[s.jsx("div",{className:"flex justify-center mb-2",children:s.jsx("img",{src:M1,alt:"مكتب آية",className:"h-20 w-auto rounded-md"})}),s.jsx(dt,{className:"text-xl font-bold text-islamic-green",children:Cn.title}),s.jsx(Dt,{className:"text-sm text-muted-foreground",children:Cn.description})]}),s.jsxs(Ze,{className:"space-y-4 pt-3",children:[s.jsxs("form",{onSubmit:v,className:"space-y-4",dir:"rtl",children:[s.jsxs("div",{className:"p-6 rounded-2xl shadow-xl border border-blue-100 dark:border-gray-700 w-full max-w-md mx-auto space-y-4 relative overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.3)",backdropFilter:"blur(10px)",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"100px 100px"},children:[s.jsx("div",{className:"absolute inset-0 bg-white/20 dark:bg-gray-900/30 rounded-2xl pointer-events-none"}),s.jsxs("div",{className:"relative space-y-4 z-10",children:[s.jsxs("div",{className:"grid gap-1",children:[s.jsx(ee,{htmlFor:"username",className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:Cn.username}),s.jsx(me,{id:"username",placeholder:Cn.usernamePrompt,value:r,onChange:x=>n(x.target.value),dir:"rtl",className:"w-full text-right border border-islamic-green/30 dark:border-gray-600 dark:bg-gray-800 dark:text-white rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-islamic-green/40 focus:border-islamic-green transition-all duration-200 shadow-sm"})]}),s.jsxs("div",{className:"grid gap-1 relative",children:[s.jsx(ee,{htmlFor:"password",className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:Cn.password}),s.jsx(me,{id:"password",type:o?"text":"password",placeholder:Cn.passwordPrompt,value:a,onChange:x=>i(x.target.value),dir:"rtl",className:"w-full text-right border border-islamic-green/30 dark:border-gray-600 dark:bg-gray-800 dark:text-white rounded-lg px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-2 focus:ring-islamic-green/40 focus:border-islamic-green transition-all duration-200 shadow-sm"}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-300 hover:text-islamic-green transition-colors",children:o?s.jsx(gl,{size:16}):s.jsx(pl,{size:16})})]})]})]}),s.jsx(V,{type:"submit",className:"w-full py-2 text-sm font-semibold bg-gradient-to-r from-islamic-green to-accent text-white rounded-lg shadow hover:from-islamic-green/90 hover:to-accent/90 transition-all duration-200",disabled:c,children:c?Cn.loginInProgress:Cn.login})]}),s.jsxs("div",{className:"bg-muted p-2 rounded-lg text-xs text-right border border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"font-medium text-islamic-green mb-1",children:Cn.loginInfoTitle}),s.jsxs("div",{className:"space-y-0.5 text-muted-foreground",children:[s.jsx("p",{children:Cn.loginInfoMessage1}),s.jsx("p",{children:Cn.loginInfoMessage2})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mt-4 gap-2 text-sm",children:[s.jsxs(V,{variant:"outline",onClick:()=>t("/"),className:"flex-1 flex items-center justify-center gap-2 border-islamic-green text-islamic-green hover:bg-islamic-green/10 hover:scale-105 transition-transform duration-150 rounded-lg px-3 py-2",children:[s.jsx(Fw,{className:"h-4 w-4"})," ","العودة للصفحة الرئيسية"]}),s.jsxs(V,{variant:"outline",onClick:()=>m(!0),className:"flex-1 flex items-center justify-center gap-2 border-amber-600 text-amber-600 hover:bg-amber-100 hover:scale-105 transition-transform duration-150 rounded-lg px-3 py-2",children:[s.jsx(zw,{className:"h-4 w-4"})," ","تغيير كلمة المرور"]})]})]})]})})})}const pA=pc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-islamic-green",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-islamic-green",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground hover:bg-islamic-green hover:text-white hover:border-transparent"}},defaultVariants:{variant:"default"}});function it({className:e,variant:t,...r}){return s.jsx("div",{className:_e(pA({variant:t}),e),...r})}function xA(e,t=[]){let r=[];function n(i,o){const l=h.createContext(o),c=r.length;r=[...r,o];function d(f){const{scope:m,children:v,...x}=f,g=(m==null?void 0:m[e][c])||l,b=h.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:b,children:v})}function u(f,m){const v=(m==null?void 0:m[e][c])||l,x=h.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(o=>h.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,vA(a,...t)]}function vA(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var yA=h.createContext(void 0);function x0(e){const t=h.useContext(yA);return e||t||"ltr"}var nf="rovingFocusGroup.onEntryFocus",bA={bubbles:!1,cancelable:!0},Zu="RovingFocusGroup",[Tm,qj,wA]=Mg(Zu),[jA,Gj]=xA(Zu,[wA]),[_A,NA]=jA(Zu),Kj=h.forwardRef((e,t)=>s.jsx(Tm.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Tm.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(SA,{...e,ref:t})})}));Kj.displayName=Zu;var SA=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=e,m=h.useRef(null),v=ft(t,m),x=x0(i),[g=null,b]=ci({prop:o,defaultProp:l,onChange:c}),[y,p]=h.useState(!1),w=Gr(d),S=qj(r),C=h.useRef(!1),[T,O]=h.useState(0);return h.useEffect(()=>{const $=m.current;if($)return $.addEventListener(nf,w),()=>$.removeEventListener(nf,w)},[w]),s.jsx(_A,{scope:r,orientation:n,dir:x,loop:a,currentTabStopId:g,onItemFocus:h.useCallback($=>b($),[b]),onItemShiftTab:h.useCallback(()=>p(!0),[]),onFocusableItemAdd:h.useCallback(()=>O($=>$+1),[]),onFocusableItemRemove:h.useCallback(()=>O($=>$-1),[]),children:s.jsx(Ke.div,{tabIndex:y||T===0?-1:0,"data-orientation":n,...f,ref:v,style:{outline:"none",...e.style},onMouseDown:Te(e.onMouseDown,()=>{C.current=!0}),onFocus:Te(e.onFocus,$=>{const Q=!C.current;if($.target===$.currentTarget&&Q&&!y){const K=new CustomEvent(nf,bA);if($.currentTarget.dispatchEvent(K),!K.defaultPrevented){const A=S().filter(D=>D.focusable),_=A.find(D=>D.active),I=A.find(D=>D.id===g),k=[_,I,...A].filter(Boolean).map(D=>D.ref.current);Jj(k,u)}}C.current=!1}),onBlur:Te(e.onBlur,()=>p(!1))})})}),Yj="RovingFocusGroupItem",Qj=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,...o}=e,l=Ss(),c=i||l,d=NA(Yj,r),u=d.currentTabStopId===c,f=qj(r),{onFocusableItemAdd:m,onFocusableItemRemove:v}=d;return h.useEffect(()=>{if(n)return m(),()=>v()},[n,m,v]),s.jsx(Tm.ItemSlot,{scope:r,id:c,focusable:n,active:a,children:s.jsx(Ke.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Te(e.onMouseDown,x=>{n?d.onItemFocus(c):x.preventDefault()}),onFocus:Te(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Te(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const g=EA(x,d.orientation,d.dir);if(g!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let y=f().filter(p=>p.focusable).map(p=>p.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const p=y.indexOf(x.currentTarget);y=d.loop?TA(y,p+1):y.slice(p+1)}setTimeout(()=>Jj(y))}})})})});Qj.displayName=Yj;var kA={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function CA(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function EA(e,t,r){const n=CA(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return kA[n]}function Jj(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function TA(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var PA=Kj,OA=Qj,v0="Tabs",[AA,QD]=bi(v0,[Gj]),Xj=Gj(),[DA,y0]=AA(v0),Zj=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=x0(l),[f,m]=ci({prop:n,onChange:a,defaultProp:i});return s.jsx(DA,{scope:r,baseId:Ss(),value:f,onValueChange:m,orientation:o,dir:u,activationMode:c,children:s.jsx(Ke.div,{dir:u,"data-orientation":o,...d,ref:t})})});Zj.displayName=v0;var e_="TabsList",t_=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=y0(e_,r),o=Xj(r);return s.jsx(PA,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Ke.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});t_.displayName=e_;var r_="TabsTrigger",n_=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=y0(r_,r),l=Xj(r),c=i_(o.baseId,n),d=o_(o.baseId,n),u=n===o.value;return s.jsx(OA,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(Ke.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Te(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:Te(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:Te(e.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!a&&f&&o.onValueChange(n)})})})});n_.displayName=r_;var s_="TabsContent",a_=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=y0(s_,r),c=i_(l.baseId,n),d=o_(l.baseId,n),u=n===l.value,f=h.useRef(u);return h.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Fs,{present:a||u,children:({present:m})=>s.jsx(Ke.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});a_.displayName=s_;function i_(e,t){return`${e}-trigger-${t}`}function o_(e,t){return`${e}-content-${t}`}var RA=Zj,l_=t_,c_=n_,d_=a_;const Do=RA,hi=h.forwardRef(({className:e,...t},r)=>s.jsx(l_,{ref:r,className:_e("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));hi.displayName=l_.displayName;const ur=h.forwardRef(({className:e,...t},r)=>s.jsx(c_,{ref:r,className:_e("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ur.displayName=c_.displayName;const on=h.forwardRef(({className:e,...t},r)=>s.jsx(d_,{ref:r,className:_e("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));on.displayName=d_.displayName;const Ro=async()=>{try{console.log("بدء استرجاع جميع الطلاب مع العلاقات...");const{data:e,error:t}=await le.from(Kr).select(`
        *,
        guardian:guardian_id (*),
        study_circle:study_circle_id (
          *,
          teacher:teacher_id (*)
        )
      `).is("deleted_at",null).order("created_at",{ascending:!1});if(t)throw console.error("خطأ في استرجاع الطلاب من Supabase:",t),new Error(t.message);e&&e.length>0?(console.log("تم استرجاع",e.length,"طالب"),console.log("مثال على بيانات أول طالب:",{id:e[0].id,full_name:e[0].full_name,has_guardian:!!e[0].guardian,has_teacher:!!e[0].teacher})):console.log("لم يتم العثور على طلاب في قاعدة البيانات");const r=Ju(e||[]);return console.log("تم تحويل البيانات بنجاح، عدد الطلاب:",r.length),r}catch(e){return console.error("خطأ في استرجاع الطلاب:",e),[]}},IA=async e=>{try{const{data:t,error:r}=await le.from(Kr).select("*").eq("id",e).single();return r?(console.error("خطأ في استرجاع الطالب من Supabase:",r),null):t?g0(t):null}catch(t){return console.error("خطأ في استرجاع الطالب:",t),null}},u_=async e=>{try{console.log("Received student data in addStudent:",e);const{data:t,error:r}=await le.from("students").insert({full_name:e.full_name,guardian_id:e.guardian_id,grade_level:e.grade_level,date_of_birth:e.date_of_birth,phone_number:e.phone_number,email:e.email,memorized_parts:e.memorized_parts,notes:e.notes,study_circle_id:e.study_circle_id}).select();return r?(console.error("Error adding student:",r),{success:!1,message:r.message}):{success:!0,data:t[0]}}catch(t){return console.error("Unexpected error in addStudent:",t),{success:!1,message:"حدث خطأ غير متوقع"}}},MA=async e=>{try{if(!e.id)return{success:!1,message:"معرف الطالب مطلوب للتحديث"};const t={...e,updated_at:new Date().toISOString()};console.log("تحديث بيانات الطالب في Supabase:",t);const{error:r}=await Rt.from(Kr).update(t).eq("id",e.id);return r?(console.error("خطأ في تحديث بيانات الطالب في Supabase:",r),{success:!1,message:`فشل في تحديث بيانات الطالب: ${r.message}`}):{success:!0,message:"تم تحديث بيانات الطالب بنجاح"}}catch(t){return console.error("خطأ في تحديث بيانات الطالب:",t),{success:!1,message:"حدث خطأ أثناء تحديث بيانات الطالب"}}},h_=async e=>{try{const{error:t}=await Rt.from(Kr).delete().eq("id",e);return t?(console.error("خطأ في حذف الطالب من Supabase:",t),{success:!1,message:`فشل في حذف الطالب: ${t.message}`}):{success:!0,message:"تم حذف الطالب بنجاح"}}catch(t){return console.error("خطأ في حذف الطالب:",t),{success:!1,message:"حدث خطأ أثناء حذف الطالب"}}},Li=async e=>{var t;try{console.log("بدء البحث عن الطلاب باستخدام المعايير:",JSON.stringify(e,null,2));let r=le.from(Kr).select(`
        *,
        guardian:guardian_id (*),
        study_circle:study_circle_id (*, teacher:teacher_id (*))
      `).is("deleted_at",null);const n={full_name:"full_name",guardian_id:"guardian_id",study_circle_id:"study_circle_id",teacher_id:"study_circles.teacher_id",date_of_birth:"date_of_birth",gender:"gender",phone_number:"phone_number",email:"email",enrollment_date:"enrollment_date",grade_level:"grade_level"};if(Object.keys(e).forEach(l=>{(e[l]===""||e[l]===null||e[l]===void 0||e[l]==="all")&&(console.log(`حذف معيار البحث ${l} لأنه فارغ أو "الكل"`),delete e[l])}),e.study_circle_ids&&Array.isArray(e.study_circle_ids)&&e.study_circle_ids.length>0){const l=e.study_circle_ids.filter(c=>c&&c!=="all"&&c!=="");l.length>0?(console.log("البحث عن الطلاب باستخدام معرفات الحلقات الدراسية:",l),r=r.in("study_circle_id",l)):console.log('تم تجاهل معرفات الحلقات الدراسية لأنها فارغة أو تحتوي على "الكل"'),delete e.study_circle_ids}if(e.study_circle_id&&(e.study_circle_id!=="all"&&e.study_circle_id!==""?(console.log("البحث عن الطلاب باستخدام معرف الحلقة الدراسية:",e.study_circle_id),r=r.eq("study_circle_id",e.study_circle_id)):console.log('تم تجاهل معرف الحلقة الدراسية لأنه "الكل" أو فارغ'),delete e.study_circle_id),e.teacher_id){console.log("البحث عن الطلاب باستخدام معرف المعلم:",e.teacher_id);const{data:l,error:c}=await le.from("study_circles").select("id, name").eq("teacher_id",e.teacher_id).is("deleted_at",null);if(c)return console.error("خطأ في استرجاع الحلقات الدراسية للمعلم:",c),[];if(l&&l.length>0){const d=l.map(u=>u.id);console.log(`تم العثور على ${l.length} حلقة دراسية للمعلم:`,l.map(u=>`${u.name} (${u.id})`)),console.log("معرفات الحلقات الدراسية للمعلم:",d),r=r.in("study_circle_id",d)}else return console.log("لم يتم العثور على حلقات دراسية للمعلم المحدد"),[];delete e.teacher_id}Object.entries(e).forEach(([l,c])=>{if(c&&n[l]){const d=n[l];typeof c=="string"?(console.log(`إضافة معيار بحث نصي: ${l} = ${c} (عمود: ${d})`),r=r.ilike(d,`%${c}%`)):(console.log(`إضافة معيار بحث دقيق: ${l} = ${c} (عمود: ${d})`),r=r.eq(d,c))}else c&&console.log(`تجاهل معيار البحث "${l}" لأنه غير معرف في fieldMappings:`,c)});const{data:a,error:i}=await r;if(i)return console.error("خطأ في البحث عن الطلاب في Supabase:",i),[];if(console.log(`تم العثور على ${a?a.length:0} طالب`),a&&a.length>0){const l=a.map(u=>u.study_circle_id).filter(Boolean),c=[...new Set(l)];console.log(`الطلاب ينتمون إلى ${c.length} حلقة دراسية مختلفة:`,c);const d=Math.min(3,a.length);for(let u=0;u<d;u++){const f=a[u];console.log(`طالب عينة ${u+1}:`,{id:f.id,name:f.full_name,study_circle_id:f.study_circle_id,study_circle_name:((t=f.study_circle)==null?void 0:t.name)||"غير محدد"})}}const o=Ju(a||[]);return console.log("إكمال البحث وإعادة النتائج"),o}catch(r){return console.error("خطأ في البحث عن الطلاب:",r),[]}},$A=async e=>{try{const{data:t,error:r}=await le.from(Kr).select("*").eq("current_teacher_id",e);return r?(console.error("خطأ في استرجاع طلاب المعلم:",r),[]):Ju(t||[])}catch(t){return console.error("خطأ في استرجاع طلاب المعلم:",t),[]}},LA=async e=>{try{console.log("بدء استرجاع الطلاب للمعلم بالمعرف:",e);const{data:t,error:r}=await le.from("students").select(`
        *,
        guardian:guardian_id (*),
        teacher:current_teacher_id (*)
      `).eq("current_teacher_id",e).is("deleted_at",null).order("created_at",{ascending:!1});if(r)throw console.error("خطأ في استرجاع الطلاب حسب المعلم:",r),new Error(r.message);console.log("تم استرجاع بيانات الطلاب للمعلم، العدد:",t?t.length:0),t&&t.length>0&&console.log("مثال على بيانات أول طالب:",{id:t[0].id,full_name:t[0].full_name,has_guardian:!!t[0].guardian,has_teacher:!!t[0].teacher});const n=t.map(a=>({id:a.id,full_name:a.full_name,guardian_id:a.guardian_id,current_teacher_id:a.current_teacher_id,grade_level:a.grade_level,grade:a.grade_level,gender:a.gender,date_of_birth:a.date_of_birth,phone_number:a.phone_number,email:a.email,enrollment_date:a.enrollment_date,memorized_parts:a.memorized_parts,created_at:a.created_at,updated_at:a.updated_at,guardian:a.guardian||null,teacher:a.teacher||null}));return console.log("تم تنسيق بيانات الطلاب للمعلم، العدد النهائي:",n.length),n}catch(t){return console.error("خطأ غير متوقع في getStudentsByteacherId:",t),[]}},FA=async e=>{try{const{data:t,error:r}=await le.from(Kr).select(`
        *,
        guardians:guardian_id (full_name, phone_number),
        profiles:current_teacher_id (full_name)
      `).eq("id",e).single();return r?(console.error("خطأ في استرجاع بيانات الطالب مع العلاقات:",r),null):t?{...g0(t),guardian:t.guardians?{full_name:t.guardians.full_name,phone_number:t.guardians.phone_number}:void 0,teacher:t.profiles?{full_name:t.profiles.full_name}:void 0}:null}catch(t){return console.error("خطأ في استرجاع بيانات الطالب مع العلاقات:",t),null}},zA=async e=>{try{console.log("التحقق من وجود طالب مكرر:",{full_name:e.full_name,phone_number:e.phone_number});let t=le.from(Kr).select("*").ilike("full_name",e.full_name);e.phone_number&&(t=t.eq("phone_number",e.phone_number));const{data:r,error:n}=await t;return n?(console.error("خطأ في التحقق من وجود طالب مكرر:",n),!1):(console.log("نتيجة التحقق من التكرار:",r),r&&r.length>0)}catch(t){return console.error("خطأ في التحقق من وجود طالب مكرر:",t),!1}},BA=async e=>{try{if(!Array.isArray(e)||e.length===0)return{success:!0,count:0,message:"لا توجد بيانات للاستيراد"};const t=e.map((a,i)=>Vj({...a,id:a.id||`imported-${Date.now()}-${i}`})),{data:r,error:n}=await Rt.from(Kr).insert(t);return n?(console.error("خطأ في استيراد البيانات إلى Supabase:",n),{success:!1,count:0,message:`فشل في استيراد البيانات: ${n.message}`}):{success:!0,count:t.length,message:`تم استيراد ${t.length} طالب بنجاح`}}catch(t){return console.error("خطأ في استيراد البيانات:",t),{success:!1,count:0,message:"حدث خطأ أثناء استيراد البيانات"}}},f_=async e=>{var t,r,n,a;try{console.log("بدء استرجاع بيانات الطلاب لولي الأمر بالمعرف:",e);const{data:i,error:o}=await le.from(Kr).select(`
        *,
        guardian:guardian_id (*),
        study_circle:study_circle_id (
          *,
          teacher:teacher_id (*)
        )
      `).eq("guardian_id",e).is("deleted_at",null).order("created_at",{ascending:!1});return o?(console.error("خطأ في استرجاع بيانات الطلاب لولي الأمر:",o),[]):(console.log(`تم استرجاع ${(i==null?void 0:i.length)||0} طالب لولي الأمر`),i&&i.length>0&&console.log("مثال على بيانات أول طالب:",{id:i[0].id,full_name:i[0].full_name,has_circle:!!i[0].study_circle,circle_name:((t=i[0].study_circle)==null?void 0:t.name)||"غير محدد",has_teacher:!!((r=i[0].study_circle)!=null&&r.teacher),teacher_name:((a=(n=i[0].study_circle)==null?void 0:n.teacher)==null?void 0:a.full_name)||"غير محدد"}),Ju(i||[]).map(c=>{var u;const d=(i==null?void 0:i.find(f=>f.id===c.id))||{};return{...c,guardian:d.guardian?{full_name:d.guardian.full_name,phone_number:d.guardian.phone_number}:void 0,teacher:(u=d.study_circle)!=null&&u.teacher?{full_name:d.study_circle.teacher.full_name}:void 0,study_circle:d.study_circle?{id:d.study_circle.id,name:d.study_circle.name}:void 0}}))}catch(i){return console.error("خطأ في استرجاع بيانات الطلاب لولي الأمر:",i),[]}},b0=async()=>{try{const e=await Ro();return e.length===0?{success:!1,message:"لا توجد بيانات للتصدير"}:{success:!0,data:JSON.stringify(e,null,2),message:`تم تصدير ${e.length} طالب بنجاح`}}catch(e){return console.error("خطأ في تصدير البيانات:",e),{success:!1,message:"حدث خطأ أثناء تصدير البيانات"}}},UA=Object.freeze(Object.defineProperty({__proto__:null,addStudent:u_,deleteStudent:h_,exportToJson:b0,getAllStudents:Ro,getStudentById:IA,getStudentWithRelations:FA,getStudentsByGuardianId:f_,getStudentsByteacher:$A,getStudentsByteacherId:LA,importDataToSupabase:BA,isStudentDuplicate:zA,searchStudents:Li,updateStudent:MA},Symbol.toStringTag,{value:"Module"}));var w0="Dialog",[m_,g_]=bi(w0),[WA,Kn]=m_(w0),p_=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=h.useRef(null),c=h.useRef(null),[d=!1,u]=ci({prop:n,defaultProp:a,onChange:i});return s.jsx(WA,{scope:t,triggerRef:l,contentRef:c,contentId:Ss(),titleId:Ss(),descriptionId:Ss(),open:d,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(f=>!f),[u]),modal:o,children:r})};p_.displayName=w0;var x_="DialogTrigger",v_=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Kn(x_,r),i=ft(t,a.triggerRef);return s.jsx(Ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":N0(a.open),...n,ref:i,onClick:Te(e.onClick,a.onOpenToggle)})});v_.displayName=x_;var j0="DialogPortal",[VA,y_]=m_(j0,{forceMount:void 0}),b_=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Kn(j0,t);return s.jsx(VA,{scope:t,forceMount:r,children:h.Children.map(n,o=>s.jsx(Fs,{present:r||i.open,children:s.jsx(mc,{asChild:!0,container:a,children:o})}))})};b_.displayName=j0;var lu="DialogOverlay",w_=h.forwardRef((e,t)=>{const r=y_(lu,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Kn(lu,e.__scopeDialog);return i.modal?s.jsx(Fs,{present:n||i.open,children:s.jsx(HA,{...a,ref:t})}):null});w_.displayName=lu;var HA=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Kn(lu,r);return s.jsx(h0,{as:Na,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Ke.div,{"data-state":N0(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),fi="DialogContent",j_=h.forwardRef((e,t)=>{const r=y_(fi,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Kn(fi,e.__scopeDialog);return s.jsx(Fs,{present:n||i.open,children:i.modal?s.jsx(qA,{...a,ref:t}):s.jsx(GA,{...a,ref:t})})});j_.displayName=fi;var qA=h.forwardRef((e,t)=>{const r=Kn(fi,e.__scopeDialog),n=h.useRef(null),a=ft(t,r.contentRef,n);return h.useEffect(()=>{const i=n.current;if(i)return u0(i)},[]),s.jsx(__,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Te(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Te(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Te(e.onFocusOutside,i=>i.preventDefault())})}),GA=h.forwardRef((e,t)=>{const r=Kn(fi,e.__scopeDialog),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(__,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),__=h.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Kn(fi,r),c=h.useRef(null),d=ft(t,c);return d0(),s.jsxs(s.Fragment,{children:[s.jsx(Gu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Lo,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":N0(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(YA,{titleId:l.titleId}),s.jsx(JA,{contentRef:c,descriptionId:l.descriptionId})]})]})}),_0="DialogTitle",N_=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Kn(_0,r);return s.jsx(Ke.h2,{id:a.titleId,...n,ref:t})});N_.displayName=_0;var S_="DialogDescription",k_=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Kn(S_,r);return s.jsx(Ke.p,{id:a.descriptionId,...n,ref:t})});k_.displayName=S_;var C_="DialogClose",E_=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Kn(C_,r);return s.jsx(Ke.button,{type:"button",...n,ref:t,onClick:Te(e.onClick,()=>a.onOpenChange(!1))})});E_.displayName=C_;function N0(e){return e?"open":"closed"}var T_="DialogTitleWarning",[KA,P_]=uC(T_,{contentName:fi,titleName:_0,docsSlug:"dialog"}),YA=({titleId:e})=>{const t=P_(T_),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},QA="DialogDescriptionWarning",JA=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${P_(QA).contentName}}.`;return h.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},O_=p_,XA=v_,A_=b_,S0=w_,k0=j_,C0=N_,E0=k_,T0=E_;const St=O_,ZA=A_,D_=h.forwardRef(({className:e,...t},r)=>s.jsx(S0,{ref:r,className:_e("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));D_.displayName=S0.displayName;const yt=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(ZA,{children:[s.jsx(D_,{}),s.jsxs(k0,{ref:n,className:_e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(T0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Pu,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yt.displayName=k0.displayName;const Pt=({className:e,...t})=>s.jsx("div",{className:_e("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Pt.displayName="DialogHeader";const bt=({className:e,...t})=>s.jsx("div",{className:_e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});bt.displayName="DialogFooter";const Ot=h.forwardRef(({className:e,...t},r)=>s.jsx(C0,{ref:r,className:_e("text-lg font-semibold leading-none tracking-tight",e),...t}));Ot.displayName=C0.displayName;const Ur=h.forwardRef(({className:e,...t},r)=>s.jsx(E0,{ref:r,className:_e("text-sm text-muted-foreground",e),...t}));Ur.displayName=E0.displayName;const Rs=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:_e("w-full caption-bottom text-sm border border-islamic-green/20",e),...t})}));Rs.displayName="Table";const Is=h.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:_e("[&_tr]:border-b bg-islamic-green/25",e),...t}));Is.displayName="TableHeader";const Ms=h.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:_e("[&_tr:last-child]:border-0 [&_tr:hover]:bg-islamic-green/5",e),...t}));Ms.displayName="TableBody";const e7=h.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:_e("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));e7.displayName="TableFooter";const nr=h.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:_e("border-b border-islamic-green/10 transition-colors hover:bg-islamic-green/5 data-[state=selected]:bg-islamic-green/10",e),...t}));nr.displayName="TableRow";const Be=h.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:_e("h-12 px-4 text-right align-middle font-bold text-islamic-green [&:has([role=checkbox])]:pr-0",e),...t}));Be.displayName="TableHead";const Fe=h.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:_e("p-4 align-middle [&:has([role=checkbox])]:pr-0 text-islamic-green/80",e),...t}));Fe.displayName="TableCell";const t7=h.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:_e("mt-4 text-sm text-muted-foreground",e),...t}));t7.displayName="TableCaption";function ds({data:e,columns:t,emptyMessage:r="لا توجد بيانات",className:n="",rowClassName:a="",getRowClassName:i}){return s.jsx("div",{className:"border border-green-200 dark:border-green-700 rounded-2xl overflow-hidden shadow-md",children:s.jsxs(Rs,{className:"direction-rtl w-full border-collapse",children:[s.jsx(Is,{className:"bg-gradient-to-b from-green-800 via-green-600 to-green-300 dark:from-green-900 dark:via-green-800 dark:to-green-500",children:s.jsx(nr,{children:t.map(o=>s.jsx(Be,{className:`text-${o.align==="center"?"center":o.align==="left"?"left":"right"} font-bold text-white py-3 px-4 border-r border-green-600 dark:border-green-800`,style:{width:o.width},children:o.header},o.key))})}),s.jsx(Ms,{children:e.length>0?e.map((o,l)=>s.jsx(nr,{className:"odd:bg-green-50 even:bg-white dark:odd:bg-green-800 dark:even:bg-green-900 hover:bg-green-100 dark:hover:bg-green-700 transition-colors duration-200 border-b border-green-200 dark:border-green-700",children:t.map(c=>s.jsx(Fe,{className:`text-${c.align==="center"?"center":c.align==="left"?"left":"right"} py-3 px-4 font-medium text-green-900 dark:text-green-200 border-r border-green-200 dark:border-green-700`,children:c.render?c.render(o):o[c.key]?s.jsx("span",{children:o[c.key]}):s.jsx("span",{className:"text-green-600 dark:text-green-400 italic",children:"-"})},`${o.id}-${c.key}`))},o.id)):s.jsx(nr,{children:s.jsx(Fe,{colSpan:t.length,className:"text-center py-10",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx(Yt,{className:"h-8 w-8 text-green-300 mb-2"}),s.jsx("p",{className:"text-green-600 dark:text-green-400",children:r||"لا توجد بيانات"})]})})})})]})})}function r7({onNavigate:e}){const[t,r]=h.useState(""),[n,a]=h.useState([]),[i,o]=h.useState(null),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[f,m]=h.useState(null),[v,x]=h.useState(null),[g,b]=h.useState([]),[y,p]=h.useState(!1),w=async j=>{var k,D;try{m(null),console.log("البحث عن ولي الأمر برقم الهاتف:",j);const z=j.replace(/\s+/g,"").trim();console.log("البحث المباشر برقم الهاتف:",z);let M=null,B=null;const X=await le.from("guardians").select("id, full_name, phone_number, email").eq("phone_number",z).limit(1);if(X.data&&X.data.length>0?(M=X.data,B=X.error,console.log("تم العثور على ولي أمر بنجاح"),console.log("بيانات ولي الأمر:",X.data[0]),o({id:X.data[0].id,fullName:X.data[0].full_name,phoneNumber:X.data[0].phone_number,email:X.data[0].email})):(o(null),console.log("لم يتم العثور على ولي أمر بهذا الرقم")),B)return console.error("خطأ في البحث عن ولي الأمر:",B),[];if(!M||M.length===0)return console.error("لم يتم العثور على ولي أمر بهذا الرقم:",z),[];const J=M[0].id,L=await f_(J);if(!L||L.length===0)return[];const ne=[];for(const ae of L){const{data:Z,error:se}=await le.from("assessments").select(`
                        id, 
                        date, 
                        memorization_score, 
                        recitation_score, 
                        tajweed_score,
                        recorded_by,
                        profiles:recorded_by(full_name)
                    `).eq("student_id",ae.id).order("date",{ascending:!1}).limit(10);se&&console.error("خطأ في استرجاع بيانات التقييم:",se),console.log("🧪 بيانات التقييم للطالب:",ae.full_name,"معرف الطالب:",ae.id,"هل هناك بيانات؟",!!Z&&Z.length>0,"عدد السجلات:",(Z==null?void 0:Z.length)||0,Z);const{data:re,error:ye}=await le.from("attendance").select(`
                        id,
                        circle_session_id,
                        student_id,
                        status,
                        note,
                        recorded_at,
                        recorded_by,
                        circle_session:circle_session_id(id, session_date),
                        profiles:recorded_by(full_name)
                    `).eq("student_id",ae.id).order("recorded_at",{ascending:!1}).limit(10);ye&&console.error("خطأ في استرجاع سجلات الحضور:",ye),console.log("سجلات الحضور للطالب:",ae.full_name,re);const{data:je,error:q}=await le.from("teacher_notes").select("id, date, note, type").eq("student_id",ae.id).order("date",{ascending:!1}).limit(10);let Y=(Z==null?void 0:Z.map(W=>(console.log("تحويل التقييم:",W),{id:W.id||`temp-${Math.random()}`,studentName:ae.full_name,date:W.date,memorization:Number(W.memorization_score)||0,recitation:Number(W.recitation_score)||0,tajweed:Number(W.tajweed_score)||0,recordedBy:W.profiles?W.profiles.full_name:"غير معروف"})))||[];Y.length===0&&(console.log("🔄 إضافة بيانات تجريبية للتقييم للطالب:",ae.full_name),Y=[{id:`test-1-${ae.id}`,studentName:ae.full_name,date:new Date().toISOString().split("T")[0],memorization:85,recitation:90,tajweed:80,recordedBy:"اختبار"},{id:`test-2-${ae.id}`,studentName:ae.full_name,date:new Date(Date.now()-7*24*60*60*1e3).toISOString().split("T")[0],memorization:75,recitation:80,tajweed:70,recordedBy:"اختبار"}]),console.log("✅ الدرجات المنسقة:",Y.length,Y),console.log("الدرجات المنسقة:",Y);const oe=(re==null?void 0:re.map(W=>{var ie,Ae;return console.log("تفاصيل سجل الحضور:",W),{id:W.id,date:((Ae=(ie=W.circle_session)==null?void 0:ie[0])==null?void 0:Ae.session_date)||(W.recorded_at?W.recorded_at.split("T")[0]:""),status:Q(W.status),notes:W.note,recordedBy:W.profiles?W.profiles.full_name:"غير معروف"}}))||[],De=(je==null?void 0:je.map(W=>({id:W.id,date:W.date,note:W.note,type:W.type})))||[];ne.push({id:ae.id,fullName:ae.full_name,grade:ae.grade_level||"",circleName:((k=ae.study_circle)==null?void 0:k.name)||"",guardianId:J,teacherName:((D=ae.teacher)==null?void 0:D.full_name)||"",grades:Y||[],attendance:oe||[],notes:De||[]})}return ne}catch(z){return console.error("خطأ في الاستعلام عن بيانات الطلاب:",z),m("حدث خطأ أثناء الاستعلام عن البيانات. الرجاء المحاولة مرة أخرى."),[]}},S=async()=>{if(!t){m("يرجى إدخال رقم الهاتف");return}if(t.length<10){m("يرجى إدخال رقم هاتف صحيح (10 أرقام على الأقل)");return}c(!0),u(!0),m(null);try{const j=await w(t);a(j),j.length===0&&(m("لم يتم العثور على بيانات حقيقية"),await new Promise(k=>setTimeout(k,500)))}catch(j){console.error("خطأ في البحث:",j),m("حدث خطأ أثناء البحث. الرجاء المحاولة مرة أخرى.")}finally{c(!1)}},C=j=>j>=90?"bg-green-100 text-green-800 border-green-200":j>=80?"bg-blue-100 text-blue-800 border-blue-200":j>=70?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200",T=j=>{const k=xe.gradeOptions.find(D=>D.value.toLowerCase()===(j==null?void 0:j.toLowerCase()));return k?k.label:j||"غير محدد"},O=j=>j==="حاضر"?"bg-green-100 text-green-800 border-green-200":j==="متأخر"?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200",$=j=>j||at.noCircles,Q=j=>{switch(j){case"present":return"حاضر";case"absent":return"غائب";case"late":return"متأخر";case"excused":return"غياب بعذر";default:return j}},K=j=>j==="إشادة"?"bg-green-100 text-green-800 border-green-200":j==="ملاحظة"?"bg-blue-100 text-blue-800 border-blue-200":j==="تنبيه"?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-gray-100 text-gray-800 border-gray-200",A=j=>new Date(j).toLocaleDateString("ar",{year:"numeric",month:"long",day:"numeric",calendar:"gregory"}),_=j=>{if(!j.grades||j.grades.length===0)return 0;const k=j.grades.reduce((D,z)=>D+z.memorization+z.recitation+z.tajweed,0);return Math.round(k/(j.grades.length*3))},I=j=>{if(!j.attendance||j.attendance.length===0)return 0;const k=j.attendance.filter(D=>D.status==="حاضر").length;return Math.round(k/j.attendance.length*100)};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-islamic-light to-muted p-4",children:s.jsxs("div",{className:"container mx-auto max-w-4xl",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"mx-auto mb-4 p-3 bg-gradient-to-br from-islamic-green to-accent rounded-full w-fit",children:s.jsx(Os,{className:"h-8 w-8 text-white"})}),s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-islamic-green to-accent bg-clip-text text-transparent mb-2",children:"استعلام أولياء الأمور"}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"تابع تقدم أبنائك في حفظ وتلاوة القرآن الكريم"})]}),s.jsxs(nt,{className:"mb-10 rounded-2xl overflow-hidden shadow-xl border border-islamic-green/20 bg-white",children:[s.jsxs(ut,{className:"bg-gradient-to-r from-islamic-green to-green-700 text-white p-5",children:[s.jsxs(dt,{className:"text-xl flex items-center gap-3 font-semibold",children:[s.jsx(f4,{size:26,className:"text-yellow-200"}),"البحث برقم الهاتف"]}),s.jsx(Dt,{className:"text-white/80",children:"أدخل رقم هاتف ولي الأمر للاطلاع على بيانات الطلاب"})]}),s.jsxs(Ze,{className:"p-6 space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"phone",className:"text-base font-medium text-gray-700",children:"رقم هاتف ولي الأمر"}),s.jsxs("div",{className:"flex w-full overflow-hidden rounded-xl border border-islamic-green/30 shadow-sm focus-within:ring-2 focus-within:ring-islamic-green",children:[s.jsx(me,{id:"phone",type:"tel",placeholder:"مثال: 0100000000",value:t,onChange:j=>r(j.target.value),className:"flex-1 text-right px-4 py-2 border-0 focus:ring-0",dir:"rtl",onKeyDown:j=>{j.key==="Enter"&&S()}}),s.jsx(V,{onClick:S,disabled:l,className:"px-8 rounded-none bg-gradient-to-r from-islamic-green to-accent hover:from-islamic-green/90 hover:to-accent/90",children:l?"جاري البحث...":"بحث"})]})]}),f&&s.jsxs("div",{className:"flex items-center gap-2 bg-red-50 border border-red-200 rounded-lg p-3 text-red-700 text-sm font-medium",children:[s.jsx(Rr,{className:"h-5 w-5 shrink-0 text-red-500"}),s.jsx("span",{children:f})]})]})]}),d&&s.jsxs("div",{className:"space-y-6",children:[i&&s.jsxs(nt,{className:"border border-green-200/40 shadow-xl rounded-2xl overflow-hidden mb-6 bg-gradient-to-b from-white to-green-50",children:[s.jsx(ut,{className:"bg-green-600/90 text-white p-4 flex flex-row items-center justify-between",children:s.jsxs(dt,{className:"text-xl flex items-center gap-2 font-semibold",children:[s.jsx(Os,{size:22,className:"text-yellow-200"}),"بيانات ولي الأمر"]})}),s.jsx(Ze,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-green-100",children:[s.jsx(ee,{className:"text-sm text-green-700",children:"الاسم"}),s.jsx("p",{className:"font-semibold text-lg text-gray-800 mt-1",children:i.fullName})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-green-100",children:[s.jsx(ee,{className:"text-sm text-green-700",children:"رقم الهاتف"}),s.jsx("p",{className:"font-semibold text-lg text-gray-800 mt-1",children:i.phoneNumber})]}),i.email&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-green-100 md:col-span-2",children:[s.jsx(ee,{className:"text-sm text-green-700",children:"البريد الإلكتروني"}),s.jsx("p",{className:"font-semibold text-gray-800 mt-1",children:i.email})]})]})})]}),n.length>0?s.jsx(s.Fragment,{children:s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.map(j=>s.jsxs(nt,{className:"rounded-2xl border border-islamic-green/10 hover:border-islamic-green/40 transition-all shadow-md hover:shadow-xl overflow-hidden cursor-pointer",children:[s.jsxs(ut,{className:"pb-3 bg-gradient-to-r from-islamic-green/5 to-accent/5",children:[s.jsx(dt,{className:"text-lg font-bold text-islamic-green",children:j.fullName}),s.jsxs(Dt,{className:"flex flex-col gap-1 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xl,{size:16,className:"text-islamic-green"}),s.jsxs("span",{children:["الصف: ",T(j.grade)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yt,{size:16,className:"text-islamic-green"}),s.jsxs("span",{children:[" الحلقة: ",$(j.circleName)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(as,{size:16,className:"text-islamic-green"}),s.jsxs("span",{children:[" المعلم: ",j.teacherName||"غير محدد"]})]})]})]}),s.jsxs(Ze,{className:"pb-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-islamic-green/10 to-green-50 rounded-xl p-3 text-center shadow-sm",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"المعدل العام"}),s.jsxs("p",{className:"text-xl font-extrabold text-islamic-green",children:[_(j),"%"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-accent/10 to-green-50 rounded-xl p-3 text-center shadow-sm",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"نسبة الحضور"}),s.jsxs("p",{className:"text-xl font-extrabold text-islamic-green",children:[I(j),"%"]})]})]}),s.jsxs(Do,{defaultValue:"grades",className:"w-full",children:[s.jsxs(hi,{className:"w-full rounded-lg bg-gray-50 p-1",children:[s.jsx(ur,{value:"grades",className:"flex-1 data-[state=active]:bg-islamic-green data-[state=active]:text-white rounded-md",children:"الدرجات"}),s.jsx(ur,{value:"attendance",className:"flex-1 data-[state=active]:bg-islamic-green data-[state=active]:text-white rounded-md",children:"الحضور"}),s.jsx(ur,{value:"notes",className:"flex-1 data-[state=active]:bg-islamic-green data-[state=active]:text-white rounded-md",children:"الملاحظات"})]}),s.jsx(on,{value:"grades",className:"mt-3",children:j.grades.length>0?s.jsx("div",{className:"space-y-2",children:j.grades.slice(0,3).map(k=>s.jsxs("div",{className:"border rounded-lg p-3 text-sm shadow-sm",children:[s.jsx("div",{className:"flex justify-between mb-2",children:s.jsx("span",{className:"text-muted-foreground text-xs",children:A(k.date)})}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs block text-muted-foreground",children:"الحفظ"}),s.jsxs(it,{className:C(k.memorization),children:[k.memorization,"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs block text-muted-foreground",children:"التلاوة"}),s.jsxs(it,{className:C(k.recitation),children:[k.recitation,"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs block text-muted-foreground",children:"التجويد"}),s.jsxs(it,{className:C(k.tajweed),children:[k.tajweed,"%"]})]})]})]},k.id))}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"لا توجد درجات مسجلة بعد"})}),s.jsx(on,{value:"attendance",className:"mt-3",children:j.attendance.length>0?s.jsx("div",{className:"space-y-2",children:j.attendance.slice(0,5).map(k=>s.jsxs("div",{className:"flex justify-between items-center border rounded-lg p-3 text-sm shadow-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"block text-xs text-muted-foreground",children:A(k.date)}),k.recordedBy&&s.jsxs("span",{className:"block text-xs text-gray-600 mt-1",children:[s.jsx("span",{className:"text-gray-500",children:"المسجل:"})," ",k.recordedBy]}),k.notes&&s.jsxs("span",{className:"block text-xs text-gray-600 mt-1",children:[s.jsx("span",{className:"text-gray-500",children:"ملاحظات:"})," ",k.notes]})]}),s.jsxs(it,{className:O(k.status),children:[k.status==="present"?s.jsx(r4,{className:"h-3 w-3 mr-1"}):k.status==="late"?s.jsx(dn,{className:"h-3 w-3 mr-1"}):s.jsx(s4,{className:"h-3 w-3 mr-1"}),k.status==="present"?"حاضر":k.status==="absent"?"غائب":k.status==="late"?"متأخر":k.status==="excused"?"معذور":k.status]})]},k.id))}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"لا توجد سجلات حضور بعد"})}),s.jsx(on,{value:"notes",className:"mt-3",children:j.notes.length>0?s.jsx("div",{className:"space-y-2",children:j.notes.map(k=>s.jsxs("div",{className:"border rounded-lg p-3 text-sm shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx(it,{className:K(k.type),children:k.type}),s.jsx("span",{className:"text-xs text-muted-foreground",children:A(k.date)})]}),s.jsx("p",{className:"text-gray-700",children:k.note})]},k.id))}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"لا توجد ملاحظات مسجلة بعد"})})]})]}),s.jsx(qo,{children:s.jsx(V,{variant:"outline",size:"sm",className:"w-full rounded-lg border-islamic-green text-islamic-green hover:bg-islamic-green/10 font-medium",onClick:()=>{x(j),p(!0)},children:"عرض التفاصيل الكاملة"})})]},j.id))})}):s.jsx(nt,{className:"border-yellow-200 bg-yellow-50",children:s.jsxs(Ze,{className:"text-center py-8",children:[s.jsx("p",{className:"text-lg text-yellow-800",children:"لم يتم العثور على بيانات مرتبطة بهذا الرقم"}),s.jsx("p",{className:"text-yellow-600 mt-2",children:"تأكد من صحة رقم الهاتف أو تواصل مع إدارة المكتب"}),s.jsx("p",{className:"text-yellow-600 mt-2",children:"إذا كنت تبحث عن الرقم 0102000000 فنحن نقوم بتشخيص المشكلة، يرجى التحقق من سجلات الخادم"})]})})]}),s.jsx("div",{className:"text-center mt-8",children:s.jsx(V,{variant:"outline",onClick:()=>e("/"),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/30",children:"العودة للصفحة الرئيسية"})}),s.jsx(St,{open:y,onOpenChange:p,children:s.jsx(yt,{dir:"rtl",className:"max-w-3xl max-h-[85vh] overflow-y-auto rounded-xl p-3 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100 text-sm",children:v&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4 mt-2",children:[s.jsx("div",{}),s.jsxs("div",{className:"bg-gradient-to-b from-green-900 via-green-500 to-green-200 dark:from-green-900 dark:via-green-800 dark:to-green-600 rounded-2xl p-4 shadow-md border border-green-200 dark:border-green-700",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-white dark:text-white mb-4 border-b border-green-200 dark:border-green-700 pb-2",children:["🧾 المعلومات الشخصية :",s.jsx(as,{className:"h-5 w-5"}),s.jsx("span",{className:"text-yellow-300",children:v.fullName})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-sky-200 dark:bg-sky-700 rounded-lg shadow-sm p-3 border border-green-200 dark:border-green-700",children:[s.jsx(ee,{className:"text-xs text-gray-500 dark:text-gray-300",children:"الصف الدراسي"}),s.jsx("p",{className:"font-medium text-gray-800 dark:text-green-200 mt-1",children:T(v.grade)})]}),s.jsxs("div",{className:"bg-sky-200 dark:bg-sky-700 rounded-lg shadow-sm p-3 border border-green-200 dark:border-green-700",children:[s.jsx(ee,{className:"text-xs text-gray-500 dark:text-gray-300",children:"الحلقة"}),s.jsx("p",{className:"font-medium text-gray-800 dark:text-green-200 mt-1",children:$(v.circleName)})]}),s.jsxs("div",{className:"bg-sky-200 dark:bg-sky-700 rounded-lg shadow-sm p-3 border border-green-200 dark:border-green-700",children:[s.jsx(ee,{className:"text-xs text-gray-500 dark:text-gray-300",children:"المعلم الحالي"}),s.jsx("p",{className:"font-medium text-gray-800 dark:text-green-200 mt-1",children:v.teacherName||"غير محدد"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-green-700 mb-2 border-b border-green-200 pb-1",children:"📅 سجل الحضور (آخر 5 جلسات)"}),s.jsx(ds,{data:v.attendance.slice(0,5),columns:[{key:"recordedBy",header:"👤 المسجل",align:"right",render:j=>s.jsx("span",{className:"font-medium text-gray-700 text-xs",children:j.recordedBy||s.jsx("span",{className:"text-gray-400",children:"غير معروف"})})},{key:"date",header:"📅 التاريخ",align:"center",render:j=>A(j.date)},{key:"status",header:"📋 الحالة",align:"center",render:j=>s.jsx(it,{className:`px-2 py-0.5 rounded-full text-[10px] font-bold tracking-wide shadow-sm ${O(j.status)}`,children:j.status==="present"?"✅ حاضر":j.status==="absent"?"❌ غائب":j.status==="late"?"⏰ متأخر":j.status==="excused"?"📝 معذور":j.status})},{key:"notes",header:"📝 ملاحظات",align:"right",render:j=>s.jsx("span",{className:"text-gray-600 text-xs",children:j.notes||s.jsx("span",{className:"text-gray-400",children:"لا توجد ملاحظات"})})}],emptyMessage:"لا توجد سجلات حضور",className:"overflow-hidden rounded-lg text-xs",getRowClassName:(j,k)=>`${k%2===0?"bg-white":"bg-green-50/70"} hover:bg-green-100/60`})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-green-700 mb-2 border-b border-green-200 pb-1",children:"📖 الحفظ والتقييم (آخر 5 تسجيلات)"}),v.grades&&v.grades.length>0?s.jsx(ds,{data:v.grades.slice(0,5),columns:[{key:"date",header:"📅 التاريخ",align:"center",render:j=>A(j.date)},{key:"recordedBy",header:"👤 المقيم",align:"right",render:j=>s.jsx("span",{className:"font-medium text-gray-700 text-xs",children:j.recordedBy||s.jsx("span",{className:"text-gray-400",children:"غير معروف"})})},{key:"memorization",header:"📝 الحفظ",align:"center",render:j=>s.jsxs("span",{className:"text-xs",children:[j.memorization,"%"]})},{key:"recitation",header:"📝 التلاوة",align:"center",render:j=>s.jsxs("span",{className:"text-xs",children:[j.recitation,"%"]})},{key:"tajweed",header:"📝 التجويد",align:"center",render:j=>s.jsxs("span",{className:"text-xs",children:[j.tajweed,"%"]})},{key:"average",header:"📊 المعدل",align:"center",render:j=>{const k=Math.round((j.memorization+j.recitation+j.tajweed)/3);return s.jsxs(it,{className:C(k),children:[k,"%"]})}}],emptyMessage:"لا توجد تقييمات مسجلة",className:"overflow-hidden rounded-lg text-xs",getRowClassName:(j,k)=>`${k%2===0?"bg-white":"bg-blue-50/70"} hover:bg-blue-100/60`}):s.jsx("div",{className:"text-center py-2 bg-white rounded-lg shadow-sm border border-blue-100 text-xs",children:s.jsx("p",{className:"text-gray-400",children:"لا توجد تقييمات مسجلة"})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-green-700 mb-2 border-b border-green-200 pb-1",children:"📝 ملاحظات المعلم"}),s.jsxs("div",{className:"space-y-1",children:[v.notes.map(j=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-2 border border-green-200 text-xs",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx(it,{className:K(j.type),children:j.type}),s.jsx("span",{className:"text-xs text-gray-500",children:A(j.date)})]}),s.jsx("p",{className:"mt-1",children:j.note})]},j.id)),v.notes.length===0&&s.jsx("div",{className:"text-center text-gray-400 py-2 text-xs",children:"لا توجد ملاحظات مسجلة"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-green-700 mb-2 border-b border-green-200 pb-1",children:"👨‍🏫 سجل المعلمين السابقين"}),s.jsx(ds,{data:g,columns:[{key:"teacherName",header:"👨‍🏫 المعلم",align:"right"},{key:"startDate",header:"📅 تاريخ البداية",align:"center",render:j=>A(j.startDate)},{key:"endDate",header:"📅 تاريخ النهاية",align:"center",render:j=>j.endDate?A(j.endDate):"حتى الآن"}],emptyMessage:"لا يوجد سجل معلمين سابقين",className:"overflow-hidden rounded-lg text-xs",getRowClassName:(j,k)=>`${k%2===0?"bg-white":"bg-purple-50/50"} hover:bg-purple-100/40`})]})]}),s.jsx(bt,{dir:"rtl",className:"flex justify-center mt-3",children:s.jsx(V,{onClick:()=>p(!1),className:"bg-yellow-300 hover:bg-yellow-400 text-gray-800 text-xs px-4 py-1 rounded-lg shadow-md",children:"إغلاق"})})]})})})]})})}const n7=pc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Go=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:_e(n7({variant:t}),e),...r}));Go.displayName="Alert";const s7=h.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:_e("mb-1 font-medium leading-none tracking-tight",e),...t}));s7.displayName="AlertTitle";const Ko=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:_e("text-sm [&_p]:leading-relaxed",e),...t}));Ko.displayName="AlertDescription";const a7=async()=>(console.log("تهيئة قاعدة البيانات Supabase"),!0),i7=async()=>{try{const e=await b0();return{success:e.success,data:e.data,message:e.message}}catch(e){return console.error("خطأ في تصدير البيانات:",e),{success:!1,message:"حدث خطأ أثناء تصدير البيانات"}}};a7().catch(e=>{console.error("فشل في تهيئة قاعدة البيانات:",e)});var R_="AlertDialog",[o7,JD]=bi(R_,[g_]),zs=g_(),I_=e=>{const{__scopeAlertDialog:t,...r}=e,n=zs(t);return s.jsx(O_,{...n,...r,modal:!0})};I_.displayName=R_;var l7="AlertDialogTrigger",c7=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=zs(r);return s.jsx(XA,{...a,...n,ref:t})});c7.displayName=l7;var d7="AlertDialogPortal",M_=e=>{const{__scopeAlertDialog:t,...r}=e,n=zs(t);return s.jsx(A_,{...n,...r})};M_.displayName=d7;var u7="AlertDialogOverlay",$_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=zs(r);return s.jsx(S0,{...a,...n,ref:t})});$_.displayName=u7;var co="AlertDialogContent",[h7,f7]=o7(co),L_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=zs(r),o=h.useRef(null),l=ft(t,o),c=h.useRef(null);return s.jsx(KA,{contentName:co,titleName:F_,docsSlug:"alert-dialog",children:s.jsx(h7,{scope:r,cancelRef:c,children:s.jsxs(k0,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Te(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(Ig,{children:n}),s.jsx(g7,{contentRef:o})]})})})});L_.displayName=co;var F_="AlertDialogTitle",z_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=zs(r);return s.jsx(C0,{...a,...n,ref:t})});z_.displayName=F_;var B_="AlertDialogDescription",U_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=zs(r);return s.jsx(E0,{...a,...n,ref:t})});U_.displayName=B_;var m7="AlertDialogAction",W_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=zs(r);return s.jsx(T0,{...a,...n,ref:t})});W_.displayName=m7;var V_="AlertDialogCancel",H_=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=f7(V_,r),i=zs(r),o=ft(t,a);return s.jsx(T0,{...i,...n,ref:o})});H_.displayName=V_;var g7=({contentRef:e})=>{const t=`\`${co}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${co}\` by passing a \`${B_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${co}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},p7=I_,x7=M_,q_=$_,G_=L_,K_=W_,Y_=H_,Q_=z_,J_=U_;const v7=p7,y7=x7,X_=h.forwardRef(({className:e,...t},r)=>s.jsx(q_,{className:_e("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));X_.displayName=q_.displayName;const Z_=h.forwardRef(({className:e,...t},r)=>s.jsxs(y7,{children:[s.jsx(X_,{}),s.jsx(G_,{ref:r,className:_e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Z_.displayName=G_.displayName;const e2=({className:e,...t})=>s.jsx("div",{className:_e("flex flex-col space-y-2 text-center sm:text-left",e),...t});e2.displayName="AlertDialogHeader";const t2=({className:e,...t})=>s.jsx("div",{className:_e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});t2.displayName="AlertDialogFooter";const r2=h.forwardRef(({className:e,...t},r)=>s.jsx(Q_,{ref:r,className:_e("text-lg font-semibold",e),...t}));r2.displayName=Q_.displayName;const n2=h.forwardRef(({className:e,...t},r)=>s.jsx(J_,{ref:r,className:_e("text-sm text-muted-foreground",e),...t}));n2.displayName=J_.displayName;const s2=h.forwardRef(({className:e,...t},r)=>s.jsx(K_,{ref:r,className:_e(Fu(),e),...t}));s2.displayName=K_.displayName;const a2=h.forwardRef(({className:e,...t},r)=>s.jsx(Y_,{ref:r,className:_e(Fu({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));a2.displayName=Y_.displayName;function yn({title:e="تأكيد الحذف",description:t="هل أنت متأكد من رغبتك في حذف هذا العنصر؟",itemDetails:r=null,detailsLabels:n=[],deleteButtonText:a="نعم، قم بالحذف",cancelButtonText:i="إلغاء",isOpen:o,isLoading:l=!1,onOpenChange:c,onConfirm:d}){return s.jsx(v7,{open:o,onOpenChange:c,children:s.jsxs(Z_,{dir:"rtl",className:"border-2 border-red-200 shadow-lg bg-white",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-5 bg-[url('/patterns/islamic-pattern.svg')] bg-repeat pointer-events-none rounded-lg"}),s.jsxs(e2,{children:[s.jsxs(r2,{className:"text-xl font-bold text-red-800 flex items-center gap-2 border-r-4 border-red-500 pr-2",children:[s.jsx("div",{className:"bg-red-100 text-red-600 p-1.5 rounded-full",children:s.jsx(Sr,{className:"h-5 w-5"})}),e]}),s.jsxs(n2,{dir:"rtl",className:"text-gray-700 mt-2 leading-relaxed text-right",children:[t,r&&s.jsxs("div",{className:"mt-3 bg-red-50 p-3 rounded-md border border-red-100 text-red-700",children:[s.jsx("div",{className:"font-semibold border-b border-red-100 pb-1 mb-2",children:"تفاصيل العنصر:"}),s.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:n&&n.length>0?n.map(({key:u,label:f})=>{var m;return s.jsxs(he.Fragment,{children:[s.jsxs("div",{className:"font-medium",children:[f,":"]}),s.jsx("div",{children:((m=r[u])==null?void 0:m.toString())||"-"})]},u)}):Object.entries(r).map(([u,f])=>s.jsxs(he.Fragment,{children:[s.jsxs("div",{className:"font-medium",children:[u,":"]}),s.jsx("div",{children:(f==null?void 0:f.toString())||"-"})]},u))})]}),s.jsx("div",{className:"mt-4 text-red-700 font-medium border-r-2 border-red-300 pr-2",children:"⚠️ تنبيه: لا يمكن التراجع عن هذا الإجراء بعد تنفيذه."})]})]}),s.jsxs(t2,{className:"flex gap-2 justify-end mt-4",children:[s.jsx(a2,{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-2 border-transparent hover:border-gray-300 transition-all",children:i}),s.jsx(s2,{onClick:u=>{u.preventDefault(),d()},disabled:l,className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-2 border-transparent hover:border-red-900 transition-all",children:l?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"جارٍ الحذف..."]}):a})]})]})})}function b7({onNavigate:e}){const[t,r]=h.useState(!1),[n,a]=h.useState(null),[i,o]=h.useState(!1),l=async()=>{r(!0),a(null);try{const f=await i7();if(f.success&&f.data){const m=new Blob([f.data],{type:"application/json"}),v=URL.createObjectURL(m),x=document.createElement("a");x.href=v,x.download=`ketama_students_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(x),x.click(),setTimeout(()=>{document.body.removeChild(x),URL.revokeObjectURL(v)},0),a({text:Em.saveSuccess,type:"success"})}else a({text:f.message||Ie.saveFailed,type:"error"})}catch(f){console.error(Ie.consoleExportDataError,f),a({text:Ie.operationFailed,type:"error"})}finally{r(!1)}},c=()=>{const f=document.createElement("input");f.type="file",f.accept=".json",f.onchange=async m=>{const v=m.target;if(!v.files||v.files.length===0)return;const x=v.files[0];r(!0),a(null);try{const g=new FileReader;g.onload=async b=>{if(!b.target||typeof b.target.result!="string"){a({text:Ie.operationFailed,type:"error"}),r(!1);return}try{const y=JSON.parse(b.target.result);if(!Array.isArray(y)){a({text:Ie.invalidInput,type:"error"}),r(!1);return}a({text:er.studentsImportProgress(y.length),type:"success"}),setTimeout(()=>{a({text:er.studentsImportSuccess,type:"success"}),r(!1)},1e3)}catch(y){console.error(Ie.consoleParsingJsonError,y),a({text:Ie.invalidInput,type:"error"}),r(!1)}},g.onerror=()=>{a({text:Ie.operationFailed,type:"error"}),r(!1)},g.readAsText(x)}catch(g){console.error(Ie.consoleImportFileError,g),a({text:Ie.operationFailed,type:"error"}),r(!1)}},f.click()},d=()=>{o(!0)},u=()=>{a({text:er.functionNotAvailable,type:"warning"})};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(nt,{className:"w-full",children:[s.jsx(ut,{children:s.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx(dt,{className:"text-2xl font-bold",children:er.title}),s.jsx(Dt,{children:er.description}),s.jsxs("div",{className:"mt-2 text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx("span",{children:er.databaseLabel}),s.jsxs("span",{className:"flex items-center text-green-600",children:[s.jsx(Bg,{className:"h-3 w-3 mr-1"})," Supabase"]})]})]})})}),s.jsxs(Ze,{children:[n&&s.jsxs(Go,{variant:n.type==="error"?"destructive":(n.type==="warning","default"),className:`mb-4 ${n.type==="error"?"bg-red-50 border-red-300 text-red-800":n.type==="warning"?"bg-amber-50 border-amber-300 text-amber-800":"bg-green-50 border-green-300 text-green-800"}`,children:[s.jsx(Rr,{className:`h-4 w-4 ml-2 ${n.type==="error"?"text-red-800":n.type==="warning"?"text-amber-800":"text-green-800"}`}),s.jsx(Ko,{children:n.text})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(nt,{children:[s.jsxs(ut,{children:[s.jsx(dt,{className:"text-lg",children:er.exportTitle}),s.jsx(Dt,{children:er.exportDescription})]}),s.jsx(Ze,{children:s.jsxs(V,{onClick:l,disabled:t,className:"w-full flex items-center justify-center gap-2",children:[t?s.jsx(Un,{className:"h-4 w-4 animate-spin"}):s.jsx(o4,{className:"h-4 w-4"}),s.jsx("span",{children:er.exportJsonButton})]})})]}),s.jsxs(nt,{children:[s.jsxs(ut,{children:[s.jsx(dt,{className:"text-lg",children:er.importTitle}),s.jsx(Dt,{children:er.importDescription})]}),s.jsx(Ze,{className:"flex flex-col gap-2",children:s.jsxs(V,{variant:"outline",onClick:c,disabled:t,className:"w-full flex items-center justify-center gap-2",children:[t?s.jsx(Un,{className:"h-4 w-4 animate-spin"}):s.jsx(i4,{className:"h-4 w-4"}),s.jsx("span",{children:er.importJsonButton})]})})]}),s.jsxs(nt,{children:[s.jsxs(ut,{children:[s.jsx(dt,{className:"text-lg",children:er.backupTitle}),s.jsx(Dt,{children:er.backupDescription})]}),s.jsx(Ze,{children:s.jsxs(V,{variant:"secondary",disabled:t,className:"w-full flex items-center justify-center gap-2",children:[s.jsx(Ug,{className:"h-4 w-4"}),s.jsx("span",{children:er.createBackupButton})]})})]}),s.jsxs(nt,{children:[s.jsxs(ut,{children:[s.jsx(dt,{className:"text-lg text-red-600",children:er.clearTitle}),s.jsx(Dt,{children:er.clearDescription})]}),s.jsx(Ze,{children:s.jsxs(V,{variant:"destructive",onClick:d,disabled:t,className:"w-full flex items-center justify-center gap-2",children:[s.jsx(Sr,{className:"h-4 w-4"}),s.jsx("span",{children:er.clearButton})]})})]})]})]}),s.jsx(qo,{className:"flex justify-between",children:s.jsx(V,{variant:"outline",onClick:()=>e("/students"),children:er.returnToStudentsButton})})]}),s.jsx(yn,{isOpen:i,onOpenChange:o,onConfirm:u,isLoading:t,title:"تأكيد إعادة تهيئة قاعدة البيانات",description:"تحذير: هذا الإجراء سيؤدي إلى مسح جميع البيانات من قاعدة البيانات وإعادتها إلى حالتها الأولية. هل أنت متأكد من رغبتك في المتابعة؟",deleteButtonText:"نعم، أعد تهيئة قاعدة البيانات",cancelButtonText:"إلغاء"})]})}function w7({onNavigate:e}){return s.jsx(b7,{onNavigate:e})}function j7({onNavigate:e}){const[t,r]=h.useState(!0),[n,a]=h.useState([]),[i,o]=h.useState(null);return h.useEffect(()=>{(async()=>{r(!0),a([]),o(null);try{const c=console.log,d=console.error,u=[];console.log=(...v)=>{c(...v),u.push(v.map(x=>typeof x=="object"?JSON.stringify(x,null,2):String(x)).join(" ")),a([...u])},console.error=(...v)=>{d(...v),u.push(`❌ ${v.map(x=>typeof x=="object"?JSON.stringify(x,null,2):String(x)).join(" ")}`),a([...u])};const{default:f}=await Ln(()=>import("./supabase-test-bcdf6eab.js"),[]);console.log("تم تنفيذ اختبار Supabase"),console.log=c,console.error=d;const m=u.some(v=>v.startsWith("❌"));o(!m)}catch(c){console.error("فشل في تنفيذ اختبار Supabase:",c),a(d=>[...d,`فشل في تنفيذ اختبار Supabase: ${c instanceof Error?c.message:String(c)}`]),o(!1)}finally{r(!1)}})()},[]),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs(nt,{className:"max-w-4xl mx-auto",children:[s.jsxs(ut,{children:[s.jsx(dt,{className:"text-2xl font-bold",children:"اختبار اتصال Supabase"}),s.jsx(Dt,{children:"تشخيص مشاكل الاتصال بقاعدة البيانات Supabase"})]}),s.jsx(Ze,{className:"space-y-4",children:t?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[s.jsx(d4,{className:"h-12 w-12 text-primary animate-spin mb-4"}),s.jsx("p",{className:"text-center text-muted-foreground",children:"جاري تنفيذ اختبارات الاتصال..."})]}):s.jsxs(s.Fragment,{children:[i!==null&&s.jsxs(Go,{className:`mb-4 ${i?"bg-green-50 border-green-300 text-green-800":"bg-destructive/10 border-destructive text-destructive"}`,children:[i?s.jsx(n4,{className:"h-4 w-4 ml-2 text-green-800"}):s.jsx(Rr,{className:"h-4 w-4 ml-2 text-destructive"}),s.jsx(Ko,{children:i?"تم الاتصال بنجاح بقاعدة البيانات Supabase!":"توجد مشاكل في الاتصال بقاعدة البيانات Supabase. راجع النتائج أدناه."})]}),s.jsxs("div",{className:"border rounded-md p-4 bg-muted/50",children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"نتائج الاختبار:"}),s.jsx("div",{className:"bg-background p-4 rounded-md font-mono text-sm overflow-auto max-h-96 rtl:text-right ltr:text-left",children:n.map((l,c)=>s.jsx("div",{className:`py-1 ${l.startsWith("❌")?"text-destructive":""}`,children:l},c))})]}),s.jsxs("div",{className:"flex justify-between mt-4",children:[s.jsx(V,{variant:"outline",onClick:()=>e("/"),children:"العودة للرئيسية"}),s.jsx(V,{onClick:()=>window.location.reload(),children:"إعادة الاختبار"})]})]})})]})})}function mv(e,[t,r]){return Math.min(r,Math.max(t,e))}function _7(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var N7=[" ","Enter","ArrowUp","ArrowDown"],S7=[" ","Enter"],jc="Select",[eh,th,k7]=Mg(jc),[Yo,XD]=bi(jc,[k7,Uo]),rh=Uo(),[C7,Ia]=Yo(jc),[E7,T7]=Yo(jc),i2=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:m,required:v,form:x}=e,g=rh(t),[b,y]=h.useState(null),[p,w]=h.useState(null),[S,C]=h.useState(!1),T=x0(d),[O=!1,$]=ci({prop:n,defaultProp:a,onChange:i}),[Q,K]=ci({prop:o,defaultProp:l,onChange:c}),A=h.useRef(null),_=b?x||!!b.closest("form"):!0,[I,j]=h.useState(new Set),k=Array.from(I).map(D=>D.props.value).join(";");return s.jsx(b1,{...g,children:s.jsxs(C7,{required:v,scope:t,trigger:b,onTriggerChange:y,valueNode:p,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:Ss(),value:Q,onValueChange:K,open:O,onOpenChange:$,dir:T,triggerPointerDownPosRef:A,disabled:m,children:[s.jsx(eh.Provider,{scope:t,children:s.jsx(E7,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(D=>{j(z=>new Set(z).add(D))},[]),onNativeOptionRemove:h.useCallback(D=>{j(z=>{const M=new Set(z);return M.delete(D),M})},[]),children:r})}),_?s.jsxs(A2,{"aria-hidden":!0,required:v,tabIndex:-1,name:u,autoComplete:f,value:Q,onChange:D=>K(D.target.value),disabled:m,form:x,children:[Q===void 0?s.jsx("option",{value:""}):null,Array.from(I)]},k):null]})})};i2.displayName=jc;var o2="SelectTrigger",l2=h.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=rh(r),o=Ia(o2,r),l=o.disabled||n,c=ft(t,o.onTriggerChange),d=th(r),u=h.useRef("touch"),[f,m,v]=D2(g=>{const b=d().filter(w=>!w.disabled),y=b.find(w=>w.value===o.value),p=R2(b,g,y);p!==void 0&&o.onValueChange(p.value)}),x=g=>{l||(o.onOpenChange(!0),v()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(Ru,{asChild:!0,...i,children:s.jsx(Ke.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":O2(o.value)?"":void 0,...a,ref:c,onClick:Te(a.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&x(g)}),onPointerDown:Te(a.onPointerDown,g=>{u.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:Te(a.onKeyDown,g=>{const b=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(b&&g.key===" ")&&N7.includes(g.key)&&(x(),g.preventDefault())})})})});l2.displayName=o2;var c2="SelectValue",d2=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=Ia(c2,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,f=ft(t,c.onValueNodeChange);return Nr(()=>{d(u)},[d,u]),s.jsx(Ke.span,{...l,ref:f,style:{pointerEvents:"none"},children:O2(c.value)?s.jsx(s.Fragment,{children:o}):i})});d2.displayName=c2;var P7="SelectIcon",u2=h.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Ke.span,{"aria-hidden":!0,...a,ref:t,children:n||"▼"})});u2.displayName=P7;var O7="SelectPortal",h2=e=>s.jsx(mc,{asChild:!0,...e});h2.displayName=O7;var mi="SelectContent",f2=h.forwardRef((e,t)=>{const r=Ia(mi,e.__scopeSelect),[n,a]=h.useState();if(Nr(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?yi.createPortal(s.jsx(m2,{scope:e.__scopeSelect,children:s.jsx(eh.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(g2,{...e,ref:t})});f2.displayName=mi;var Tn=10,[m2,Ma]=Yo(mi),A7="SelectContentImpl",g2=h.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:x,hideWhenDetached:g,avoidCollisions:b,...y}=e,p=Ia(mi,r),[w,S]=h.useState(null),[C,T]=h.useState(null),O=ft(t,re=>S(re)),[$,Q]=h.useState(null),[K,A]=h.useState(null),_=th(r),[I,j]=h.useState(!1),k=h.useRef(!1);h.useEffect(()=>{if(w)return u0(w)},[w]),d0();const D=h.useCallback(re=>{const[ye,...je]=_().map(oe=>oe.ref.current),[q]=je.slice(-1),Y=document.activeElement;for(const oe of re)if(oe===Y||(oe==null||oe.scrollIntoView({block:"nearest"}),oe===ye&&C&&(C.scrollTop=0),oe===q&&C&&(C.scrollTop=C.scrollHeight),oe==null||oe.focus(),document.activeElement!==Y))return},[_,C]),z=h.useCallback(()=>D([$,w]),[D,$,w]);h.useEffect(()=>{I&&z()},[I,z]);const{onOpenChange:M,triggerPointerDownPosRef:B}=p;h.useEffect(()=>{if(w){let re={x:0,y:0};const ye=q=>{var Y,oe;re={x:Math.abs(Math.round(q.pageX)-(((Y=B.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(q.pageY)-(((oe=B.current)==null?void 0:oe.y)??0))}},je=q=>{re.x<=10&&re.y<=10?q.preventDefault():w.contains(q.target)||M(!1),document.removeEventListener("pointermove",ye),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",je,{capture:!0})}}},[w,M,B]),h.useEffect(()=>{const re=()=>M(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[M]);const[X,J]=D2(re=>{const ye=_().filter(Y=>!Y.disabled),je=ye.find(Y=>Y.ref.current===document.activeElement),q=R2(ye,re,je);q&&setTimeout(()=>q.ref.current.focus())}),L=h.useCallback((re,ye,je)=>{const q=!k.current&&!je;(p.value!==void 0&&p.value===ye||q)&&(Q(re),q&&(k.current=!0))},[p.value]),ne=h.useCallback(()=>w==null?void 0:w.focus(),[w]),ae=h.useCallback((re,ye,je)=>{const q=!k.current&&!je;(p.value!==void 0&&p.value===ye||q)&&A(re)},[p.value]),Z=n==="popper"?Pm:p2,se=Z===Pm?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:x,hideWhenDetached:g,avoidCollisions:b}:{};return s.jsx(m2,{scope:r,content:w,viewport:C,onViewportChange:T,itemRefCallback:L,selectedItem:$,onItemLeave:ne,itemTextRefCallback:ae,focusSelectedItem:z,selectedItemText:K,position:n,isPositioned:I,searchRef:X,children:s.jsx(h0,{as:Na,allowPinchZoom:!0,children:s.jsx(Gu,{asChild:!0,trapped:p.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:Te(a,re=>{var ye;(ye=p.trigger)==null||ye.focus({preventScroll:!0}),re.preventDefault()}),children:s.jsx(Lo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:s.jsx(Z,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:re=>re.preventDefault(),...y,...se,onPlaced:()=>j(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Te(y.onKeyDown,re=>{const ye=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!ye&&re.key.length===1&&J(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let q=_().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(re.key)&&(q=q.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const Y=re.target,oe=q.indexOf(Y);q=q.slice(oe+1)}setTimeout(()=>D(q)),re.preventDefault()}})})})})})})});g2.displayName=A7;var D7="SelectItemAlignedPosition",p2=h.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Ia(mi,r),o=Ma(mi,r),[l,c]=h.useState(null),[d,u]=h.useState(null),f=ft(t,O=>u(O)),m=th(r),v=h.useRef(!1),x=h.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:y,focusSelectedItem:p}=o,w=h.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&b&&y){const O=i.trigger.getBoundingClientRect(),$=d.getBoundingClientRect(),Q=i.valueNode.getBoundingClientRect(),K=y.getBoundingClientRect();if(i.dir!=="rtl"){const Y=K.left-$.left,oe=Q.left-Y,De=O.left-oe,W=O.width+De,ie=Math.max(W,$.width),Ae=window.innerWidth-Tn,Re=mv(oe,[Tn,Math.max(Tn,Ae-ie)]);l.style.minWidth=W+"px",l.style.left=Re+"px"}else{const Y=$.right-K.right,oe=window.innerWidth-Q.right-Y,De=window.innerWidth-O.right-oe,W=O.width+De,ie=Math.max(W,$.width),Ae=window.innerWidth-Tn,Re=mv(oe,[Tn,Math.max(Tn,Ae-ie)]);l.style.minWidth=W+"px",l.style.right=Re+"px"}const A=m(),_=window.innerHeight-Tn*2,I=g.scrollHeight,j=window.getComputedStyle(d),k=parseInt(j.borderTopWidth,10),D=parseInt(j.paddingTop,10),z=parseInt(j.borderBottomWidth,10),M=parseInt(j.paddingBottom,10),B=k+D+I+M+z,X=Math.min(b.offsetHeight*5,B),J=window.getComputedStyle(g),L=parseInt(J.paddingTop,10),ne=parseInt(J.paddingBottom,10),ae=O.top+O.height/2-Tn,Z=_-ae,se=b.offsetHeight/2,re=b.offsetTop+se,ye=k+D+re,je=B-ye;if(ye<=ae){const Y=A.length>0&&b===A[A.length-1].ref.current;l.style.bottom="0px";const oe=d.clientHeight-g.offsetTop-g.offsetHeight,De=Math.max(Z,se+(Y?ne:0)+oe+z),W=ye+De;l.style.height=W+"px"}else{const Y=A.length>0&&b===A[0].ref.current;l.style.top="0px";const De=Math.max(ae,k+g.offsetTop+(Y?L:0)+se)+je;l.style.height=De+"px",g.scrollTop=ye-ae+g.offsetTop}l.style.margin=`${Tn}px 0`,l.style.minHeight=X+"px",l.style.maxHeight=_+"px",n==null||n(),requestAnimationFrame(()=>v.current=!0)}},[m,i.trigger,i.valueNode,l,d,g,b,y,i.dir,n]);Nr(()=>w(),[w]);const[S,C]=h.useState();Nr(()=>{d&&C(window.getComputedStyle(d).zIndex)},[d]);const T=h.useCallback(O=>{O&&x.current===!0&&(w(),p==null||p(),x.current=!1)},[w,p]);return s.jsx(I7,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:T,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:s.jsx(Ke.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});p2.displayName=D7;var R7="SelectPopperPosition",Pm=h.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Tn,...i}=e,o=rh(r);return s.jsx(Xg,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Pm.displayName=R7;var[I7,P0]=Yo(mi,{}),Om="SelectViewport",x2=h.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Ma(Om,r),o=P0(Om,r),l=ft(t,i.onViewportChange),c=h.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(eh.Slot,{scope:r,children:s.jsx(Ke.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Te(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const v=Math.abs(c.current-u.scrollTop);if(v>0){const x=window.innerHeight-Tn*2,g=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),y=Math.max(g,b);if(y<x){const p=y+v,w=Math.min(x,p),S=p-w;f.style.height=w+"px",f.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});x2.displayName=Om;var v2="SelectGroup",[M7,$7]=Yo(v2),y2=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Ss();return s.jsx(M7,{scope:r,id:a,children:s.jsx(Ke.div,{role:"group","aria-labelledby":a,...n,ref:t})})});y2.displayName=v2;var b2="SelectLabel",w2=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=$7(b2,r);return s.jsx(Ke.div,{id:a.id,...n,ref:t})});w2.displayName=b2;var cu="SelectItem",[L7,j2]=Yo(cu),_2=h.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=Ia(cu,r),c=Ma(cu,r),d=l.value===n,[u,f]=h.useState(i??""),[m,v]=h.useState(!1),x=ft(t,p=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,p,n,a)}),g=Ss(),b=h.useRef("touch"),y=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(L7,{scope:r,value:n,disabled:a,textId:g,isSelected:d,onItemTextChange:h.useCallback(p=>{f(w=>w||((p==null?void 0:p.textContent)??"").trim())},[]),children:s.jsx(eh.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:s.jsx(Ke.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:x,onFocus:Te(o.onFocus,()=>v(!0)),onBlur:Te(o.onBlur,()=>v(!1)),onClick:Te(o.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:Te(o.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:Te(o.onPointerDown,p=>{b.current=p.pointerType}),onPointerMove:Te(o.onPointerMove,p=>{var w;b.current=p.pointerType,a?(w=c.onItemLeave)==null||w.call(c):b.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Te(o.onPointerLeave,p=>{var w;p.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Te(o.onKeyDown,p=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&p.key===" "||(S7.includes(p.key)&&y(),p.key===" "&&p.preventDefault())})})})})});_2.displayName=cu;var yl="SelectItemText",N2=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Ia(yl,r),l=Ma(yl,r),c=j2(yl,r),d=T7(yl,r),[u,f]=h.useState(null),m=ft(t,y=>f(y),c.onItemTextChange,y=>{var p;return(p=l.itemTextRefCallback)==null?void 0:p.call(l,y,c.value,c.disabled)}),v=u==null?void 0:u.textContent,x=h.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=d;return Nr(()=>(g(x),()=>b(x)),[g,b,x]),s.jsxs(s.Fragment,{children:[s.jsx(Ke.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?yi.createPortal(i.children,o.valueNode):null]})});N2.displayName=yl;var S2="SelectItemIndicator",k2=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return j2(S2,r).isSelected?s.jsx(Ke.span,{"aria-hidden":!0,...n,ref:t}):null});k2.displayName=S2;var Am="SelectScrollUpButton",C2=h.forwardRef((e,t)=>{const r=Ma(Am,e.__scopeSelect),n=P0(Am,e.__scopeSelect),[a,i]=h.useState(!1),o=ft(t,n.onScrollButtonChange);return Nr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(T2,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});C2.displayName=Am;var Dm="SelectScrollDownButton",E2=h.forwardRef((e,t)=>{const r=Ma(Dm,e.__scopeSelect),n=P0(Dm,e.__scopeSelect),[a,i]=h.useState(!1),o=ft(t,n.onScrollButtonChange);return Nr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(T2,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});E2.displayName=Dm;var T2=h.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Ma("SelectScrollButton",r),o=h.useRef(null),l=th(r),c=h.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),Nr(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(Ke.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Te(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Te(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Te(a.onPointerLeave,()=>{c()})})}),F7="SelectSeparator",P2=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Ke.div,{"aria-hidden":!0,...n,ref:t})});P2.displayName=F7;var Rm="SelectArrow",z7=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=rh(r),i=Ia(Rm,r),o=Ma(Rm,r);return i.open&&o.position==="popper"?s.jsx(Zg,{...a,...n,ref:t}):null});z7.displayName=Rm;function O2(e){return e===""||e===void 0}var A2=h.forwardRef((e,t)=>{const{value:r,...n}=e,a=h.useRef(null),i=ft(t,a),o=_7(r);return h.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&u){const f=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(f)}},[o,r]),s.jsx(gc,{asChild:!0,children:s.jsx("select",{...n,ref:i,defaultValue:r})})});A2.displayName="BubbleSelect";function D2(e){const t=Gr(e),r=h.useRef(""),n=h.useRef(0),a=h.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=h.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function R2(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=B7(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function B7(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var U7=i2,I2=l2,W7=d2,V7=u2,H7=h2,M2=f2,q7=x2,G7=y2,$2=w2,L2=_2,K7=N2,Y7=k2,F2=C2,z2=E2,B2=P2;const Qe=U7,In=G7,Je=W7,qe=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(I2,{ref:n,className:_e("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(V7,{asChild:!0,children:s.jsx(zg,{className:"h-4 w-4 opacity-50"})})]}));qe.displayName=I2.displayName;const U2=h.forwardRef(({className:e,...t},r)=>s.jsx(F2,{ref:r,className:_e("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Iw,{className:"h-4 w-4"})}));U2.displayName=F2.displayName;const W2=h.forwardRef(({className:e,...t},r)=>s.jsx(z2,{ref:r,className:_e("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(zg,{className:"h-4 w-4"})}));W2.displayName=z2.displayName;const Ge=h.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(H7,{children:s.jsxs(M2,{ref:a,className:_e("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(U2,{}),s.jsx(q7,{className:_e("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(W2,{})]})}));Ge.displayName=M2.displayName;const mn=h.forwardRef(({className:e,...t},r)=>s.jsx($2,{ref:r,className:_e("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));mn.displayName=$2.displayName;const ve=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(L2,{ref:n,className:_e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Y7,{children:s.jsx(Dw,{className:"h-4 w-4"})})}),s.jsx(K7,{children:t})]}));ve.displayName=L2.displayName;const Q7=h.forwardRef(({className:e,...t},r)=>s.jsx(B2,{ref:r,className:_e("-mx-1 my-1 h-px bg-muted",e),...t}));Q7.displayName=B2.displayName;const gi=[{value:"5",label:"الجمعة"},{value:"6",label:"السبت"},{value:"0",label:"الأحد"},{value:"1",label:"الإثنين"},{value:"2",label:"الثلاثاء"},{value:"3",label:"الأربعاء"},{value:"4",label:"الخميس"}];function pi(e){const t=gi.find(r=>r.value===e.toString());return t?t.label:""}function is(e){try{const[t,r]=e.split(":"),n=parseInt(t,10),a=n>=12?"مساءً":"صباحاً";return`${n>12?n-12:n===0?12:n}:${r} ${a}`}catch{return e}}const $a="study_circles";async function gv(e){if(!e.length)return{};const{data:t,error:r}=await le.from("study_circles").select("id,teacher_id").in("teacher_id",e).is("deleted_at",null);if(r)return console.error("Error fetching study circles:",r),{};const n={};return e.forEach(a=>{n[a]=0}),t.forEach(a=>{a.teacher_id&&n.hasOwnProperty(a.teacher_id)&&n[a.teacher_id]++}),n}const Ta=async()=>{try{const{data:e,error:t}=await le.from($a).select(`
        *,
        teacher:teacher_id (
          id,
          full_name
        )
      `).is("deleted_at",null).order("created_at",{ascending:!1});return t?(console.error("خطأ في استرجاع الحلقات الدراسية:",t),[]):e}catch(e){return console.error("خطأ غير متوقع في استرجاع الحلقات الدراسية:",e),[]}},Im=async e=>{try{const{data:t,error:r}=await le.from($a).select(`
        *,
        teacher:teacher_id (
          id,
          full_name
        )
      `).eq("teacher_id",e).is("deleted_at",null).order("created_at",{ascending:!1});return r?(console.error("خطأ في استرجاع حلقات المعلم:",r),[]):t}catch(t){return console.error("خطأ غير متوقع في استرجاع حلقات المعلم:",t),[]}},ks=async e=>{try{const{data:t,error:r}=await le.from($a).select(`
        *,
        teacher:teacher_id (
          id,
          full_name
        )
      `).eq("teacher_id",e).is("deleted_at",null);return r?(console.error("خطأ في استرجاع الحلقات الدراسية للمعلم:",r),[]):t||[]}catch(t){return console.error("خطأ في استرجاع الحلقات الدراسية للمعلم:",t),[]}},J7=async e=>{try{const{data:t,error:r}=await le.from($a).select(`
        *,
        teacher:teacher_id (
          id,
          full_name
        )
      `).eq("id",e).is("deleted_at",null).single();return r?(console.error("خطأ في استرجاع الحلقة الدراسية:",r),null):t||null}catch(t){return console.error("خطأ في استرجاع الحلقة الدراسية:",t),null}},V2=async e=>{try{const{data:t,error:r}=await Rt.from($a).insert([e]).select();return r?(console.error("خطأ في إنشاء الحلقة الدراسية:",r),{success:!1,message:`فشل في إنشاء الحلقة الدراسية: ${r.message}`}):{success:!0,id:t&&t[0]?t[0].id:void 0,message:"تم إنشاء الحلقة الدراسية بنجاح"}}catch(t){return console.error("خطأ في إنشاء الحلقة الدراسية:",t),{success:!1,message:"حدث خطأ أثناء إنشاء الحلقة الدراسية"}}},H2=async e=>{try{const{data:t,error:r}=await le.from($a).select("teacher_id").eq("id",e).is("deleted_at",null).single();return r?(console.error("خطأ في استرجاع معلم الحلقة الدراسية:",r),null):(t==null?void 0:t.teacher_id)||null}catch(t){return console.error("خطأ في استرجاع معلم الحلقة الدراسية:",t),null}},q2=async e=>{try{const{error:t}=await Rt.from($a).update(e).eq("id",e.id);return t?(console.error("خطأ في تحديث الحلقة الدراسية:",t),{success:!1,message:`فشل في تحديث الحلقة الدراسية: ${t.message}`}):{success:!0,message:"تم تحديث الحلقة الدراسية بنجاح"}}catch(t){return console.error("خطأ في تحديث الحلقة الدراسية:",t),{success:!1,message:"حدث خطأ أثناء تحديث الحلقة الدراسية"}}},G2=async e=>{try{const{error:t}=await Rt.from($a).update({deleted_at:new Date().toISOString()}).eq("id",e);return t?(console.error("خطأ في حذف الحلقة الدراسية:",t),{success:!1,message:`فشل في حذف الحلقة الدراسية: ${t.message}`}):{success:!0,message:"تم حذف الحلقة الدراسية بنجاح"}}catch(t){return console.error("خطأ في حذف الحلقة الدراسية:",t),{success:!1,message:"حدث خطأ أثناء حذف الحلقة الدراسية"}}},nh="study_circle_schedules",sh=async e=>{try{const{data:t,error:r}=await le.from(nh).select("*").eq("study_circle_id",e).order("weekday").order("start_time");return r?(console.error("خطأ في استرجاع جدولة الحلقة الدراسية:",r),[]):t||[]}catch(t){return console.error("خطأ في استرجاع جدولة الحلقة الدراسية:",t),[]}},O0=async e=>{try{const{data:t,error:r}=await Rt.from(nh).insert([e]).select();return r?r.code==="23505"?{success:!1,message:"هناك جدولة موجودة بالفعل في نفس اليوم والوقت لهذه الحلقة"}:(console.error("خطأ في إنشاء جدولة الحلقة الدراسية:",r),{success:!1,message:`فشل في إنشاء الجدولة: ${r.message}`}):{success:!0,id:t&&t[0]?t[0].id:void 0,message:"تم إضافة الجدولة بنجاح"}}catch(t){return console.error("خطأ في إنشاء جدولة الحلقة الدراسية:",t),{success:!1,message:"حدث خطأ أثناء إضافة الجدولة"}}},A0=async e=>{try{const{error:t}=await Rt.from(nh).update(e).eq("id",e.id);return t?t.code==="23505"?{success:!1,message:"هناك جدولة موجودة بالفعل في نفس اليوم والوقت لهذه الحلقة"}:(console.error("خطأ في تحديث جدولة الحلقة الدراسية:",t),{success:!1,message:`فشل في تحديث الجدولة: ${t.message}`}):{success:!0,message:"تم تحديث الجدولة بنجاح"}}catch(t){return console.error("خطأ في تحديث جدولة الحلقة الدراسية:",t),{success:!1,message:"حدث خطأ أثناء تحديث الجدولة"}}},D0=async e=>{try{const{error:t}=await Rt.from(nh).delete().eq("id",e);return t?(console.error("خطأ في حذف جدولة الحلقة الدراسية:",t),{success:!1,message:`فشل في حذف الجدولة: ${t.message}`}):{success:!0,message:"تم حذف الجدولة بنجاح"}}catch(t){return console.error("خطأ في حذف جدولة الحلقة الدراسية:",t),{success:!1,message:"حدث خطأ أثناء حذف الجدولة"}}};function X7({onNavigate:e,userRole:t,currentUserId:r,teacherOnly:n=!1}){const[a,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[m,v]=h.useState(!0),[x,g]=h.useState(n?"teachers":"admins"),b=async()=>{try{let U=[];if(x==="teachers"?U=o:x==="admins"?U=a:x==="superadmins"&&(U=c),U.length>0){const $e=U.map(ms=>ms.id);console.log("🔄 refreshCircleCounts - ids to refresh:",$e);const pr=await gv($e);console.log("🔄 refreshCircleCounts - updated counts:",pr),Qo(pr)}}catch(U){console.error("❌ Error refreshing circle counts:",U)}},[y,p]=h.useState(!1),[w,S]=h.useState("add"),[C,T]=h.useState(ue.addUserForm.title),[O,$]=h.useState(!1),[Q,K]=h.useState(null),[A,_]=h.useState(!1),[I,j]=h.useState(null),[k,D]=h.useState(!1),[z,M]=h.useState(null),[B,X]=h.useState(!1),[J,L]=h.useState(null),[ne,ae]=h.useState(""),[Z,se]=h.useState(""),[re,ye]=h.useState(""),[je,q]=h.useState(!1),[Y,oe]=h.useState(!1),[De,W]=h.useState(!1),[ie,Ae]=h.useState(""),[Re,It]=h.useState(""),[Xe,pt]=h.useState(""),[Mt,xt]=h.useState(""),[Ut,Qt]=h.useState("admin"),[Ht,sr]=h.useState(!1),[$t,qt]=h.useState(!1),[Ve,ar]=h.useState(null),[Ct,R]=h.useState([]),[G,ge]=h.useState(!1),[Me,ze]=h.useState(!1),[Se,pe]=h.useState(null),[Oe,N]=h.useState(!1),[E,H]=h.useState({name:"",max_students:""}),[ce,Ne]=h.useState(!1),[Pe,ct]=h.useState(!1),[st,Jt]=h.useState({name:"",max_students:""}),[Xt,Et]=h.useState(!1),[ot,Nn]=h.useState(null),[F,ke]=h.useState([]),[Ue,jt]=h.useState(!1),[Sn,Gt]=h.useState(!1),[Yn,ji]=h.useState(!1),[mr,Nc]=h.useState({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),[ah,_i]=h.useState(!1),[Sc,kc]=h.useState(null),[Yr,Qr]=h.useState(!1),[gr,Cc]=h.useState({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),[La,Qo]=h.useState({}),{toast:Le}=_n();h.useEffect(()=>{Bs()},[]),h.useEffect(()=>{async function U(){let $e=[];if(x==="teachers"?$e=o:x==="admins"&&($e=a),console.log("🔍 fetchCircleCounts - activeTab:",x),console.log("📝 fetchCircleCounts - usersList length:",$e.length),console.log("👥 fetchCircleCounts - usersList:",$e.map(pr=>({id:pr.id,name:pr.full_name}))),$e.length>0){const pr=$e.map(ms=>ms.id);console.log("🆔 fetchCircleCounts - ids to fetch:",pr);try{const ms=await gv(pr);console.log("📊 fetchCircleCounts - counts received:",ms),console.log("🔢 fetchCircleCounts - total counts entries:",Object.keys(ms).length),Qo(ms)}catch(ms){console.error("❌ Error fetching circle counts:",ms)}}else console.log("⚠️ No users to fetch circle counts for")}U()},[o,a,x]);const Bs=async()=>{v(!0);try{if(n&&t==="teacher"&&r){const U=await p0(r);U&&(f(U),l([U]))}else{if(t==="superadmin"||t==="admin"){const U=await cA();i(U);const $e=await lA();l($e)}if(t==="superadmin"){const U=await mA();d(U)}}}catch(U){console.error(Ie.consoleUserLoadError,U),Le({title:ue.loadError.title,description:ue.loadError.description,variant:"destructive"})}finally{v(!1)}},P=()=>{S("add"),T(ue.addUserForm.title),Ae(""),It(""),pt(""),xt(""),Qt(x==="admins"?"admin":"teacher"),p(!0)},fe=async U=>{S("edit"),T(ue.editUserForm.title),Ae(U.id),It(U.full_name),pt(U.username),xt(""),Qt(U.role),p(!0)},Ee=U=>{K(U),$(!0)},Tt=async()=>{if(Q)try{const U=await fA(Q.id);U.success?(Le({title:ue.deleteSuccess,description:ue.deleteSuccessMessage}),Bs()):Le({title:ue.deleteFailed,description:U.message||ue.deleteUserError,variant:"destructive"})}catch(U){console.error(Ie.consoleUserSaveError,U),Le({title:Ie.generalError,description:ue.unexpectedError,variant:"destructive"})}finally{$(!1),K(null)}},rt=U=>{L(U),ae(""),se(""),ye(""),q(!1),oe(!1),W(!1),X(!0)},Lt=async()=>{if(J){if(Z!==re){Le({title:Ie.generalError,description:ue.changePasswordForm.passwordsMismatch,variant:"destructive"});return}try{let U;if(J.id===r){if(!ne){Le({title:Ie.generalError,description:ue.incompleteDataMessage,variant:"destructive"});return}U=await uA(J.id,ne,Z)}else if(t==="superadmin"||t==="admin"&&J.role==="teacher")U=await hA(J.id,Z);else{Le({title:Ie.permissionError,description:ue.accessDeniedMessage,variant:"destructive"});return}U.success?(Le({title:ue.changePasswordForm.success,description:U.message}),X(!1),L(null)):Le({title:ue.changePasswordForm.error,description:U.message,variant:"destructive"})}catch(U){console.error(Ie.consoleUserSaveError,U),Le({title:Ie.generalError,description:ue.unexpectedError,variant:"destructive"})}}},kr=async()=>{if(!Re||!Xe||w==="add"&&!Mt){Le({title:ue.incompleteData,description:ue.incompleteDataMessage,variant:"destructive"});return}if(t==="admin"&&Ut!=="teacher"){Le({title:Ie.permissionError,description:ue.adminEditRestriction,variant:"destructive"});return}try{if(w==="add"){const $e=await oA({full_name:Re,username:Xe,password:Mt,role:Ut});$e.success?(Le({title:ue.addSuccess,description:ue.addSuccessMessage}),p(!1),Bs()):Le({title:ue.addFailed,description:$e.message||ue.addUserError,variant:"destructive"})}else{const U={id:ie,full_name:Re,username:Xe,role:Ut};Mt&&(U.password=Mt);const $e=await Hj(U);$e.success?(Le({title:ue.updateSuccess,description:ue.updateSuccessMessage}),p(!1),Bs()):Le({title:ue.updateFailed,description:$e.message||ue.updateUserError,variant:"destructive"})}}catch(U){console.error(Ie.consoleUserSaveError,U),Le({title:Ie.generalError,description:ue.unexpectedError,variant:"destructive"})}},Cr=async U=>{ge(!0);try{const $e=await ks(U);console.log("🔍 Loading circles for teacher:",U),console.log("📚 Found circles:",$e),R($e)}catch($e){console.error("❌ Error loading teacher circles:",$e),Le({title:Ie.generalError,description:"حدث خطأ أثناء تحميل الحلقات. الرجاء المحاولة مرة أخرى.",variant:"destructive"})}finally{ge(!1)}},$r=U=>{ar(U),Cr(U.id),qt(!0)},Ni=()=>{Jt({name:"",max_students:""}),Ne(!0)},R0=(U,$e)=>{Jt(pr=>({...pr,[U]:$e}))},nN=async()=>{if(!(!Ve||Pe))try{if(ct(!0),!st.name.trim()){Le({title:"خطأ في البيانات",description:"اسم الحلقة مطلوب",variant:"destructive"}),ct(!1);return}const U={teacher_id:Ve.id,name:st.name.trim(),max_students:st.max_students?parseInt(st.max_students):null};console.log("💾 Creating new circle:",U);const $e=await V2(U);$e.success?(Le({title:"✅ تمت الإضافة بنجاح",description:`تم إضافة الحلقة "${st.name}" بنجاح`,variant:"default"}),await Cr(Ve.id),await b(),Ne(!1)):Le({title:"خطأ في الإضافة",description:$e.message||"حدث خطأ أثناء إضافة الحلقة الجديدة",variant:"destructive"})}catch(U){console.error("❌ Error creating new circle:",U),Le({title:"خطأ غير متوقع",description:"حدث خطأ غير متوقع أثناء إضافة الحلقة الجديدة",variant:"destructive"})}finally{ct(!1)}},sN=U=>{var $e;pe(U),H({name:U.name||"",max_students:(($e=U.max_students)==null?void 0:$e.toString())||""}),ze(!0)},aN=async()=>{if(!(!Se||Oe))try{if(N(!0),!E.name.trim()){Le({title:"خطأ في البيانات",description:"اسم الحلقة مطلوب",variant:"destructive"});return}const U={id:Se.id,name:E.name.trim(),max_students:E.max_students?parseInt(E.max_students):null};console.log("💾 Updating circle with data:",U);const $e=await q2(U);$e.success?(Le({title:"✅ تم التحديث بنجاح",description:`تم تحديث بيانات الحلقة "${E.name}" بنجاح`,variant:"default"}),Ve&&await Cr(Ve.id),await b(),ze(!1),pe(null)):Le({title:"خطأ في التحديث",description:$e.message||"حدث خطأ أثناء تحديث بيانات الحلقة",variant:"destructive"})}catch(U){console.error("❌ Error updating circle:",U),Le({title:"خطأ غير متوقع",description:"حدث خطأ غير متوقع أثناء تحديث بيانات الحلقة",variant:"destructive"})}finally{N(!1)}},I0=(U,$e)=>{H(pr=>({...pr,[U]:$e}))},iN=U=>{j(U),_(!0)},oN=async()=>{if(I)try{const U=await G2(I.id);U.success?(Le({title:"🗑️ حذف الحلقة",description:`تم حذف الحلقة: "${I.name}" بنجاح`,variant:"destructive"}),console.log("✅ Circle deleted successfully:",I.id),Ve&&await Cr(Ve.id),await b()):Le({title:"خطأ في الحذف",description:U.message||"حدث خطأ أثناء حذف الحلقة",variant:"destructive"})}catch(U){console.error("❌ Error deleting circle:",U),Le({title:"خطأ غير متوقع",description:"حدث خطأ غير متوقع أثناء حذف الحلقة",variant:"destructive"})}finally{_(!1),j(null)}},lN=async U=>{Nn(U),await Ec(U.id),Et(!0)},Ec=async U=>{jt(!0);try{const $e=await sh(U);console.log("📅 Loaded schedules for circle:",$e),ke($e)}catch($e){console.error("❌ Error loading circle schedules:",$e),Le({title:"خطأ في تحميل الجدولة",description:"حدث خطأ أثناء تحميل جدولة الحلقة",variant:"destructive"})}finally{jt(!1)}},ih=()=>{Nc({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),Gt(!0)},Tc=(U,$e)=>{Nc(pr=>({...pr,[U]:$e}))},cN=async()=>{if(!(!ot||Yn))try{if(ji(!0),!mr.start_time||!mr.end_time){Le({title:"خطأ في البيانات",description:"الرجاء تحديد وقت البداية والنهاية",variant:"destructive"}),ji(!1);return}if(mr.start_time>=mr.end_time){Le({title:"خطأ في الأوقات",description:"يجب أن يكون وقت النهاية بعد وقت البداية",variant:"destructive"}),ji(!1);return}const U={study_circle_id:ot.id,weekday:parseInt(mr.weekday),start_time:mr.start_time,end_time:mr.end_time,location:mr.location.trim()||null};console.log("💾 Creating new schedule:",U);const $e=await O0(U);$e.success?(Le({title:"✅ تمت الإضافة بنجاح",description:`تم إضافة جدولة جديدة للحلقة "${ot.name}" بنجاح`,variant:"default"}),await Ec(ot.id),Gt(!1)):Le({title:"خطأ في الإضافة",description:$e.message||"حدث خطأ أثناء إضافة الجدولة الجديدة",variant:"destructive"})}catch(U){console.error("❌ Error creating new schedule:",U),Le({title:"خطأ غير متوقع",description:"حدث خطأ غير متوقع أثناء إضافة الجدولة الجديدة",variant:"destructive"})}finally{ji(!1)}},dN=U=>{kc(U),Cc({weekday:U.weekday.toString(),start_time:U.start_time.substring(0,5),end_time:U.end_time.substring(0,5),location:U.location||""}),_i(!0)},Pc=(U,$e)=>{Cc(pr=>({...pr,[U]:$e}))},uN=async()=>{if(!(!Sc||Yr))try{if(Qr(!0),!gr.start_time||!gr.end_time){Le({title:"خطأ في البيانات",description:"الرجاء تحديد وقت البداية والنهاية",variant:"destructive"});return}if(gr.start_time>=gr.end_time){Le({title:"خطأ في الأوقات",description:"يجب أن يكون وقت النهاية بعد وقت البداية",variant:"destructive"});return}const U={id:Sc.id,weekday:parseInt(gr.weekday),start_time:gr.start_time,end_time:gr.end_time,location:gr.location.trim()||null};console.log("💾 Updating schedule with data:",U);const $e=await A0(U);$e.success?(Le({title:"✅ تم التحديث بنجاح",description:"تم تحديث بيانات الجدولة بنجاح",variant:"default"}),ot&&await Ec(ot.id),_i(!1),kc(null)):Le({title:"خطأ في التحديث",description:$e.message||"حدث خطأ أثناء تحديث بيانات الجدولة",variant:"destructive"})}catch(U){console.error("❌ Error updating schedule:",U),Le({title:"خطأ غير متوقع",description:"حدث خطأ غير متوقع أثناء تحديث بيانات الجدولة",variant:"destructive"})}finally{Qr(!1)}},hN=U=>{M(U),D(!0)},fN=async()=>{if(z)try{const U=await D0(z.id);U.success?(Le({title:"🗑️ حذف الجدولة",description:"تم حذف الجدولة بنجاح",variant:"destructive"}),console.log("✅ Schedule deleted successfully:",z.id),ot&&await Ec(ot.id)):Le({title:"خطأ في الحذف",description:U.message||"حدث خطأ أثناء حذف الجدولة",variant:"destructive"})}catch(U){console.error("❌ Error deleting schedule:",U),Le({title:"خطأ غير متوقع",description:"حدث خطأ غير متوقع أثناء حذف الجدولة",variant:"destructive"})}finally{D(!1),M(null)}};if(t!=="superadmin"&&t!=="admin"&&t!=="teacher")return s.jsxs("div",{className:"container mx-auto p-8 text-center",children:[s.jsx(m4,{className:"h-16 w-16 mx-auto text-destructive mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:ue.accessDenied}),s.jsx("p",{className:"mb-4",children:ue.accessDeniedMessage}),s.jsx(V,{onClick:()=>e("/"),children:ue.returnToHome})]});const mN=async()=>{try{v(!0),Le({title:"تحديث البيانات",description:"جاري تحديث البيانات..."}),await Bs(),(x==="teachers"||x==="admins")&&await b(),Le({title:"تم التحديث",description:"تم تحديث البيانات بنجاح",variant:"default"})}catch(U){console.error("خطأ في تحديث البيانات:",U),Le({title:Ie.generalError,description:"حدث خطأ أثناء تحديث البيانات",variant:"destructive"})}finally{v(!1)}};return s.jsxs("div",{className:"container mx-auto py-6",dir:"rtl",children:[s.jsxs(nt,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsx(ut,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(dt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(lm,{className:"h-5 w-5 text-yellow-300"}),n&&t==="teacher"?ue.teacherProfileTitle:ue.title]}),s.jsx(Dt,{className:"text-xs md:text-sm text-green-100 mt-1",children:n&&t==="teacher"?ue.teacherProfileDescription:ue.description})]}),s.jsxs(V,{variant:"outline",className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:mN,children:[s.jsx(Un,{className:"h-4 w-4"}),"تحديث"]})]})}),s.jsx(Ze,{children:n&&t==="teacher"?s.jsx(nt,{children:s.jsx(Ze,{className:"p-4",children:m?s.jsx("div",{className:"text-center p-4",children:ue.loading}):s.jsx(od,{users:o,onEdit:fe,onDelete:Ee,onChangePassword:rt,userRole:t,currentUserId:r,userType:"teacher",showOnlyChangePassword:!0,teacherCircleCounts:La})})}):s.jsxs(Do,{value:x,onValueChange:g,className:"w-full",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs(hi,{children:[t==="superadmin"&&s.jsxs(ur,{value:"superadmins",className:"flex items-center gap-2",children:[s.jsx(nx,{className:"h-4 w-4"}),s.jsx("span",{children:ue.superadmins})]}),(t==="superadmin"||t==="admin")&&s.jsxs(ur,{value:"admins",className:"flex items-center gap-2",children:[s.jsx(ix,{className:"h-4 w-4"}),s.jsx("span",{children:ue.administrators})]}),s.jsxs(ur,{value:"teachers",className:"flex items-center gap-2",children:[s.jsx(Pl,{className:"h-4 w-4"}),s.jsx("span",{children:ue.teachers})]})]}),(t==="superadmin"||t==="admin"&&x==="teachers")&&s.jsxs(V,{onClick:P,className:"bg-islamic-green hover:bg-islamic-green/90",children:[s.jsx($n,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:x==="admins"?ue.addNewAdmin:x==="superadmins"?ue.addNewSuperadmin:ue.addNewteacher})]})]}),t==="superadmin"&&s.jsx(on,{value:"superadmins",className:"mt-0",children:s.jsx(nt,{children:s.jsx(Ze,{className:"p-4",children:m?s.jsx("div",{className:"text-center p-4",children:ue.loading}):s.jsx(od,{users:c,onEdit:fe,onDelete:Ee,onChangePassword:rt,userRole:t,currentUserId:r,userType:"superadmin",teacherCircleCounts:La})})})}),(t==="superadmin"||t==="admin")&&s.jsx(on,{value:"admins",className:"mt-0",children:s.jsx(nt,{children:s.jsx(Ze,{className:"p-4",children:m?s.jsx("div",{className:"text-center p-4",children:ue.loading}):s.jsx(od,{users:a,onEdit:fe,onDelete:Ee,onChangePassword:rt,userRole:t,currentUserId:r,userType:"admin",teacherCircleCounts:La,onShowCircles:$r})})})}),s.jsx(on,{value:"teachers",className:"mt-0",children:s.jsx(nt,{children:s.jsx(Ze,{className:"p-4",children:m?s.jsx("div",{className:"text-center p-4",children:ue.loading}):s.jsx(od,{users:o,onEdit:fe,onDelete:Ee,onChangePassword:rt,userRole:t,currentUserId:r,userType:"teacher",teacherCircleCounts:La,onShowCircles:$r})})})})]})})]}),s.jsx(St,{open:y,onOpenChange:p,children:s.jsxs(yt,{className:"sm:max-w-[425px]",children:[s.jsx(Pt,{children:s.jsx(Ot,{className:"text-center text-xl font-bold",children:C})}),s.jsxs("div",{className:"grid gap-4 py-4",dir:"rtl",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"full_name",children:ue.fullName}),s.jsx(me,{id:"full_name",value:Re,onChange:U=>It(U.target.value),placeholder:ue.fullName})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"username",children:ue.username}),s.jsx(me,{id:"username",value:Xe,onChange:U=>pt(U.target.value),placeholder:ue.username})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs(ee,{htmlFor:"password",children:[ue.addUserForm.password," ",w==="edit"&&ue.passwordKeep]}),s.jsxs("div",{className:"relative",children:[s.jsx(me,{id:"password",type:Ht?"text":"password",value:Mt,onChange:U=>xt(U.target.value),placeholder:w==="add"?ue.enterPassword:ue.enterNewPassword}),s.jsx("button",{type:"button",onClick:()=>sr(!Ht),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:Ht?s.jsx(gl,{size:18}):s.jsx(pl,{size:18})})]})]}),t==="superadmin"&&s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"role",children:ue.role}),s.jsxs(Qe,{value:Ut,onValueChange:U=>Qt(U),children:[s.jsx(qe,{children:s.jsx(Je,{placeholder:ue.chooseRole})}),s.jsxs(Ge,{children:[s.jsx(ve,{value:"superadmin",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nx,{className:"h-4 w-4"}),s.jsx("span",{children:ue.superadmin})]})}),s.jsx(ve,{value:"admin",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ix,{className:"h-4 w-4"}),s.jsx("span",{children:ue.admin})]})}),s.jsx(ve,{value:"teacher",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pl,{className:"h-4 w-4"}),s.jsx("span",{children:ue.teacher})]})})]})]})]}),t==="admin"&&s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"role",children:ue.role}),s.jsxs(Qe,{value:Ut,onValueChange:U=>Qt(U),disabled:!0,children:[s.jsx(qe,{children:s.jsx(Je,{placeholder:ue.chooseRole})}),s.jsx(Ge,{children:s.jsx(ve,{value:"teacher",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pl,{className:"h-4 w-4"}),s.jsx("span",{children:ue.teacher})]})})})]})]})]}),s.jsxs(bt,{dir:"rtl",className:"flex justify-start gap-2",children:[s.jsx(V,{onClick:kr,className:"bg-islamic-green hover:bg-islamic-green/90",children:w==="add"?ue.addUser:ue.saveChanges}),s.jsx(V,{variant:"outline",onClick:()=>p(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:ue.cancel})]})]})}),s.jsx(yn,{isOpen:O,onOpenChange:$,onConfirm:Tt,isLoading:m,title:"تأكيد حذف المستخدم",description:Q?`هل أنت متأكد من رغبتك في حذف المستخدم "${Q.full_name}"؟ لا يمكن التراجع عن هذا الإجراء.`:"",deleteButtonText:"نعم، احذف المستخدم",cancelButtonText:"إلغاء"}),s.jsx(yn,{isOpen:A,onOpenChange:_,onConfirm:oN,isLoading:!1,title:"تأكيد حذف الحلقة",description:I?`هل أنت متأكد من رغبتك في حذف الحلقة "${I.name}"؟ لا يمكن التراجع عن هذا الإجراء.`:"",deleteButtonText:"نعم، احذف الحلقة",cancelButtonText:"إلغاء"}),s.jsx(yn,{isOpen:k,onOpenChange:D,onConfirm:fN,isLoading:!1,title:"تأكيد حذف الموعد",description:z?`هل أنت متأكد من رغبتك في حذف موعد الحلقة في يوم ${pi(z.weekday)}؟ لا يمكن التراجع عن هذا الإجراء.`:"",deleteButtonText:"نعم، احذف الموعد",cancelButtonText:"إلغاء"}),s.jsx(St,{open:B,onOpenChange:X,children:s.jsxs(yt,{className:"sm:max-w-[425px]",children:[s.jsx(Pt,{children:s.jsx(Ot,{className:"text-center text-xl font-bold",children:ue.changePasswordForm.title})}),s.jsxs("div",{className:"grid gap-4 py-4",dir:"rtl",children:[J&&J.id===r&&s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"current_password",children:ue.changePasswordForm.currentPassword}),s.jsxs("div",{className:"relative",children:[s.jsx(me,{id:"current_password",type:je?"text":"password",value:ne,onChange:U=>ae(U.target.value),placeholder:ue.changePasswordForm.currentPassword}),s.jsx("button",{type:"button",onClick:()=>q(!je),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:je?s.jsx(gl,{size:18}):s.jsx(pl,{size:18})})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"new_password",children:ue.changePasswordForm.newPassword}),s.jsxs("div",{className:"relative",children:[s.jsx(me,{id:"new_password",type:Y?"text":"password",value:Z,onChange:U=>se(U.target.value),placeholder:ue.changePasswordForm.newPassword}),s.jsx("button",{type:"button",onClick:()=>oe(!Y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:Y?s.jsx(gl,{size:18}):s.jsx(pl,{size:18})})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"confirm_password",children:ue.changePasswordForm.confirmNewPassword}),s.jsxs("div",{className:"relative",children:[s.jsx(me,{id:"confirm_password",type:De?"text":"password",value:re,onChange:U=>ye(U.target.value),placeholder:ue.changePasswordForm.confirmNewPassword}),s.jsx("button",{type:"button",onClick:()=>W(!De),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:De?s.jsx(gl,{size:18}):s.jsx(pl,{size:18})})]})]})]}),s.jsxs(bt,{dir:"rtl",className:"flex justify-start gap-2",children:[s.jsx(V,{onClick:Lt,className:"bg-islamic-green hover:bg-islamic-green/90",children:ue.changePasswordForm.submit}),s.jsx(V,{variant:"outline",onClick:()=>X(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:ue.cancel})]})]})}),s.jsx(St,{open:$t,onOpenChange:qt,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[700px] max-h-[80vh] overflow-auto",children:[s.jsxs(Pt,{className:"flex flex-col items-center border-b border-islamic-green/20 pb-4",children:[s.jsxs(Ot,{className:"text-xl text-islamic-green flex items-center gap-2",children:[s.jsx(Yt,{className:"h-5 w-5"}),Ve?`حلقات ${Ve.full_name}`:"حلقات المستخدم"]}),s.jsx(Ur,{className:"text-center text-muted-foreground",children:"عرض وإدارة الحلقات الدراسية الخاصة بالمستخدم"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(it,{variant:"outline",className:"text-islamic-green border-islamic-green/40",children:[Ct.length," حلقة"]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"إجمالي الحلقات"})]}),Ve&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(it,{variant:"secondary",className:"text-xs",children:["المعلم: ",Ve.full_name]})})]}),s.jsxs(V,{onClick:Ni,className:"bg-islamic-green hover:bg-islamic-green/90 text-white",size:"sm",children:[s.jsx($n,{className:"h-4 w-4 ml-2"}),"إضافة حلقة جديدة"]})]}),G?s.jsx("div",{className:"text-center p-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-islamic-green mb-4"}),s.jsx("span",{className:"text-muted-foreground",children:"جاري تحميل الحلقات..."})]})}):Ct.length===0?s.jsxs("div",{className:"text-center p-8 bg-muted/30 rounded-lg",children:[s.jsx(Yt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-medium text-lg mb-2",children:"لا توجد حلقات"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"لم يتم تسجيل أي حلقات لهذا المستخدم بعد"}),s.jsxs(V,{onClick:Ni,className:"bg-islamic-green hover:bg-islamic-green/90",children:[s.jsx($n,{className:"h-4 w-4 ml-2"}),"إضافة أول حلقة"]})]}):s.jsx("div",{className:"border border-islamic-green/20 rounded-lg overflow-hidden",children:s.jsxs(Rs,{className:"min-w-full border border-green-300 rounded-2xl overflow-hidden shadow-lg",children:[s.jsx(Is,{className:"bg-islamic-green",children:s.jsxs(nr,{children:[s.jsx(Be,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:"📖 اسم الحلقة"}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"👥 الحد الأقصى للطلاب"}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"📅 تاريخ الإنشاء"}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4",children:"⚙️ الإجراءات"})]})}),s.jsx(Ms,{children:Ct.map(U=>s.jsxs(nr,{className:"border-b border-green-200 hover:bg-green-50 dark:hover:bg-green-900 transition-colors duration-200",children:[s.jsx(Fe,{className:"text-right font-medium py-2 px-4 border-r border-green-200",children:U.name}),s.jsx(Fe,{className:"text-center py-2 px-4 border-r border-green-200",children:s.jsx(it,{variant:"secondary",className:"text-sm px-2 py-1 rounded-lg",children:U.max_students||"غير محدد"})}),s.jsx(Fe,{className:"text-center text-sm text-muted-foreground py-2 px-4 border-r border-green-200",children:U.created_at?new Date(U.created_at).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):"-"}),s.jsx(Fe,{className:"text-center py-2 px-4",children:s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>lN(U),className:"h-8 w-8 p-0 hover:bg-blue-50 dark:hover:bg-blue-900 transition-colors rounded-lg",title:"جدولة الحلقة",children:s.jsx(Ar,{className:"h-4 w-4 text-blue-500 dark:text-blue-300"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>sN(U),className:"h-8 w-8 p-0 hover:bg-islamic-green/10 transition-colors rounded-lg",title:"تعديل الحلقة",children:s.jsx(lr,{className:"h-4 w-4 text-islamic-green dark:text-green-300"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>iN(U),className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-700 transition-colors rounded-lg",title:"حذف الحلقة",children:s.jsx(Sr,{className:"h-4 w-4 text-red-500 dark:text-red-300"})})]})})]},U.id))})]})})]}),s.jsx(bt,{className:"sticky bottom-0 bg-background pt-4 border-t",dir:"rtl",children:s.jsxs("div",{className:"flex gap-2 w-full justify-end",children:[s.jsx(V,{variant:"outline",onClick:()=>qt(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:"إغلاق"}),s.jsxs(V,{onClick:Ni,className:"bg-islamic-green hover:bg-islamic-green/90 text-white",children:[s.jsx($n,{className:"h-4 w-4 ml-2"}),"إضافة حلقة"]})]})})]})}),s.jsx(St,{open:Me,onOpenChange:ze,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[400px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(Pt,{className:"flex flex-col items-center border-b border-islamic-green/20 pb-4",children:[s.jsxs(Ot,{className:"text-xl text-islamic-green flex items-center gap-2",children:[s.jsx(lr,{className:"h-5 w-5"}),"تعديل الحلقة"]}),s.jsx(Ur,{className:"text-center text-muted-foreground",children:"قم بتعديل بيانات الحلقة الدراسية"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"edit-circle-name",className:"text-right",children:"اسم الحلقة *"}),s.jsx(me,{id:"edit-circle-name",value:E.name,onChange:U=>I0("name",U.target.value),placeholder:"أدخل اسم الحلقة",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"edit-circle-max-students",className:"text-right",children:"الحد الأقصى للطلاب"}),s.jsx(me,{id:"edit-circle-max-students",type:"number",value:E.max_students,onChange:U=>I0("max_students",U.target.value),placeholder:"أدخل العدد الأقصى للطلاب",min:"1"})]})]}),s.jsxs(bt,{className:"gap-2",dir:"rtl",children:[s.jsx(V,{variant:"outline",onClick:()=>ze(!1),children:"إلغاء"}),s.jsx(V,{onClick:aN,className:"bg-islamic-green hover:bg-islamic-green/90",disabled:!E.name.trim()||Oe,children:Oe?"جارٍ الحفظ...":"حفظ التغييرات"})]})]})}),s.jsx(St,{open:ce,onOpenChange:Ne,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[400px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(Pt,{className:"flex flex-col items-center border-b border-islamic-green/20 pb-4",children:[s.jsxs(Ot,{className:"text-xl text-islamic-green flex items-center gap-2",children:[s.jsx($n,{className:"h-5 w-5"}),"إضافة حلقة جديدة"]}),s.jsx(Ur,{className:"text-center text-muted-foreground",children:"قم بإدخال بيانات الحلقة الدراسية الجديدة"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"add-circle-name",className:"text-right",children:"اسم الحلقة *"}),s.jsx(me,{id:"add-circle-name",value:st.name,onChange:U=>R0("name",U.target.value),placeholder:"أدخل اسم الحلقة",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"add-circle-max-students",className:"text-right",children:"الحد الأقصى للطلاب"}),s.jsx(me,{id:"add-circle-max-students",type:"number",value:st.max_students,onChange:U=>R0("max_students",U.target.value),placeholder:"أدخل العدد الأقصى للطلاب",min:"1"})]})]}),s.jsxs(bt,{className:"gap-2",dir:"rtl",children:[s.jsx(V,{variant:"outline",onClick:()=>Ne(!1),children:"إلغاء"}),s.jsx(V,{onClick:nN,className:"bg-islamic-green hover:bg-islamic-green/90",disabled:!st.name.trim()||Pe,children:Pe?"جارٍ الإضافة...":"إضافة الحلقة"})]})]})}),s.jsx(St,{open:Xt,onOpenChange:Et,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[900px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(Pt,{className:"flex flex-col items-center border-b border-islamic-green/20 pb-4",children:[s.jsxs(Ot,{className:"text-xl text-islamic-green flex items-center gap-2",children:[s.jsx(Ar,{className:"h-5 w-5"}),ot?`جدولة حلقة: ${ot.name} | المعلم: ${Ve==null?void 0:Ve.full_name}`:"جدولة الحلقة"]}),s.jsx(Ur,{className:"text-center text-muted-foreground",children:"إدارة مواعيد وأيام انعقاد الحلقة الدراسية"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(it,{variant:"outline",className:"text-islamic-green border-islamic-green/40",children:[F.length," موعد"]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"إجمالي المواعيد"})]}),ot&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(it,{variant:"secondary",className:"text-xs",children:["الحلقة: ",ot.name]})})]}),s.jsxs(V,{onClick:ih,className:"bg-islamic-green hover:bg-islamic-green/90 text-white",size:"sm",children:[s.jsx(Pr,{className:"h-4 w-4 ml-2"}),"إضافة موعد جديد"]})]}),Ue?s.jsx("div",{className:"text-center p-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-islamic-green mb-4"}),s.jsx("span",{className:"text-muted-foreground",children:"جاري تحميل جدولة الحلقة..."})]})}):F.length===0?s.jsxs("div",{className:"text-center p-8 bg-muted/30 rounded-lg",children:[s.jsx(Ar,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-medium text-lg mb-2",children:"لا توجد مواعيد محددة"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"لم يتم تسجيل أي مواعيد لهذه الحلقة بعد"}),s.jsxs(V,{onClick:ih,className:"bg-islamic-green hover:bg-islamic-green/90",children:[s.jsx(Pr,{className:"h-4 w-4 ml-2"}),"إضافة أول موعد"]})]}):s.jsx("div",{className:"border border-islamic-green/20 rounded-lg overflow-hidden",children:s.jsxs(Rs,{className:"min-w-full border border-green-300 rounded-2xl overflow-hidden shadow-lg",children:[s.jsx(Is,{className:"bg-islamic-green",children:s.jsxs(nr,{children:[s.jsx(Be,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:"📅 اليوم"}),s.jsx(Be,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:"⏱ من"}),s.jsx(Be,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:"⏱ إلى"}),s.jsx(Be,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:"📍 الموقع"}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"🗓 تاريخ الإضافة"}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4",children:"⚙️ الإجراءات"})]})}),s.jsx(Ms,{children:F.map(U=>s.jsxs(nr,{className:"border-b border-green-200 hover:bg-green-50 dark:hover:bg-green-900 transition-colors duration-200",children:[s.jsx(Fe,{className:"text-right font-medium py-2 px-4 border-r border-green-200",children:pi(U.weekday)}),s.jsx(Fe,{className:"text-right py-2 px-4 border-r border-green-200",children:s.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[s.jsx(dn,{className:"h-4 w-4 text-blue-500"}),is(U.start_time)]})}),s.jsx(Fe,{className:"text-right py-2 px-4 border-r border-green-200",children:s.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[s.jsx(dn,{className:"h-4 w-4 text-red-500"}),is(U.end_time)]})}),s.jsx(Fe,{className:"text-right py-2 px-4 border-r border-green-200",children:U.location?s.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[s.jsx(Tu,{className:"h-4 w-4 text-gray-500"}),U.location]}):s.jsx("div",{className:"text-muted-foreground italic text-sm",children:"استخدام موقع الحلقة الافتراضي"})}),s.jsx(Fe,{className:"text-center text-sm text-muted-foreground py-2 px-4 border-r border-green-200",children:U.created_at?new Date(U.created_at).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):"-"}),s.jsx(Fe,{className:"text-center py-2 px-4",children:s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>dN(U),className:"h-8 w-8 p-0 hover:bg-islamic-green/10 transition-colors rounded-lg",title:"تعديل الموعد",children:s.jsx(lr,{className:"h-4 w-4 text-islamic-green dark:text-green-300"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>hN(U),className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-700 transition-colors rounded-lg",title:"حذف الموعد",children:s.jsx(Sr,{className:"h-4 w-4 text-red-500 dark:text-red-300"})})]})})]},U.id))})]})})]}),s.jsx(bt,{className:"sticky bottom-0 bg-background pt-4 border-t",dir:"rtl",children:s.jsxs("div",{className:"flex gap-2 w-full justify-end",children:[s.jsx(V,{variant:"outline",onClick:()=>Et(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:"إغلاق"}),s.jsxs(V,{onClick:ih,className:"bg-islamic-green hover:bg-islamic-green/90 text-white",children:[s.jsx(Pr,{className:"h-4 w-4 ml-2"}),"إضافة موعد"]})]})})]})}),s.jsx(St,{open:Sn,onOpenChange:Gt,children:s.jsxs(yt,{className:"sm:max-w-[500px]",dir:"rtl",children:[s.jsxs(Pt,{children:[s.jsxs(Ot,{className:"text-xl font-bold text-islamic-green flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5"}),"إضافة موعد جديد"]}),s.jsx(Ur,{children:"قم بتحديد اليوم والوقت لإضافة موعد جديد للحلقة"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"add-schedule-weekday",className:"text-right",children:"اليوم *"}),s.jsxs(Qe,{value:mr.weekday,onValueChange:U=>Tc("weekday",U),children:[s.jsx(qe,{id:"add-schedule-weekday",children:s.jsx(Je,{placeholder:"اختر اليوم"})}),s.jsx(Ge,{children:gi.map(U=>s.jsx(ve,{value:U.value.toString(),children:U.label},U.value))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"add-schedule-start-time",className:"text-right",children:"وقت البداية *"}),s.jsx(me,{id:"add-schedule-start-time",type:"time",value:mr.start_time,onChange:U=>Tc("start_time",U.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"add-schedule-end-time",className:"text-right",children:"وقت النهاية *"}),s.jsx(me,{id:"add-schedule-end-time",type:"time",value:mr.end_time,onChange:U=>Tc("end_time",U.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{htmlFor:"add-schedule-location",className:"text-right",children:"الموقع (اختياري)"}),s.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[s.jsx(Eo,{className:"h-3 w-3 mr-1"}),"اتركه فارغاً لاستخدام موقع الحلقة الافتراضي"]})]}),s.jsx(me,{id:"add-schedule-location",value:mr.location,onChange:U=>Tc("location",U.target.value),placeholder:"أدخل موقع الموعد (اختياري)"})]})]}),s.jsxs(bt,{className:"gap-2",dir:"rtl",children:[s.jsx(V,{variant:"outline",onClick:()=>Gt(!1),children:"إلغاء"}),s.jsx(V,{onClick:cN,className:"bg-islamic-green hover:bg-islamic-green/90",disabled:!mr.start_time||!mr.end_time||Yn,children:Yn?"جارٍ الإضافة...":"إضافة الموعد"})]})]})}),s.jsx(St,{open:ah,onOpenChange:_i,children:s.jsxs(yt,{className:"sm:max-w-[500px]",dir:"rtl",children:[s.jsxs(Pt,{children:[s.jsxs(Ot,{className:"text-xl font-bold text-islamic-green flex items-center gap-2",children:[s.jsx(lr,{className:"h-5 w-5"}),"تعديل موعد"]}),s.jsx(Ur,{children:"قم بتعديل بيانات الموعد"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"edit-schedule-weekday",className:"text-right",children:"اليوم *"}),s.jsxs(Qe,{value:gr.weekday,onValueChange:U=>Pc("weekday",U),children:[s.jsx(qe,{id:"edit-schedule-weekday",children:s.jsx(Je,{placeholder:"اختر اليوم"})}),s.jsx(Ge,{children:gi.map(U=>s.jsx(ve,{value:U.value.toString(),children:U.label},U.value))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"edit-schedule-start-time",className:"text-right",children:"وقت البداية *"}),s.jsx(me,{id:"edit-schedule-start-time",type:"time",value:gr.start_time,onChange:U=>Pc("start_time",U.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"edit-schedule-end-time",className:"text-right",children:"وقت النهاية *"}),s.jsx(me,{id:"edit-schedule-end-time",type:"time",value:gr.end_time,onChange:U=>Pc("end_time",U.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{htmlFor:"edit-schedule-location",className:"text-right",children:"الموقع (اختياري)"}),s.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[s.jsx(Eo,{className:"h-3 w-3 mr-1"}),"اتركه فارغاً لاستخدام موقع الحلقة الافتراضي"]})]}),s.jsx(me,{id:"edit-schedule-location",value:gr.location,onChange:U=>Pc("location",U.target.value),placeholder:"أدخل موقع الموعد (اختياري)"})]})]}),s.jsxs(bt,{className:"gap-2",dir:"rtl",children:[s.jsx(V,{variant:"outline",onClick:()=>_i(!1),children:"إلغاء"}),s.jsx(V,{onClick:uN,className:"bg-islamic-green hover:bg-islamic-green/90",disabled:!gr.start_time||!gr.end_time||Yr,children:Yr?"جارٍ الحفظ...":"حفظ التغييرات"})]})]})})]})}function od({users:e,onEdit:t,onDelete:r,onChangePassword:n,userRole:a,currentUserId:i,userType:o,showOnlyChangePassword:l=!1,teacherCircleCounts:c={},onShowCircles:d,onAddCircle:u}){const f=o==="teacher"||o==="admin";if(e.length===0)return s.jsxs("div",{className:"text-center p-6 bg-muted/50 rounded-lg",children:[s.jsx(Xd,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("h3",{className:"font-medium text-lg mb-1",children:o==="admin"?ue.noAdmins:o==="superadmin"?ue.noSuperadmins:ue.noteachers}),s.jsx("p",{className:"text-muted-foreground text-sm",children:o==="admin"?ue.addAdminText:o==="superadmin"?ue.addSuperadminText:ue.addteacherText})]});const m=g=>a==="superadmin"||a==="admin"&&o==="teacher",v=g=>a==="superadmin"&&g.role!=="superadmin"||a==="admin"&&o==="teacher",x=g=>a==="superadmin"||a==="admin"&&g.role==="teacher"||g.id===i;return s.jsx(s.Fragment,{children:s.jsx("div",{className:"overflow-x-auto border border-islamic-green/20 rounded-lg",dir:"rtl",children:s.jsxs(Rs,{className:"min-w-full border border-green-300 rounded-2xl overflow-hidden shadow-lg",children:[s.jsx(Is,{className:"bg-islamic-green",children:s.jsxs(nr,{children:[s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"👤 الاسم الكامل"}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"🆔 اسم المستخدم"}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"🔑 الدور"}),f&&s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"📚 عدد الحلقات"}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"🗓 آخر تسجيل دخول"}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4",children:"⚙️ الإجراءات"})]})}),s.jsx(Ms,{children:e.map(g=>s.jsxs(nr,{className:"border-b border-green-200 hover:bg-green-50 dark:hover:bg-green-900 transition-colors duration-200",children:[s.jsx(Fe,{className:"text-center font-medium text-islamic-green/90 py-2 px-4 border-r border-green-200",children:g.full_name}),s.jsx(Fe,{className:"text-center text-islamic-green/80 py-2 px-4 border-r border-green-200",children:g.username}),s.jsx(Fe,{className:"text-center text-islamic-green/80 py-2 px-4 border-r border-green-200",children:g.role==="superadmin"?ue.superadmin:g.role==="admin"?ue.admin:ue.teacher}),f&&s.jsx(Fe,{className:"text-center py-2 px-4 border-r border-green-200",children:s.jsxs(it,{variant:"outline",className:"cursor-pointer hover:bg-islamic-green/10 hover:border-islamic-green/40 border-islamic-green/20 text-islamic-green font-medium px-3 py-1",onClick:()=>d&&d(g),title:"عرض الحلقات وإضافة جديدة",children:[c[g.id]??0," حلقة"]})}),s.jsx(Fe,{className:"text-center text-islamic-green/80 text-sm py-2 px-4 border-r border-green-200",children:g.last_login_at?new Date(g.last_login_at).toLocaleString("en-EG",{dateStyle:"medium",timeStyle:"short"}):"-"}),s.jsx(Fe,{className:"text-center py-2 px-4",children:s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>n(g),disabled:!x(g),title:ue.changePasswordTooltip,className:"h-8 w-8 p-0 hover:bg-amber-50 transition-colors rounded-lg",children:s.jsx(zw,{className:"h-4 w-4 text-amber-600/80"})}),!l&&s.jsxs(s.Fragment,{children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>t(g),disabled:!m(),title:m()?ue.editTooltip:ue.cannotEditSuperadmin,className:"h-8 w-8 p-0 hover:bg-islamic-green/10 transition-colors rounded-lg",children:s.jsx(lr,{className:"h-4 w-4 text-islamic-green/80"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>r(g),disabled:!v(g),title:v(g)?ue.deleteTooltip:ue.cannotDeleteSuperadmin,className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-700 transition-colors rounded-lg",children:s.jsx(Sr,{className:"h-4 w-4 text-red-500/80"})})]})]})})]},g.id))})]})})})}function Z7({onNavigate:e,userRole:t=null,currentUserId:r,teacherOnly:n=!1}){try{return console.log("UserManagementPage props:",{userRole:t,currentUserId:r,teacherOnly:n}),s.jsx(X7,{onNavigate:e,userRole:t,currentUserId:r,teacherOnly:n})}catch(a){return console.error("Error in UserManagementPage:",a),s.jsxs("div",{className:"container mx-auto p-8 text-center",children:[s.jsx("div",{className:"text-destructive text-4xl mb-4",children:"⚠️"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"حدث خطأ في صفحة إدارة المستخدمين"}),s.jsx("p",{className:"mb-4",children:"حدث خطأ غير متوقع. يرجى إعادة تحميل الصفحة أو التواصل مع الدعم."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"إعادة تحميل الصفحة"})]})}}const K2=({className:e,...t})=>s.jsx("nav",{role:"navigation","aria-label":"pagination",className:_e("mx-auto flex w-full justify-center",e),...t});K2.displayName="Pagination";const Y2=h.forwardRef(({className:e,...t},r)=>s.jsx("ul",{ref:r,className:_e("flex flex-row items-center gap-1",e),...t}));Y2.displayName="PaginationContent";const Zs=h.forwardRef(({className:e,...t},r)=>s.jsx("li",{ref:r,className:_e("",e),...t}));Zs.displayName="PaginationItem";const uo=({className:e,isActive:t,size:r="icon",...n})=>s.jsx("a",{"aria-current":t?"page":void 0,className:_e(Fu({variant:t?"outline":"ghost",size:r}),e),...n});uo.displayName="PaginationLink";const Q2=({className:e,...t})=>s.jsxs(uo,{"aria-label":"Go to previous page",size:"default",className:_e("gap-1 pl-2.5",e),...t,children:[s.jsx(Rw,{className:"h-4 w-4"}),s.jsx("span",{children:"Previous"})]});Q2.displayName="PaginationPrevious";const J2=({className:e,...t})=>s.jsxs(uo,{"aria-label":"Go to next page",size:"default",className:_e("gap-1 pr-2.5",e),...t,children:[s.jsx("span",{children:"Next"}),s.jsx(t4,{className:"h-4 w-4"})]});J2.displayName="PaginationNext";const eD=async e=>{try{const{data:t,error:r}=await le.from(cs).select("*").eq("id",e).single();return r?(console.error("خطأ في استرجاع ولي الأمر:",r),null):t?Wj(t):null}catch(t){return console.error("خطأ في استرجاع ولي الأمر:",t),null}},_c=async()=>{try{console.log("Fetching all guardians from table:",cs);const{data:e,error:t}=await le.from(cs).select(`
        *,
        students:students(id)
      `);if(t)return console.error("خطأ في استرجاع أولياء الأمور:",t),[];if(console.log("Guardians fetched from database:",e?e.length:0,"records"),e&&e.length>0)console.log("First guardian record:",e[0]);else{console.log("No guardian records found in database");const{data:r}=await le.from("information_schema.tables").select("table_name").eq("table_schema","public");console.log("Available tables:",r)}return e.map(r=>({...r,students_count:r.students?r.students.length:0}))}catch(e){return console.error("خطأ في استرجاع أولياء الأمور:",e),[]}},X2=async e=>{try{const t=crypto.randomUUID();e.id=t;const r=rA(e);console.log("Attempting to add guardian with data:",r),console.log("Using table:",cs);const{data:n,error:a}=await Rt.from(cs).insert([r]).select();return a?(console.error("خطأ في إضافة ولي الأمر:",a),{success:!1,message:`فشل في إضافة ولي الأمر: ${a.message}`}):(console.log("Guardian added successfully, response data:",n),setTimeout(()=>{le.from(cs).select("*").eq("id",t).then(({data:i,error:o})=>{o?console.error("Verification error:",o):console.log("Verification check found guardian:",i)})},500),{success:!0,id:t,message:"تم إضافة ولي الأمر بنجاح"})}catch(t){return console.error("خطأ في إضافة ولي الأمر:",t),{success:!1,message:"حدث خطأ أثناء إضافة ولي الأمر"}}},tD=async e=>{try{if(!e.id)return{success:!1,message:"معرف ولي الأمر مطلوب للتحديث"};const{error:t}=await Rt.from(cs).update(e).eq("id",e.id);return t?(console.error("خطأ في تحديث بيانات ولي الأمر:",t),{success:!1,message:`فشل في تحديث بيانات ولي الأمر: ${t.message}`}):{success:!0,message:"تم تحديث بيانات ولي الأمر بنجاح"}}catch(t){return console.error("خطأ في تحديث بيانات ولي الأمر:",t),{success:!1,message:"حدث خطأ أثناء تحديث بيانات ولي الأمر"}}},Mm=async e=>{try{if(!e)return await _c();const{data:t,error:r}=await le.from(cs).select("*").or(`full_name.ilike.%${e}%,phone_number.ilike.%${e}%,email.ilike.%${e}%`);return r?(console.error("خطأ في البحث عن أولياء الأمور:",r),[]):nA(t||[])}catch(t){return console.error("خطأ في البحث عن أولياء الأمور:",t),[]}},Z2=async e=>{try{const{error:t}=await Rt.from(cs).delete().eq("id",e);return t?(console.error("خطأ في حذف ولي الأمر:",t),{success:!1,message:`فشل في حذف ولي الأمر: ${t.message}`}):{success:!0,message:"تم حذف ولي الأمر بنجاح"}}catch(t){return console.error("خطأ في حذف ولي الأمر:",t),{success:!1,message:"حدث خطأ أثناء حذف ولي الأمر"}}},eN=async()=>{try{return{success:!0,data:await _c()}}catch(e){return console.error("خطأ في تصدير أولياء الأمور:",e),{success:!1,message:"حدث خطأ أثناء تصدير بيانات أولياء الأمور"}}},pv=Object.freeze(Object.defineProperty({__proto__:null,addGuardian:X2,deleteGuardian:Z2,exportGuardiansToJson:eN,getAllGuardians:_c,getGuardianById:eD,searchGuardians:Mm,updateGuardian:tD},Symbol.toStringTag,{value:"Module"})),$s=h.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:_e("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));$s.displayName="Textarea";async function rD(e){try{const{data:t,error:r}=await le.from("students").select(`
        *,
        study_circles:study_circle_id (
          id,
          name,
          teacher:teacher_id (
            id,
            full_name
          )
        )
      `).eq("guardian_id",e);return r?(console.error("Error fetching students by guardian id:",r),[]):t.map(n=>{var a,i,o;return{...n,teacher_name:((i=(a=n.study_circles)==null?void 0:a.teacher)==null?void 0:i.full_name)||null,circle_name:((o=n.study_circles)==null?void 0:o.name)||null,grade:n.grade_level||n.grade||null}})}catch(t){return console.error("Exception in getStudentsByGuardianId:",t),[]}}function nD({onNavigate:e,userRole:t,userId:r}){const{toast:n}=_n(),[a,i]=h.useState([]),[o,l]=h.useState(!0),[c,d]=h.useState(""),[u,f]=h.useState(1),[m,v]=h.useState(null),[x,g]=h.useState(!1);h.useEffect(()=>{console.log("Component mounted, fetching guardians..."),pe(),b()},[]);const b=async()=>{try{console.log("Loading teachers with userRole:",t,"and userId:",r);const F=await Xu();console.log("Loaded teachers (raw):",F),F.length===0&&console.warn("No teachers loaded from API!");const ke=F.filter(Ue=>Ue.role==="teacher"||Ue.role==="admin");if(console.log("Filtered teachers:",ke),Qt(ke),t==="teacher"&&r){console.log("Current user is teacher, setting teacher ID:",r);const Ue=ke.find(jt=>jt.id===r);console.log("teacher search result:",Ue),Ue?(console.log("Found teacher:",Ue.full_name),pt(r)):(console.warn("WARNING: Current teacher with ID",r,"not found in the list!"),console.log("Available teacher IDs:",ke.map(jt=>jt.id)))}}catch(F){console.error("خطأ في تحميل المعلمين:",F)}},[y,p]=h.useState(!1),[w,S]=h.useState("add"),[C,T]=h.useState(Ce.addGuardian),[O,$]=h.useState(!1),[Q,K]=h.useState(null),[A,_]=h.useState(""),[I,j]=h.useState(""),[k,D]=h.useState(""),[z,M]=h.useState(""),[B,X]=h.useState(""),[J,L]=h.useState(!1),[ne,ae]=h.useState(""),[Z,se]=h.useState(""),[re,ye]=h.useState(""),[je,q]=h.useState(""),[Y,oe]=h.useState(""),[De,W]=h.useState(""),[ie,Ae]=h.useState(""),[Re,It]=h.useState(""),[Xe,pt]=h.useState(""),[Mt,xt]=h.useState(""),[Ut,Qt]=h.useState([]),[Ht,sr]=h.useState(!1),[$t,qt]=h.useState(""),[Ve,ar]=h.useState(""),[Ct,R]=h.useState(!1),[G,ge]=h.useState([]),[Me,ze]=h.useState(""),Se=10;h.useEffect(()=>{pe()},[]);const pe=async F=>{l(!0),v(null);try{let ke;if(F?ke=await Mm(F):(ke=await _c(),d("")),console.log("Loaded guardians:",ke.length,"records"),ke.length>0)console.log("Sample guardian data:",JSON.stringify(ke[0]));else{console.log("No guardians found in the result, attempting direct database check");const{data:Ue}=await Ln(()=>Promise.resolve().then(()=>qx),void 0).then(jt=>jt.supabase.from("guardians").select("*").limit(5));console.log("Direct database check result:",Ue)}i(ke)}catch(ke){console.error(Ie.errorLoadingData,ke),v(Ie.fetchFailed),i([])}finally{l(!1)}},Oe=async()=>{if(!c.trim()){pe();return}l(!0);try{const F=await Mm(c);i(F),f(1),c&&F.length===0&&n({title:Ce.noSearchResults,description:Ce.tryAnotherSearch})}catch(F){console.error(Ie.searchError,F),n({title:Ie.fetchFailed,description:Ce.unexpectedError,variant:"destructive"})}finally{l(!1)}},N=async()=>{g(!0);try{const F=await eN();if(F.success&&F.data){const ke=new Blob([JSON.stringify(F.data,null,2)],{type:"application/json"}),Ue=URL.createObjectURL(ke),jt=document.createElement("a");jt.href=Ue,jt.download=`guardians_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(jt),jt.click(),document.body.removeChild(jt),URL.revokeObjectURL(Ue),n({title:"تم تصدير البيانات بنجاح",className:"bg-green-50 border-green-200"})}else v("فشل تصدير البيانات: "+(F.message||"خطأ غير معروف"))}catch(F){console.error("خطأ في تصدير البيانات:",F),v("تعذر تصدير البيانات")}finally{g(!1)}},E=()=>{S("add"),T(Ce.addGuardian),_(""),j(""),D(""),M(""),X(""),p(!0),setTimeout(()=>{const F=document.getElementById("full_name");F&&F.focus()},100)},H=(F,ke=!1)=>{ae(""),se(""),q(""),oe(""),W(""),Ae(""),It(""),xt(""),qt(""),ye(F||""),sr(ke),pt(t==="teacher"&&r?r:""),L(!0)},ce=async()=>{if(!ne||!Z){n({title:"بيانات غير مكتملة",description:"الرجاء تعبئة اسم الطالب والصف الدراسي",variant:"destructive"});return}if(Ht&&!re){n({title:"بيانات غير مكتملة",description:"الرجاء اختيار ولي أمر للطالب",variant:"destructive"});return}try{console.log("Creating student with values:",{full_name:ne,guardian_id:re,grade_level:Z,date_of_birth:je,phone_number:Y,email:De,memorized_parts:ie,teacher_id:Xe});const F={full_name:ne,guardian_id:re,grade_level:Z,date_of_birth:je||void 0,phone_number:Y||void 0,email:De||void 0,memorized_parts:ie||void 0,notes:Re||void 0,study_circle_id:Ve||void 0};Object.keys(F).forEach(Ue=>{F[Ue]===""&&(F[Ue]=void 0)}),console.log("Final student data being sent:",F);const ke=await u_(F);ke.success?(n({title:"تم إضافة الطالب بنجاح",description:"",className:"bg-green-50 border-green-200"}),L(!1),Et()):n({title:"فشل في حفظ بيانات الطالب",description:ke.message||"حدث خطأ غير متوقع",variant:"destructive"})}catch(F){console.error("خطأ في حفظ بيانات الطالب:",F),n({title:"خطأ",description:"حدث خطأ غير متوقع",variant:"destructive"})}},Ne=async F=>{S("edit"),T(Ce.editGuardian),_(F.id),j(F.full_name),D(F.phone_number),M(F.email||""),X(F.address||""),p(!0)},Pe=F=>{K(F),$(!0)},ct=async()=>{if(Q)try{const F=await Z2(Q.id);F.success?(n({title:Ce.deleteSuccess,description:"",className:"bg-green-50 border-green-200"}),pe()):n({title:Ie.deleteFailed||"فشل في الحذف",description:F.message||Ce.unexpectedError,variant:"destructive"})}catch(F){console.error("خطأ في حذف ولي الأمر:",F),n({title:Ie.generalError,description:Ce.unexpectedError,variant:"destructive"})}finally{$(!1),K(null)}},st=async()=>{if(!I||!k){n({title:Ce.incompleteData,description:Ce.incompleteDataMessage,variant:"destructive"});return}try{if(w==="add"){const F={full_name:I,phone_number:k,email:z||void 0,address:B||void 0},ke=await Ln(()=>Promise.resolve().then(()=>pv),void 0).then(Ue=>Ue.addGuardian(F));console.log("Guardian add result:",ke),ke.success?(n({title:Ce.addSuccess,description:"",className:"bg-green-50 border-green-200"}),p(!1),pe()):n({title:Ie.saveFailed||"فشل في الحفظ",description:ke.message||Ce.unexpectedError,variant:"destructive"})}else{const F={id:A,full_name:I,phone_number:k,email:z||void 0,address:B||void 0},ke=await Ln(()=>Promise.resolve().then(()=>pv),void 0).then(Ue=>Ue.updateGuardian(F));ke.success?(n({title:Ce.updateSuccess||"تم تحديث بيانات ولي الأمر بنجاح",description:"",className:"bg-green-50 border-green-200"}),p(!1),pe()):n({title:Ie.updateFailed||"فشل في التحديث",description:ke.message||Ce.unexpectedError,variant:"destructive"})}}catch(F){console.error("خطأ في حفظ بيانات ولي أمر:",F),n({title:Ie.generalError,description:Ce.unexpectedError,variant:"destructive"})}},Jt=async(F,ke)=>{try{l(!0),console.log("[handleShowGuardianStudents] guardianId:",F,"guardianName:",ke);const Ue=await rD(F);console.log("[handleShowGuardianStudents] students fetched:",Ue),ge(Ue),ze(ke),R(!0)}catch(Ue){console.error("خطأ في تحميل بيانات الطلاب:",Ue),n({title:"خطأ في تحميل بيانات الطلاب",description:"حدث خطأ أثناء محاولة تحميل بيانات الطلاب",variant:"destructive"})}finally{l(!1)}},Xt=async F=>{if(F)try{l(!0);const{deleteStudent:ke}=await Ln(()=>Promise.resolve().then(()=>UA),void 0),Ue=await ke(F);Ue.success?(n({title:"تم حذف الطالب بنجاح",description:"",className:"bg-green-50 border-green-200"}),ge(jt=>jt.filter(Sn=>Sn.id!==F))):n({title:"فشل في حذف الطالب",description:Ue.message||"حدث خطأ غير متوقع",variant:"destructive"})}catch(ke){console.error("خطأ في حذف الطالب:",ke),n({title:"خطأ",description:"حدث خطأ غير متوقع أثناء حذف الطالب",variant:"destructive"})}finally{l(!1)}},Et=async()=>{try{console.log("Loading student counts for guardians...");const{supabase:F}=await Ln(()=>Promise.resolve().then(()=>qx),void 0),{data:ke,error:Ue}=await F.from("students").select("guardian_id, id");if(Ue){console.error("Error fetching student counts:",Ue);return}const jt=ke.reduce((Sn,Gt)=>(Gt.guardian_id&&(Sn[Gt.guardian_id]=(Sn[Gt.guardian_id]||0)+1),Sn),{});console.log("Student counts updated:",jt),i(Sn=>Sn.map(Gt=>({...Gt,students_count:jt[Gt.id]||0})))}catch(F){console.error("Error in loadStudentCounts:",F)}};h.useEffect(()=>{a.length>0&&Et()},[a]);const ot=h.useMemo(()=>a.filter(F=>c?F.full_name.toLowerCase().includes(c.toLowerCase())||F.phone_number.includes(c)||F.email&&F.email.toLowerCase().includes(c.toLowerCase()):!0),[a,c]),Nn=h.useMemo(()=>{const F=(u-1)*Se;return ot.slice(F,F+Se)},[ot,u]);return Math.max(1,Math.ceil(ot.length/Se)),t!=="superadmin"&&t!=="admin"&&t!=="teacher"?s.jsxs("div",{className:"container mx-auto p-8 text-center",children:[s.jsx(Rr,{className:"h-16 w-16 mx-auto text-destructive mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:Ce.accessDenied}),s.jsx("p",{className:"text-muted-foreground mb-6",children:Ce.accessDeniedMessage}),s.jsx(V,{onClick:()=>e("/"),variant:"outline",children:Ce.returnToHome})]}):s.jsxs("div",{className:"container mx-auto py-6",dir:"rtl",children:[s.jsxs(nt,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsx(ut,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(dt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(as,{className:"h-5 w-5 text-yellow-300"}),Ce.title]}),s.jsx(Dt,{className:"text-xs md:text-sm text-green-100 mt-1",children:Ce.description})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(V,{className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:E,children:[s.jsx("span",{className:"text-lg",children:"👤"}),s.jsx("span",{children:Ce.addGuardian})]}),s.jsxs(V,{className:"flex items-center gap-2 rounded-3xl bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:()=>H("",!0),children:[s.jsx("span",{className:"text-lg",children:"🧒"}),s.jsx("span",{children:"إضافة طالب جديد"})]})]})]})}),s.jsx(Ze,{children:s.jsxs(s.Fragment,{children:[m&&s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 bg-white dark:bg-gray-900 p-4 rounded-2xl shadow-md border border-green-200 dark:border-green-700",children:s.jsxs(Go,{variant:"destructive",className:"mb-4",children:[s.jsx(Rr,{className:"h-4 w-4 ml-2"}),s.jsx(Ko,{children:m})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(nn,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(me,{placeholder:Ce.searchPlaceholder,value:c,onChange:F=>d(F.target.value),className:"pl-3 pr-10 w-full",onKeyDown:F=>F.key==="Enter"&&Oe()})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(V,{variant:"outline",size:"icon",onClick:Oe,title:Ce.search,className:"shrink-0",children:s.jsx(nn,{className:"h-4 w-4"})}),s.jsx(V,{variant:"outline",size:"icon",onClick:()=>pe(),title:Ce.refresh,className:"shrink-0",children:s.jsx(Un,{className:"h-4 w-4"})}),s.jsx(V,{variant:"outline",size:"icon",onClick:N,title:Ce.export,className:"shrink-0",disabled:x||a.length===0,children:s.jsx($w,{className:"h-4 w-4"})})]})]}),s.jsx(ds,{data:Nn,columns:[{key:"index",header:"#️⃣",align:"center",render:F=>{const ke=Nn.findIndex(Ue=>Ue.id===F.id);return(u-1)*Se+ke+1}},{key:"full_name",header:`👤 ${Ce.fullName}`,align:"center",render:F=>F.full_name},{key:"phone_number",header:`📞 ${Ce.phoneNumber}`,align:"center",render:F=>F.phone_number?s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(h4,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{dir:"ltr",className:"text-islamic-green/80",children:F.phone_number})]}):s.jsx("span",{className:"text-muted-foreground",children:"—"})},{key:"email",header:`✉️ ${Ce.email}`,align:"center",render:F=>F.email?s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(Uw,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{dir:"ltr",className:"text-islamic-green/80",children:F.email})]}):s.jsx("span",{className:"text-muted-foreground",children:"—"})},{key:"students_count",header:`👶 ${Ce.studentCount}`,align:"center",render:F=>F.students_count>0?s.jsx(V,{variant:"ghost",onClick:()=>Jt(F.id,F.full_name),className:"h-6 px-3 rounded-full font-bold text-white bg-gradient-to-r from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 shadow-lg hover:scale-105 transition-all duration-200 text-sm",title:"عرض الطلاب",children:F.students_count}):s.jsx("span",{className:"text-muted-foreground",children:"0"})},{key:"actions",header:`⚙️ ${Ce.actions}`,align:"center",render:F=>s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>Ne(F),className:"h-8 w-8 p-0 hover:bg-green-100 dark:hover:bg-green-700 transition-colors rounded-lg",title:Ce.editTooltip,children:s.jsx(lr,{className:"h-4 w-4 text-green-600 dark:text-green-300"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>H(F.id),className:"h-8 w-8 p-0 hover:bg-green-100 dark:hover:bg-green-700 transition-colors rounded-lg",title:"إضافة طالب",children:s.jsx($n,{className:"h-4 w-4 text-green-600 dark:text-green-300"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>Pe(F),className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-700 transition-colors rounded-lg",title:Ce.deleteTooltip,children:s.jsx(Sr,{className:"h-4 w-4 text-red-500 dark:text-red-300"})})]})}],emptyMessage:c?Ce.noSearchResults:Ce.noGuardians}),!c&&s.jsxs(V,{variant:"outline",size:"sm",onClick:E,className:"mt-2 flex items-center gap-2 text-sm",children:[s.jsx($n,{className:"h-4 w-4"}),s.jsx("span",{children:Ce.addGuardianPrompt})]})]})}),s.jsxs(qo,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Ce.totalGuardians,": ",s.jsx("span",{className:"font-medium",children:a.length})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Ce.showing," ",s.jsxs("span",{className:"font-medium",children:[Math.min((u-1)*Se+1,ot.length)," - ",Math.min(u*Se,ot.length)]})," ",Ce.from," ",s.jsx("span",{className:"font-medium",children:ot.length})," ",Ce.guardian]})]})]}),s.jsx(St,{open:y,onOpenChange:p,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[500px]",children:[s.jsx(Pt,{className:"flex justify-center items-center",children:s.jsxs(Ot,{className:"flex items-center gap-2 text-islamic-green text-xl",children:[C,s.jsx($n,{className:"h-5 w-5"})]})}),s.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"full_name",className:"mb-2 block",children:[Ce.fullName," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(me,{id:"full_name",value:I,onChange:F=>j(F.target.value),placeholder:Ce.fullName,className:"focus:border-islamic-green",required:!0})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"phone_number",className:"mb-2 block",children:[Ce.phoneNumber," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(me,{id:"phone_number",value:k,onChange:F=>D(F.target.value),placeholder:Ce.phoneNumber,dir:"ltr",className:"text-left focus:border-islamic-green",required:!0})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"email",className:"mb-2 block",children:[Ce.email," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:Ce.optionalField})]}),s.jsx(me,{id:"email",type:"email",value:z,onChange:F=>M(F.target.value),placeholder:Ce.email,dir:"ltr",className:"text-left focus:border-islamic-green"})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"address",className:"mb-2 block",children:[Ce.address," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:Ce.optionalField})]}),s.jsx($s,{id:"address",value:B,onChange:F=>X(F.target.value),placeholder:Ce.address,rows:3,className:"focus:border-islamic-green"})]})]}),s.jsxs(bt,{dir:"rtl",className:"flex justify-start gap-2",children:[s.jsx(V,{onClick:st,className:"bg-islamic-green hover:bg-islamic-green/90",children:Ce.save}),s.jsx(V,{variant:"outline",onClick:()=>p(!1),children:Ce.cancel})]})]})}),s.jsx(yn,{isOpen:O,onOpenChange:$,onConfirm:ct,isLoading:o,title:Ce.deleteGuardian,description:s.jsxs(s.Fragment,{children:[Ce.deleteConfirmation,s.jsx("br",{}),Ce.deleteDescription]}),deleteButtonText:Ce.confirm,cancelButtonText:Ce.cancel}),s.jsx(St,{open:J,onOpenChange:L,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[650px]",children:[s.jsx(Pt,{className:"flex justify-center items-center",children:s.jsxs(Ot,{className:"flex items-center gap-2 text-islamic-green text-xl",children:["إضافة طالب جديد",s.jsx($n,{className:"h-5 w-5"})]})}),s.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[s.jsx("div",{className:"flex flex-col md:flex-row gap-6",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"guardian_info",className:"mb-2 block",children:["المعلم ",s.jsx("span",{className:"text-islamic-green",children:"(تم تحديده تلقائياً)"})]}),t==="teacher"?s.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-muted",children:[s.jsx(as,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{children:(()=>{if(r&&Ut.length>0){const F=Ut.find(ke=>ke.id===r);if(F)return Xe||pt(F.id),s.jsxs("span",{className:"text-islamic-green font-semibold",children:[F.full_name," "]})}return s.jsx("span",{className:"text-islamic-green font-semibold",children:s.jsxs(ee,{htmlFor:"guardian_info",className:"mb-2 block",children:["المعلم ",s.jsx("span",{className:"text-islamic-green",children:"(تم تحديده تلقائياً)"})]})})})()})]}):s.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[s.jsxs("div",{className:"relative md:w-1/2",children:[s.jsx(nn,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(me,{placeholder:"البحث عن معلم",value:Mt,onChange:F=>xt(F.target.value),className:"pl-3 pr-10 mb-2 md:mb-0"})]}),s.jsx("div",{className:"md:w-1/2",children:s.jsxs(Qe,{value:Xe,onValueChange:pt,children:[s.jsx(qe,{className:"focus:border-islamic-green",children:s.jsx(Je,{placeholder:"اختر المعلم"})}),s.jsx(Ge,{position:"item-aligned",align:"start",side:"bottom",children:Ut.filter(F=>!Mt||F.full_name.includes(Mt)).map(F=>s.jsx(ve,{value:F.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:F.full_name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:F.role==="admin"?"مشرف":"معلم"})]})},F.id))})]})})]})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"student_full_name",className:"mb-2 block",children:["اسم الطالب/الطالبة ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(me,{id:"student_full_name",value:ne,onChange:F=>ae(F.target.value),placeholder:"اسم الطالب الكامل",className:"focus:border-islamic-green",required:!0})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"student_grade",className:"mb-2 block",children:["الصف الدراسي ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Qe,{value:Z,onValueChange:se,children:[s.jsx(qe,{className:"focus:border-islamic-green",children:s.jsx(Je,{placeholder:"اختر الصف"})}),s.jsxs(Ge,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:[s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"مرحلة رياض الأطفال"}),xe.gradeOptions.slice(0,2).map(F=>s.jsx(ve,{value:F.value,children:F.label},F.value))]}),s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"المرحلة الابتدائية"}),xe.gradeOptions.slice(2,8).map(F=>s.jsx(ve,{value:F.value,children:F.label},F.value))]}),s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"مراحل أخرى"}),xe.gradeOptions.slice(8).map(F=>s.jsx(ve,{value:F.value,children:F.label},F.value))]})]})]})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"student_date_of_birth",className:"mb-2 block",children:["تاريخ الميلاد ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"(اختياري)"})]}),s.jsx(me,{id:"student_date_of_birth",type:"date",value:je,onChange:F=>q(F.target.value),placeholder:"تاريخ الميلاد",dir:"ltr",className:"text-left focus:border-islamic-green"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"student_quran_progress",className:"mb-2 block",children:["آخر ما وصل إليه في القرآن ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"(اختياري)"})]}),s.jsxs(Qe,{value:ie,onValueChange:Ae,children:[s.jsx(qe,{className:"focus:border-islamic-green",children:s.jsx(Je,{placeholder:"اختر آخر ما وصل إليه"})}),s.jsx(Ge,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"الأجزاء"}),xe.quranPartsOptions.map(F=>s.jsx(ve,{value:F.value,children:F.label},F.value))]})})]})]})]}),Ht?s.jsx("div",{className:"flex flex-col md:flex-row gap-6",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"guardian_selection",className:"mb-2 block",children:["ولي الأمر ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[s.jsxs("div",{className:"relative md:w-1/2",children:[s.jsx(nn,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(me,{placeholder:"البحث عن ولي أمر",value:$t,onChange:F=>qt(F.target.value),className:"pl-3 pr-10 mb-2 md:mb-0"})]}),s.jsx("div",{className:"md:w-1/2",children:s.jsxs(Qe,{value:re,onValueChange:ye,children:[s.jsx(qe,{className:"focus:border-islamic-green",children:s.jsx(Je,{placeholder:"اختر ولي الأمر"})}),s.jsx(Ge,{position:"item-aligned",align:"start",side:"bottom",children:a.filter(F=>!$t||F.full_name.includes($t)||F.phone_number&&F.phone_number.includes($t)).map(F=>s.jsx(ve,{value:F.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:F.full_name}),F.phone_number&&s.jsx("span",{className:"text-xs text-muted-foreground",children:F.phone_number})]})},F.id))})]})})]})]})}):s.jsx("div",{className:"flex flex-col md:flex-row gap-6",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"guardian_info",className:"mb-2 block",children:["ولي الأمر ",s.jsx("span",{className:"text-islamic-green",children:"(تم تحديده تلقائياً)"})]}),s.jsx("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-muted",children:s.jsx("span",{className:"text-islamic-green font-semibold",children:(()=>{const F=a.find(ke=>ke.id===re);return F?F.full_name:"ولي الأمر المحدد"})()})})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"student_phone_number",className:"mb-2 block",children:["رقم الهاتف ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"(اختياري)"})]}),s.jsx(me,{id:"student_phone_number",value:Y,onChange:F=>oe(F.target.value),placeholder:"رقم هاتف الطالب",dir:"ltr",className:"text-left focus:border-islamic-green"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"student_email",className:"mb-2 block",children:["البريد الإلكتروني ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"(اختياري)"})]}),s.jsx(me,{id:"student_email",type:"email",value:De,onChange:F=>W(F.target.value),placeholder:"البريد الإلكتروني للطالب",dir:"ltr",className:"text-left focus:border-islamic-green"})]})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"student_notes",className:"mb-2 block",children:["ملاحظات ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"(اختياري)"})]}),s.jsx($s,{id:"student_notes",value:Re,onChange:F=>It(F.target.value),placeholder:"ملاحظات إضافية عن الطالب",rows:3,className:"focus:border-islamic-green"})]})]}),s.jsxs(bt,{dir:"rtl",className:"flex justify-start gap-2",children:[s.jsx(V,{onClick:ce,className:"bg-islamic-green hover:bg-islamic-green/90",children:"حفظ"}),s.jsx(V,{variant:"outline",onClick:()=>L(!1),children:"إلغاء"})]})]})}),s.jsx(St,{open:Ct,onOpenChange:R,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[900px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(Pt,{className:"flex flex-col items-center border-b border-green-200 pb-3 mb-2",children:[s.jsxs(Ot,{className:"text-xl text-islamic-green flex items-center gap-2",children:[s.jsx("span",{className:"bg-green-100 p-1.5 rounded-full",children:s.jsx(as,{className:"h-5 w-5 text-green-600"})}),"طلاب ولي الأمر: ",Me]}),s.jsxs(Ur,{className:"text-sm text-gray-600 mt-1",children:["قائمة الطلاب المرتبطين بولي الأمر (إجمالي: ",G.length," طالب)"]})]}),s.jsx("div",{className:"py-2",children:G.length>0?s.jsx(ds,{data:G.map((F,ke)=>({...F,id:F.id.toString(),serial:ke+1})),columns:[{key:"serial",header:"#️⃣",align:"center",render:F=>s.jsx("span",{className:"text-islamic-green/80 font-medium",children:F.serial})},{key:"full_name",header:"👤 الطالب",align:"right",render:F=>s.jsx("div",{className:"font-medium text-right",children:F.full_name})},{key:"grade",header:"🏫 الدراسي",align:"center",render:F=>{var ke,Ue;return((ke=xe.gradeOptions.find(jt=>jt.value===F.grade_level))==null?void 0:ke.label)||((Ue=xe.gradeOptions.find(jt=>jt.value===F.grade))==null?void 0:Ue.label)||"-"}},{key:"gender",header:"⚧ الجنس",align:"center",render:F=>F.gender==="male"?"ذكر":F.gender==="female"?"أنثى":"-"},{key:"memorized_parts",header:"📅 آخر حفظ",align:"center",render:F=>{var ke;return F.memorized_parts?((ke=xe.quranPartsOptions.find(Ue=>Ue.value===F.memorized_parts))==null?void 0:ke.label)||F.memorized_parts:"-"}},{key:"teacher_name",header:"👨‍🏫 المعلم",align:"center",render:F=>F.teacher_name||"غير محدد"},{key:"circle_name",header:"📚 الحلقة",align:"center",render:F=>F.circle_name||"غير محدد"},{key:"actions",header:"⚙️ الإجراءات",align:"center",render:F=>s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>{n({title:"ميزة تعديل الطالب غير متوفرة حالياً",description:"يرجى التواصل مع الإدارة لتفعيل هذه الخاصية.",variant:"destructive"})},className:"h-6 w-6 p-0 hover:bg-green-100 dark:hover:bg-green-700 transition-colors rounded-lg",title:"تعديل",children:s.jsx(lr,{className:"h-4 w-4 text-green-600 dark:text-green-300"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>Xt(F.id),className:"h-6 w-6 p-0 hover:bg-red-100 dark:hover:bg-red-700 transition-colors rounded-lg",title:"حذف",children:s.jsx(Sr,{className:"h-4 w-4 text-red-500 dark:text-red-300"})})]})}],emptyMessage:"لا يوجد طلاب",className:"overflow-hidden rounded-xl border border-green-300 shadow-md text-xs",getRowClassName:(F,ke)=>`${ke%2===0?"bg-green-50 hover:bg-green-100":"bg-white hover:bg-green-50"} cursor-pointer transition-colors`}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[s.jsx(Bg,{className:"h-10 w-10 text-muted-foreground mb-2"}),s.jsx("p",{className:"text-muted-foreground",children:"لا يوجد طلاب مرتبطين بولي الأمر"})]})}),s.jsx(bt,{dir:"rtl",children:s.jsx(V,{variant:"outline",onClick:()=>R(!1),children:"إغلاق"})})]})})]})}function sD({onNavigate:e,userRole:t,userId:r}){return console.log("Rendering GuardiansList page with role:",t),s.jsx("div",{dir:"rtl",children:s.jsx(nD,{onNavigate:e,userRole:t,userId:r})})}const tN=async(e,t,r=new Date,n)=>{try{const{data:a,error:i}=await le.from(Dl).select("*").eq("student_id",e).is("end_date",null).single();if(a){const{error:l}=await Rt.from(Dl).update({end_date:new Date().toISOString().split("T")[0]}).eq("id",a.id);if(l)return console.error("خطأ في تحديث السجل السابق:",l),{success:!1,message:"فشل في تحديث السجل السابق"}}const{error:o}=await Rt.from(Dl).insert([{student_id:e,teacher_id:t,start_date:r.toISOString().split("T")[0],end_date:null,study_circle_id:n||null}]);return o?(console.error("خطأ في إضافة السجل الجديد:",o),{success:!1,message:"فشل في إضافة السجل الجديد"}):{success:!0,message:"تم تحديث سجل المعلم بنجاح"}}catch(a){return console.error("خطأ في تحديث سجل المعلم:",a),{success:!1,message:"حدث خطأ أثناء تحديث سجل المعلم"}}},aD=async e=>{try{const{data:t,error:r}=await le.from(Dl).select(`
        *,
        study_circle:study_circle_id (
          id,
          name
        )
      `).eq("student_id",e).order("start_date",{ascending:!1});return r?(console.error("خطأ في استرجاع سجل المعلمين للطالب:",r),[]):aA(t||[])}catch(t){return console.error("خطأ في استرجاع سجل المعلمين للطالب:",t),[]}},iD=async e=>{try{const t=Vj(e),{data:r,error:n}=await Rt.from(Kr).insert([t]).select().single();if(n)return console.error("خطأ في إنشاء الطالب:",n),{success:!1,message:`فشل في إنشاء الطالب: ${n.message}`};if(console.log("Student data:",e),console.log("Formatted student:",t),e.study_circle_id||t.study_circle_id){const a=e.study_circle_id||t.study_circle_id,i=await H2(a);if(i){console.log("Adding teacher history with:",{studentId:r.id,teacherId:i,circleId:a});const{success:o,message:l}=await tN(r.id,i,new Date,a);o?console.log("تم إضافة سجل المعلم بنجاح"):console.error("خطأ في إضافة سجل المعلم:",l)}else console.log("لم يتم العثور على معلم للحلقة المحددة")}else console.log("لا توجد حلقة دراسية محددة للطالب");return{success:!0,id:r.id,message:"تم إنشاء الطالب بنجاح"}}catch(t){return console.error("خطأ في إنشاء الطالب:",t),{success:!1,message:"حدث خطأ أثناء إنشاء الطالب"}}},oD=async(e,t)=>{try{console.log("تحديث الطالب:",{id:e,updatedData:t});const{data:r}=await le.from(Kr).select("study_circle_id").eq("id",e).single();console.log("بيانات الطالب الحالية:",r);const{error:n}=await Rt.from(Kr).update(t).eq("id",e);if(n)return console.error("خطأ في تحديث الطالب:",n),{success:!1,message:`فشل في تحديث الطالب: ${n.message}`};const a=t.study_circle_id,i=r==null?void 0:r.study_circle_id;if(console.log("مقارنة الحلقات الدراسية:",{newCircleId:a,oldCircleId:i,hasChanged:a!==i}),a&&i!==a){const o=await H2(a);if(o){console.log("إضافة سجل معلم جديد");const{success:l,message:c}=await tN(e,o,new Date,a);l||console.error("خطأ في تحديث سجل المعلم:",c)}else console.log("لم يتم العثور على معلم للحلقة الجديدة")}return{success:!0,message:"تم تحديث الطالب بنجاح"}}catch(r){return console.error("خطأ في تحديث الطالب:",r),{success:!1,message:"حدث خطأ أثناء تحديث الطالب"}}};function xv(e){return e==="teacher"}function rN({onNavigate:e,userRole:t,userId:r}){var La,Qo,Le,Bs;const{toast:n}=_n(),[a,i]=h.useState([]),[o,l]=h.useState(!0),[c,d]=h.useState(""),[u,f]=h.useState(1),[m,v]=h.useState(null),[x,g]=h.useState(!1),[b,y]=h.useState("all"),[p,w]=h.useState([]),[S,C]=h.useState(""),[T,O]=h.useState([]),[$,Q]=h.useState(""),[K,A]=h.useState([]),[_,I]=h.useState([]),[j,k]=h.useState(""),[D,z]=h.useState(""),[M,B]=h.useState(!1);h.useEffect(()=>{console.log("Component mounted, fetching students..."),ke(),Ue(),t==="teacher"&&r?(k(r),Nn(r).then(P=>{P?Gt({teacher_id:r}):(v("ليس لديك حلقات دراسية حالياً. يرجى التواصل مع الإدارة لإضافة حلقات."),l(!1))})):(ot(),Gt())},[]),h.useEffect(()=>{if(console.log("تغيير الحلقة الدراسية:",D),D!==void 0){const P=setTimeout(()=>{Yn()},100);return()=>clearTimeout(P)}},[D]),h.useEffect(()=>{if(b!==void 0){const P=setTimeout(()=>{Yn()},100);return()=>clearTimeout(P)}},[b]);const[X,J]=h.useState(!1),[L,ne]=h.useState("add"),[ae,Z]=h.useState(xe.addStudent),[se,re]=h.useState(!1),[ye,je]=h.useState(""),[q,Y]=h.useState(""),[oe,De]=h.useState(""),[W,ie]=h.useState(""),[Ae,Re]=h.useState(!1),[It,Xe]=h.useState(null),[pt,Mt]=h.useState(!1),[xt,Ut]=h.useState({student:{},history:[]}),[Qt,Ht]=h.useState(!1),[sr,$t]=h.useState(""),[qt,Ve]=h.useState(""),[ar,Ct]=h.useState(""),[R,G]=h.useState(""),[ge,Me]=h.useState(""),[ze,Se]=h.useState(""),[pe,Oe]=h.useState(""),[N,E]=h.useState(""),[H,ce]=h.useState(""),[Ne,Pe]=h.useState(""),[ct,st]=h.useState(""),[Jt,Xt]=h.useState(""),Et=10;h.useEffect(()=>{console.log("بدء تحميل البيانات الأولية..."),Gt()},[]);const ot=async()=>{try{console.log("بدء تحميل الحلقات الدراسية...");const P=await Ta();console.log("تم تحميل",P.length,"حلقة دراسية"),A(P)}catch(P){console.error("خطأ في تحميل الحلقات الدراسية:",P)}},Nn=async P=>{if(!P)if(t==="teacher"&&r)P=r,console.log("استخدام معرف المعلم الحالي:",P);else return console.log("لم يتم تحديد معلم، إلغاء تحميل الحلقات"),I([]),!1;B(!0);try{console.log("تحميل الحلقات الدراسية للمعلم:",P);const fe=await ks(P);return console.log("تم تحميل",fe.length,"حلقة دراسية للمعلم",P),fe.length>0&&console.log("الحلقات:",fe.map(Ee=>`${Ee.name} (${Ee.id})`)),I(fe),t==="teacher"&&r===P&&(A(fe),k(P)),fe.length>0}catch(fe){return console.error("خطأ في تحميل الحلقات الدراسية للمعلم:",fe),n({title:"خطأ في تحميل الحلقات الدراسية",description:"حدث خطأ أثناء محاولة تحميل الحلقات الدراسية للمعلم.",variant:"destructive"}),I([]),t==="teacher"&&A([]),!1}finally{B(!1)}},F=async P=>{if(console.log("تغيير المعلم المحدد:",P),t==="teacher"&&r&&(console.log("المستخدم هو معلم، لا يمكن تغيير المعلم المحدد."),P=r),k(P),z(""),P){B(!0);try{console.log("تحميل الحلقات الدراسية للمعلم:",P);const fe=await ks(P);if(console.log("تم تحميل",fe.length,"حلقة دراسية للمعلم",P),I(fe),t==="teacher"&&r===P&&A(fe),fe.length===0)n({title:"لا توجد حلقات دراسية",description:"المعلم المحدد ليس لديه حلقات دراسية مرتبطة به."}),i([]);else{const Ee={};console.log("البحث في حلقات المعلم:",fe.map(rt=>`${rt.name} (${rt.id})`)),Ee.teacher_id=P,c.trim()&&(Ee.full_name=c);const Tt=await Li(Ee);console.log(`تم العثور على ${Tt.length} طالب للمعلم ${P}`),i(Tt)}}catch(fe){console.error("خطأ في تحميل الحلقات الدراسية للمعلم:",fe),n({title:"خطأ في تحميل الحلقات الدراسية",description:"حدث خطأ أثناء محاولة تحميل الحلقات الدراسية للمعلم.",variant:"destructive"})}finally{B(!1)}}else Gt(),(t==="admin"||t==="superadmin")&&ot()},ke=async()=>{try{console.log("بدء تحميل بيانات أولياء الأمور...");const P=await _c();console.log("تم تحميل",P.length,"ولي أمر"),w(P)}catch(P){console.error("خطأ في تحميل أولياء الأمور:",P)}},Ue=async()=>{try{console.log("🔄 Loading teachers with userRole:",t,"and userId:",r);const P=await Xu();console.log("📊 Loaded teachers (all):",P);let fe=P;if(t==="teacher"&&(fe=P.filter(Ee=>Ee.role==="teacher"||Ee.role==="admin")),console.log("👥 teacher roles:",fe.map(Ee=>({id:Ee.id,name:Ee.full_name,role:Ee.role}))),O(fe),t==="teacher"&&r){const Ee=fe.find(Tt=>Tt.id===r);Ee&&(console.log("👤 Found current teacher:",Ee.full_name),Me(r))}}catch(P){console.error("❌ خطأ في تحميل المعلمين:",P)}},jt=()=>{je(""),Y(""),De(""),ie(""),re(!0)},Sn=async()=>{if(!ye||!q){n({title:"بيانات غير مكتملة",description:"الرجاء تعبئة الاسم ورقم الهاتف",variant:"destructive"});return}try{const fe=await X2({full_name:ye,phone_number:q,email:oe||void 0,address:W||void 0});fe.success?(n({title:"تم إضافة ولي الأمر بنجاح",description:"",className:"bg-green-50 border-green-200"}),re(!1),ke()):n({title:"فشل في حفظ بيانات ولي الأمر",description:fe.message||"حدث خطأ غير متوقع",variant:"destructive"})}catch(P){console.error("خطأ في حفظ بيانات ولي الأمر:",P),n({title:"خطأ",description:"حدث خطأ غير متوقع",variant:"destructive"})}},Gt=async P=>{var fe;l(!0),v(null);try{console.log("بدء تحميل الطلاب... دور المستخدم:",t,"معرف المستخدم:",r);let Ee=[];if(t==="teacher"&&r){console.log("تحميل الطلاب في حلقات المعلم:",r);try{const rt=await ks(r);if(console.log("حلقات المعلم:",rt.map(Lt=>Lt.id)),rt.length>0){if(P){const Lt={...P,study_circle_ids:rt.map(kr=>kr.id)};Ee=await Li(Lt)}else{const Lt=rt.map(Cr=>Li({study_circle_id:Cr.id}));Ee=(await Promise.all(Lt)).flat()}console.log("تم استرجاع الطلاب من حلقات المعلم، العدد:",Ee.length)}else console.log("المعلم ليس لديه حلقات دراسية"),Ee=[]}catch(rt){console.error("خطأ في تحميل طلاب حلقات المعلم:",rt),v("حدث خطأ أثناء تحميل طلاب حلقات المعلم")}}else{console.log("تحميل جميع الطلاب للمشرف/المسؤول");try{P?(Ee=await Li(P),console.log("تم استرجاع الطلاب من البحث للمشرف، العدد:",Ee.length)):(Ee=await Ro(),console.log("تم استرجاع جميع الطلاب للمشرف بدون بحث، العدد:",Ee.length)),console.log("تم تحميل جميع الطلاب، تم العثور على:",Ee.length)}catch(rt){console.error("خطأ في تحميل جميع الطلاب:",rt),v("حدث خطأ أثناء تحميل جميع الطلاب")}}d(""),console.log("إجمالي الطلاب الذين تم تحميلهم:",Ee.length),Ee.length>0?console.log("نموذج للطالب الأول:",{id:Ee[0].id,name:Ee[0].full_name,has_guardian:!!Ee[0].guardian,has_teacher:!!((fe=Ee[0].study_circle)!=null&&fe.teacher)}):console.log("لا يوجد طلاب للعرض");const Tt=Ee.map(rt=>{var Lt;return{...rt,id:rt.id,full_name:rt.full_name||"بدون اسم",guardian_id:rt.guardian_id,study_circle_id:rt.study_circle_id,guardian:rt.guardian||null,teacher:((Lt=rt.study_circle)==null?void 0:Lt.teacher)||null,memorized_parts:rt.memorized_parts||null,grade:rt.grade||rt.grade_level||"",grade_level:rt.grade_level||rt.grade||""}});console.log("تم تنسيق بيانات الطلاب، العدد النهائي:",Tt.length),i(Tt)}catch(Ee){console.error("خطأ في تحميل الطلاب:",Ee),v(Ie.fetchFailed),i([])}finally{l(!1)}},Yn=async()=>{console.log("تنفيذ البحث بالمعايير:",{searchTerm:c?c.trim():"فارغ",studyCircleId:D||"غير محدد",selectedTeacherId:j||"غير محدد",filterGrade:b||"غير محدد",userRole:t||"غير محدد",userId:r||"غير محدد"}),l(!0);try{const P={};if(c.trim()&&(P.full_name=c),b&&b!=="all"&&(P.grade=b),t==="teacher"&&r?(console.log("المستخدم هو معلم، سيتم تقييد البحث بحلقاته فقط"),P.teacher_id=r):D&&D!=="all"?(console.log("البحث باستخدام معرف الحلقة المحددة:",D),P.study_circle_id=D):j&&j!=="all"&&(console.log("البحث باستخدام معرف المعلم:",j),P.teacher_id=j),console.log("معايير البحث النهائية:",P),Object.keys(P).length===0&&t!=="teacher"){console.log("لا توجد معايير بحث للمشرف/المسؤول، تحميل جميع الطلاب"),Gt();return}const fe=await Li(P);i(fe),f(1),Object.keys(P).length>0&&fe.length===0&&n({title:xe.noSearchResults||"لا توجد نتائج",description:xe.tryAnotherSearch||"حاول تغيير كلمات البحث"})}catch(P){console.error("خطأ في البحث:",P),n({title:Ie.fetchFailed,description:xe.unexpectedError,variant:"destructive"})}finally{l(!1)}},ji=async()=>{g(!0);try{const P=await b0();if(P.success&&P.data){const fe=new Blob([JSON.stringify(P.data,null,2)],{type:"application/json"}),Ee=URL.createObjectURL(fe),Tt=document.createElement("a");Tt.href=Ee,Tt.download=`students_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Tt),Tt.click(),document.body.removeChild(Tt),URL.revokeObjectURL(Ee),n({title:"تم تصدير البيانات بنجاح",className:"bg-green-50 border-green-200"})}else v("فشل تصدير البيانات: "+(P.message||"خطأ غير معروف"))}catch(P){console.error("خطأ في تصدير البيانات:",P),v("تعذر تصدير البيانات")}finally{g(!1)}},mr=async()=>{await Ue(),await ot(),ne("add"),Z(xe.addStudent),$t(""),Ve(""),Ct(""),G(""),k(""),z(""),I([]),Se(""),Oe(""),E(""),ce(""),Pe(""),st(""),Xt(""),J(!0),setTimeout(()=>{const P=document.getElementById("full_name");P&&P.focus()},100)},Nc=async P=>{var fe;if(await Ue(),await ot(),ne("edit"),Z(xe.editStudent),$t(P.id),Ve(P.full_name),Ct(((fe=P.guardian)==null?void 0:fe.full_name)||""),G(P.guardian_id||""),z(P.study_circle_id||""),P.study_circle_id){const Ee=K.find(Tt=>Tt.id===P.study_circle_id);Ee&&(k(Ee.teacher_id),await Nn(Ee.teacher_id))}Se(P.grade_level||""),Oe(P.gender||""),E(P.date_of_birth||""),ce(P.memorized_parts||""),Pe(P.phone_number||""),st(P.email||""),Xt(""),J(!0)},ah=P=>{Xe(P),Re(!0)},_i=async P=>{Ht(!0);try{const fe=await aD(P.id);console.log("تم تحميل سجل المعلمين للطالب:",fe),fe.length>0&&console.log("معلومات الحلقة الدراسية للسجل الأول:",{study_circle_id:fe[0].study_circle_id,study_circle:fe[0].study_circle}),Ut({student:P,history:fe}),Mt(!0)}catch(fe){console.error("خطأ في تحميل سجل المعلمين:",fe),n({title:"خطأ في تحميل سجل المعلمين",description:"حدث خطأ أثناء محاولة تحميل سجل المعلمين السابقين للطالب.",variant:"destructive"})}finally{Ht(!1)}},Sc=async()=>{if(It)try{const P=await h_(It.id);P.success?(n({title:xe.deleteSuccess,description:"",className:"bg-green-50 border-green-200"}),Gt()):n({title:Ie.deleteFailed||"فشل في الحذف",description:P.message||xe.unexpectedError,variant:"destructive"})}catch(P){console.error("خطأ في حذف الطالب:",P),n({title:Ie.generalError,description:xe.unexpectedError,variant:"destructive"})}finally{Re(!1),Xe(null)}},kc=async()=>{if(!qt||!ze){n({title:xe.incompleteData,description:xe.incompleteDataMessage,variant:"destructive"});return}if(qt.includes(" ")){n({title:"خطأ في اسم الطالب",description:xe.fullNameError,variant:"destructive"});return}try{if(L==="add"){const fe=await iD({full_name:qt,guardian_id:R||void 0,study_circle_id:D||void 0,grade_level:ze,gender:pe==="male"||pe==="female"?pe:void 0,date_of_birth:N||void 0,memorized_parts:H||void 0,phone_number:Ne||void 0,email:ct||void 0});console.log("🌟 Student add result:",fe),console.log("✅ تم إنشاء الطالب وإضافة سجل المعلم إذا كان موجودًا"),fe.success?(n({title:xe.addSuccess,description:"",className:"bg-green-50 border-green-200"}),J(!1),Gt()):n({title:Ie.saveFailed||"فشل في الحفظ",description:fe.message||xe.unexpectedError,variant:"destructive"})}else{const fe=await oD(sr,{id:sr,full_name:qt,guardian_id:R||void 0,study_circle_id:D||void 0,grade_level:ze,gender:pe==="male"||pe==="female"?pe:void 0,date_of_birth:N||void 0,memorized_parts:H||void 0,phone_number:Ne||void 0,email:ct||void 0});console.log("🔄 Student update result:",fe),console.log("✅ تم تحديث بيانات الطالب وإضافة سجل للمعلم إذا تم تغييره"),fe.success?(n({title:xe.updateSuccess||"تم تحديث بيانات الطالب بنجاح",description:"",className:"bg-green-50 border-green-200"}),J(!1),Gt()):n({title:Ie.updateFailed||"فشل في التحديث",description:fe.message||xe.unexpectedError,variant:"destructive"})}}catch(P){console.error("خطأ في حفظ بيانات الطالب:",P),n({title:Ie.generalError,description:xe.unexpectedError,variant:"destructive"})}},Yr=h.useMemo(()=>(console.log("تصفية قائمة الطلاب:",a.length,"طالب باستخدام المعايير:",{searchTerm:c?c.trim():"فارغ",filterGrade:b||"غير محدد",selectedTeacherId:j||"غير محدد",studyCircleId:D||"غير محدد"}),a.filter(P=>{var kr,Cr,$r;const fe=!c||P.full_name.toLowerCase().includes(c.toLowerCase())||P.phone_number&&P.phone_number.includes(c)||P.email&&P.email.toLowerCase().includes(c.toLowerCase())||((kr=P.guardian)==null?void 0:kr.full_name)&&P.guardian.full_name.toLowerCase().includes(c.toLowerCase()),Ee=P.grade||P.grade_level,Tt=b==="all"||!b||Ee===b,rt=!D||D==="all"||P.study_circle_id===D;let Lt=!0;return t!=="teacher"&&j&&j!=="all"&&(Lt=(($r=(Cr=P.study_circle)==null?void 0:Cr.teacher)==null?void 0:$r.id)===j),fe&&Tt&&rt&&Lt})),[a,c,b,j,D,t]),Qr=Math.max(1,Math.ceil(Yr.length/Et)),gr=h.useMemo(()=>{if(!Yr||Yr.length===0)return console.log("No students to paginate"),[];const P=(u-1)*Et,fe=Yr.slice(P,P+Et);return console.log(`Paginated students: ${fe.length} (page ${u} of ${Qr})`),fe},[Yr,u,Et,Qr]),Cc=()=>{const P=[];P.push(s.jsx(Zs,{children:s.jsx(uo,{onClick:()=>f(1),isActive:u===1,children:"1"})},"first")),u>3&&P.push(s.jsx(Zs,{children:s.jsx("span",{className:"px-3",children:"..."})},"ellipsis1"));for(let fe=Math.max(2,u-1);fe<=Math.min(Qr-1,u+1);fe++)fe===1||fe===Qr||P.push(s.jsx(Zs,{children:s.jsx(uo,{onClick:()=>f(fe),isActive:u===fe,children:fe})},fe));return u<Qr-2&&P.push(s.jsx(Zs,{children:s.jsx("span",{className:"px-3",children:"..."})},"ellipsis2")),Qr>1&&P.push(s.jsx(Zs,{children:s.jsx(uo,{onClick:()=>f(Qr),isActive:u===Qr,children:Qr})},"last")),P};return t!=="superadmin"&&t!=="admin"&&t!=="teacher"?s.jsxs("div",{className:"container mx-auto p-8 text-center",children:[s.jsx(Rr,{className:"h-16 w-16 mx-auto text-destructive mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:xe.accessDenied}),s.jsx("p",{className:"text-muted-foreground mb-6",children:xe.accessDeniedMessage}),s.jsx(V,{onClick:()=>e("/"),variant:"outline",children:xe.returnToHome})]}):s.jsxs("div",{className:"container mx-auto py-6",dir:"rtl",children:[s.jsxs(nt,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsx(ut,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(dt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(as,{className:"h-5 w-5 text-yellow-300"}),t==="teacher"?"الطلاب المرتبطين بك":xe.title]}),s.jsx(Dt,{className:"text-xs md:text-sm text-green-100 mt-1",children:t==="teacher"?"عرض وإدارة الطلاب المرتبطين بالمعلم الحالي":xe.description})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(V,{className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:mr,children:[s.jsx("span",{className:"text-lg",children:"🧒"}),s.jsx("span",{children:xe.addStudent})]}),s.jsxs(V,{className:"flex items-center gap-2 rounded-3xl bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:jt,children:[s.jsx("span",{className:"text-lg",children:"👤"}),s.jsx("span",{children:"إضافة ولي أمر جديد"})]})]})]})}),s.jsxs(Ze,{children:[m&&s.jsxs(Go,{variant:"destructive",className:"mb-4",children:[s.jsx(Rr,{className:"h-4 w-4 ml-2"}),s.jsx(Ko,{children:m})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(nn,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(me,{placeholder:xe.searchPlaceholder,value:c,onChange:P=>d(P.target.value),className:"pl-3 pr-10 w-full",onKeyDown:P=>P.key==="Enter"&&Yn()})]}),s.jsxs("div",{className:"flex gap-2",children:[t==="teacher"?s.jsxs(Qe,{value:D||"all",onValueChange:P=>{z(P==="all"?"":P),setTimeout(()=>Yn(),100)},children:[s.jsx(qe,{className:"w-[200px]",children:s.jsx(Je,{placeholder:"كل الحلقات"})}),s.jsxs(Ge,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:[s.jsx(ve,{value:"all",children:"كل الحلقات"}),_.length>0?_.map(P=>s.jsx(ve,{value:P.id,children:P.name},P.id)):s.jsx(ve,{value:"none",disabled:!0,children:"لا توجد حلقات متاحة"})]})]}):s.jsxs("div",{className:"flex gap-2",children:[!xv(t)&&s.jsxs(Qe,{value:j||"all",onValueChange:P=>{F(P==="all"?"":P)},children:[s.jsx(qe,{className:"w-[180px]",children:s.jsx(Je,{placeholder:"كل المعلمين"})}),s.jsxs(Ge,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:[s.jsx(ve,{value:"all",children:"كل المعلمين"}),T.map(P=>s.jsx(ve,{value:P.id,children:P.full_name},P.id))]})]}),xv(t)&&s.jsxs("div",{className:"bg-gray-100 rounded-md px-3 py-2 flex items-center w-[180px]",children:[s.jsx(xl,{className:"h-4 w-4 text-islamic-green/60 mr-2"}),s.jsx("span",{className:"text-sm",children:"المعلم الحالي"})]}),s.jsxs(Qe,{value:D||"all",onValueChange:P=>{z(P==="all"?"":P),setTimeout(()=>Yn(),100)},disabled:M,children:[s.jsx(qe,{className:"w-[180px]",children:s.jsx(Je,{placeholder:"كل الحلقات"})}),s.jsxs(Ge,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:[s.jsx(ve,{value:"all",children:"كل الحلقات"}),_.length>0?_.map(P=>s.jsx(ve,{value:P.id,children:P.name},P.id)):s.jsx(ve,{value:"none",disabled:!0,children:j?"لا توجد حلقات لهذا المعلم":"اختر معلم أولاً"})]})]})]}),s.jsx(V,{variant:"outline",size:"icon",onClick:Yn,title:xe.search,className:"shrink-0",children:s.jsx(nn,{className:"h-4 w-4"})}),s.jsx(V,{variant:"outline",size:"icon",onClick:()=>Gt(),title:xe.refresh,className:"shrink-0",children:s.jsx(Un,{className:"h-4 w-4"})}),s.jsx(V,{variant:"outline",size:"icon",onClick:ji,title:xe.export,className:"shrink-0",disabled:x||a.length===0,children:s.jsx($w,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-green-200 dark:border-green-700 p-2",children:s.jsxs(Rs,{className:"min-w-full border border-green-300 rounded-2xl overflow-hidden shadow-lg",children:[s.jsx(Is,{className:"bg-islamic-green",children:s.jsxs(nr,{children:[s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("span",{children:"#️⃣"})})}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsxs("div",{className:"flex items-center justify-between flex-row-reverse",children:[s.jsx("span",{children:"الاسم"}),s.jsx("span",{className:"ml-1",children:"👤"})]})}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsxs("div",{className:"flex items-center justify-between flex-row-reverse",children:[s.jsx("span",{children:"ولي الأمر"}),s.jsx("span",{className:"ml-1",children:"👪"})]})}),t!=="teacher"&&s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsxs("div",{className:"flex items-center justify-between flex-row-reverse",children:[s.jsx("span",{children:"المعلم"}),s.jsx("span",{className:"ml-1",children:"🎓"})]})}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsxs("div",{className:"flex items-center justify-between flex-row-reverse",children:[s.jsx("span",{children:"الحلقة"}),s.jsx("span",{className:"ml-1",children:"📚"})]})}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsxs("div",{className:"flex items-center justify-between flex-row-reverse",children:[s.jsx("span",{children:"مستوى الحفظ"}),s.jsx("span",{className:"ml-1",children:"🕋"})]})}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsxs("div",{className:"flex items-center justify-between flex-row-reverse",children:[s.jsx("span",{children:"الصف"}),s.jsx("span",{className:"ml-1",children:"🏫"})]})}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsxs("div",{className:"flex items-center justify-between flex-row-reverse",children:[s.jsx("span",{children:"الجنس"}),s.jsx("span",{className:"ml-1",children:"👤"})]})}),s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsx("div",{className:"flex items-center justify-center gap-1",children:"⚙️ إجراءات"})})]})}),s.jsx(Ms,{children:gr.map((P,fe)=>{var Ee,Tt,rt,Lt,kr,Cr;return s.jsxs(nr,{className:`border-b border-green-200 transition-colors duration-200
        ${fe%2===0?"bg-green-50 dark:bg-green-900":"bg-white dark:bg-gray-800"}
        hover:bg-green-100 dark:hover:bg-green-700`,children:[s.jsx(Fe,{className:"text-center border-r border-green-200 font-medium text-islamic-green/80 py-2 px-3",children:(u-1)*Et+fe+1}),s.jsx(Fe,{className:"border-r border-green-200 font-medium py-2 px-3",children:P.full_name}),s.jsx(Fe,{className:"border-r border-green-200 py-2 px-3",children:(Ee=P.guardian)!=null&&Ee.full_name?s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(as,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{className:"text-islamic-green/80",children:P.guardian.full_name})]}):s.jsx("span",{className:"text-muted-foreground",children:"—"})}),t!=="teacher"&&s.jsx(Fe,{className:"border-r border-green-200 py-2 px-3",children:(rt=(Tt=P.study_circle)==null?void 0:Tt.teacher)!=null&&rt.full_name?s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(xl,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{className:"text-islamic-green/80",children:P.study_circle.teacher.full_name})]}):s.jsx("span",{className:"text-muted-foreground",children:"—"})}),s.jsx(Fe,{className:"border-r border-green-200 py-2 px-3",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(Yt,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{className:"text-islamic-green/80",children:((Lt=P.study_circle)==null?void 0:Lt.name)||"-"})]})}),s.jsx(Fe,{className:"border-r border-green-200 py-2 px-3",children:s.jsx("span",{className:"text-islamic-green/80",children:((kr=xe.quranPartsOptions.find($r=>$r.value===P.memorized_parts))==null?void 0:kr.label)||P.memorized_parts})}),s.jsx(Fe,{className:"border-r border-green-200 py-2 px-3",children:s.jsx("span",{className:"text-islamic-green/80",children:((Cr=xe.gradeOptions.find($r=>$r.value===(P.grade_level||P.grade)))==null?void 0:Cr.label)||P.grade_level||P.grade||"-"})}),s.jsx(Fe,{className:"border-r border-green-200 py-2 px-3 text-center",children:s.jsx("span",{className:"text-islamic-green/80",children:P.gender==="male"?"ذكر":P.gender==="female"?"أنثى":"-"})}),s.jsx(Fe,{className:"border-r border-green-200 py-2 px-3",children:s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>Nc(P),className:"h-8 w-8 text-islamic-green hover:bg-green-100 rounded-full",children:s.jsx(lr,{size:16})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>ah(P),className:"h-8 w-8 text-red-500 hover:bg-red-100 rounded-full",children:s.jsx(Sr,{size:16})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>_i(P),className:"h-8 w-8 text-blue-500 hover:bg-blue-100 rounded-full",children:s.jsx(sx,{size:16})})]})})]},P.id)})})]})}),Yr.length>Et&&s.jsx("div",{className:"mt-4",children:s.jsx(K2,{children:s.jsxs(Y2,{children:[s.jsx(Zs,{children:s.jsx(Q2,{onClick:()=>f(P=>Math.max(1,P-1))})}),Cc(),s.jsx(Zs,{children:s.jsx(J2,{onClick:()=>f(P=>Math.min(Qr,P+1))})})]})})})]}),s.jsxs(qo,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[xe.totalStudents,": ",s.jsx("span",{className:"font-medium",children:a.length})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[xe.showing," ",s.jsxs("span",{className:"font-medium",children:[Math.min((u-1)*Et+1,Yr.length)," - ",Math.min(u*Et,Yr.length)]})," ",xe.from," ",s.jsx("span",{className:"font-medium",children:Yr.length})," ",xe.student]})]})]}),s.jsx(St,{open:X,onOpenChange:J,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[650px]",children:[s.jsx(Pt,{className:"flex justify-center items-center",children:s.jsxs(Ot,{className:"flex items-center gap-2 text-islamic-green text-xl",children:[ae,s.jsx($n,{className:"h-5 w-5"})]})}),s.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[(t==="admin"||t==="superadmin"||t==="teacher")&&s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"teacher_id",className:"mb-2 block",children:[xe.teacherName," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:xe.optionalField})]}),t==="teacher"?s.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-muted",children:[s.jsx(as,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{children:(()=>{const P=r?T.find(fe=>fe.id===r):null;return P?P.full_name:"المعلم"})()})]}):s.jsx("div",{children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[s.jsxs("div",{className:"relative md:w-1/2",children:[s.jsx(nn,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(me,{placeholder:"البحث عن معلم",value:$,onChange:P=>Q(P.target.value),className:"pl-3 pr-10 mb-2 md:mb-0"})]}),s.jsx("div",{className:"md:w-1/2",children:s.jsxs(Qe,{value:j,onValueChange:P=>F(P),disabled:t==="teacher",children:[s.jsx(qe,{className:"focus:border-islamic-green",children:s.jsx(Je,{placeholder:"اختر معلم"})}),s.jsx(Ge,{children:T.filter(P=>!$||P.full_name.toLowerCase().includes($.toLowerCase())).map(P=>s.jsx(ve,{value:P.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:P.full_name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:P.role==="admin"?"مشرف":"معلم"})]})},P.id))})]})})]})})]}),(t==="admin"||t==="superadmin"||t==="teacher")&&s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"study_circle_id",className:"mb-2 block",children:[xe.studyCircleName," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:xe.requiredField})]}),s.jsxs(Qe,{value:D,onValueChange:P=>{z(P)},disabled:!j||M,children:[s.jsx(qe,{className:"focus:border-islamic-green",children:s.jsx(Je,{placeholder:M?"جاري تحميل الحلقات...":xe.studyCirclePlaceholder})}),s.jsx(Ge,{position:"item-aligned",align:"start",side:"bottom",children:_.length>0?_.map(P=>s.jsx(ve,{value:P.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:P.name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:P.name||"حلقة دراسية"})]})},P.id)):s.jsx("div",{className:"p-2 text-center text-muted-foreground",children:j?"لا توجد حلقات لهذا المعلم":"اختر معلم أولاً"})})]})]})]}),s.jsx("div",{className:"flex flex-col md:flex-row gap-6",children:s.jsxs("div",{className:"flex-1 ltr",children:[s.jsxs(ee,{htmlFor:"guardian_id",className:"mb-2 block",children:[xe.guardianName," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:xe.optionalField})]}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-[50%]",children:s.jsxs("div",{className:"relative",children:[s.jsx(nn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(me,{placeholder:"بحث عن ولي أمر...",className:"pl-8 text-sm focus:border-islamic-green",value:S,onChange:P=>C(P.target.value)})]})}),s.jsx("div",{className:"w-[50%]",children:s.jsxs(Qe,{value:R,onValueChange:G,children:[s.jsx(qe,{className:"focus:border-islamic-green",children:s.jsx(Je,{placeholder:"اختر ولي الأمر"})}),s.jsx(Ge,{position:"item-aligned",align:"start",side:"bottom",children:p.filter(P=>!S||P.full_name.includes(S)||P.phone_number&&P.phone_number.includes(S)).map(P=>s.jsx(ve,{value:P.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:P.full_name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:P.phone_number||"لا يوجد رقم هاتف"})]})},P.id))})]})})]})}),s.jsx(me,{id:"guardian_name",value:ar,onChange:P=>Ct(P.target.value),placeholder:xe.guardianName,className:"focus:border-islamic-green hidden"})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"grade_level",className:"mb-2 block",children:[xe.grade," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Qe,{value:ze,onValueChange:Se,children:[s.jsx(qe,{className:"focus:border-islamic-green",children:s.jsx(Je,{placeholder:"اختر الصف"})}),s.jsxs(Ge,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:[s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"مرحلة رياض الأطفال"}),xe.gradeOptions.slice(0,2).map(P=>s.jsx(ve,{value:P.value,children:P.label},P.value))]}),s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"المرحلة الابتدائية"}),xe.gradeOptions.slice(2,8).map(P=>s.jsx(ve,{value:P.value,children:P.label},P.value))]}),s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"المرحلة الإعدادية"}),xe.gradeOptions.slice(8,11).map(P=>s.jsx(ve,{value:P.value,children:P.label},P.value))]}),s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"المرحلة الثانوية"}),xe.gradeOptions.slice(11,14).map(P=>s.jsx(ve,{value:P.value,children:P.label},P.value))]}),s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"المرحلة الجامعية"}),xe.gradeOptions.slice(14,20).map(P=>s.jsx(ve,{value:P.value,children:P.label},P.value))]}),s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"الدراسات العليا"}),xe.gradeOptions.slice(20).map(P=>s.jsx(ve,{value:P.value,children:P.label},P.value))]})]})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"last_quran_progress",className:"mb-2 block",children:[xe.lastQuranProgress," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:xe.optionalField})]}),s.jsxs(Qe,{value:H,onValueChange:ce,children:[s.jsx(qe,{className:"focus:border-islamic-green",children:s.jsx(Je,{placeholder:xe.quranProgressPlaceholder})}),s.jsx(Ge,{position:"item-aligned",align:"end",side:"bottom",className:"max-h-[300px]",children:s.jsxs(In,{children:[s.jsx(mn,{className:"font-bold text-islamic-green",children:"الأجزاء"}),xe.quranPartsOptions.map(P=>s.jsx(ve,{value:P.value,children:P.label},P.value))]})})]})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"phone_number",className:"mb-2 block",children:[xe.phoneNumber," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:xe.optionalField})]}),s.jsx(me,{id:"phone_number",value:Ne,onChange:P=>Pe(P.target.value),placeholder:xe.phoneNumber,dir:"ltr",className:"text-left focus:border-islamic-green"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ee,{htmlFor:"email",className:"mb-2 block",children:[xe.email," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"(اختياري)"})]}),s.jsx(me,{id:"email",type:"email",value:ct,onChange:P=>st(P.target.value),placeholder:xe.email,dir:"ltr",className:"text-left focus:border-islamic-green"})]})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"address",className:"mb-2 block",children:[xe.notes," ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"(اختياري)"})]}),s.jsx($s,{id:"address",value:Jt,onChange:P=>Xt(P.target.value),placeholder:xe.notes,rows:3,className:"focus:border-islamic-green"})]})]}),s.jsxs(bt,{dir:"rtl",className:"flex justify-start gap-2",children:[s.jsx(V,{onClick:kc,className:"bg-islamic-green hover:bg-islamic-green/90",children:xe.save}),s.jsx(V,{variant:"outline",onClick:()=>J(!1),children:xe.cancel})]})]})}),s.jsx(yn,{isOpen:Ae,onOpenChange:Re,onConfirm:Sc,title:xe.deleteStudent,description:s.jsxs(s.Fragment,{children:[xe.deleteConfirmation,s.jsx("br",{}),xe.deleteDescription]}),deleteButtonText:xe.confirm,cancelButtonText:xe.cancel}),s.jsx(St,{open:se,onOpenChange:re,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[500px]",children:[s.jsx(Pt,{className:"flex justify-center items-center",children:s.jsxs(Ot,{className:"flex items-center gap-2 text-islamic-green text-xl",children:["إضافة ولي أمر جديد",s.jsx($n,{className:"h-5 w-5"})]})}),s.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"guardian_full_name",className:"mb-2 block",children:["الاسم الكامل ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(me,{id:"guardian_full_name",value:ye,onChange:P=>je(P.target.value),placeholder:"الاسم الكامل لولي الأمر",className:"focus:border-islamic-green",required:!0})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"guardian_phone_number",className:"mb-2 block",children:["رقم الهاتف ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(me,{id:"guardian_phone_number",value:q,onChange:P=>Y(P.target.value),placeholder:"رقم الهاتف",dir:"ltr",className:"text-left focus:border-islamic-green",required:!0})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"guardian_email",className:"mb-2 block",children:["البريد الإلكتروني ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"(اختياري)"})]}),s.jsx(me,{id:"guardian_email",type:"email",value:oe,onChange:P=>De(P.target.value),placeholder:"البريد الإلكتروني",dir:"ltr",className:"text-left focus:border-islamic-green"})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"guardian_address",className:"mb-2 block",children:["العنوان / ملاحظات ",s.jsx("span",{className:"text-muted-foreground text-sm",children:"(اختياري)"})]}),s.jsx($s,{id:"guardian_address",value:W,onChange:P=>ie(P.target.value),placeholder:"العنوان أو أي ملاحظات إضافية",rows:3,className:"focus:border-islamic-green"})]})]}),s.jsxs(bt,{dir:"rtl",className:"flex justify-start gap-2",children:[s.jsx(V,{onClick:Sn,className:"bg-islamic-green hover:bg-islamic-green/90",children:"حفظ"}),s.jsx(V,{variant:"outline",onClick:()=>re(!1),children:"إلغاء"})]})]})}),s.jsx(St,{open:pt,onOpenChange:Mt,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[700px]",children:[s.jsx(Pt,{className:"flex justify-center items-center",children:s.jsxs(Ot,{className:"flex items-center gap-2 text-islamic-green text-xl",children:["سجل المعلمين السابقين للطالب",s.jsx(sx,{className:"h-5 w-5"})]})}),s.jsxs("div",{className:"py-4",children:[s.jsxs("div",{className:"mb-4 bg-gray-50 p-3 rounded-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(as,{className:"h-5 w-5 text-islamic-green"}),s.jsx("span",{className:"font-semibold",children:xt.student.full_name})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xl,{className:"h-4 w-4 text-islamic-green/60"}),s.jsxs("span",{className:"text-sm text-gray-600",children:["الصف: ",((Qo=(La=xe.gradeOptions)==null?void 0:La.find(P=>P.value===xt.student.grade_level))==null?void 0:Qo.label)||xt.student.grade_level||"-"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xl,{className:"h-4 w-4 text-islamic-green/60"}),s.jsxs("span",{className:"text-sm text-gray-600",children:["المعلم الحالي: ",((Bs=(Le=xt.student.study_circle)==null?void 0:Le.teacher)==null?void 0:Bs.full_name)||"غير محدد"]})]})]})]}),Qt?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Un,{className:"h-8 w-8 animate-spin text-islamic-green"})}):xt.history.length>0?s.jsx("div",{className:"border border-islamic-green/20 rounded-md overflow-hidden",children:s.jsxs(Rs,{children:[s.jsx(Is,{className:"bg-islamic-green/25",children:s.jsxs(nr,{className:"hover:bg-transparent",children:[s.jsx(Be,{className:"text-right font-bold text-islamic-green",children:"المعلم"}),s.jsx(Be,{className:"text-right font-bold text-islamic-green",children:"الحلقة"}),s.jsx(Be,{className:"text-right font-bold text-islamic-green",children:"تاريخ البداية"}),s.jsx(Be,{className:"text-right font-bold text-islamic-green",children:"تاريخ النهاية"}),s.jsx(Be,{className:"text-right font-bold text-islamic-green",children:"المدة"})]})}),s.jsx(Ms,{children:xt.history.map((P,fe)=>{var Cr;const Ee=T.find($r=>$r.id===P.teacher_id),Tt=new Date(P.start_date),rt=P.end_date?new Date(P.end_date):new Date,Lt=Math.floor((rt.getTime()-Tt.getTime())/(1e3*60*60*24));let kr="";if(Lt<30)kr=`${Lt} يوم`;else if(Lt<365)kr=`${Math.floor(Lt/30)} شهر`;else{const $r=Math.floor(Lt/365),Ni=Math.floor(Lt%365/30);kr=`${$r} سنة${Ni>0?` و ${Ni} شهر`:""}`}return s.jsxs(nr,{className:`border-b border-islamic-green/10 ${P.end_date?"":"bg-islamic-green/5"}`,children:[s.jsx(Fe,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(xl,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{children:(Ee==null?void 0:Ee.full_name)||"غير معروف"}),!P.end_date&&s.jsx("span",{className:"inline-flex px-2 py-0.5 mr-2 text-xs bg-islamic-green/20 text-islamic-green/80 rounded-full",children:"حالي"})]})}),s.jsx(Fe,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Yt,{className:"h-4 w-4 text-islamic-green/60"}),s.jsx("span",{children:((Cr=P.study_circle)==null?void 0:Cr.name)||"غير محدد"})]})}),s.jsx(Fe,{children:new Date(P.start_date).toLocaleDateString("ar-EG")}),s.jsx(Fe,{children:P.end_date?new Date(P.end_date).toLocaleDateString("ar-EG"):s.jsx("span",{className:"text-gray-500",children:"-"})}),s.jsx(Fe,{children:kr})]},P.id)})})]})}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(Bg,{className:"h-12 w-12 text-gray-300 mb-3"}),s.jsx("p",{className:"text-muted-foreground mb-2",children:"لا يوجد سجل للمعلمين السابقين"}),s.jsx("p",{className:"text-sm text-gray-500",children:"لم يتم تسجيل أي تغيير في معلمي هذا الطالب"})]})]}),s.jsx(bt,{children:s.jsx(V,{variant:"outline",onClick:()=>Mt(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:"إغلاق"})})]})})]})}function lD({onNavigate:e,userRole:t,userId:r}){return s.jsx(rN,{onNavigate:e,userRole:t,userId:r})}function cD({onNavigate:e,userRole:t,userId:r}){return console.log("Rendering StudentsList page with role:",t),s.jsx("div",{dir:"rtl",children:s.jsx(rN,{onNavigate:e,userRole:t,userId:r})})}function dD({onNavigate:e,userRole:t,userId:r}){var N;const{toast:n}=_n(),[a,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState(!0),[u,f]=h.useState(""),[m,v]=h.useState(null),[x,g]=h.useState(!1),[b,y]=h.useState("add"),[p,w]=h.useState(at.addForm.title),[S,C]=h.useState(!1),[T,O]=h.useState(null),[$,Q]=h.useState(!1),[K,A]=h.useState(null),[_,I]=h.useState([]),[j,k]=h.useState(!1),[D,z]=h.useState(!1),[M,B]=h.useState(!1),[X,J]=h.useState(null),[L,ne]=h.useState({weekday:"0",start_time:"",end_time:"",location:""}),[ae,Z]=h.useState(!1),[se,re]=h.useState(null),[ye,je]=h.useState({weekday:"0",start_time:"",end_time:"",location:""}),[q,Y]=h.useState(!1),[oe,De]=h.useState(!1),[W,ie]=h.useState(""),[Ae,Re]=h.useState(""),[It,Xe]=h.useState(""),[pt,Mt]=h.useState("");h.useEffect(()=>{xt(),Ut()},[t,r]);const xt=async()=>{d(!0),v(null);try{let E=[];t==="teacher"&&r?E=await ks(r):E=await Ta(),i(E)}catch(E){console.error("خطأ في تحميل الحلقات:",E),v("فشل في تحميل بيانات الحلقات")}finally{d(!1)}},Ut=async()=>{try{const E=await Xu();l(E)}catch(E){console.error("خطأ في تحميل المعلمين:",E)}},Qt=a.filter(E=>{var H;return E.name.includes(u)||((H=E.teacher)==null?void 0:H.full_name)&&E.teacher.full_name.includes(u)}),Ht=()=>{y("add"),w(at.addForm.title),ie(""),Re(""),Xe(""),Mt(""),g(!0)},sr=E=>{var H;y("edit"),w(at.editForm.title),ie(E.id),Re(E.name),Xe(E.teacher_id),Mt(((H=E.max_students)==null?void 0:H.toString())||""),g(!0)},$t=E=>{O(E),C(!0)},qt=async()=>{if(T)try{const E=await G2(T.id);E.success?(n({title:at.deleteSuccess,className:"bg-green-50 border-green-200"}),xt()):n({title:Ie.generalError,description:E.message,variant:"destructive"})}catch(E){console.error("خطأ في حذف الحلقة:",E),n({title:Ie.generalError,description:"حدث خطأ غير متوقع",variant:"destructive"})}finally{C(!1),O(null)}},Ve=E=>{A(E),Q(!0),ar(E.id)},ar=async E=>{k(!0);try{const H=await sh(E);I(H)}catch(H){console.error("خطأ في تحميل جدولة الحلقة:",H),n({title:"خطأ في تحميل الجدولة",description:"حدث خطأ أثناء تحميل مواعيد الحلقة",variant:"destructive"})}finally{k(!1)}},Ct=()=>{ne({weekday:"0",start_time:"",end_time:"",location:""}),z(!0)},R=async()=>{if(!L.start_time||!L.end_time){n({title:"بيانات غير مكتملة",description:"يرجى تحديد وقت البداية والنهاية",variant:"destructive"});return}Y(!0);try{const E={study_circle_id:K.id,weekday:parseInt(L.weekday),start_time:L.start_time+":00",end_time:L.end_time+":00",location:L.location||void 0},H=await O0(E);H.success?(n({title:"تمت الإضافة بنجاح",description:"تم إضافة الموعد الجديد بنجاح",className:"bg-green-50 border-green-200"}),z(!1),await ar(K.id)):n({title:"فشل في إضافة الموعد",description:H.message||"حدث خطأ أثناء إضافة الموعد الجديد",variant:"destructive"})}catch(E){console.error("خطأ في إضافة موعد جديد:",E),n({title:"خطأ",description:"حدث خطأ غير متوقع أثناء إضافة الموعد",variant:"destructive"})}finally{Y(!1)}},G=E=>{J(E),je({weekday:E.weekday.toString(),start_time:E.start_time.substring(0,5),end_time:E.end_time.substring(0,5),location:E.location||""}),B(!0)},ge=async()=>{if(!ye.start_time||!ye.end_time){n({title:"بيانات غير مكتملة",description:"يرجى تحديد وقت البداية والنهاية",variant:"destructive"});return}De(!0);try{const E={id:X.id,weekday:parseInt(ye.weekday),start_time:ye.start_time+":00",end_time:ye.end_time+":00",location:ye.location||void 0},H=await A0(E);H.success?(n({title:"تم التعديل بنجاح",description:"تم تعديل الموعد بنجاح",className:"bg-green-50 border-green-200"}),B(!1),await ar(K.id)):n({title:"فشل في تعديل الموعد",description:H.message||"حدث خطأ أثناء تعديل الموعد",variant:"destructive"})}catch(E){console.error("خطأ في تعديل الموعد:",E),n({title:"خطأ",description:"حدث خطأ غير متوقع أثناء تعديل الموعد",variant:"destructive"})}finally{De(!1)}},Me=async E=>{re(E),Z(!0)},ze=async()=>{if(se)try{const E=await D0(se.id);E.success?(n({title:"تم الحذف بنجاح",description:"تم حذف الموعد بنجاح",className:"bg-green-50 border-green-200"}),await ar(K.id)):n({title:"فشل في حذف الموعد",description:E.message||"حدث خطأ أثناء حذف الموعد",variant:"destructive"})}catch(E){console.error("خطأ في حذف الموعد:",E),n({title:"خطأ",description:"حدث خطأ غير متوقع أثناء حذف الموعد",variant:"destructive"})}},Se=(E,H)=>{ne(ce=>({...ce,[E]:H}))},pe=(E,H)=>{je(ce=>({...ce,[E]:H}))},Oe=async()=>{if(!Ae||!It){n({title:at.incompleteData,description:at.incompleteDataMessage,variant:"destructive"});return}const E=pt?parseInt(pt):void 0;try{if(b==="add"){const ce=await V2({name:Ae,teacher_id:It,max_students:E});ce.success?(n({title:at.addSuccess,className:"bg-green-50 border-green-200"}),g(!1),xt()):n({title:Ie.generalError,description:ce.message,variant:"destructive"})}else{const ce=await q2({id:W,name:Ae,teacher_id:It,max_students:E});ce.success?(n({title:at.updateSuccess,className:"bg-green-50 border-green-200"}),g(!1),xt()):n({title:Ie.generalError,description:ce.message,variant:"destructive"})}}catch(H){console.error("خطأ في حفظ الحلقة:",H),n({title:Ie.generalError,description:"حدث خطأ غير متوقع",variant:"destructive"})}};return t!=="superadmin"&&t!=="admin"&&t!=="teacher"?s.jsx("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 max-w-md mx-auto text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"bg-red-500/10 p-4 rounded-full",children:s.jsx(Rr,{className:"h-16 w-16 text-red-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Ie.accessDenied}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"ليس لديك الصلاحيات اللازمة للوصول إلى هذه الصفحة"}),s.jsx(V,{onClick:()=>e("/"),variant:"outline",className:"border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:gA.back})]})}):s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsxs(nt,{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-lg border border-green-300 dark:border-green-700 overflow-hidden transition-all duration-300 hover:shadow-2xl",children:[s.jsx(ut,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 duration-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(dt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(Yt,{className:"h-5 w-5 text-yellow-300"}),at.title]}),s.jsx(Dt,{className:"text-xs md:text-sm text-green-100 mt-1",children:at.description})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-3 items-center",children:[(t==="superadmin"||t==="admin")&&s.jsxs(V,{variant:"outline",className:`flex items-center gap-2 rounded-3xl border-2 border-green-600 text-green-900 \r
                    hover:bg-green-100 hover:text-green-800 hover:scale-105 \r
                    dark:border-green-500 dark:text-green-300 dark:hover:bg-green-800 dark:hover:text-green-200 \r
                    shadow-lg transition-all duration-200 px-4 py-1.5 font-semibold`,onClick:()=>e("/study-circle-schedules"),children:[s.jsx(Ar,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"جدولة الحلقات"})]}),(t==="superadmin"||t==="admin")&&s.jsxs(V,{onClick:Ht,className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",children:[s.jsx(Pr,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:at.addCircle})]})]})]})}),s.jsxs(Ze,{className:"p-6 space-y-6",children:[m&&s.jsxs(Go,{variant:"destructive",className:"mb-4 rounded-lg shadow-sm",children:[s.jsx(Rr,{className:"h-4 w-4 ml-2"}),s.jsx(Ko,{children:m})]}),s.jsx("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(nn,{className:"absolute right-3 top-3 h-4 w-4 text-green-400 dark:text-green-300"}),s.jsx(me,{placeholder:"🔍 البحث في الحلقات...",value:u,onChange:E=>f(E.target.value),className:"pl-3 pr-10 w-full rounded-xl border border-green-300 dark:border-green-600 focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 transition-all"})]})}),s.jsx("div",{className:"border border-green-200 dark:border-green-700 rounded-2xl overflow-hidden shadow-md",children:s.jsxs(Rs,{className:"direction-rtl w-full border-collapse",children:[s.jsx(Is,{className:"bg-green-800 dark:bg-green-900",children:s.jsxs(nr,{children:[s.jsx(Be,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{children:["📚",at.name]})})}),s.jsxs(Be,{className:"text-right font-bold text-white py-3 px-4 border-r border-green-700",children:["👨‍🏫 ",at.teacher]}),s.jsxs(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:["👥 ",at.maxStudents]}),s.jsxs(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:["🗓️ ",at.schedule]}),(t==="superadmin"||t==="admin")&&s.jsx(Be,{className:"text-center font-bold text-white py-3 px-4 border-r border-green-700",children:"⚙️ الإجراءات"})]})}),s.jsx(Ms,{children:Qt.length>0?Qt.map(E=>{var H;return s.jsxs(nr,{className:"odd:bg-green-50 even:bg-white dark:odd:bg-green-800 dark:even:bg-green-900 hover:bg-green-100 dark:hover:bg-green-700 transition-colors duration-200 border-b border-green-200 dark:border-green-700",children:[s.jsx(Fe,{className:"text-right font-medium text-green-900 dark:text-green-200 py-3 px-4 border-r border-green-200 dark:border-green-700",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{children:["📚 ",E.name]})})}),s.jsx(Fe,{className:"text-right py-3 px-4 border-r border-green-200 dark:border-green-700",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xd,{className:"h-4 w-4 text-green-700 dark:text-green-300"}),s.jsx("span",{className:"text-green-900 dark:text-green-200",children:((H=E.teacher)==null?void 0:H.full_name)||"غير محدد"})]})}),s.jsx(Fe,{className:"text-center py-3 px-4 border-r border-green-200 dark:border-green-700",children:E.max_students?s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(Os,{className:"h-4 w-4 text-green-700 dark:text-green-300"}),s.jsx("span",{className:"text-green-900 dark:text-green-200",children:E.max_students})]}):s.jsx("span",{className:"text-green-600 dark:text-green-400",children:"-"})}),s.jsx(Fe,{className:"text-center py-3 px-4 border-r border-green-200 dark:border-green-700",children:s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>Ve(E),className:"h-8 w-8 text-green-600 dark:text-green-300 hover:bg-green-100 dark:hover:bg-green-700 hover:text-green-700 dark:hover:text-green-200 rounded-full transition-colors",title:"جدولة الحلقة",children:s.jsx(Ar,{size:16})})}),(t==="superadmin"||t==="admin")&&s.jsx(Fe,{className:"text-center py-3 px-4 border-r border-green-200 dark:border-green-700",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>sr(E),className:"h-8 w-8 text-green-700 dark:text-green-300 hover:bg-green-100 dark:hover:bg-green-700 hover:text-green-800 dark:hover:text-green-200 rounded-full transition-colors",title:at.editTooltip,children:s.jsx(lr,{size:16})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>$t(E),className:"h-8 w-8 text-red-400 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-800 hover:text-red-500 dark:hover:text-red-400 rounded-full transition-colors",title:at.deleteTooltip,children:s.jsx(Sr,{size:16})})]})})]},E.id)}):s.jsx(nr,{children:s.jsx(Fe,{colSpan:t==="superadmin"||t==="admin"?6:5,className:"text-center py-10",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx(Yt,{className:"h-8 w-8 text-green-300 mb-2"}),s.jsx("p",{className:"text-green-600 dark:text-green-400",children:u?"لا توجد نتائج مطابقة للبحث":at.noCircles}),!u&&(t==="superadmin"||t==="admin")&&s.jsxs(V,{variant:"outline",size:"sm",onClick:Ht,className:"mt-4 flex items-center gap-2 border-green-600 text-green-700 hover:bg-green-50 dark:border-green-500 dark:text-green-300 dark:hover:bg-green-700 transition-colors rounded-xl px-4 py-2",children:[s.jsx(Pr,{className:"h-4 w-4"}),s.jsx("span",{children:at.addCirclePrompt})]})]})})})})]})})]})]}),s.jsx(St,{open:x,onOpenChange:g,children:s.jsx(yt,{dir:"rtl",className:"sm:max-w-[600px] w-full rounded-xl p-4 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 space-y-4",children:[s.jsx(Pt,{className:"flex justify-center items-center pb-2 text-right",children:s.jsx(Ot,{className:"text-xl flex items-center gap-2",children:s.jsxs("h3",{className:`bg-gradient-to-r from-orange-400 via-orange-300 to-yellow-400 \r
                        text-white text-xl font-extrabold py-3 px-5 rounded-2xl shadow-md \r
                        transition-transform duration-200 hover:scale-105 flex items-center gap-2 text-right`,children:[p,s.jsx(Yt,{className:"h-5 w-5 text-white"})]})})}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsxs(ee,{htmlFor:"name",className:"text-right text-gray-800 text-sm",children:[at.name," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(me,{id:"name",value:Ae,onChange:E=>Re(E.target.value),placeholder:"أدخل اسم الحلقة",className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2 text-right"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs(ee,{htmlFor:"teacher",className:"text-right text-gray-800 text-sm",children:[at.teacher," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:It,onValueChange:Xe,children:[s.jsx(qe,{className:"bg-green-50 border-green-200 text-green-900 rounded-md text-sm py-1 px-2 text-right",children:s.jsx(Je,{placeholder:at.selectTeacher})}),s.jsx(Ge,{children:o.length>0?o.map(E=>s.jsx(ve,{value:E.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xd,{className:"h-4 w-4"}),s.jsx("span",{children:E.full_name})]})},E.id)):s.jsx(ve,{value:"",disabled:!0,children:at.noTeachers})})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"max_students",className:"text-right text-gray-800 text-sm",children:at.maxStudents}),s.jsx(me,{id:"max_students",type:"number",value:pt,onChange:E=>Mt(E.target.value),placeholder:at.enterNumber,min:"1",className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2 text-right"})]})]}),s.jsxs(bt,{dir:"rtl",className:"flex justify-end gap-2 mt-4",children:[s.jsx(V,{onClick:Oe,className:"bg-green-600 hover:bg-green-700 text-white rounded-md px-4 py-2 text-sm transition-colors",children:b==="add"?at.addForm.submit:at.editForm.submit}),s.jsx(V,{variant:"outline",onClick:()=>g(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-100 text-sm px-3 py-1",children:at.cancel})]})]})})}),s.jsx(yn,{isOpen:S,onOpenChange:C,onConfirm:qt,isLoading:!1,title:at.deleteCircle,description:at.confirmDelete,itemDetails:T?{[at.name]:T.name,[at.teacher]:((N=T.teacher)==null?void 0:N.full_name)||"-"}:null,deleteButtonText:at.deleteCircle,cancelButtonText:at.cancel}),s.jsx(St,{open:$,onOpenChange:Q,children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[900px] max-h-[80vh] overflow-y-auto p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-xl shadow-lg border border-gray-100",children:[s.jsxs(Pt,{className:"flex flex-col items-center border-b border-islamic-green/20 pb-4",children:[s.jsxs(Ot,{className:"text-xl text-islamic-green flex items-center gap-2",children:[s.jsx(Ar,{className:"h-5 w-5"}),K?`جدولة حلقة: ${K.name}`:"جدولة الحلقة",(K==null?void 0:K.teacher)&&` | المعلم: ${K.teacher.full_name}`]}),s.jsx(Ur,{className:"text-center text-muted-foreground",children:"إدارة مواعيد وأيام انعقاد الحلقة الدراسية"})]}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/50 rounded-lg shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(it,{variant:"outline",className:"text-islamic-green border-islamic-green/40",children:[_.length," موعد"]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"إجمالي المواعيد"}),K&&s.jsxs(it,{variant:"secondary",className:"text-xs",children:["الحلقة: ",K.name]})]}),(t==="superadmin"||t==="admin")&&s.jsxs(V,{onClick:Ct,className:"bg-islamic-green hover:bg-islamic-green/90 text-white flex items-center gap-2",size:"sm",children:[s.jsx(Pr,{className:"h-4 w-4"}),"إضافة موعد جديد"]})]}),j?s.jsx("div",{className:"text-center p-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-islamic-green mb-4"}),s.jsx("span",{className:"text-muted-foreground",children:"جاري تحميل جدولة الحلقة..."})]})}):_.length===0?s.jsxs("div",{className:"text-center p-8 bg-white/30 rounded-lg shadow-sm",children:[s.jsx(Ar,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-medium text-lg mb-2",children:"لا توجد مواعيد محددة"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"لم يتم تسجيل أي مواعيد لهذه الحلقة بعد"}),(t==="superadmin"||t==="admin")&&s.jsxs(V,{onClick:Ct,className:"bg-islamic-green hover:bg-islamic-green/90 text-white",children:[s.jsx(Pr,{className:"h-4 w-4 ml-2"}),"إضافة أول موعد"]}),t==="teacher"&&s.jsx("p",{className:"text-muted-foreground text-sm",children:"لا يمكن للمعلمين إضافة مواعيد. يرجى التواصل مع الإدارة."})]}):s.jsx(ds,{data:_,columns:[{key:"weekday",header:"اليوم 📅",align:"right",render:E=>s.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200 text-sm",children:pi(E.weekday)})},{key:"time",header:"الوقت 🕒",align:"right",render:E=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 px-2 py-1 rounded-md",children:[s.jsx(dn,{className:"h-4 w-4"}),is(E.start_time)]}),s.jsx("span",{className:"text-gray-400 font-bold",children:"—"}),s.jsxs("div",{className:"flex items-center gap-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-300 px-2 py-1 rounded-md",children:[s.jsx(dn,{className:"h-4 w-4"}),is(E.end_time)]})]})},{key:"location",header:"الموقع 📍",align:"right",render:E=>E.location?s.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[s.jsx(Tu,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),E.location]}):s.jsx("span",{className:"text-green-700/60 dark:text-green-400 italic text-sm",children:"موقع الحلقة الافتراضي"})},{key:"created_at",header:"تاريخ الإضافة 📅",align:"center",render:E=>E.created_at?new Date(E.created_at).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):"-"},{key:"actions",header:"الإجراءات ⚙️",align:"center",render:E=>s.jsxs("div",{className:"flex justify-center gap-2 items-center",children:[(t==="superadmin"||t==="admin")&&s.jsxs(s.Fragment,{children:[s.jsx(V,{variant:"ghost",size:"sm",onClick:()=>G(E),className:"bg-green-200 dark:bg-green-800 hover:bg-green-300 dark:hover:bg-green-700 text-green-900 dark:text-green-200 rounded-md p-2 transition-colors",title:"تعديل الموعد",children:s.jsx(lr,{className:"h-4 w-4"})}),s.jsx(V,{variant:"ghost",size:"sm",onClick:()=>Me(E),className:"bg-red-100 dark:bg-red-900 hover:bg-red-200 dark:hover:bg-red-800 text-red-700 dark:text-red-200 rounded-md p-2 transition-colors",title:"حذف الموعد",children:s.jsx(Sr,{className:"h-4 w-4"})})]}),t==="teacher"&&s.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs py-2",children:"غير مسموح بالتعديل"})]})}],emptyMessage:"لا توجد مواعيد",className:"overflow-hidden rounded-lg text-xs border border-green-300 dark:border-green-700 shadow-sm",getRowClassName:(E,H)=>`${H%2===0?"bg-white":"bg-green-50/70"} hover:bg-green-100/60 cursor-pointer transition-colors`})]}),s.jsxs(bt,{className:"sticky bottom-0 bg-background pt-4 border-t flex justify-end gap-2",dir:"rtl",children:[s.jsx(V,{variant:"outline",onClick:()=>Q(!1),className:"border-islamic-green text-islamic-green hover:bg-islamic-green/10",children:"إغلاق"}),(t==="superadmin"||t==="admin")&&s.jsxs(V,{onClick:Ct,className:"bg-islamic-green hover:bg-islamic-green/90 text-white",children:[s.jsx(Pr,{className:"h-4 w-4 ml-2"}),"إضافة موعد"]})]})]})}),s.jsx(St,{open:D,onOpenChange:z,children:s.jsx(yt,{className:"sm:max-w-[500px] w-full rounded-xl p-4 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100",dir:"rtl",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 space-y-4",children:[s.jsxs(Pt,{children:[s.jsx(Ot,{className:"text-center",children:s.jsxs("h3",{className:`flex items-center justify-center gap-2 \r
                          bg-gradient-to-r from-green-400 via-green-300 to-blue-400 \r
                          text-white text-xl font-extrabold \r
                          py-3 px-5 rounded-2xl shadow-md \r
                          transition-transform duration-200 hover:scale-105`,children:[s.jsx(Pr,{className:"h-5 w-5 text-white"}),"إضافة موعد جديد"]})}),s.jsx(Ur,{className:"text-gray-600 text-center text-sm mt-1",children:"قم بتحديد اليوم والوقت لإضافة موعد جديد للحلقة"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-3 bg-white",children:[s.jsx(ee,{className:"text-right text-gray-800 text-sm mb-2",children:"اليوم *"}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:gi.map(E=>s.jsx("button",{type:"button",onClick:()=>Se("weekday",E.value.toString()),className:`
                    text-sm px-4 py-2 rounded-full border transition-all duration-200
                    flex-1 text-center
                    ${L.weekday===E.value.toString()?"bg-gradient-to-r from-green-400 to-blue-400 text-white shadow-md transform scale-105":"bg-gray-50 text-gray-800 border-gray-300 hover:bg-gray-100 hover:shadow-sm"}
                  `,children:E.label},E.value))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"add-schedule-start-time",className:"text-right text-gray-800 text-sm",children:"وقت البداية *"}),s.jsx(me,{id:"add-schedule-start-time",type:"time",value:L.start_time,onChange:E=>Se("start_time",E.target.value),required:!0,className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"add-schedule-end-time",className:"text-right text-gray-800 text-sm",children:"وقت النهاية *"}),s.jsx(me,{id:"add-schedule-end-time",type:"time",value:L.end_time,onChange:E=>Se("end_time",E.target.value),required:!0,className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{htmlFor:"add-schedule-location",className:"text-right text-gray-800 text-sm",children:"الموقع (اختياري)"}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[s.jsx(Eo,{className:"h-3 w-3 ml-1"}),"اتركه فارغاً لاستخدام موقع الحلقة الافتراضي"]})]}),s.jsx(me,{id:"add-schedule-location",value:L.location,onChange:E=>Se("location",E.target.value),placeholder:"أدخل موقع الموعد (اختياري)",className:"bg-gray-50 border-gray-300 rounded-md text-sm py-1 px-2"})]})]}),s.jsxs(bt,{className:"gap-3 flex justify-end mt-4",dir:"rtl",children:[s.jsx(V,{variant:"outline",onClick:()=>z(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-100 text-sm px-3 py-1",children:"إلغاء"}),s.jsx(V,{onClick:R,className:"bg-green-600 hover:bg-green-700 text-white rounded-md px-4 py-2 text-sm transition-colors",disabled:!L.start_time||!L.end_time||q,children:q?"جارٍ الإضافة...":"إضافة الموعد"})]})]})})}),s.jsx(St,{open:M,onOpenChange:B,children:s.jsx(yt,{className:"sm:max-w-[500px] w-full rounded-xl p-4 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100",dir:"rtl",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 space-y-4",children:[s.jsxs(Pt,{className:"pb-2",children:[s.jsx(Ot,{className:"text-xl flex items-center justify-center gap-2",children:s.jsxs("h3",{className:`bg-gradient-to-r from-orange-400 via-orange-300 to-yellow-400 \r
                          text-white text-xl font-extrabold py-3 px-5 rounded-2xl shadow-md \r
                          transition-transform duration-200 hover:scale-105 flex items-center gap-2`,children:[s.jsx(lr,{className:"h-5 w-5 text-white"}),"تعديل موعد"]})}),s.jsx(Ur,{className:"text-center text-muted-foreground mt-1",children:"قم بتعديل بيانات الموعد"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-3 bg-white",children:[s.jsxs(ee,{className:"text-right text-gray-800 text-sm mb-2",children:["اليوم ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:gi.map(E=>s.jsx("button",{type:"button",onClick:()=>pe("weekday",E.value.toString()),className:`
                      text-sm px-4 py-2 rounded-full border transition-all duration-200
                      flex-1 text-center
                      ${ye.weekday===E.value.toString()?"bg-gradient-to-r from-green-400 to-blue-400 text-white shadow-md transform scale-105":"bg-gray-50 text-gray-800 border-gray-300 hover:bg-gray-100 hover:shadow-sm"}
                      `,children:E.label},E.value))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ee,{htmlFor:"edit-schedule-start-time",className:"text-right text-gray-800 text-sm",children:["وقت البداية ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(me,{id:"edit-schedule-start-time",type:"time",value:ye.start_time,onChange:E=>pe("start_time",E.target.value),required:!0,className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ee,{htmlFor:"edit-schedule-end-time",className:"text-right text-gray-800 text-sm",children:["وقت النهاية ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(me,{id:"edit-schedule-end-time",type:"time",value:ye.end_time,onChange:E=>pe("end_time",E.target.value),required:!0,className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{htmlFor:"edit-schedule-location",className:"text-right text-gray-800 text-sm",children:"الموقع (اختياري)"}),s.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[s.jsx(Eo,{className:"h-3 w-3 mr-1"}),"اتركه فارغاً لاستخدام موقع الحلقة الافتراضي"]})]}),s.jsx(me,{id:"edit-schedule-location",value:ye.location,onChange:E=>pe("location",E.target.value),placeholder:"أدخل موقع الموعد (اختياري)",className:"bg-gray-50 border-gray-300 rounded-md text-sm py-1 px-2"})]})]}),s.jsxs(bt,{className:"flex justify-end gap-2 mt-4",dir:"rtl",children:[s.jsx(V,{variant:"outline",onClick:()=>B(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-100 text-sm px-3 py-1",children:"إلغاء"}),s.jsx(V,{onClick:ge,className:"bg-green-600 hover:bg-green-700 text-white rounded-md px-4 py-2 text-sm transition-colors",disabled:!ye.start_time||!ye.end_time||oe,children:oe?"جارٍ الحفظ...":"حفظ التغييرات"})]})]})})}),s.jsx(yn,{isOpen:ae,onOpenChange:Z,onConfirm:ze,isLoading:!1,title:"تأكيد حذف الموعد",description:"هل أنت متأكد من رغبتك في حذف هذا الموعد من جدول الحلقة؟",itemDetails:se?{اليوم:pi(+se.weekday),الوقت:`${se.start_time} - ${se.end_time}`,المكان:se.location||"-"}:null,deleteButtonText:"نعم، احذف الموعد",cancelButtonText:"إلغاء"})]})}function uD({onNavigate:e,userRole:t,userId:r}){return s.jsx(dD,{onNavigate:e,userRole:t,userId:r})}function hD({onNavigate:e,userRole:t,userId:r}){const{toast:n}=_n(),[a,i]=h.useState([]),[o,l]=h.useState(!0),[c,d]=h.useState(""),[u,f]=h.useState(null),[m,v]=h.useState([]),[x,g]=h.useState(!1),[b,y]=h.useState(!1),[p,w]=h.useState(!1),[S,C]=h.useState({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),[T,O]=h.useState(!1),[$,Q]=h.useState(null),[K,A]=h.useState(!1),[_,I]=h.useState({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),[j,k]=h.useState(!1),[D,z]=h.useState(null),[M,B]=h.useState(!1),X=t==="admin"||t==="superadmin";h.useEffect(()=>{J()},[t,r]);const J=async()=>{l(!0);try{let W=[];t==="teacher"&&r?(W=await ks(r),console.log("Teacher circles loaded:",W)):(t==="admin"||t==="superadmin")&&(W=await Ta()),i(W),t==="teacher"&&W.length===1&&(f(W[0]),await L(W[0].id))}catch(W){console.error("Error loading circles:",W),n({title:"خطأ في تحميل الحلقات",description:"حدث خطأ أثناء تحميل قائمة الحلقات",variant:"destructive"})}finally{l(!1)}},L=async W=>{g(!0);try{const ie=await sh(W);console.log("📅 Loaded schedules:",ie),v(ie)}catch(ie){console.error("Error loading schedules:",ie),n({title:"خطأ في تحميل الجدولة",description:"حدث خطأ أثناء تحميل جدولة الحلقة",variant:"destructive"})}finally{g(!1)}},ne=async W=>{f(W),await L(W.id)},ae=a.filter(W=>{var ie;return W.name.toLowerCase().includes(c.toLowerCase())||((ie=W.teacher)==null?void 0:ie.full_name)&&W.teacher.full_name.toLowerCase().includes(c.toLowerCase())}),Z=()=>{C({weekday:"0",start_time:"08:00",end_time:"09:00",location:""}),y(!0)},se=(W,ie)=>{C(Ae=>({...Ae,[W]:ie}))},re=async()=>{if(!(!u||p))try{if(w(!0),!S.start_time||!S.end_time){n({title:"خطأ في البيانات",description:"الرجاء تحديد وقت البداية والنهاية",variant:"destructive"}),w(!1);return}if(S.start_time>=S.end_time){n({title:"خطأ في الأوقات",description:"يجب أن يكون وقت النهاية بعد وقت البداية",variant:"destructive"}),w(!1);return}const W={study_circle_id:u.id,weekday:parseInt(S.weekday),start_time:S.start_time,end_time:S.end_time,location:S.location.trim()||null};console.log("💾 Creating new schedule:",W);const ie=await O0(W);ie.success?(n({title:"✅ تمت الإضافة بنجاح",description:`تم إضافة جدولة جديدة للحلقة "${u.name}" بنجاح`,variant:"default"}),await L(u.id),y(!1)):n({title:"خطأ في الإضافة",description:ie.message||"حدث خطأ أثناء إضافة الجدولة الجديدة",variant:"destructive"})}catch(W){console.error("❌ Error creating new schedule:",W),n({title:"خطأ غير متوقع",description:"حدث خطأ غير متوقع أثناء إضافة الجدولة الجديدة",variant:"destructive"})}finally{w(!1)}},ye=W=>{Q(W),I({weekday:W.weekday.toString(),start_time:W.start_time.substring(0,5),end_time:W.end_time.substring(0,5),location:W.location||""}),O(!0)},je=(W,ie)=>{I(Ae=>({...Ae,[W]:ie}))},q=async()=>{if(!(!$||K))try{if(A(!0),!_.start_time||!_.end_time){n({title:"خطأ في البيانات",description:"الرجاء تحديد وقت البداية والنهاية",variant:"destructive"});return}if(_.start_time>=_.end_time){n({title:"خطأ في الأوقات",description:"يجب أن يكون وقت النهاية بعد وقت البداية",variant:"destructive"});return}const W={id:$.id,weekday:parseInt(_.weekday),start_time:_.start_time,end_time:_.end_time,location:_.location.trim()||null};console.log("💾 Updating schedule with data:",W);const ie=await A0(W);ie.success?(n({title:"✅ تم التحديث بنجاح",description:"تم تحديث بيانات الجدولة بنجاح",variant:"default"}),u&&await L(u.id),O(!1),Q(null)):n({title:"خطأ في التحديث",description:ie.message||"حدث خطأ أثناء تحديث بيانات الجدولة",variant:"destructive"})}catch(W){console.error("❌ Error updating schedule:",W),n({title:"خطأ غير متوقع",description:"حدث خطأ غير متوقع أثناء تحديث بيانات الجدولة",variant:"destructive"})}finally{A(!1)}},Y=W=>{z(W),k(!0)},oe=async()=>{if(D)try{B(!0);const W=await D0(D.id);W.success?(n({title:"✅ تم الحذف بنجاح",description:"تم حذف الجدولة بنجاح",variant:"default"}),console.log("✅ Schedule deleted successfully:",D.id),u&&await L(u.id)):n({title:"خطأ في الحذف",description:W.message||"حدث خطأ أثناء حذف الجدولة",variant:"destructive"})}catch(W){console.error("❌ Error deleting schedule:",W),n({title:"خطأ غير متوقع",description:"حدث خطأ غير متوقع أثناء حذف الجدولة",variant:"destructive"})}finally{B(!1),k(!1),z(null)}},De=()=>{f(null),v([])};return s.jsxs("div",{className:"container mx-auto py-6",dir:"rtl",children:[s.jsxs(nt,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsx(ut,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(dt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(Ar,{className:"h-5 w-5 text-yellow-300"}),"إدارة جدولة الحلقات الدراسية"]}),s.jsx(Dt,{className:"text-xs md:text-sm text-green-100 mt-1",children:"عرض وتعديل جدولة الحلقات الدراسية ومواعيدها"})]}),s.jsxs(V,{variant:"outline",className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:()=>e("/study-circles"),children:[s.jsx(Rw,{className:"h-4 w-4"}),"العودة إلى الحلقات"]})]})}),s.jsx(Ze,{className:"space-y-6",children:s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-2xl shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 via-green-500 to-green-700 p-4",children:s.jsxs("h2",{className:"text-xl font-semibold text-white mb-0 flex items-center gap-2",children:[s.jsx(Yt,{className:"h-5 w-5"}),"الحلقات الدراسية"]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsx("div",{className:"relative",children:t!=="teacher"&&s.jsxs("div",{className:"relative mt-2",children:[s.jsx(nn,{className:"absolute right-3 top-2.5 h-4 w-4 text-green-400"}),s.jsx(me,{placeholder:"بحث عن حلقة...",className:"pr-10 pl-4 py-2 border-2 border-green-300 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all duration-200 shadow-sm",value:c,onChange:W=>d(W.target.value)})]})}),o?s.jsxs("div",{className:"flex flex-col items-center justify-center p-8 gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),s.jsx("span",{className:"text-sm text-green-600",children:"جاري تحميل الحلقات..."})]}):ae.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center gap-2",children:[s.jsx(Yt,{className:"h-12 w-12 text-green-200"}),s.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"لا توجد حلقات"}),s.jsx("p",{className:"text-sm text-green-600",children:"لم يتم العثور على حلقات تطابق معايير البحث"})]}):s.jsx("div",{className:"divide-y divide-green-100",children:ae.map(W=>s.jsx("div",{className:`cursor-pointer transition-all duration-200 rounded-2xl flex flex-col gap-1 p-2 shadow-sm ${(u==null?void 0:u.id)===W.id?"bg-green-700 text-white ring-1 ring-green-400 scale-105":"bg-green-50 hover:bg-green-100 text-green-800"}`,onClick:()=>ne(W),children:s.jsxs("div",{className:"flex items-center justify-between text-sm font-medium gap-1",children:[s.jsxs("div",{className:"flex items-center gap-1 truncate",children:[s.jsx("span",{className:"text-green-500",children:"📖"}),s.jsx("span",{className:"truncate",children:W.name}),W.teacher&&s.jsxs("span",{className:`flex items-center gap-1 text-xs truncate ${(u==null?void 0:u.id)===W.id?"text-white":"text-green-700"}`,children:["👨‍🏫 ",W.teacher.full_name]})]}),(u==null?void 0:u.id)===W.id&&s.jsx(it,{variant:"outline",className:`${(u==null?void 0:u.id)===W.id?"text-white border-white":"text-green-800 border-green-400"} text-xs`,children:"محدد"})]})},W.id))})]})]})}),s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl shadow-sm overflow-hidden",children:[s.jsx(ut,{className:"pb-4 bg-gradient-to-r from-green-100 via-green-200 to-green-700 p-4",children:s.jsxs("div",{className:"flex justify-between  items-center",children:[s.jsxs(dt,{className:"text-lg font-bold text-white flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-5 w-5 text-green-700"}),u?`جدولة حلقة: ${u.name}`:"جدولة الحلقات"," | 👨‍🏫"]}),(u==null?void 0:u.teacher)&&s.jsxs(Dt,{className:"text-gray-700 text-xs sm:text-[10px]",children:["المعلم: ",u.teacher.full_name]})]}),u&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(V,{variant:"outline",size:"sm",className:`flex items-center gap-3 rounded-3xl border-2 border-green-600 text-green-900 \r
                                hover:bg-green-100 hover:text-green-800 hover:scale-105 \r
                                dark:border-green-500 dark:text-green-300 dark:hover:bg-green-800 dark:hover:text-green-200 \r
                                shadow-lg transition-all duration-200 px-5 py-2 font-semibold`,onClick:De,children:"إلغاء التحديد"}),X&&s.jsxs(V,{onClick:Z,size:"sm",className:`flex items-center gap-3 rounded-3xl bg-green-600 hover:bg-green-700 \r
                            dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-5 py-2 font-semibold`,children:[s.jsx(Pr,{className:"h-4 w-4"}),"إضافة موعد"]})]})]})}),s.jsx(Ze,{className:"p-4",children:u?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-100 rounded-lg border border-green-200",children:[s.jsxs(it,{variant:"outline",className:"text-green-800 border-green-400",children:[m.length," موعد"]}),s.jsx("span",{className:"text-sm text-green-700",children:"إجمالي المواعيد"})]}),s.jsx(ds,{data:m,columns:[{key:"weekday",header:"📅 اليوم",align:"right",render:W=>s.jsx("span",{className:"font-medium text-green-900 dark:text-green-200 text-sm",children:pi(W.weekday)})},{key:"time",header:"🕒 الوقت",align:"right",render:W=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-800 px-3 py-1 rounded-lg",children:[s.jsx(dn,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:is(W.start_time)})]}),s.jsx("span",{className:"text-gray-400 font-bold mx-1",children:"—"}),s.jsxs("div",{className:"flex items-center gap-1 bg-red-100 text-red-800 px-3 py-1 rounded-lg",children:[s.jsx(dn,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:is(W.end_time)})]})]})},{key:"location",header:"📍 الموقع",align:"right",render:W=>W.location?s.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[s.jsx(Tu,{className:"h-4 w-4 text-green-600"}),W.location]}):s.jsx("span",{className:"text-green-700/60 italic text-sm",children:"موقع الحلقة الافتراضي"})},{key:"created_at",header:"📅 تاريخ الإضافة",align:"center",render:W=>W.created_at?new Date(W.created_at).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):"-"},...X?[{key:"actions",header:"⚙️ الإجراءات",align:"center",render:W=>s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"sm",onClick:()=>ye(W),className:"bg-green-200 hover:bg-green-300 text-green-900 rounded-md p-2 transition-colors",title:"تعديل الموعد",children:s.jsx(lr,{className:"h-4 w-4"})}),s.jsx(V,{variant:"ghost",size:"sm",onClick:()=>Y(W),className:"bg-red-100 hover:bg-red-200 text-red-700 rounded-md p-2 transition-colors",title:"حذف الموعد",children:s.jsx(Sr,{className:"h-4 w-4"})})]})}]:[]],emptyMessage:"لا توجد مواعيد",className:"overflow-hidden rounded-xl border border-green-300 shadow-md text-xs",getRowClassName:(W,ie)=>`${ie%2===0?"bg-green-50 hover:bg-green-100":"bg-white hover:bg-green-50"} cursor-pointer transition-colors`})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center gap-3",children:[s.jsx(Ar,{className:"h-16 w-16 text-green-200"}),s.jsx("h3",{className:"text-xl font-semibold text-green-800",children:"اختر حلقة للبدء"}),s.jsx("p",{className:"text-green-600 max-w-md",children:"يرجى اختيار حلقة من القائمة على اليسار لعرض وإدارة مواعيد جدولتها"})]})})]})})]})})]}),s.jsx(St,{open:b,onOpenChange:y,children:s.jsx(yt,{className:"sm:max-w-[480px] w-full rounded-xl p-4 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100",dir:"rtl",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 space-y-4",children:[s.jsxs(Pt,{children:[s.jsx(Ot,{className:"text-center",children:s.jsxs("h3",{className:`flex items-center justify-center gap-2 \r
                        bg-gradient-to-r from-green-400 via-green-300 to-blue-400 \r
                        text-white text-xl font-extrabold \r
                        py-3 px-5 rounded-2xl shadow-md \r
                        transition-transform duration-200 hover:scale-105`,children:[s.jsx(Pr,{className:"h-5 w-5 text-white"}),"إضافة موعد جديد"]})}),s.jsx(Ur,{className:"text-gray-600 text-center text-sm mt-1",children:"قم بتحديد اليوم والوقت لإضافة موعد جديد للحلقة"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-3 bg-white",children:[s.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-3 bg-white",children:[s.jsx(ee,{className:"text-right text-gray-800 text-sm mb-2",children:"اليوم *"}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:gi.map(W=>s.jsx("button",{type:"button",onClick:()=>se("weekday",W.value.toString()),className:`
                    text-sm px-4 py-2 rounded-full border transition-all duration-200
                    flex-1 text-center
                    ${S.weekday===W.value.toString()?"bg-gradient-to-r from-green-400 to-blue-400 text-white shadow-md transform scale-105":"bg-gray-50 text-gray-800 border-gray-300 hover:bg-gray-100 hover:shadow-sm"}
                    `,children:W.label},W.value))})]}),s.jsx(ee,{htmlFor:"add-schedule-start-time",className:"text-right text-gray-800 text-sm mt-2",children:"وقت البداية *"}),s.jsx(me,{id:"add-schedule-start-time",type:"time",value:S.start_time,onChange:W=>se("start_time",W.target.value),required:!0,className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2"}),s.jsx(ee,{htmlFor:"add-schedule-end-time",className:"text-right text-gray-800 text-sm mt-2",children:"وقت النهاية *"}),s.jsx(me,{id:"add-schedule-end-time",type:"time",value:S.end_time,onChange:W=>se("end_time",W.target.value),required:!0,className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2"}),s.jsx(ee,{htmlFor:"add-schedule-location",className:"text-right text-gray-800 text-sm mt-2",children:"الموقع (اختياري)"}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[s.jsx(Eo,{className:"h-3 w-3 ml-1"}),"اتركه فارغاً لاستخدام موقع الحلقة الافتراضي"]}),s.jsx(me,{id:"add-schedule-location",value:S.location,onChange:W=>se("location",W.target.value),placeholder:"أدخل موقع الموعد (اختياري)",className:"bg-gray-50 border-gray-300 rounded-md text-sm py-1 px-2"})]})}),s.jsxs(bt,{className:"gap-3 flex justify-end mt-4",dir:"rtl",children:[s.jsx(V,{variant:"outline",onClick:()=>y(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-100 text-sm px-3 py-1",children:"إلغاء"}),s.jsx(V,{onClick:re,className:"bg-green-600 hover:bg-green-700 text-white rounded-md px-4 py-2 text-sm transition-colors",disabled:!S.start_time||!S.end_time||p,children:p?"جارٍ الإضافة...":"إضافة الموعد"})]})]})})}),s.jsx(St,{open:T,onOpenChange:O,children:s.jsx(yt,{className:"sm:max-w-[480px] w-full rounded-xl p-4 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100",dir:"rtl",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 space-y-4",children:[s.jsxs(Pt,{className:"pb-2",children:[s.jsx(Ot,{className:"text-lg font-bold text-center",children:s.jsxs("h3",{className:`flex items-center justify-center gap-2 \r
                        bg-gradient-to-r from-orange-400 via-orange-300 to-yellow-400 \r
                        text-white text-xl font-extrabold \r
                        py-3 px-5 rounded-2xl shadow-md \r
                        transition-transform duration-200 hover:scale-105`,children:[s.jsx(lr,{className:"h-5 w-5 text-white"}),"تعديل موعد"]})}),s.jsx(Ur,{className:"text-gray-600 text-center text-sm mt-1",children:"قم بتعديل بيانات الموعد"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-3 bg-white",children:[s.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-3 bg-white",children:[s.jsx(ee,{className:"text-right text-gray-800 text-sm mb-2",children:"اليوم *"}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:gi.map(W=>s.jsx("button",{type:"button",onClick:()=>je("weekday",W.value.toString()),className:`
                    text-sm px-4 py-2 rounded-full border transition-all duration-200
                    flex-1 text-center
                    ${_.weekday===W.value.toString()?"bg-gradient-to-r from-green-400 to-blue-400 text-white shadow-md transform scale-105":"bg-gray-50 text-gray-800 border-gray-300 hover:bg-gray-100 hover:shadow-sm"}
                    `,children:W.label},W.value))})]}),s.jsx(ee,{htmlFor:"edit-schedule-start-time",className:"text-right text-gray-800 text-sm mt-2",children:"وقت البداية *"}),s.jsx(me,{id:"edit-schedule-start-time",type:"time",value:_.start_time,onChange:W=>je("start_time",W.target.value),required:!0,className:"bg-blue-50 border-blue-200 text-blue-900 rounded-md text-sm py-1 px-2"}),s.jsx(ee,{htmlFor:"edit-schedule-end-time",className:"text-right text-gray-800 text-sm mt-2",children:"وقت النهاية *"}),s.jsx(me,{id:"edit-schedule-end-time",type:"time",value:_.end_time,onChange:W=>je("end_time",W.target.value),required:!0,className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2"}),s.jsx(ee,{htmlFor:"edit-schedule-location",className:"text-right text-gray-800 text-sm mt-2",children:"الموقع (اختياري)"}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[s.jsx(Eo,{className:"h-3 w-3 ml-1"}),"اتركه فارغاً لاستخدام موقع الحلقة الافتراضي"]}),s.jsx(me,{id:"edit-schedule-location",value:_.location,onChange:W=>je("location",W.target.value),placeholder:"أدخل موقع الموعد (اختياري)",className:"bg-gray-50 border-gray-300 rounded-md text-sm py-1 px-2"})]})}),s.jsxs(bt,{className:"gap-3 flex justify-end mt-4",dir:"rtl",children:[s.jsx(V,{variant:"outline",onClick:()=>O(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-100 text-sm px-3 py-1",children:"إلغاء"}),s.jsx(V,{onClick:q,className:"bg-green-600 hover:bg-green-700 text-white rounded-md px-4 py-2 text-sm transition-colors",disabled:!_.start_time||!_.end_time||K,children:K?"جارٍ الحفظ...":"حفظ التغييرات"})]})]})})}),s.jsx(yn,{isOpen:j,onOpenChange:k,onConfirm:oe,isLoading:M,title:"تأكيد حذف الموعد",description:"هل أنت متأكد من رغبتك في حذف هذا الموعد من جدول الحلقة؟",itemDetails:D?{اليوم:pi(D.weekday),الوقت:`${is(D.start_time)} - ${is(D.end_time)}`,المكان:D.location||"-"}:null,deleteButtonText:"نعم، احذف الموعد",cancelButtonText:"إلغاء"})]})}function fD({onNavigate:e,currentUser:t}){return s.jsx("div",{dir:"rtl",children:s.jsxs("div",{className:"container mx-auto py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"بياناتي الشخصية"}),t?s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:s.jsx(mD,{currentUser:t})}):s.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded",children:[s.jsx("p",{children:"لم يتم تسجيل الدخول. يرجى تسجيل الدخول لعرض بياناتك الشخصية."}),s.jsx("button",{onClick:()=>e("/login"),className:"mt-4 bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600",children:"تسجيل الدخول"})]})]})})}function mD({currentUser:e}){const{toast:t}=_n(),[r,n]=h.useState(!1),[a,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState({}),[u,f]=h.useState(!1),[m,v]=h.useState({full_name:e.full_name,username:e.username,password:"",confirmPassword:""});h.useEffect(()=>{(async()=>{if(e.role==="teacher"||e.role==="admin"){f(!0);try{const y=await ks(e.id);l(y);const p={};for(const w of y){const S=await sh(w.id);p[w.id]=S}d(p)}catch(y){console.error("Error loading user circles:",y)}finally{f(!1)}}})()},[e.id,e.role]);const x=b=>{const{name:y,value:p}=b.target;v(w=>({...w,[y]:p}))},g=async b=>{if(b.preventDefault(),m.password&&m.password!==m.confirmPassword){t({title:"خطأ في كلمة المرور",description:"كلمتا المرور غير متطابقتين. يرجى التحقق من الإدخال.",variant:"destructive"});return}i(!0);try{const y={id:e.id,full_name:m.full_name,username:m.username};m.password&&(y.password=m.password);const p=await Hj(y);if(p.success){t({title:"تم التحديث بنجاح",description:"تم تحديث بياناتك الشخصية بنجاح."});const w={...e,full_name:m.full_name,username:m.username};localStorage.setItem("currentUser",JSON.stringify(w)),n(!1)}else t({title:"خطأ في التحديث",description:p.message||"حدث خطأ أثناء تحديث البيانات. يرجى المحاولة مرة أخرى.",variant:"destructive"})}catch(y){console.error("خطأ في تحديث الملف الشخصي:",y),t({title:"خطأ غير متوقع",description:"حدث خطأ غير متوقع أثناء تحديث البيانات. يرجى المحاولة مرة أخرى.",variant:"destructive"})}finally{i(!1)}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"معلومات المستخدم"}),r?s.jsx(V,{variant:"outline",onClick:()=>n(!1),children:"إلغاء"}):s.jsx(V,{onClick:()=>n(!0),children:"تعديل"})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"full_name",children:"الاسم الكامل"}),s.jsx(me,{id:"full_name",name:"full_name",value:m.full_name,onChange:x,disabled:!r,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"username",children:"اسم المستخدم"}),s.jsx(me,{id:"username",name:"username",value:m.username,onChange:x,disabled:!r,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"role",children:"الدور"}),s.jsx(me,{id:"role",value:e.role==="superadmin"?"مسؤول رئيسي":e.role==="admin"?"مسؤول":e.role==="teacher"?"معلم":"غير معروف",disabled:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"last_login",children:"آخر تسجيل دخول"}),s.jsx(me,{id:"last_login",value:(()=>{try{if(!e.last_login_at||e.last_login_at==="null"||e.last_login_at==="undefined"||e.last_login_at===null||e.last_login_at===void 0)return"غير متوفر";const b=new Date(e.last_login_at);return isNaN(b.getTime())?(console.error("تاريخ غير صالح:",e.last_login_at),"غير متوفر"):b.toLocaleString("ar-SA")}catch(b){return console.error("خطأ في معالجة التاريخ:",b,"القيمة:",e.last_login_at),"غير متوفر"}})(),disabled:!0})]})]}),r&&s.jsxs("div",{className:"border-t pt-4 mt-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"تغيير كلمة المرور"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"password",children:"كلمة المرور الجديدة"}),s.jsx(me,{id:"password",name:"password",type:"password",value:m.password,onChange:x,autoComplete:"new-password"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"اترك هذا الحقل فارغًا إذا كنت لا تريد تغيير كلمة المرور"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور"}),s.jsx(me,{id:"confirmPassword",name:"confirmPassword",type:"password",value:m.confirmPassword,onChange:x,autoComplete:"new-password"})]})]})]})]}),r&&s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(V,{type:"button",variant:"outline",onClick:()=>n(!1),children:"إلغاء"}),s.jsx(V,{type:"submit",disabled:a,children:a?"جارٍ الحفظ...":"حفظ التغييرات"})]})]}),(e.role==="teacher"||e.role==="admin")&&s.jsxs(nt,{className:"mt-8 border-islamic-green/20",children:[s.jsxs(ut,{children:[s.jsxs(dt,{className:"flex items-center gap-2 text-islamic-green",children:[s.jsx(Yt,{className:"h-5 w-5"}),"حلقاتي الدراسية"]}),s.jsx(Dt,{children:"الحلقات الدراسية التي أشرف عليها أو أدرّس فيها"})]}),s.jsx(Ze,{children:u?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-islamic-green"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"جاري تحميل الحلقات..."})]})}):o.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-islamic-green/5 rounded-lg mb-6",children:[s.jsxs(it,{variant:"outline",className:"text-islamic-green border-islamic-green/40",children:[o.length," حلقة"]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"إجمالي الحلقات"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(b=>{var y;return s.jsxs(nt,{className:"overflow-hidden border-islamic-green/20 transition-all hover:shadow-md",children:[s.jsx(ut,{className:"bg-islamic-green/5 pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(dt,{className:"text-lg flex items-center gap-2 text-islamic-green text-xs",children:[s.jsx(Yt,{className:"h-5 w-5"}),b.name]}),s.jsxs(it,{variant:"secondary",className:"gap-1 text-xs",children:[s.jsx(Os,{className:"h-3 w-3"}),b.max_students?`الحد: ${b.max_students} طالب`:"0 طالب"]})]})}),s.jsx(Ze,{className:"pt-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(e4,{className:"h-4 w-4 text-islamic-green"}),s.jsx("h4",{className:"text-sm font-medium",children:"مواعيد الحلقة"})]}),((y=c[b.id])==null?void 0:y.length)>0?s.jsx("div",{className:"space-y-2 mt-2",children:c[b.id].map(p=>s.jsxs("div",{className:"flex items-center justify-between bg-muted/30 p-2 rounded-md",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(it,{variant:"outline",className:"text-islamic-green",children:pi(p.weekday)})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(dn,{className:"h-3 w-3 text-blue-500"}),s.jsx("span",{children:is(p.start_time)})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"إلى"}),s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(dn,{className:"h-3 w-3 text-red-500"}),s.jsx("span",{children:is(p.end_time)})]})]}),p.location&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(Tu,{className:"h-3 w-3"}),s.jsx("span",{children:p.location})]})]},p.id))}):s.jsx("div",{className:"flex items-center justify-center bg-muted/20 py-3 rounded-md",children:s.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[s.jsx(Rr,{className:"h-5 w-5 text-muted-foreground"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"لا توجد مواعيد محددة لهذه الحلقة"})]})})]})})]},b.id)})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-muted/30 rounded-lg",children:[s.jsx(Yt,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-medium text-lg mb-2",children:"لا توجد حلقات"}),s.jsx("p",{className:"text-muted-foreground text-center",children:"لم يتم تسجيل أي حلقات باسمك بعد"})]})})]})]})}const kd=async e=>{try{const{data:t,error:r}=await le.from(Ho).select("id, study_circle_id, session_date, start_time, end_time, teacher_id, notes, created_at").eq("study_circle_id",e).order("session_date",{ascending:!1});return r?(console.error("خطأ في جلب جلسات الحلقة:",r),[]):t||[]}catch(t){return console.error("خطأ غير متوقع في جلب جلسات الحلقة:",t),[]}},gD=async(e,t)=>{try{const{data:r,error:n}=await le.from(Ho).select("*").eq("study_circle_id",e).eq("session_date",t).single();return n?(console.error("خطأ في جلب جلسة الحلقة:",n),null):r}catch(r){return console.error("خطأ غير متوقع في جلب جلسة الحلقة:",r),null}},pD=async e=>{try{const t=await J7(e.study_circle_id);if(!t)return{success:!1,error:"الحلقة غير موجودة"};if(!e.teacher_id&&t.teacher_id&&(e.teacher_id=t.teacher_id),e.teacher_id&&!await p0(e.teacher_id))return{success:!1,error:"المعلم غير موجود"};const{data:r,error:n}=await le.from(Ho).insert([e]).select().single();return n?(console.error("خطأ في إنشاء جلسة الحلقة:",n),n.code==="23505"?{success:!1,error:"توجد جلسة أخرى لهذه الحلقة في نفس اليوم"}:{success:!1,error:n.message}):{success:!0,data:r}}catch(t){return console.error("خطأ غير متوقع في إنشاء جلسة الحلقة:",t),{success:!1,error:"حدث خطأ غير متوقع أثناء إنشاء جلسة الحلقة"}}},xD=async e=>{try{if(!await gD(e.study_circle_id,e.session_date))return{success:!1,error:"الجلسة غير موجودة"};const r={...e};delete r.study_circle_id,delete r.session_date;const{data:n,error:a}=await le.from(Ho).update(r).match({study_circle_id:e.study_circle_id,session_date:e.session_date}).select().single();return a?(console.error("خطأ في تحديث جلسة الحلقة:",a),{success:!1,error:a.message}):{success:!0,data:n}}catch(t){return console.error("خطأ غير متوقع في تحديث جلسة الحلقة:",t),{success:!1,error:"حدث خطأ غير متوقع أثناء تحديث جلسة الحلقة"}}},vD=async(e,t)=>{try{const{error:r}=await le.from(Ho).delete().match({study_circle_id:e,session_date:t});return r?(console.error("خطأ في حذف جلسة الحلقة:",r),{success:!1,error:r.message}):{success:!0}}catch(r){return console.error("خطأ غير متوقع في حذف جلسة الحلقة:",r),{success:!1,error:"حدث خطأ غير متوقع أثناء حذف جلسة الحلقة"}}},fa=e=>{if(!e)return"غير محدد";try{const[t,r]=e.split(":"),n=parseInt(t,10),a=n>=12?"مساءً":"صباحاً";return`${n>12?n-12:n===0?12:n}:${r} ${a}`}catch{return e}},du=e=>{if(!e)return"غير محدد";try{const t=new Date(e);return isNaN(t.getTime())?"تاريخ غير صالح":t.toLocaleDateString("ar",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(t){return console.error("خطأ في تنسيق التاريخ:",t),e}},yD=e=>{if(!e)return"غير محدد";try{const t=new Date(e);return isNaN(t.getTime())?"تاريخ غير صالح":t.toLocaleDateString("ar",{year:"numeric",month:"2-digit",day:"2-digit"})}catch(t){return console.error("خطأ في تنسيق التاريخ المختصر:",t),e}};function bD({onNavigate:e,currentUser:t}){const{toast:r}=_n(),[n,a]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState(""),[d,u]=h.useState([]),[f,m]=h.useState([]),[v,x]=h.useState(!1),[g,b]=h.useState(""),[y,p]=h.useState(!1),[w,S]=h.useState(!1),[C,T]=h.useState(!1),[O,$]=h.useState(null),[Q,K]=h.useState({study_circle_id:"",session_date:new Date().toISOString().split("T")[0],start_time:"",end_time:"",notes:"",teacher_id:""}),A=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="superadmin";h.useEffect(()=>{(async()=>{if(!t){r({title:"تنبيه",description:"يرجى تسجيل الدخول أولاً",variant:"destructive"}),e("/login");return}if(console.log("TeacherSessions - Current User:",t),console.log("TeacherSessions - User Role:",t.role),console.log("TeacherSessions - isAdminOrSuperadmin:",A),t.role!=="admin"&&t.role!=="superadmin"&&t.role!=="teacher"){console.error("Invalid role for this page:",t.role),r({title:"تنبيه",description:`ليس لديك صلاحية للوصول إلى هذه الصفحة. الدور الحالي: ${t.role}`,variant:"destructive"}),setTimeout(()=>e("/"),2e3);return}x(!0);try{if(A){const ne=await Xu();m(ne);const ae=await Ta();o(ae),ae.length>0&&c(ae[0].id)}else if(t.role==="teacher"){console.log("Fetching circles for teacher:",t.id);const ne=await ks(t.id);a(ne),ne.length>0&&c(ne[0].id)}else console.error("Invalid role for this page:",t.role),r({title:"تنبيه",description:`ليس لديك صلاحية للوصول إلى هذه الصفحة. الدور الحالي: ${t.role}`,variant:"destructive"}),setTimeout(()=>e("/"),2e3)}catch(ne){console.error("خطأ في جلب البيانات:",ne),r({title:"خطأ",description:"حدث خطأ أثناء جلب البيانات",variant:"destructive"})}finally{x(!1)}})()},[t,e,r,A]),h.useEffect(()=>{(async()=>{if(l){x(!0);try{const ne=await kd(l);u(ne)}catch(ne){console.error("خطأ في جلب جلسات الحلقة:",ne),r({title:"خطأ",description:"حدث خطأ أثناء جلب بيانات الجلسات",variant:"destructive"})}finally{x(!1)}}})()},[l,r]);const _=()=>{const L=A?i:n;return g.trim()?L.filter(ne=>{var ae;return ne.name.toLowerCase().includes(g.toLowerCase())||((ae=ne.teacher)==null?void 0:ae.full_name)&&ne.teacher.full_name.toLowerCase().includes(g.toLowerCase())}):L},I=L=>{c(L)},j=()=>{K({study_circle_id:l,session_date:new Date().toISOString().split("T")[0],start_time:"",end_time:"",notes:"",teacher_id:(t==null?void 0:t.id)||""}),S(!1),p(!0)},k=L=>{K({study_circle_id:L.study_circle_id,session_date:L.session_date,start_time:L.start_time||"",end_time:L.end_time||"",notes:L.notes||"",teacher_id:L.teacher_id||(t==null?void 0:t.id)||""}),S(!0),p(!0)},D=L=>{const{name:ne,value:ae}=L.target;K(Z=>({...Z,[ne]:ae}))},z=async()=>{if(!Q.study_circle_id||!Q.session_date){r({title:"خطأ",description:"يجب تحديد الحلقة وتاريخ الجلسة",variant:"destructive"});return}x(!0);try{let L;if(w?L=await xD({study_circle_id:Q.study_circle_id,session_date:Q.session_date,start_time:Q.start_time||void 0,end_time:Q.end_time||void 0,notes:Q.notes||void 0,teacher_id:Q.teacher_id||void 0}):L=await pD({study_circle_id:Q.study_circle_id,session_date:Q.session_date,start_time:Q.start_time||void 0,end_time:Q.end_time||void 0,notes:Q.notes||void 0,teacher_id:Q.teacher_id||(t==null?void 0:t.id)}),L.success){r({title:"تم بنجاح",description:w?"تم تحديث الجلسة بنجاح":"تم إضافة الجلسة بنجاح"}),p(!1);const ne=await kd(l);u(ne)}else r({title:"خطأ",description:L.error||"حدث خطأ أثناء حفظ الجلسة",variant:"destructive"})}catch(L){console.error("خطأ في حفظ الجلسة:",L),r({title:"خطأ",description:"حدث خطأ غير متوقع أثناء حفظ الجلسة",variant:"destructive"})}finally{x(!1)}},M=L=>{$(L),T(!0)},B=async()=>{if(O){x(!0);try{const L=await vD(O.study_circle_id,O.session_date);if(L.success){r({title:"تم بنجاح",description:"تم حذف الجلسة بنجاح"});const ne=await kd(l);u(ne)}else r({title:"خطأ",description:L.error||"حدث خطأ أثناء حذف الجلسة",variant:"destructive"})}catch(L){console.error("خطأ في حذف الجلسة:",L),r({title:"خطأ",description:"حدث خطأ غير متوقع أثناء حذف الجلسة",variant:"destructive"})}finally{x(!1),T(!1),$(null)}}},X=L=>{const ae=(A?i:n).find(Z=>Z.id===L);return ae?ae.name:"حلقة غير معروفة"},J=L=>{var Z;const ae=(A?i:n).find(se=>se.id===L);return" "+((Z=ae==null?void 0:ae.teacher)==null?void 0:Z.full_name)||"لا يوجد معلم محدد"};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-gradient-to-br min-h-screen p-4 sm:p-6 md:p-8",dir:"rtl",children:s.jsxs("div",{className:"container mx-auto bg-white rounded-2xl shadow-xl overflow-hidden border-2 border-green-200",children:[s.jsxs("div",{className:"bg-green-700 py-4 px-4 text-white rounded-t-2xl shadow-md relative overflow-hidden mt-6",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 bg-[url('/patterns/arabic-pattern.svg')] bg-repeat"}),s.jsxs("h1",{className:"relative text-xl md:text-2xl font-bold flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🕌"}),A?"تسجيل الجلسات وإدارة الحلقات":"تسجيل الجلسات"]}),s.jsx("p",{className:"relative text-green-100 mt-1 text-xs md:text-sm",children:"نظام إدارة جلسات الحلقات القرآنية"})]}),s.jsx("div",{className:"p-4 md:p-6 lg:p-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-2xl shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 via-green-500 to-green-700 p-4",children:s.jsx("h2",{className:"text-xl font-semibold text-white mb-0 flex items-center gap-2",children:"📖 قائمة الحلقات"})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(me,{type:"text",placeholder:"ابحث عن حلقة أو معلم...",value:g,onChange:L=>b(L.target.value),className:"pr-10 pl-4 py-2 border-2 border-green-300 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all duration-200 shadow-sm"}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:s.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),g&&s.jsxs("div",{className:"mt-2 text-sm text-green-700 flex items-center justify-between",children:[s.jsxs("span",{children:["نتائج البحث: ",_().length," حلقة"]}),s.jsx(V,{variant:"outline",size:"sm",className:"text-xs py-0 h-6 border-green-300 text-green-700 hover:bg-green-50",onClick:()=>b(""),children:"مسح البحث"})]})]}),s.jsx("ul",{className:"divide-y divide-green-200 border border-green-300 rounded-xl overflow-hidden shadow-inner max-h-96 overflow-y-auto",children:_().length>0?_().map(L=>s.jsx("li",{className:`cursor-pointer transition-all duration-200 rounded-2xl flex flex-col gap-1 p-2 shadow-sm ${l===L.id?"bg-green-700 text-white ring-1 ring-green-400 scale-105":"bg-green-50 hover:bg-green-100 text-green-800"}`,onClick:()=>I(L.id),children:s.jsx("div",{className:"flex items-center justify-between text-sm font-medium gap-2",children:s.jsxs("div",{className:"flex items-center gap-2 truncate",children:[s.jsx("span",{className:"text-green-500 text-lg",children:"📖"}),s.jsx("span",{className:"truncate font-medium",children:L.name}),L.teacher&&s.jsxs("span",{className:`flex items-center gap-1 text-xs truncate ${l===L.id?"text-white":"text-green-700"}`,children:["👨‍🏫 ",L.teacher.full_name]})]})})},L.id)):s.jsx("li",{className:"p-4 text-center text-gray-500 bg-gray-50",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-8",children:[s.jsx("svg",{className:"w-12 h-12 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),s.jsx("p",{className:"text-sm",children:g?`لم يتم العثور على حلقات تطابق "${g}"`:"لا توجد حلقات متاحة"})]})})})]})]})}),s.jsxs("div",{className:"md:col-span-2 bg-green-50 border border-green-200 rounded-xl shadow-sm overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-100 via-green-200 to-green-700 p-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(dt,{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(Ar,{className:"h-5 w-5 text-white"}),l?`جلسات حلقة : ${X(l)}`:"جلسات الحلقة : ","  | 👨‍🏫",s.jsx("span",{className:"text-xs sm:text-[10px] text-gray-700",children:J(l)})]}),s.jsx("div",{className:"flex justify-start sm:justify-center",children:l&&s.jsxs(V,{onClick:j,size:"sm",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white rounded-2xl px-3 py-1 shadow-sm text-xs sm:text-sm transition-transform hover:scale-105",children:[s.jsx(Ar,{className:"h-4 w-4"}),"تسجيل جلسة جديدة"]})})]})}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"bg-green-100 rounded-lg border border-green-200 p-4 mx-2 mb-2",children:s.jsx(it,{variant:"outline",className:"text-green-800 border-green-400",children:d.length>0?`عدد الجلسات: ${d.length}`:"لا توجد جلسات"})}),v?s.jsx("div",{className:"text-center py-4 text-green-600",children:"جاري التحميل..."}):d.length>0?s.jsx("div",{className:"overflow-x-auto p-2",children:s.jsx(ds,{data:d.map((L,ne)=>({...L,id:`${L.study_circle_id}-${L.session_date}-${ne}`})),columns:[{key:"session_date",header:"📅 التاريخ",align:"right",render:L=>s.jsxs("div",{className:"flex flex-col text-right",children:[s.jsx("span",{className:"text-green-800 font-medium",children:yD(L.session_date)}),s.jsx("span",{className:"text-xs text-green-600",children:du(L.session_date)})]})},{key:"time",header:"⏰ الوقت",align:"right",render:L=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-800 px-3 py-1 rounded-lg",children:[s.jsx(dn,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:fa(L.start_time)})]}),s.jsx("span",{className:"text-gray-400 font-bold mx-1",children:"—"}),s.jsxs("div",{className:"flex items-center gap-1 bg-red-100 text-red-800 px-3 py-1 rounded-lg",children:[s.jsx(dn,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:fa(L.end_time)})]})]})},{key:"notes",header:"📝 ملاحظات",align:"right",render:L=>s.jsx("span",{className:"text-green-800 max-w-[200px] block",children:L.notes||"—"})},{key:"actions",header:"⚙️ إجراءات",align:"center",render:L=>s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"sm",onClick:()=>k({study_circle_id:L.study_circle_id,session_date:L.session_date,start_time:L.start_time,end_time:L.end_time,notes:L.notes,teacher_id:L.teacher_id}),className:"bg-green-200 hover:bg-green-300 text-green-900 rounded-md p-2 transition-colors",title:"تعديل الجلسة",children:s.jsx(om,{className:"h-4 w-4"})}),s.jsx(V,{variant:"ghost",size:"sm",onClick:()=>M({study_circle_id:L.study_circle_id,session_date:L.session_date,start_time:L.start_time,end_time:L.end_time,notes:L.notes,teacher_id:L.teacher_id}),className:"bg-red-100 hover:bg-red-200 text-red-700 rounded-md p-2 transition-colors",title:"حذف الجلسة",children:s.jsx(Sr,{className:"h-4 w-4"})})]})}],emptyMessage:"لا توجد جلسات",className:"overflow-hidden rounded-xl border border-green-300 shadow-md text-xs",getRowClassName:(L,ne)=>`${ne%2===0?"bg-green-50 hover:bg-green-100":"bg-white hover:bg-green-50"} cursor-pointer transition-colors`})}):l?s.jsxs("div",{className:"text-center py-6 text-green-600",children:["لا توجد جلسات مسجلة لهذه الحلقة.",s.jsx("br",{}),'انقر على زر "تسجيل جلسة جديدة" في الأعلى لإضافة جلسة.']}):s.jsx("div",{className:"text-center py-6 text-green-600",children:"اختر حلقة لعرض الجلسات الخاصة بها."})]})]})]})})]})}),s.jsx(St,{open:y,onOpenChange:p,children:s.jsx(yt,{dir:"rtl",className:"max-w-md w-full rounded-2xl overflow-hidden shadow-xl border border-green-200",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-600 via-green-500 to-green-700 p-4 text-center",children:[s.jsx("h3",{className:"flex items-center justify-center gap-2 text-white text-xl font-extrabold rounded-2xl shadow-md py-2 px-4 transition-transform hover:scale-105",children:w?s.jsxs(s.Fragment,{children:[s.jsx(om,{className:"h-5 w-5"})," تعديل جلسة"]}):s.jsxs(s.Fragment,{children:[s.jsx(Pr,{className:"h-5 w-5"})," تسجيل جلسة جديدة"]})}),s.jsx("p",{className:"text-green-100 text-sm mt-2",children:w?"قم بتعديل بيانات الجلسة أدناه":"قم بإدخال بيانات الجلسة الجديدة"})]}),s.jsxs("div",{className:"p-5 space-y-4 bg-green-50",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"session_date",className:"text-right text-green-800 font-semibold",children:"تاريخ الجلسة *"}),s.jsx(me,{id:"session_date",name:"session_date",type:"date",value:Q.session_date,onChange:D,className:"text-right bg-green-50 border-green-300 text-green-900 rounded-md py-2 px-3 shadow-inner focus:ring-2 focus:ring-green-400",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"start_time",className:"text-right text-green-800 font-semibold",children:"وقت البدء *"}),s.jsx(me,{id:"start_time",name:"start_time",type:"time",value:Q.start_time,onChange:D,className:"text-right bg-green-50 border-green-300 text-green-900 rounded-md py-2 px-3 shadow-inner focus:ring-2 focus:ring-green-400"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"end_time",className:"text-right text-green-800 font-semibold",children:"وقت الانتهاء *"}),s.jsx(me,{id:"end_time",name:"end_time",type:"time",value:Q.end_time,onChange:D,className:"text-right bg-green-50 border-green-300 text-green-900 rounded-md py-2 px-3 shadow-inner focus:ring-2 focus:ring-green-400"})]})]}),A&&s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"teacher_id",className:"text-right text-green-800 font-semibold",children:"المعلم"}),s.jsxs(Qe,{value:Q.teacher_id,onValueChange:L=>K({...Q,teacher_id:L}),children:[s.jsx(qe,{className:"w-full bg-green-50 border-green-300 text-green-900 rounded-md shadow-inner",children:s.jsx(Je,{placeholder:"اختر المعلم"})}),s.jsx(Ge,{children:f.map(L=>s.jsx(ve,{value:L.id,children:L.full_name},L.id))})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"notes",className:"text-right text-green-800 font-semibold",children:"ملاحظات"}),s.jsx($s,{id:"notes",name:"notes",value:Q.notes,onChange:D,className:"text-right bg-green-50 border-green-300 text-green-900 rounded-md py-2 px-3 shadow-inner focus:ring-2 focus:ring-green-400",rows:3})]})]}),s.jsxs(bt,{className:"gap-3 flex justify-end p-4 border-t border-green-200 bg-green-50",children:[s.jsx(V,{onClick:()=>p(!1),variant:"outline",className:"border-green-300 text-green-700 hover:bg-green-100 text-sm px-4 py-2 rounded-lg shadow-sm",children:"إلغاء"}),s.jsx(V,{onClick:z,disabled:v,className:"bg-green-600 hover:bg-green-700 text-white rounded-lg px-5 py-2 text-sm transition-transform shadow-md flex items-center gap-2 hover:scale-105",children:v?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"جارٍ الحفظ..."]}):"حفظ"})]})]})})}),s.jsx(yn,{isOpen:C,onOpenChange:T,onConfirm:B,isLoading:v,title:"تأكيد حذف الجلسة",description:"هل أنت متأكد من رغبتك في حذف هذه الجلسة؟",itemDetails:O?{التاريخ:du(O.session_date),الوقت:O.start_time?`${fa(O.start_time)} - ${fa(O.end_time||"")}`:"-",الملاحظات:O.notes||"-"}:null,deleteButtonText:"نعم، قم بالحذف",cancelButtonText:"إلغاء"})]})}function vv(e){switch(e){case"present":return"حاضر";case"absent":return"غائب";case"late":return"متأخر";case"excused":return"معذور";default:return"غير معروف"}}function cl(e){switch(e){case"present":return"bg-green-100 text-green-800 border-green-200";case"absent":return"bg-red-100 text-red-800 border-red-200";case"late":return"bg-amber-100 text-amber-800 border-amber-200";case"excused":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}}const yv=[{value:"present",label:"حاضر"},{value:"absent",label:"غائب"},{value:"late",label:"متأخر"},{value:"excused",label:"معذور"}];async function wD(e){const{data:t,error:r}=await le.from("attendance").upsert(e,{onConflict:"circle_session_id,student_id"}).select();return r?(console.error("Error upserting attendance records:",r),{success:!1,error:r.message}):{success:!0,data:t}}async function jD(e,t){try{const{data:r,error:n}=await le.from("students").select(`
        *,
        guardian:guardian_id (
          id,
          full_name,
          phone_number
        )
      `).eq("study_circle_id",e);if(n)throw console.error("Error fetching students:",n),new Error(n.message);const{data:a,error:i}=await le.from("attendance").select("*").eq("circle_session_id",t);if(i)throw console.error("Error fetching attendance:",i),new Error(i.message);return r.map(o=>{const l=a.find(c=>c.student_id===o.id)||null;return{student:o,attendance:l}})}catch(r){throw console.error("Error in getStudentsWithAttendanceForSession:",r),r}}const bv=async e=>{if(!e||e.length===0)return{};try{const{data:t,error:r}=await le.from("students").select("id, study_circle_id").in("study_circle_id",e).is("deleted_at",null);if(r)return console.error("خطأ في جلب عدد الطلاب في الحلقات:",r),{};const n={};return e.forEach(a=>{n[a]=0}),t.forEach(a=>{a.study_circle_id&&n.hasOwnProperty(a.study_circle_id)&&n[a.study_circle_id]++}),n}catch(t){return console.error("خطأ في جلب عدد الطلاب في الحلقات:",t),{}}};function _D({onNavigate:e,currentUser:t}){const{toast:r}=_n(),[n,a]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState(""),[d,u]=h.useState([]),[f,m]=h.useState(null),[v,x]=h.useState([]),[g,b]=h.useState({}),[y,p]=h.useState(!1),[w,S]=h.useState({}),[C,T]=h.useState(!1),[O,$]=h.useState(!1),[Q,K]=h.useState(!1),[A,_]=h.useState(null),[I,j]=h.useState(!1),[k,D]=h.useState(""),[z,M]=h.useState({status:"present",late_minutes:0,note:""}),B=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="superadmin";h.useEffect(()=>{(async()=>{if(!t){r({title:"تنبيه",description:"يرجى تسجيل الدخول أولاً",variant:"destructive"}),e("/login");return}T(!0);try{if(B){const Y=await Ta();if(o(Y),Y.length>0){const oe=Y.map(W=>W.id),De=await bv(oe);S(De),c(Y[0].id)}}else if(t.role==="teacher"){const Y=await ks(t.id);if(a(Y),Y.length>0){const oe=Y.map(W=>W.id),De=await bv(oe);S(De),c(Y[0].id)}}else r({title:"تنبيه",description:"ليس لديك صلاحية للوصول إلى هذه الصفحة",variant:"destructive"}),e("/")}catch(Y){console.error("خطأ في جلب البيانات:",Y),r({title:"خطأ",description:"حدث خطأ أثناء جلب البيانات",variant:"destructive"})}finally{T(!1)}})()},[t,e,r,B]),h.useEffect(()=>{(async()=>{if(l){T(!0);try{const Y=await kd(l);u(Y),m(null)}catch(Y){console.error("خطأ في جلب جلسات الحلقة:",Y),r({title:"خطأ",description:"حدث خطأ أثناء جلب بيانات الجلسات",variant:"destructive"})}finally{T(!1)}}})()},[l,r]),h.useEffect(()=>{(async()=>{if(!l||!f||!f.id){x([]),b({});return}$(!0);try{const Y=await jD(l,f.id);x(Y);const oe={};Y.forEach(({student:De,attendance:W})=>{oe[De.id]={student_id:De.id,status:(W==null?void 0:W.status)||"present",late_minutes:(W==null?void 0:W.late_minutes)||0,note:(W==null?void 0:W.note)||""}}),b(oe),p(!1)}catch(Y){console.error("خطأ في جلب بيانات الطلاب والحضور:",Y),r({title:"خطأ",description:"حدث خطأ أثناء جلب بيانات الطلاب والحضور",variant:"destructive"})}finally{$(!1)}})()},[l,f,r]);const X=q=>{c(q)},J=q=>{m(q)},L=(q,Y)=>{b(oe=>({...oe,[q]:{...oe[q],status:Y,late_minutes:Y==="late"&&oe[q].late_minutes||0}})),p(!0)},ne=q=>{_(q);const Y=g[q];M({status:Y.status,late_minutes:Y.late_minutes||0,note:Y.note||""}),j(!0)},ae=()=>{A&&(b(q=>({...q,[A]:{...q[A],status:z.status,late_minutes:z.status==="late"?z.late_minutes:0,note:z.note}})),j(!1),_(null),p(!0))},Z=async()=>{if(!l||!f||!f.id||!t){r({title:"تنبيه",description:"يرجى اختيار الحلقة والجلسة أولاً",variant:"destructive"});return}K(!0);try{const q=Object.values(g).map(oe=>({circle_session_id:f.id,student_id:oe.student_id,status:oe.status,late_minutes:oe.status==="late"?oe.late_minutes:0,note:oe.note,recorded_by:t.id})),Y=await wD(q);Y.success?(r({title:"تم بنجاح",description:"تم حفظ بيانات الحضور بنجاح"}),p(!1)):r({title:"خطأ",description:Y.error||"حدث خطأ أثناء حفظ بيانات الحضور",variant:"destructive"})}catch(q){console.error("خطأ في حفظ بيانات الحضور:",q),r({title:"خطأ",description:"حدث خطأ غير متوقع أثناء حفظ بيانات الحضور",variant:"destructive"})}finally{K(!1)}},se=q=>{const Y={...g};Object.keys(Y).forEach(oe=>{Y[oe]={...Y[oe],status:q,late_minutes:q==="late"&&Y[oe].late_minutes||0}}),b(Y),p(!0)},re=q=>{const oe=(B?i:n).find(De=>De.id===q);return oe?oe.name:"حلقة غير معروفة"},ye=q=>{if(!q)return"المستوى غير محدد";const Y=xe.gradeOptions.find(oe=>oe.value===q);return Y?Y.label:q},je=()=>{if(!g||Object.keys(g).length===0)return null;const q={present:0,absent:0,late:0,excused:0,total:Object.keys(g).length};return Object.values(g).forEach(Y=>{q[Y.status]++}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs(it,{variant:"outline",className:`${cl("present")} border-green-200`,children:["حاضر: ",q.present]}),s.jsxs(it,{variant:"outline",className:`${cl("absent")} border-red-200`,children:["غائب: ",q.absent]}),s.jsxs(it,{variant:"outline",className:`${cl("late")} border-amber-200`,children:["متأخر: ",q.late]}),s.jsxs(it,{variant:"outline",className:`${cl("excused")} border-blue-200`,children:["معذور: ",q.excused]}),s.jsxs(it,{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-200",children:["المجموع: ",q.total]})]})};return s.jsxs("div",{className:"container mx-auto py-6",dir:"rtl",children:[s.jsxs(nt,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsx(ut,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 rounded-t-2xl shadow-md",children:s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(dt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(Vw,{className:"h-5 w-5 text-yellow-300"}),"سجل حضور الطلاب"]}),s.jsx(Dt,{className:"text-xs md:text-sm text-green-100 mt-1",children:"يمكنك تسجيل حضور الطلاب للجلسات. اختر الحلقة والجلسة أولاً، ثم قم بتحديد حالة الحضور لكل طالب."})]})})}),s.jsx(Ze,{className:"space-y-6",children:s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-2xl shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 via-green-500 to-green-700 p-4",children:s.jsxs("h2",{className:"text-xl font-semibold text-white mb-0 flex items-center gap-2",children:[s.jsx(Yt,{className:"h-5 w-5"}),"الحلقات الدراسية"]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsx("div",{className:"relative",children:(t==null?void 0:t.role)!=="teacher"&&s.jsxs("div",{className:"relative mt-2",children:[s.jsx(nn,{className:"absolute right-3 top-2.5 h-4 w-4 text-green-400"}),s.jsx(me,{placeholder:"بحث عن حلقة...",className:"pr-10 pl-4 py-2 border-2 border-green-300 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all duration-200 shadow-sm",value:k,onChange:q=>D(q.target.value)})]})}),C?s.jsxs("div",{className:"text-center py-10",children:[s.jsx(Un,{className:"h-7 w-7 animate-spin mx-auto mb-2 text-green-600"}),s.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"جارٍ تحميل الحلقات..."})]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 p-1",children:(B?i:n).map(q=>{var Y;return s.jsxs("div",{className:`group relative rounded-xl border border-green-200 bg-white shadow-md transition-all duration-300 cursor-pointer overflow-hidden hover:shadow-xl hover:scale-102 ${l===q.id?"bg-green-50 border-green-500 shadow-lg ring-2 ring-green-300":""}`,onClick:()=>X(q.id),children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-100 to-green-200 opacity-0 group-hover:opacity-25 transition-opacity duration-500 rounded-xl pointer-events-none"}),s.jsxs("div",{className:"p-3 relative z-10",children:[s.jsx("div",{className:"border-b border-green-200 pb-1 mb-2 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold text-green-700 group-hover:scale-105 transition-transform duration-300",children:[s.jsx(Ar,{className:"h-3.5 w-3.5 text-yellow-400 group-hover:animate-bounce"}),q.name]})}),s.jsxs("div",{className:"space-y-1 text-gray-600 text-xs",children:[B&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(lm,{className:"h-2.5 w-2.5 text-green-600 group-hover:scale-125 transition-transform"}),s.jsx("span",{children:"المعلم:"})]}),s.jsx("span",{className:"truncate max-w-[100px]",children:((Y=q.teacher)==null?void 0:Y.full_name)||"غير محدد"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Yt,{className:"h-2.5 w-2.5 text-green-600 group-hover:scale-125 transition-transform"}),s.jsx("span",{children:"عدد الطلاب:"})]}),s.jsx(it,{className:"text-xs px-1.5 py-0.5 bg-green-100 text-green-700 border border-green-200 rounded-md",children:w[q.id]||0})]}),q.max_students&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Os,{className:"h-2.5 w-2.5 text-green-600 group-hover:scale-125 transition-transform"}),s.jsx("span",{children:"الحد الأقصى:"})]}),s.jsxs("span",{className:"font-medium",children:[q.max_students," طالب"]})]})]})]})]},q.id)})})]})]})}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl shadow-sm overflow-hidden",children:[s.jsx(ut,{className:"pb-4 bg-gradient-to-r from-green-100 via-green-200 to-green-700 p-4",children:s.jsx("div",{className:"flex justify-between  items-center",children:s.jsxs(dt,{className:"text-lg font-bold text-white flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($h,{className:"h-5 w-5 text-green-700"}),l?`الجلسات المتاحة لحلقة: ${re(l)}`:"اختر الحلقة لعرض الجلسات"]}),l&&s.jsx(Dt,{className:"text-gray-700 text-xs sm:text-sm mt-1 sm:mt-0",children:s.jsxs(it,{variant:"outline",className:"bg-green-100 text-green-800 border-green-300",children:[w[l]||0," طالب"]})})]})})}),s.jsx(Ze,{className:"p-4",children:l?C?s.jsx("div",{className:"text-center text-xs text-gray-500 mt-4",children:"جارٍ تحميل الجلسات..."}):d.length===0?s.jsx("div",{className:"text-center text-xs text-gray-500 mt-4",children:"لا توجد جلسات لهذه الحلقة"}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-80 overflow-y-auto p-2",children:d.map(q=>{const Y=(f==null?void 0:f.session_date)===q.session_date;return s.jsxs("div",{className:`relative rounded-2xl border transition-all duration-300 cursor-pointer overflow-hidden p-3
                                    ${Y?"bg-green-50 border-green-500 shadow-lg ring-1 ring-green-300 animate-pulse":"bg-white border-gray-300 hover:bg-green-50 hover:shadow-md hover:scale-102"}`,onClick:()=>J(q),children:[!Y&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-green-50 to-green-100 opacity-0 hover:opacity-25 transition-opacity rounded-2xl pointer-events-none"}),s.jsxs("div",{className:"relative z-10 flex flex-col gap-1 text-gray-700 text-xs md:text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 font-medium group-hover:scale-105 transition-transform duration-200",children:[s.jsx($h,{className:`h-4 w-4 text-green-700 ${Y?"animate-bounce":""}`}),du(q.session_date)]}),s.jsx("div",{className:"text-xs flex gap-1",children:q.start_time&&q.end_time?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-green-600 font-semibold",children:fa(q.start_time)}),s.jsx("span",{className:"text-gray-400",children:"-"}),s.jsx("span",{className:"text-yellow-600 font-semibold",children:fa(q.end_time)})]}):s.jsx("span",{className:"text-gray-500",children:"بدون توقيت"})})]})]},`${q.study_circle_id}-${q.session_date}`)})}):s.jsx("div",{className:"text-center text-xs text-gray-500 mt-4",children:"يرجى اختيار حلقة أولاً"})})]}),s.jsx("div",{className:"mb-4"}),l&&f&&s.jsxs(nt,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsxs(ut,{className:"pb-3 bg-gradient-to-b from-green-900 via-green-500 to-green-200 border-b border-green-200 rounded-t-2xl shadow-md",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(dt,{className:"text-xl md:text-2xl font-extrabold text-white flex items-center gap-2",children:[s.jsx($h,{className:"h-5 w-5 text-yellow-500 animate-bounce"}),"سجل الحضور - ",re(l)]}),s.jsxs(Dt,{className:"text-xs md:text-sm text-green-800 mt-1",children:["جلسة ",du(f.session_date),f.start_time&&f.end_time&&s.jsxs("span",{className:"ml-2 text-gray-700 flex items-center gap-2",children:[s.jsx(dn,{className:"h-5 w-5 text-gray-500"}),s.jsx("span",{className:"text-green-700 font-semibold",children:fa(f.start_time)})," → ",s.jsx("span",{className:"text-yellow-600 font-semibold",children:fa(f.end_time)})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 md:mt-0",children:[s.jsxs(V,{variant:"outline",size:"sm",onClick:()=>se("present"),className:`flex items-center gap-2 rounded-3xl border-2 border-green-500 text-green-800 \r
          hover:bg-green-100 hover:text-green-900 hover:scale-105 transition-all duration-200 px-4 py-2 font-semibold`,children:[s.jsx(Dw,{className:"h-4 w-4"}),"تحديد الكل حاضر"]}),s.jsxs(V,{variant:"outline",size:"sm",onClick:()=>se("absent"),className:`flex items-center gap-2 rounded-3xl border-2 border-red-400 text-red-800 \r
          hover:bg-red-100 hover:text-red-900 hover:scale-105 transition-all duration-200 px-4 py-2 font-semibold`,children:[s.jsx(Pu,{className:"h-4 w-4"}),"تحديد الكل غائب"]})]})]}),je()]}),s.jsx(Ze,{children:O?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Un,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-islamic-green"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"جارٍ تحميل بيانات الطلاب..."})]}):v.length===0?s.jsxs("div",{className:"text-center py-12 bg-green-50 rounded-lg",children:[s.jsx(Rr,{className:"h-10 w-10 mx-auto mb-4 text-amber-500"}),s.jsx("h3",{className:"text-lg font-medium mb-2 text-green-800",children:"لا يوجد طلاب في هذه الحلقة"}),s.jsx("p",{className:"text-sm text-gray-600",children:"لا يوجد طلاب مسجلين في هذه الحلقة. يرجى إضافة طلاب للحلقة أولاً."})]}):s.jsx(ds,{data:v.map(q=>({...q,id:q.student.id})),columns:[{key:"student",header:"🎓 الطالب",align:"right",render:q=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lm,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:q.student.full_name}),q.student.guardian&&s.jsxs("div",{className:"text-xs text-blue-600",children:[s.jsx("span",{className:"font-medium",children:"ولي الأمر:"})," ",q.student.guardian.full_name]}),s.jsx("div",{className:"text-xs text-gray-500",children:ye(q.student.grade_level||q.student.grade)})]})]})},{key:"status",header:"📋 الحالة",align:"center",render:q=>{var Y,oe,De,W,ie,Ae;return s.jsxs(Qe,{value:((Y=g[q.student.id])==null?void 0:Y.status)||"present",onValueChange:Re=>L(q.student.id,Re),children:[s.jsx(qe,{className:`w-28 font-medium ${((oe=g[q.student.id])==null?void 0:oe.status)==="present"?"bg-green-100 text-green-800 border-green-300":((De=g[q.student.id])==null?void 0:De.status)==="absent"?"bg-red-100 text-red-800 border-red-300":((W=g[q.student.id])==null?void 0:W.status)==="late"?"bg-amber-100 text-amber-800 border-amber-300":((ie=g[q.student.id])==null?void 0:ie.status)==="excused"?"bg-blue-100 text-blue-800 border-blue-300":"bg-gray-100 text-gray-800 border-gray-300"}`,children:s.jsx(Je,{placeholder:"اختر الحالة",children:vv(((Ae=g[q.student.id])==null?void 0:Ae.status)||"present")})}),s.jsx(Ge,{children:yv.map(Re=>s.jsx(ve,{value:Re.value,className:Re.value==="present"?"text-green-700 font-medium":Re.value==="absent"?"text-red-700 font-medium":Re.value==="late"?"text-amber-700 font-medium":Re.value==="excused"?"text-blue-700 font-medium":"",children:Re.label},Re.value))})]})}},{key:"late_minutes",header:"⏰ دقائق التأخير",align:"center",render:q=>{var Y,oe;return((Y=g[q.student.id])==null?void 0:Y.status)==="late"?s.jsx(me,{type:"number",min:0,value:((oe=g[q.student.id])==null?void 0:oe.late_minutes)||0,onChange:De=>{const W=parseInt(De.target.value)||0;b(ie=>({...ie,[q.student.id]:{...ie[q.student.id],late_minutes:W<0?0:W}})),p(!0)},className:"w-20 text-center text-sm"}):s.jsx("span",{className:"text-gray-400",children:"-"})}},{key:"note",header:"📝 ملاحظات",align:"right",render:q=>{var Y,oe;return(Y=g[q.student.id])!=null&&Y.note?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Lw,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"truncate max-w-[200px]",children:(oe=g[q.student.id])==null?void 0:oe.note})]}):s.jsx("span",{className:"text-gray-400",children:"-"})}},{key:"actions",header:"📋 تفاصيل",align:"center",render:q=>s.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>ne(q.student.id),className:"text-islamic-green hover:text-islamic-green/80 hover:bg-islamic-green/10 rounded-md p-2 transition-colors",children:[s.jsx(om,{className:"h-4 w-4 mr-1"}),"تفاصيل"]})}],emptyMessage:"لا يوجد طلاب",className:"overflow-x-auto rounded-xl border border-green-300 shadow-md text-sm",getRowClassName:(q,Y)=>`${Y%2===0?"bg-green-50 hover:bg-green-100":"bg-white hover:bg-green-50"} cursor-pointer transition-colors`})}),s.jsxs(qo,{className:"flex justify-between items-center bg-gradient-to-r from-green-50 via-green-100 to-green-50 px-4 py-3 rounded-b-xl border-t border-green-200",children:[s.jsx(V,{variant:"default",onClick:Z,disabled:!y||Q||v.length===0,className:"bg-green-600 hover:bg-green-700 text-white shadow-md transition-transform duration-200 hover:scale-105",children:Q?s.jsxs(s.Fragment,{children:[s.jsx(Un,{className:"h-4 w-4 mr-2 animate-spin text-white"}),"جارٍ الحفظ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ug,{className:"h-4 w-4 mr-2 text-white"}),"حفظ سجل الحضور"]})}),y&&s.jsxs("p",{className:"text-amber-600 text-sm flex items-center gap-1 font-medium",children:[s.jsx(Rr,{className:"h-4 w-4 text-amber-500"}),"هناك تغييرات غير محفوظة"]})]})]})]})]})})]}),s.jsx(St,{open:I,onOpenChange:j,children:s.jsx(yt,{className:"sm:max-w-[480px] w-full rounded-xl p-4 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100",dir:"rtl",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 space-y-4",children:[s.jsxs(Pt,{className:"pb-2 text-center",children:[s.jsx(Ot,{children:s.jsxs("h3",{className:`flex items-center justify-center gap-2 \r
                         bg-gradient-to-r from-orange-400 via-orange-300 to-yellow-400 \r
                         text-white text-xl font-extrabold py-3 px-5 rounded-2xl shadow-md \r
                         transition-transform duration-200 hover:scale-105`,children:[s.jsx(lr,{className:"h-5 w-5 text-white"}),"تفاصيل الحضور"]})}),s.jsx(Ur,{className:"text-gray-600 text-sm mt-1",children:A&&(()=>{const q=v.find(oe=>oe.student.id===A),Y=q==null?void 0:q.student;return Y?s.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[s.jsx("div",{className:"font-medium",children:Y.full_name}),Y.guardian&&s.jsxs("div",{className:"text-xs text-blue-600",children:[s.jsx("span",{className:"font-medium",children:"ولي الأمر:"})," ",Y.guardian.full_name]})]}):null})()})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"attendance-status",className:"text-gray-800 text-sm",children:"حالة الحضور"}),s.jsxs(Qe,{value:z.status,onValueChange:q=>M({...z,status:q}),children:[s.jsx(qe,{id:"attendance-status",className:`text-sm rounded-md ${cl(z.status)}`,children:s.jsx(Je,{children:vv(z.status)})}),s.jsx(Ge,{children:yv.map(q=>s.jsx(ve,{value:q.value,children:q.label},q.value))})]})]}),z.status==="late"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"late-minutes",className:"text-gray-800 text-sm",children:"دقائق التأخير"}),s.jsx(me,{id:"late-minutes",type:"number",min:0,value:z.late_minutes||0,onChange:q=>{const Y=parseInt(q.target.value)||0;M({...z,late_minutes:Y<0?0:Y})},className:"bg-orange-50 border-orange-200 text-orange-900 rounded-md text-sm py-1 px-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"attendance-note",className:"text-gray-800 text-sm",children:"ملاحظات"}),s.jsx($s,{id:"attendance-note",value:z.note||"",onChange:q=>M({...z,note:q.target.value}),placeholder:"أدخل أي ملاحظات حول حضور الطالب",rows:3,className:"bg-gray-50 border-gray-300 rounded-md text-sm py-1 px-2"})]})]}),s.jsxs(bt,{className:"gap-3 flex justify-end mt-4",children:[s.jsx(V,{type:"button",onClick:ae,className:"bg-green-600 hover:bg-green-700 text-white rounded-md px-4 py-2 text-sm transition-colors",children:"حفظ التغييرات"}),s.jsx(V,{type:"button",variant:"outline",onClick:()=>j(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-100 text-sm px-3 py-1",children:"إلغاء"})]})]})})})]})}const qa=class qa{constructor(){Si(this,"tableName","memorization_records")}static getInstance(){return qa.instance||(qa.instance=new qa),qa.instance}async testConnection(){try{const{count:t,error:r}=await le.from(this.tableName).select("*",{count:"exact",head:!0});return r?(console.error("Error testing memorization records table:",r),!1):(console.log("Memorization records table is accessible, count:",t),!0)}catch(t){return console.error("Error in testConnection:",t),!1}}async getAllMemorizationRecords(){try{console.log("Fetching all memorization records...");const{data:t,error:r}=await le.from(this.tableName).select(`
          *,
          student:student_id (
            id,
            full_name,
            grade_level,
            study_circle:study_circle_id (
              id,
              name
            ),
            guardian:guardian_id (
              id,
              full_name,
              phone_number
            )
          ),
          recorder:recorded_by (
            id,
            full_name,
            role
          )
        `).order("date",{ascending:!1});if(r){console.error("Supabase error fetching memorization records with joins:",r),console.log("Trying to fetch basic data without joins...");const{data:n,error:a}=await le.from(this.tableName).select("*").order("date",{ascending:!1});if(a)throw console.error("Error fetching basic memorization records:",a),a;return console.log("Successfully fetched basic memorization records:",(n==null?void 0:n.length)||0,"records"),n}return console.log("Successfully fetched memorization records with joins:",(t==null?void 0:t.length)||0,"records"),t}catch(t){throw console.error("Unexpected error in getAllMemorizationRecords:",t),t}}async getMemorizationRecordsByStudentId(t){const{data:r,error:n}=await le.from(this.tableName).select(`
        *,
        student:student_id (
          id,
          full_name,
          grade_level,
          guardian:guardian_id (
            id,
            full_name,
            phone_number
          )
        ),
        recorder:recorded_by (
          id,
          full_name
        )
      `).eq("student_id",t).order("date",{ascending:!1});if(n)throw console.error(`Error fetching memorization records for student ${t}:`,n),n;return r}async getMemorizationRecordsByTeacher(t){try{console.log("Fetching memorization records for teacher:",t);const{data:r,error:n}=await le.from(this.tableName).select(`
          *,
          student:student_id (
            id,
            full_name,
            grade_level,
            study_circle:study_circle_id (
              id,
              name
            ),
            guardian:guardian_id (
              id,
              full_name,
              phone_number
            )
          ),
          recorder:recorded_by (
            id,
            full_name,
            role
          )
        `).eq("recorded_by",t).order("date",{ascending:!1});if(n)throw console.error(`Error fetching memorization records for teacher ${t}:`,n),n;return console.log(`Found ${r.length} memorization records for teacher ${t}`),r}catch(r){return console.error(`Unexpected error in getMemorizationRecordsByTeacher for ${t}:`,r),[]}}async getMemorizationRecordById(t){const{data:r,error:n}=await le.from(this.tableName).select(`
        *,
        student:student_id (
          id,
          full_name,
          grade_level,
          study_circle:study_circle_id (
            id,
            name
          )
        ),
        recorder:recorded_by (
          id,
          full_name
        )
      `).eq("id",t).single();if(n)throw console.error(`Error fetching memorization record ${t}:`,n),n;return r}async createMemorizationRecord(t){try{const{data:r,error:n}=await le.from(this.tableName).insert(t).select().maybeSingle();if(n)throw console.error("Error inserting memorization record:",n),n;if(!r)throw new Error("Failed to insert memorization record, no data returned");const{data:a,error:i}=await le.from(this.tableName).select(`
          *,
          student:student_id (
            id,
            full_name,
            grade_level,
            study_circle:study_circle_id (
              id,
              name
            ),
            guardian:guardian_id (
              id,
              full_name,
              phone_number
            )
          ),
          recorder:recorded_by (
            id,
            full_name,
            role
          )
        `).eq("id",r.id).maybeSingle();return i?(console.error("Error fetching complete memorization record:",i),r):a||r}catch(r){throw console.error("Error in createMemorizationRecord:",r),r}}async updateMemorizationRecord(t){try{const{id:r,...n}=t,{data:a,error:i}=await le.from(this.tableName).select("id").eq("id",r).maybeSingle();if(i)throw console.error(`Error checking if memorization record ${r} exists:`,i),i;if(!a)throw console.error(`Memorization record with ID ${r} does not exist`),new Error(`Memorization record with ID ${r} does not exist`);const{data:o,error:l,status:c,statusText:d}=await le.from(this.tableName).update(n).eq("id",r).select("*").maybeSingle();if(console.log(`Update response for record ${r}:`,{data:o,error:l}),l)throw console.error(`Error updating memorization record ${r}:`,l),l;let u=o;console.log(`Re-fetching data for record ${r} after update`);const{data:f,error:m}=await le.from(this.tableName).select("*").eq("id",r).maybeSingle();if(m)if(console.error(`Error refetching basic record data for ${r}:`,m),u)console.log(`Using updatedData from previous response for ${r}`);else throw m;else if(f)console.log(`Successfully re-fetched data for record ${r}`,f),u=f;else if(console.error(`Could not find updated record with ID ${r} during refetch`),!u)throw new Error(`Record with ID ${r} not found after update`);console.log(`Fetching complete record data with joins for ${r}`);const{data:v,error:x}=await le.from(this.tableName).select(`
          *,
          student:student_id (
            id,
            full_name,
            grade_level,
            study_circle:study_circle_id (
              id,
              name
            ),
            guardian:guardian_id (
              id,
              full_name,
              phone_number
            )
          ),
          recorder:recorded_by (
            id,
            full_name,
            role
          )
        `).eq("id",r).maybeSingle();return console.log(`Complete record fetch response for ${r}:`,{success:!x,hasData:!!v,dataStructure:v?Object.keys(v):null}),x?(console.error(`Error fetching complete memorization record ${r}:`,x),console.log(`Debug: basicData available for ID ${r}:`,!!u),u):v?(console.log(`Successfully updated memorization record ${r} with complete data`),v):(console.warn(`No full data returned for memorization record ${r}, using basic data`),u)}catch(r){throw console.error(`Error in updateMemorizationRecord for ID ${t.id}:`,r),r}}async deleteMemorizationRecord(t){const{error:r}=await le.from(this.tableName).delete().eq("id",t);if(r)throw console.error(`Error deleting memorization record ${t}:`,r),r}async getStudentMemorizationStats(t){const{data:r,error:n}=await le.from(this.tableName).select("*").eq("student_id",t);if(n)throw console.error(`Error fetching memorization stats for student ${t}:`,n),n;const a=r,i=a.filter(u=>u.type==="new").length,o=a.filter(u=>u.type==="review").length,l=a.filter(u=>u.type==="sabqi").length,c=a.filter(u=>u.score!==void 0&&u.score!==null),d=c.length>0?c.reduce((u,f)=>u+(f.score||0),0)/c.length:0;return{totalNew:i,totalReview:o,totalSabqi:l,avgScore:d}}};Si(qa,"instance");let $m=qa;const Gs=$m.getInstance(),Lm=async()=>{try{console.log("بدء استرجاع المعلمين...");const{data:e,error:t}=await le.from("profiles").select("id, full_name, role").or("role.eq.teacher,role.eq.admin").is("deleted_at",null).order("full_name",{ascending:!0});return t?console.error("خطأ في استرجاع جميع الملفات الشخصية:",t):console.log("جميع الملفات الشخصية:",e==null?void 0:e.length),e}catch(e){return console.error("خطأ غير متوقع في استرجاع المعلمين:",e),[]}},Fm=async e=>{try{console.log("جاري جلب الطلاب للمعلم:",e);const{data:t,error:r}=await le.from("study_circles").select("id").eq("teacher_id",e).is("deleted_at",null);if(r)return console.error("خطأ في استرجاع حلقات المعلم:",r),[];if(!t||t.length===0)return console.log("لا توجد حلقات للمعلم المحدد"),[];const n=t.map(o=>o.id);console.log("معرفات حلقات المعلم:",n);const{data:a,error:i}=await le.from("students").select(`
        *,
        study_circle:study_circle_id (
          id,
          name,
          teacher_id
        ),
        guardian:guardian_id (
          id,
          full_name,
          phone_number
        )
      `).in("study_circle_id",n).is("deleted_at",null);return i?(console.error("خطأ في استرجاع طلاب المعلم:",i),[]):(console.log(`تم العثور على ${(a==null?void 0:a.length)||0} طالب للمعلم`),a||[])}catch(t){return console.error("خطأ غير متوقع في استرجاع طلاب المعلم:",t),[]}};function wv(e){switch(e){case"new":return"حفظ جديد";case"review":return"مراجعة";case"sabqi":return"مراجعة قديمة";default:return e}}function sf(e){switch(e){case"new":return"bg-green-100 text-green-800 border-green-200";case"review":return"bg-blue-100 text-blue-800 border-blue-200";case"sabqi":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}}const jv=[{value:"new",label:"حفظ جديد"},{value:"review",label:"مراجعة"},{value:"sabqi",label:"مراجعة قديمة"}],Fi=[{number:1,name:"الفاتحة",ayahs:7},{number:2,name:"البقرة",ayahs:286},{number:3,name:"آل عمران",ayahs:200},{number:4,name:"النساء",ayahs:176},{number:5,name:"المائدة",ayahs:120},{number:6,name:"الأنعام",ayahs:165},{number:7,name:"الأعراف",ayahs:206},{number:8,name:"الأنفال",ayahs:75},{number:9,name:"التوبة",ayahs:129},{number:10,name:"يونس",ayahs:109},{number:11,name:"هود",ayahs:123},{number:12,name:"يوسف",ayahs:111},{number:13,name:"الرعد",ayahs:43},{number:14,name:"إبراهيم",ayahs:52},{number:15,name:"الحجر",ayahs:99},{number:16,name:"النحل",ayahs:128},{number:17,name:"الإسراء",ayahs:111},{number:18,name:"الكهف",ayahs:110},{number:19,name:"مريم",ayahs:98},{number:20,name:"طه",ayahs:135},{number:21,name:"الأنبياء",ayahs:112},{number:22,name:"الحج",ayahs:78},{number:23,name:"المؤمنون",ayahs:118},{number:24,name:"النور",ayahs:64},{number:25,name:"الفرقان",ayahs:77},{number:26,name:"الشعراء",ayahs:227},{number:27,name:"النمل",ayahs:93},{number:28,name:"القصص",ayahs:88},{number:29,name:"العنكبوت",ayahs:69},{number:30,name:"الروم",ayahs:60},{number:31,name:"لقمان",ayahs:34},{number:32,name:"السجدة",ayahs:30},{number:33,name:"الأحزاب",ayahs:73},{number:34,name:"سبأ",ayahs:54},{number:35,name:"فاطر",ayahs:45},{number:36,name:"يس",ayahs:83},{number:37,name:"الصافات",ayahs:182},{number:38,name:"ص",ayahs:88},{number:39,name:"الزمر",ayahs:75},{number:40,name:"غافر",ayahs:85},{number:41,name:"فصلت",ayahs:54},{number:42,name:"الشورى",ayahs:53},{number:43,name:"الزخرف",ayahs:89},{number:44,name:"الدخان",ayahs:59},{number:45,name:"الجاثية",ayahs:37},{number:46,name:"الأحقاف",ayahs:35},{number:47,name:"محمد",ayahs:38},{number:48,name:"الفتح",ayahs:29},{number:49,name:"الحجرات",ayahs:18},{number:50,name:"ق",ayahs:45},{number:51,name:"الذاريات",ayahs:60},{number:52,name:"الطور",ayahs:49},{number:53,name:"النجم",ayahs:62},{number:54,name:"القمر",ayahs:55},{number:55,name:"الرحمن",ayahs:78},{number:56,name:"الواقعة",ayahs:96},{number:57,name:"الحديد",ayahs:29},{number:58,name:"المجادلة",ayahs:22},{number:59,name:"الحشر",ayahs:24},{number:60,name:"الممتحنة",ayahs:13},{number:61,name:"الصف",ayahs:14},{number:62,name:"الجمعة",ayahs:11},{number:63,name:"المنافقون",ayahs:11},{number:64,name:"التغابن",ayahs:18},{number:65,name:"الطلاق",ayahs:12},{number:66,name:"التحريم",ayahs:12},{number:67,name:"الملك",ayahs:30},{number:68,name:"القلم",ayahs:52},{number:69,name:"الحاقة",ayahs:52},{number:70,name:"المعارج",ayahs:44},{number:71,name:"نوح",ayahs:28},{number:72,name:"الجن",ayahs:28},{number:73,name:"المزمل",ayahs:20},{number:74,name:"المدثر",ayahs:56},{number:75,name:"القيامة",ayahs:40},{number:76,name:"الإنسان",ayahs:31},{number:77,name:"المرسلات",ayahs:50},{number:78,name:"النبأ",ayahs:40},{number:79,name:"النازعات",ayahs:46},{number:80,name:"عبس",ayahs:42},{number:81,name:"التكوير",ayahs:29},{number:82,name:"الإنفطار",ayahs:19},{number:83,name:"المطففين",ayahs:36},{number:84,name:"الإنشقاق",ayahs:25},{number:85,name:"البروج",ayahs:22},{number:86,name:"الطارق",ayahs:17},{number:87,name:"الأعلى",ayahs:19},{number:88,name:"الغاشية",ayahs:26},{number:89,name:"الفجر",ayahs:30},{number:90,name:"البلد",ayahs:20},{number:91,name:"الشمس",ayahs:15},{number:92,name:"الليل",ayahs:21},{number:93,name:"الضحى",ayahs:11},{number:94,name:"الشرح",ayahs:8},{number:95,name:"التين",ayahs:8},{number:96,name:"العلق",ayahs:19},{number:97,name:"القدر",ayahs:5},{number:98,name:"البينة",ayahs:8},{number:99,name:"الزلزلة",ayahs:8},{number:100,name:"العاديات",ayahs:11},{number:101,name:"القارعة",ayahs:11},{number:102,name:"التكاثر",ayahs:8},{number:103,name:"العصر",ayahs:3},{number:104,name:"الهمزة",ayahs:9},{number:105,name:"الفيل",ayahs:5},{number:106,name:"قريش",ayahs:4},{number:107,name:"الماعون",ayahs:7},{number:108,name:"الكوثر",ayahs:3},{number:109,name:"الكافرون",ayahs:6},{number:110,name:"النصر",ayahs:3},{number:111,name:"المسد",ayahs:5},{number:112,name:"الإخلاص",ayahs:4},{number:113,name:"الفلق",ayahs:5},{number:114,name:"الناس",ayahs:6}];function Ja(e){const t=Fi.find(r=>r.number===e);return t?t.name:`سورة ${e}`}function dl(e){return e.from_surah===e.to_surah?`${Ja(e.from_surah)} (${e.from_ayah} - ${e.to_ayah})`:`${Ja(e.from_surah)} (${e.from_ayah}) - ${Ja(e.to_surah)} (${e.to_ayah})`}function _v(e){return e==null?"-":e.toFixed(2)}function Nv(e){if(!e)return"لا يوجد";const t=[];return e.lahn_jali&&t.push(`لحن جلي: ${e.lahn_jali}`),e.lahn_khafi&&t.push(`لحن خفي: ${e.lahn_khafi}`),Object.entries(e).forEach(([r,n])=>{r!=="lahn_jali"&&r!=="lahn_khafi"&&n&&t.push(`${r}: ${n}`)}),t.length>0?t.join("، "):"لا يوجد"}const ND=({onNavigate:e,currentUser:t})=>{var Me,ze,Se,pe,Oe;const[r,n]=h.useState([]),[a,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[m,v]=h.useState("all-students"),[x,g]=h.useState("all-teachers"),[b,y]=h.useState("all-circles"),[p,w]=h.useState(null),[S,C]=h.useState(!1),[T,O]=h.useState("all"),[$,Q]=h.useState(""),[K,A]=h.useState(!0),[_,I]=h.useState(t),[j,k]=h.useState((t==null?void 0:t.role)==="teacher"?"my-records":"all-records"),[D,z]=h.useState(!0),[M,B]=h.useState("cards"),[X,J]=h.useState(0),[L,ne]=h.useState(""),[ae,Z]=h.useState(""),[se,re]=h.useState([]),[ye,je]=h.useState([]),[q,Y]=h.useState(!1),[oe,De]=h.useState(null),{toast:W}=_n(),[ie,Ae]=h.useState({student_id:"",date:new Date().toISOString().split("T")[0],type:"new",from_surah:1,from_ayah:1,to_surah:1,to_ayah:1,score:void 0,tajweed_errors:void 0,notes:"",recorded_by:"",circle_id:""}),[Re,It]=h.useState({});h.useEffect(()=>{(async()=>{try{if(A(!0),!await Gs.testConnection()){z(!1),W({title:"جدول سجلات الحفظ غير موجود",description:"يرجى تنفيذ سكريبت إنشاء الجدول أولاً (create_memorization_table.sql)",variant:"destructive"}),A(!1);return}const H=t;console.log("MemorizationRecords - Current User:",H),I(H);const Ne=new URLSearchParams(window.location.search).get("circle");if(Ne&&y(Ne),re([]),je([]),H&&H.role==="teacher"){console.log("Loading data for teacher role");const Pe=await Fm(H.id);l(Pe);const st=(await Im(H.id)).map(Xt=>{const Et=Pe.filter(ot=>ot.study_circle_id===Xt.id||ot.study_circle&&ot.study_circle.id===Xt.id);return{...Xt,students_count:Et.length}});f(st);const Jt=await Gs.getMemorizationRecordsByTeacher(H.id);n(Jt),i(Jt),k("my-records")}else{console.log("Loading data for admin/superadmin role");const Pe=await Ro();l(Pe);const ct=await Lm();console.log("قائمة المعلمين المسترجعة (admin/superadmin):",ct),!ct||ct.length===0?(console.warn("لا توجد بيانات معلمين مسترجعة!"),H&&(H.role==="admin"||H.role==="teacher")?(console.log("إضافة المستخدم الحالي (مدير) إلى قائمة المعلمين:",H),d([{id:H.id,full_name:H.full_name||"المستخدم الحالي",display_name:H.full_name||"المستخدم الحالي",role:H.role}])):d([])):d(ct);const Jt=(await Ta()).map(Et=>{const ot=Pe.filter(Nn=>Nn.study_circle_id===Et.id||Nn.study_circle&&Nn.study_circle.id===Et.id);return{...Et,students_count:ot.length}});f(Jt);const Xt=await Gs.getAllMemorizationRecords();n(Xt),i(Xt),k("all-records")}}catch(E){console.error("Error loading data:",E),W({title:"خطأ",description:"حدث خطأ أثناء تحميل البيانات",variant:"destructive"})}finally{A(!1)}})()},[W,X]),h.useEffect(()=>{if(b&&b!=="all-circles"){const N=o.filter(E=>E.study_circle_id===b||E.study_circle&&E.study_circle.id===b);m!=="all-students"&&!N.some(E=>E.id===m)&&v("all-students")}},[b,o,m]),h.useEffect(()=>{console.log("Filtering criteria changed, updating filtered records"),console.log("Records to filter:",r.length),console.log("Filter criteria:",{circleId:b,studentId:m,teacherId:x,type:T,searchQuery:$?$.substring(0,20)+"...":"",activeTab:j});let N=[...r];if(b&&b!=="all-circles"){const E=o.filter(H=>H.study_circle&&H.study_circle.id===b).map(H=>H.id);E.length>0&&(N=N.filter(H=>E.includes(H.student_id)))}if(m&&m!=="all-students"&&(N=N.filter(E=>E.student_id===m)),x&&x!=="all-teachers"&&(N=N.filter(E=>{var H;return((H=E.recorder)==null?void 0:H.id)===x})),T!=="all"&&(N=N.filter(E=>E.type===T)),$.trim()){const E=$.toLowerCase();N=N.filter(H=>{var ce,Ne,Pe,ct,st,Jt;return((Ne=(ce=H.student)==null?void 0:ce.full_name)==null?void 0:Ne.toLowerCase().includes(E))||((st=(ct=(Pe=H.student)==null?void 0:Pe.guardian)==null?void 0:ct.full_name)==null?void 0:st.toLowerCase().includes(E))||dl(H).toLowerCase().includes(E)||((Jt=H.notes)==null?void 0:Jt.toLowerCase().includes(E))})}j==="my-records"&&_&&(N=N.filter(E=>E.recorded_by===_.id)),console.log(`Filtered to ${N.length} records`),i(N)},[r,m,x,b,T,$,j,_,o]);const Xe=(N,E)=>{const H=Fi.find(ce=>ce.number===E);H&&Ae(N==="from_surah"?ce=>({...ce,[N]:E,from_ayah:ce.from_ayah>H.ayahs?1:ce.from_ayah}):ce=>({...ce,[N]:E,to_ayah:ce.to_ayah>H.ayahs?1:ce.to_ayah}))},pt=()=>{const N={};ie.student_id||(N.student_id="يجب اختيار الطالب"),ie.recorded_by||(N.recorded_by="يجب تحديد المعلم/المشرف"),ie.from_surah>ie.to_surah&&(N.from_surah="يجب أن تكون سورة البداية قبل سورة النهاية"),ie.from_surah===ie.to_surah&&ie.from_ayah>ie.to_ayah&&(N.from_ayah="يجب أن تكون آية البداية قبل آية النهاية");const E=Fi.find(ce=>ce.number===ie.from_surah);E&&(ie.from_ayah<1||ie.from_ayah>E.ayahs)&&(N.from_ayah=`رقم الآية يجب أن يكون بين 1 و ${E.ayahs}`);const H=Fi.find(ce=>ce.number===ie.to_surah);return H&&(ie.to_ayah<1||ie.to_ayah>H.ayahs)&&(N.to_ayah=`رقم الآية يجب أن يكون بين 1 و ${H.ayahs}`),ie.score!==void 0&&(ie.score<0||ie.score>100)&&(N.score="الدرجة يجب أن تكون بين 0 و 100"),It(N),Object.keys(N).length===0},Mt=async()=>{if(pt())try{A(!0);const N={...ie,recorded_by:ie.recorded_by||(_?_.id:void 0)};"circle_id"in N&&delete N.circle_id;let E;if(p){const Ne={id:p.id,...N};console.log("Updating record with data:",Ne),E=await Gs.updateMemorizationRecord(Ne),console.log("Update response from service:",E),W({title:"تم التحديث",description:"تم تحديث سجل الحفظ بنجاح"})}else console.log("Creating new record with data:",N),E=await Gs.createMemorizationRecord(N),console.log("Create response from service:",E),W({title:"تم الإضافة",description:"تم إضافة سجل الحفظ بنجاح"});console.log("Updating records state with saved record:",E);const H=p?r.map(Ne=>Ne.id===E.id?{...E}:Ne):[{...E},...r];console.log("Setting new records state with length:",H.length),n(H);let ce=[...H];if(b&&b!=="all-circles"){const Ne=o.filter(Pe=>Pe.study_circle&&Pe.study_circle.id===b).map(Pe=>Pe.id);Ne.length>0&&(ce=ce.filter(Pe=>Ne.includes(Pe.student_id)))}if(m&&m!=="all-students"&&(ce=ce.filter(Ne=>Ne.student_id===m)),x&&x!=="all-teachers"&&(ce=ce.filter(Ne=>{var Pe;return((Pe=Ne.recorder)==null?void 0:Pe.id)===x})),T!=="all"&&(ce=ce.filter(Ne=>Ne.type===T)),$.trim()){const Ne=$.toLowerCase();ce=ce.filter(Pe=>{var ct,st,Jt,Xt,Et,ot;return((st=(ct=Pe.student)==null?void 0:ct.full_name)==null?void 0:st.toLowerCase().includes(Ne))||((Et=(Xt=(Jt=Pe.student)==null?void 0:Jt.guardian)==null?void 0:Xt.full_name)==null?void 0:Et.toLowerCase().includes(Ne))||dl(Pe).toLowerCase().includes(Ne)||((ot=Pe.notes)==null?void 0:ot.toLowerCase().includes(Ne))})}j==="my-records"&&_&&(ce=ce.filter(Ne=>Ne.recorded_by===_.id)),i(ce),C(!1),sr(),console.log("Scheduling forced refresh after operation"),setTimeout(()=>{Qt()},300)}catch(N){console.error("Error saving record:",N);let E="حدث خطأ أثناء حفظ السجل";N instanceof Error&&(E+=`: ${N.message}`),W({title:"خطأ",description:E,variant:"destructive"})}finally{A(!1)}},xt=async N=>{De(N),Y(!0)},Ut=async()=>{if(oe)try{A(!0),console.log(`Deleting record with ID: ${oe}`),await Gs.deleteMemorizationRecord(oe),console.log("Updating records state after deletion");const N=r.filter(E=>E.id!==oe);n(N),i(E=>E.filter(H=>H.id!==oe)),W({title:"تم الحذف",description:"تم حذف سجل الحفظ بنجاح"}),console.log("Scheduling forced refresh after deletion"),setTimeout(()=>{Qt()},300)}catch(N){console.error("Error deleting record:",N);let E="حدث خطأ أثناء حذف السجل";N instanceof Error&&(E+=`: ${N.message}`),W({title:"خطأ",description:E,variant:"destructive"})}finally{A(!1)}},Qt=async()=>{console.log("Manual refresh of all data requested"),A(!0);try{let N;_&&_.role==="teacher"?(console.log("Reloading teacher-specific records"),N=await Gs.getMemorizationRecordsByTeacher(_.id)):(console.log("Reloading all records"),N=await Gs.getAllMemorizationRecords()),console.log(`Loaded ${N.length} records during refresh`),n(N);let E=[...N];if(b&&b!=="all-circles"){const H=o.filter(ce=>ce.study_circle&&ce.study_circle.id===b).map(ce=>ce.id);H.length>0&&(E=E.filter(ce=>H.includes(ce.student_id)))}if(m&&m!=="all-students"&&(E=E.filter(H=>H.student_id===m)),x&&x!=="all-teachers"&&(E=E.filter(H=>{var ce;return((ce=H.recorder)==null?void 0:ce.id)===x})),T!=="all"&&(E=E.filter(H=>H.type===T)),$.trim()){const H=$.toLowerCase();E=E.filter(ce=>{var Ne,Pe,ct,st,Jt,Xt;return((Pe=(Ne=ce.student)==null?void 0:Ne.full_name)==null?void 0:Pe.toLowerCase().includes(H))||((Jt=(st=(ct=ce.student)==null?void 0:ct.guardian)==null?void 0:st.full_name)==null?void 0:Jt.toLowerCase().includes(H))||dl(ce).toLowerCase().includes(H)||((Xt=ce.notes)==null?void 0:Xt.toLowerCase().includes(H))})}j==="my-records"&&_&&(E=E.filter(H=>H.recorded_by===_.id)),console.log(`Filtered to ${E.length} records after refresh`),i(E)}catch(N){console.error("Error during refresh:",N),W({title:"خطأ في التحديث",description:"حدث خطأ أثناء تحديث البيانات",variant:"destructive"})}finally{A(!1),J(N=>N+1)}},Ht=N=>{var E,H;if(w(N),Ae({student_id:N.student_id,date:N.date,type:N.type,from_surah:N.from_surah,from_ayah:N.from_ayah,to_surah:N.to_surah,to_ayah:N.to_ayah,score:N.score,tajweed_errors:N.tajweed_errors,notes:N.notes||"",recorded_by:N.recorded_by,circle_id:(E=N.student)!=null&&E.study_circle?N.student.study_circle.id:""}),ne(N.recorded_by),N.recorded_by){const ce=u.filter(Pe=>Pe.teacher_id===N.recorded_by||Pe.teacher&&Pe.teacher.id===N.recorded_by);re(ce);const Ne=(H=N.student)!=null&&H.study_circle?N.student.study_circle.id:"";if(Ne){Z(Ne);const Pe=o.filter(ct=>ct.study_circle&&ct.study_circle.id===Ne);je(Pe)}else{const Pe=ce.map(st=>st.id),ct=o.filter(st=>st.study_circle&&Pe.includes(st.study_circle.id));je(ct)}}else re(u),je(o);C(!0)},sr=()=>{(_==null?void 0:_.role)==="teacher"&&_.id,Ae({student_id:"",date:new Date().toISOString().split("T")[0],type:"new",from_surah:1,from_ayah:1,to_surah:1,to_ayah:1,score:void 0,tajweed_errors:void 0,notes:"",recorded_by:_?_.id:""}),w(null),It({})},$t=()=>{if(sr(),C(!0),console.log(`إعداد بيانات النموذج. عدد الحلقات الكلي: ${u.length}`),re(u),je(o),(_==null?void 0:_.role)==="teacher"){console.log(`المستخدم معلم، معرف: ${_.id}`),ne(_.id),Ae(E=>({...E,recorded_by:_.id}));const N=u.filter(E=>E.teacher_id===_.id||E.teacher&&E.teacher.id===_.id);re(N),Z(""),Ae(E=>({...E,circle_id:"",student_id:""})),je([])}else re(u),je(o)},qt=N=>{if(Z(N),Ae(E=>({...E,circle_id:N})),N&&N!=="all-circles"){const E=o.filter(H=>H.study_circle&&H.study_circle.id===N);je(E),Ae(H=>({...H,student_id:""}))}else if(L&&L!=="all-teachers"){const E=se.map(ce=>ce.id),H=o.filter(ce=>ce.study_circle&&E.includes(ce.study_circle.id));je(H),Ae(ce=>({...ce,student_id:""}))}else je(o),Ae(E=>({...E,student_id:""}))},Ve=(N,E)=>{Ae(H=>({...H,[N]:E}))},ar=(N,E)=>{const H=E===""?void 0:parseInt(E,10);Ae(ce=>({...ce,tajweed_errors:{...ce.tajweed_errors,[N]:H}}))},Ct=h.useMemo(()=>{if(!c||c.length===0)return console.log("لا يوجد معلمين في القائمة!"),[];console.log("عدد المعلمين المتاحين قبل التصفية:",c.length),console.log("المعلمون المتاحون:",c.map(E=>({id:E.id,name:E.full_name,role:E.role})));let N=[];return(_==null?void 0:_.role)==="teacher"?(N=c.filter(E=>E.id===_.id),console.log("معلم: يظهر فقط نفسه",N.map(E=>({id:E.id,name:E.full_name,role:E.role})))):((_==null?void 0:_.role)==="admin"||(_==null?void 0:_.role)==="superadmin")&&(N=c,console.log("مشرف/مدير: يظهر جميع المعلمين والمشرفين",N.map(E=>({id:E.id,name:E.full_name,role:E.role})))),console.log("عدد المعلمين بعد التصفية:",N.length),N},[c,_]),R=h.useMemo(()=>x==="all-teachers"?u:u.filter(N=>N.teacher_id===x||N.teacher&&N.teacher.id===x),[u,x]),G=h.useMemo(()=>{if(!o||o.length===0)return[];let N=[...o];if(x!=="all-teachers"){const E=R.map(H=>H.id);N=N.filter(H=>H.study_circle_id&&E.includes(H.study_circle_id)||H.study_circle&&E.includes(H.study_circle.id))}if(b!=="all-circles"&&(N=N.filter(E=>E.study_circle_id===b||E.study_circle&&E.study_circle.id===b)),$.trim()){const E=$.toLowerCase();N=N.filter(H=>{var ce,Ne;return((ce=H.full_name)==null?void 0:ce.toLowerCase().includes(E))||H.guardian&&((Ne=H.guardian.full_name)==null?void 0:Ne.toLowerCase().includes(E))})}return N},[o,x,b,R,$]),ge=N=>{if(N==="select-teacher"){Ve("recorded_by",""),ne(""),re([]),je([]),Ae(E=>({...E,circle_id:"",student_id:""}));return}if(Ve("recorded_by",N),ne(N),N&&N!=="all-teachers"){console.log(`Filtering circles for teacher: ${N}`);const E=u.filter(H=>H.teacher_id===N||H.teacher&&H.teacher.id===N);console.log(`Found ${E.length} circles for the selected teacher`),E.length===0?(console.log("No circles found for teacher, showing all circles"),re(u)):re(E),Z(""),Ae(H=>({...H,circle_id:"",student_id:""})),je([])}else re(u),je(o)};return s.jsxs("div",{className:"container mx-auto py-6",dir:"rtl",children:[s.jsxs(nt,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsx(ut,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(dt,{className:"text-xl md:text-2xl font-extrabold text-green-50 flex items-center gap-2",children:[s.jsx(Vw,{className:"h-5 w-5 text-yellow-300"}),"سجلات الحفظ والمراجعة"]}),s.jsx(Dt,{className:"text-xs md:text-sm text-green-100 mt-1",children:"هنا يمكنك إدارة سجلات الحفظ والمراجعة للطلاب، إضافة سجلات جديدة، وتحرير السجلات الحالية."})]}),s.jsxs(V,{variant:"outline",className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:Qt,children:[s.jsx(Un,{className:"h-4 w-4"}),"تحديث"]})]})}),s.jsx(Ze,{children:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 bg-white dark:bg-gray-900 p-4 rounded-2xl shadow-md border border-green-200 dark:border-green-700",children:[s.jsx("div",{className:"flex-1 min-w-[180px]",children:s.jsx(me,{placeholder:"🔍 بحث عن طالب أو ولي أمر أو سورة أو ملاحظات...",value:$,onChange:N=>Q(N.target.value),className:"w-full rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green focus:border-islamic-green text-sm text-gray-800 dark:text-gray-200 transition-all duration-200"})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(Qe,{value:x,onValueChange:N=>{g(N),y("all-circles"),v("all-students")},children:[s.jsx(qe,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(Je,{placeholder:"👨‍🏫 اختر معلماً"})}),s.jsxs(Ge,{children:[s.jsx(ve,{value:"all-teachers",children:"جميع المعلمين"}),Ct.length>0?Ct.map(N=>s.jsxs(ve,{value:N.id,children:[N.full_name??`المعلم ${N.id.slice(0,4)}`,N.role&&(N.role==="teacher"?" (معلم)":` (${N.role==="admin"?"مشرف":N.role})`)]},N.id)):s.jsx(ve,{disabled:!0,value:"__no__",children:"لا يوجد معلمين أو مشرفين"})]})]})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(Qe,{value:b,onValueChange:N=>{y(N),N!=="all-circles"&&v("all-students")},disabled:x==="all-teachers"&&R.length===0,children:[s.jsx(qe,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(Je,{placeholder:x==="all-teachers"?"📚 جميع الحلقات":R.length===0?"لا توجد حلقات":"اختر حلقة"})}),s.jsxs(Ge,{children:[s.jsx(ve,{value:"all-circles",children:"جميع الحلقات"}),R.map(N=>s.jsxs(ve,{value:N.id,children:[N.name||`حلقة ${N.id}`," ",x==="all-teachers"&&N.teacher?` - ${N.teacher.full_name}`:""," (",N.students_count," طالب)"]},N.id))]})]})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(Qe,{value:m,onValueChange:v,disabled:G.length===0,children:[s.jsx(qe,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(Je,{placeholder:G.length===0?"لا يوجد طلاب":"👦 جميع الطلاب"})}),s.jsxs(Ge,{children:[s.jsx(ve,{value:"all-students",children:"جميع الطلاب"}),G.map(N=>s.jsx(ve,{value:N.id,children:s.jsxs("div",{className:"flex flex-col text-sm",children:[s.jsx("span",{className:"font-medium",children:N.full_name}),N.guardian&&N.guardian.full_name&&s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ولي الأمر: ",N.guardian.full_name]})]})},N.id))]})]})}),s.jsx("div",{className:"min-w-[120px]",children:s.jsxs(Qe,{value:T,onValueChange:O,children:[s.jsx(qe,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(Je,{placeholder:"📂 جميع الأنواع"})}),s.jsxs(Ge,{children:[s.jsx(ve,{value:"all",children:"جميع الأنواع"}),jv.map(N=>s.jsx(ve,{value:N.value,children:N.label},N.value))]})]})}),s.jsxs(V,{onClick:$t,className:"bg-green-600 hover:bg-green-700 text-white rounded-xl flex items-center gap-2 px-3 py-1.5 shadow-md hover:scale-105 transition-transform duration-200 text-sm font-semibold ring-1 ring-green-500/30 hover:ring-2 hover:ring-green-500/50 active:scale-95",children:[s.jsx(Pr,{className:"w-3 h-3"}),"إضافة سجل جديد"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 bg-white dark:bg-gray-900 p-4 rounded-2xl shadow-md border border-green-200 dark:border-green-700",children:[s.jsx(Do,{value:j,onValueChange:k,className:"w-full md:w-[420px] bg-green-50 rounded-xl shadow-inner p-1",children:s.jsxs(hi,{className:"grid w-full grid-cols-2 rounded-xl bg-white dark:bg-gray-900 shadow-sm ring-1 ring-green-300",children:[s.jsx(ur,{value:"all-records",className:`\r
                                flex items-center justify-center gap-2 text-sm font-medium\r
                                rounded-lg\r
                                text-green-800\r
                                hover:bg-green-100 hover:text-green-900\r
                                data-[state=active]:bg-islamic-green\r
                                data-[state=active]:text-white\r
                                transition-all duration-300\r
                              `,children:"📋 جميع السجلات"}),s.jsx(ur,{value:"my-records",className:`\r
                              flex items-center justify-center gap-2 text-sm font-medium\r
                              rounded-lg\r
                              text-green-800\r
                              hover:bg-green-100 hover:text-green-900\r
                              data-[state=active]:bg-islamic-green\r
                              data-[state=active]:text-white\r
                              transition-all duration-300\r
                            `,children:"👤 سجلاتي"})]})}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-lg p-1 bg-green-50 dark:bg-green-900 shadow-sm",children:[s.jsx(V,{variant:M==="table"?"default":"ghost",size:"sm",onClick:()=>B("table"),className:"flex items-center justify-center w-10 h-10 p-0 rounded-lg hover:bg-green-100 hover:scale-105 transition-transform duration-200",title:"عرض جدول",children:s.jsx(Hw,{className:"w-5 h-5 text-green-800"})}),s.jsx(V,{variant:M==="cards"?"default":"ghost",size:"sm",onClick:()=>B("cards"),className:"flex items-center justify-center w-10 h-10 p-0 rounded-lg hover:bg-green-100 hover:scale-105 transition-transform duration-200",title:"عرض بطاقات",children:s.jsx(Bw,{className:"w-5 h-5 text-green-800"})})]})]}),K?s.jsx("div",{className:"text-center py-10",children:"جاري التحميل..."}):a.length===0?s.jsx("h2",{className:"text-lg font-semibold text-green-800 rounded-2xl shadow-sm",children:"لا توجد سجلات حفظ متطابقة مع معايير البحث"}):M==="table"?s.jsx(ds,{data:a.map(N=>({...N,id:N.id.toString()})),columns:[{key:"student",header:"👦 الطالب",align:"right",render:N=>{var E,H;return s.jsxs("div",{className:"font-medium text-right",children:[((E=N.student)==null?void 0:E.full_name)||"غير معروف",((H=N.student)==null?void 0:H.guardian)&&s.jsxs("div",{className:"text-xs text-green-700 dark:text-green-300",children:["ولي الأمر: ",N.student.guardian.full_name||"غير محدد"]})]})}},{key:"study_circle",header:"📚 الحلقة",align:"right",render:N=>{var E;return(E=N.student)!=null&&E.study_circle?N.student.study_circle.name||`حلقة ${N.student.study_circle.id}`:"غير محدد"}},{key:"date",header:"📅 التاريخ",align:"right",render:N=>new Date(N.date).toLocaleDateString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit"})},{key:"type",header:"📂 النوع",align:"right",render:N=>s.jsx(it,{className:`${sf(N.type)} px-2 py-1 rounded-lg`,children:wv(N.type)})},{key:"memorization_range",header:"🔖 نطاق الحفظ",align:"right",render:N=>{const E={...N,id:parseInt(N.id)};return dl(E)}},{key:"score",header:"🏆 الدرجة",align:"right",render:N=>_v(N.score)},{key:"tajweed_errors",header:"❌ أخطاء التجويد",align:"right",render:N=>Nv(N.tajweed_errors)},{key:"recorder",header:"🖊 المُسجل بواسطة",align:"right",render:N=>{var E;return((E=N.recorder)==null?void 0:E.full_name)||"غير معروف"}},{key:"actions",header:"⚙️ الإجراءات",align:"center",render:N=>s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>Ht({...N,id:parseInt(N.id)}),className:"h-8 w-8 p-0 hover:bg-green-100 dark:hover:bg-green-700 transition-colors rounded-lg",title:"تعديل",children:s.jsx(lr,{className:"h-4 w-4 text-green-600 dark:text-green-300"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>xt(parseInt(N.id)),className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-700 transition-colors rounded-lg",title:"حذف",children:s.jsx(Sr,{className:"h-4 w-4 text-red-500 dark:text-red-300"})})]})}],emptyMessage:"لا توجد سجلات",className:"overflow-hidden rounded-xl border border-green-300 shadow-md text-xs",getRowClassName:(N,E)=>`${E%2===0?"bg-green-50 hover:bg-green-100":"bg-white hover:bg-green-50"} cursor-pointer transition-colors`}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(N=>{var E,H,ce,Ne;return s.jsxs(nt,{className:"overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl",children:[s.jsxs(ut,{className:`p-4 ${sf(N.type).replace("bg-","bg-opacity-10 bg-")} rounded-t-xl`,children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(dt,{className:"text-lg font-bold line-clamp-1",children:((E=N.student)==null?void 0:E.full_name)||"غير معروف"}),s.jsx(it,{className:`${sf(N.type)} px-2 py-1 rounded-lg`,children:wv(N.type)})]}),((H=N.student)==null?void 0:H.guardian)&&s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["ولي الأمر: ",N.student.guardian.full_name||"غير محدد"]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"inline-block bg-gray-200 dark:bg-gray-700 rounded-full p-1",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),s.jsx("span",{children:new Date(N.date).toLocaleDateString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit"})})]})]}),s.jsxs(Ze,{className:"pt-4 space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-semibold mb-1 text-gray-600 dark:text-gray-300",children:"نطاق الحفظ:"}),s.jsx("p",{className:"text-lg font-medium",children:dl(N)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-lg p-2 text-center",children:[s.jsx("h4",{className:"text-sm font-semibold mb-1 text-gray-600 dark:text-gray-300",children:"الدرجة:"}),s.jsx("p",{className:"text-md font-medium",children:_v(N.score)})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900 rounded-lg p-2 text-center",children:[s.jsx("h4",{className:"text-sm font-semibold mb-1 text-gray-600 dark:text-gray-300",children:"أخطاء التجويد:"}),s.jsx("p",{className:"text-md font-medium",children:Nv(N.tajweed_errors)})]})]}),N.notes&&s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900 p-3 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"ملاحظات:"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:N.notes})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900 p-2 rounded-lg text-center",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"المُسجل بواسطة:"}),s.jsx("p",{className:"text-sm font-medium",children:((ce=N.recorder)==null?void 0:ce.full_name)||"غير معروف"})]}),s.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900 p-2 rounded-lg text-center",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"الحلقة:"}),s.jsx("p",{className:"text-sm font-medium",children:(Ne=N.student)!=null&&Ne.study_circle?N.student.study_circle.name||`حلقة ${N.student.study_circle.id}`:"غير محدد"})]})]}),s.jsxs("div",{className:"flex justify-center space-x-2 rtl:space-x-reverse pt-2 border-t mt-4",children:[s.jsxs(V,{variant:"outline",size:"sm",className:"flex items-center gap-1 bg-blue-50 dark:bg-blue-900 hover:bg-blue-100 dark:hover:bg-blue-800",onClick:()=>Ht(N),children:[s.jsx(lr,{className:"h-4 w-4 text-blue-500"}),s.jsx("span",{children:"تعديل"})]}),s.jsxs(V,{variant:"outline",size:"sm",className:"flex items-center gap-1 bg-red-50 dark:bg-red-900 hover:bg-red-100 dark:hover:bg-red-800",onClick:()=>xt(N.id),children:[s.jsx(Sr,{className:"h-4 w-4 text-red-500"}),s.jsx("span",{children:"حذف"})]})]})]})]},N.id)})})]})})]}),s.jsx(St,{open:S,onOpenChange:C,children:s.jsxs(yt,{className:"sm:max-w-[520px] w-full rounded-xl p-3 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100",children:[s.jsx(Pt,{className:"pb-1",children:s.jsx(Ot,{className:"text-xl font-bold text-center",children:s.jsx("h3",{className:"text-center leading-tight text-green-800 bg-gradient-to-r from-green-100 to-blue-100 py-2 px-3 rounded-lg",children:p?"✏️ تعديل سجل الحفظ":"👨‍🏫 إضافة سجل حفظ جديد"})})}),s.jsx("div",{className:"p-5 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs(Do,{defaultValue:"student",dir:"rtl",className:"w-full",children:[s.jsxs(hi,{className:"grid grid-cols-3 mb-6",children:[s.jsxs(ur,{value:"student",className:"flex items-center gap-2",children:[s.jsx(Xd,{size:16}),s.jsx("span",{children:"الطالب"})]}),s.jsxs(ur,{value:"memorization",className:"flex items-center gap-2",children:[s.jsx(Ug,{size:16}),s.jsx("span",{children:"الحفظ"})]}),s.jsxs(ur,{value:"recitation",className:"flex items-center gap-2",children:[s.jsx(Yt,{size:16}),s.jsx("span",{children:"التسميع"})]})]}),s.jsx(on,{value:"student",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsxs(ee,{htmlFor:"teacher",className:"flex items-center gap-1",children:["المعلم ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:ie.recorded_by||(_?_.id:""),onValueChange:N=>ge(N),children:[s.jsx(qe,{id:"teacher",children:s.jsx(Je,{placeholder:"اختر المعلم"})}),s.jsx(Ge,{position:"popper",children:Ct&&Ct.length>0?Ct.map(N=>s.jsxs(ve,{value:N.id,children:[N.full_name||N.display_name||`معلم ${N.id.slice(0,4)}`,N.role&&(N.role==="teacher"?" (معلم)":` (${N.role==="admin"?"مشرف":N.role})`)]},N.id)):s.jsxs(ve,{value:(_==null?void 0:_.id)||"initial",children:[(_==null?void 0:_.full_name)||"المستخدم الحالي",(_==null?void 0:_.role)&&(_.role==="teacher"?" (معلم)":` (${_.role==="admin"?"مشرف":_.role})`)]})})]}),Re.recorded_by&&s.jsx("p",{className:"text-sm text-red-500",children:Re.recorded_by})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ee,{htmlFor:"circle",children:"الحلقة"}),s.jsxs(Qe,{value:ie.circle_id||"",onValueChange:N=>qt(N),disabled:!ie.recorded_by,children:[s.jsx(qe,{id:"circle",children:s.jsx(Je,{placeholder:"اختر الحلقة"})}),s.jsx(Ge,{position:"popper",children:se.length>0?se.map(N=>s.jsx(ve,{value:N.id,children:N.name||`حلقة ${N.id.slice(0,4)}`},N.id)):s.jsx(ve,{value:"no-circles",disabled:!0,children:"لا توجد حلقات للمعلم المحدد"})})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs(ee,{htmlFor:"student",className:"flex items-center gap-1",children:["الطالب ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:ie.student_id||"",onValueChange:N=>Ve("student_id",N),disabled:!ie.recorded_by,children:[s.jsx(qe,{id:"student",children:s.jsx(Je,{placeholder:"اختر الطالب"})}),s.jsx(Ge,{position:"popper",children:ye.length>0?ye.map(N=>s.jsx(ve,{value:N.id,children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[N.guardian&&N.guardian.full_name&&s.jsxs("span",{className:"text-gray-500 text-xs mr-2",children:["(ولي الأمر: ",N.guardian.full_name,")"]}),s.jsx("span",{className:"font-medium",children:N.full_name||`طالب ${N.id.slice(0,4)}`})]})},N.id)):s.jsx(ve,{value:"no-students",disabled:!0,children:ie.circle_id?"لا يوجد طلاب في الحلقة المحددة":"اختر المعلم والحلقة أولاً"})})]}),Re.student_id&&s.jsx("p",{className:"text-sm text-red-500",children:Re.student_id})]})]})}),s.jsxs(on,{value:"memorization",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"memorization_type",className:"flex items-center gap-1 mb-2",children:["نوع السجل ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:ie.type,onValueChange:N=>Ve("type",N),children:[s.jsx(qe,{id:"memorization_type",children:s.jsx(Je,{placeholder:"اختر النوع"})}),s.jsxs(Ge,{children:[s.jsx(ve,{value:"all",children:"جميع الأنواع"}),jv.map(N=>s.jsx(ve,{value:N.value,children:N.label},N.value))]})]})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"date",className:"flex items-center gap-1 mb-2",children:["التاريخ ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(me,{id:"date",type:"date",value:ie.date||"",onChange:N=>Ve("date",N.target.value),min:new Date().toISOString().split("T")[0]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"from_surah",className:"flex items-center gap-1 mb-2",children:["من سورة ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:ie.from_surah?ie.from_surah.toString():"",onValueChange:N=>Xe("from_surah",parseInt(N)),children:[s.jsx(qe,{id:"from_surah",children:s.jsx(Je,{placeholder:"اختر السورة",children:ie.from_surah?`${ie.from_surah}. ${Ja(ie.from_surah)}`:"اختر السورة"})}),s.jsx(Ge,{className:"max-h-[300px]",children:Fi.map(N=>s.jsxs(ve,{value:N.number.toString(),children:[N.number,". ",Ja(N.number)]},N.number))})]}),Re.from_surah&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:Re.from_surah})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"to_surah",className:"flex items-center gap-1 mb-2",children:["إلى سورة ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:ie.to_surah?ie.to_surah.toString():"",onValueChange:N=>Xe("to_surah",parseInt(N)),children:[s.jsx(qe,{id:"to_surah",children:s.jsx(Je,{placeholder:"اختر السورة",children:ie.to_surah?`${ie.to_surah}. ${Ja(ie.to_surah)}`:"اختر السورة"})}),s.jsx(Ge,{className:"max-h-[300px]",children:Fi.map(N=>s.jsxs(ve,{value:N.number.toString(),children:[N.number,". ",Ja(N.number)]},N.number))})]}),Re.to_surah&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:Re.to_surah})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"from_ayah",className:"flex items-center gap-1 mb-2",children:["من آية ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(me,{id:"from_ayah",type:"number",min:1,value:ie.from_ayah||"",onChange:N=>Ve("from_ayah",parseInt(N.target.value))}),Re.from_ayah&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:Re.from_ayah})]}),s.jsxs("div",{children:[s.jsxs(ee,{htmlFor:"to_ayah",className:"flex items-center gap-1 mb-2",children:["إلى آية ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(me,{id:"to_ayah",type:"number",min:1,value:ie.to_ayah||"",onChange:N=>Ve("to_ayah",parseInt(N.target.value))}),Re.to_ayah&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:Re.to_ayah})]})]})]}),s.jsxs(on,{value:"recitation",className:"space-y-4",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-5 rounded-2xl shadow-md border border-blue-200 dark:border-blue-700",children:s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{id:"score",label:"درجة التسميع",required:!0,value:ie.score,onChange:N=>Ve("score",N)},{id:"lahn_jali",label:"اللحن الجلي",hint:"(عدد الأخطاء)",value:(Me=ie.tajweed_errors)==null?void 0:Me.lahn_jali,onChange:N=>ar("lahn_jali",N)},{id:"lahn_khafi",label:"اللحن الخفي",hint:"(عدد الأخطاء)",value:(ze=ie.tajweed_errors)==null?void 0:ze.lahn_khafi,onChange:N=>ar("lahn_khafi",N)}].map(N=>s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(ee,{htmlFor:N.id,className:"text-sm font-semibold text-gray-700 dark:text-gray-200 flex items-center gap-1 whitespace-nowrap",children:[N.label," ",N.required&&s.jsx("span",{className:"text-red-500",children:"*"}),N.hint&&s.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-400",children:N.hint})]}),s.jsx(me,{id:N.id,type:"number",min:0,max:N.id==="score"?100:void 0,dir:"rtl",className:"h-10 text-right bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg px-3 text-sm focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-500 focus:outline-none",value:N.value||"",onChange:E=>{let H=parseFloat(E.target.value);isNaN(H)&&(H=void 0),N.id==="score"&&(H>100&&(H=100),H<0&&(H=0)),N.onChange(H)}}),N.id==="score"&&Re.score&&s.jsx("p",{className:"text-xs text-red-500 mt-1 text-right",children:Re.score})]},N.id))})})}),s.jsxs("div",{children:[s.jsx(ee,{htmlFor:"notes",className:"mb-2",children:"ملاحظات"}),s.jsx($s,{id:"notes",value:ie.notes||"",onChange:N=>Ve("notes",N.target.value),placeholder:"أدخل أي ملاحظات خاصة بالتسميع...",className:"h-24"})]})]})]})}),s.jsx(bt,{dir:"rtl",className:"flex items-center justify-between",children:s.jsx("table",{className:"w-full",children:s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsxs("td",{className:"text-right",children:["  ",s.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400 whitespace-nowrap overflow-hidden overflow-ellipsis max-w-[250px]",children:ie.student_id?s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"الطالب: "}),s.jsx("span",{className:"font-semibold",children:((Se=ye.find(N=>N.id===ie.student_id))==null?void 0:Se.full_name)||"غير معروف"}),s.jsx("span",{children:" | ولي الأمر: "}),s.jsx("span",{children:((Oe=(pe=ye.find(N=>N.id===ie.student_id))==null?void 0:pe.guardian)==null?void 0:Oe.full_name)||"غير محدد"})]}):s.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"الرجاء اختيار طالب"})})]}),s.jsx("td",{children:s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(V,{type:"button",onClick:Mt,disabled:K,className:"bg-purple-700 hover:bg-purple-800 text-white text-sm px-4 py-2 rounded transition-all",children:K?"جاري الحفظ...":p?"تحديث السجل":"إضافة السجل"}),s.jsx(V,{type:"button",variant:"secondary",onClick:()=>C(!1),className:"bg-yellow-300 hover:bg-yellow-400 text-gray-800 text-sm px-4 py-2 rounded transition-all",children:"إلغاء"})]})})]})})})})]})}),s.jsx(yn,{isOpen:q,onOpenChange:Y,onConfirm:Ut,isLoading:K,title:"تأكيد حذف سجل الحفظ",description:"هل أنت متأكد من رغبتك في حذف سجل الحفظ هذا؟ لا يمكن التراجع عن هذا الإجراء بعد تنفيذه.",deleteButtonText:"نعم، احذف السجل",cancelButtonText:"إلغاء"})]})},Ks="assessments",Ys={testConnection:async()=>{try{const{count:e}=await le.from(Ks).select("*",{count:"exact",head:!0});return!0}catch(e){return console.error("خطأ في اختبار الاتصال بجدول التقييمات:",e),!1}},getAllAssessments:async()=>{try{const{data:e,error:t}=await le.from(Ks).select(`
          *,
          student:student_id (
            id, 
            full_name, 
            guardian:guardian_id(id, full_name, phone_number)
          ),
          recorder:recorded_by (id, full_name, role)
        `).order("created_at",{ascending:!1});if(t)throw t;return e||[]}catch(e){return console.error("خطأ في استرجاع تقييمات الطلاب:",e),[]}},getAssessmentsByStudentId:async e=>{try{const{data:t,error:r}=await le.from(Ks).select(`
          *,
          student:student_id (
            id, 
            full_name, 
            guardian:guardian_id(id, full_name, phone_number)
          ),
          recorder:recorded_by (id, full_name, role)
        `).eq("student_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){return console.error("خطأ في استرجاع تقييمات الطالب:",t),[]}},getAssessmentsByTeacher:async e=>{try{console.log("Fetching assessments for teacher:",e);const{data:t,error:r}=await le.from(Ks).select(`
          *,
          student:student_id (
            id, 
            full_name, 
            guardian:guardian_id(id, full_name, phone_number)
          ),
          recorder:recorded_by (id, full_name, role)
        `).eq("recorded_by",e).order("created_at",{ascending:!1});if(r)throw r;return console.log(`Found ${(t==null?void 0:t.length)||0} assessments for teacher ${e}`),t||[]}catch(t){return console.error("خطأ في استرجاع تقييمات المعلم:",t),[]}},getAssessmentById:async e=>{try{const{data:t,error:r}=await le.from(Ks).select(`
          *,
          student:student_id (id, full_name),
          recorder:recorded_by (id, full_name)
        `).eq("id",e).single();if(r)throw r;return t}catch(t){return console.error("خطأ في استرجاع التقييم:",t),null}},createAssessment:async e=>{try{e.tajweed_score!==void 0&&e.memorization_score!==void 0&&e.recitation_score!==void 0&&e.total_score===void 0&&(e.total_score=((e.tajweed_score||0)+(e.memorization_score||0)+(e.recitation_score||0))/3);const{data:t,error:r}=await Rt.from(Ks).insert([e]).select(`
          *,
          student:student_id (id, full_name),
          recorder:recorded_by (id, full_name)
        `).single();if(r)throw r;return t}catch(t){throw console.error("خطأ في إنشاء تقييم جديد:",t),t}},updateAssessment:async e=>{try{const{id:t,...r}=e;r.tajweed_score!==void 0&&r.memorization_score!==void 0&&r.recitation_score!==void 0&&r.total_score===void 0&&(r.total_score=((r.tajweed_score||0)+(r.memorization_score||0)+(r.recitation_score||0))/3);const{data:n,error:a}=await Rt.from(Ks).update(r).eq("id",t).select(`
          *,
          student:student_id (id, full_name),
          recorder:recorded_by (id, full_name)
        `).single();if(a)throw a;return n}catch(t){throw console.error("خطأ في تحديث التقييم:",t),t}},deleteAssessment:async e=>{try{const{error:t}=await Rt.from(Ks).delete().eq("id",e);if(t)throw t}catch(t){throw console.error("خطأ في حذف التقييم:",t),t}}},zm=[{value:"juz",label:"اختبار جزء"},{value:"half_quran",label:"اختبار نصف القرآن"},{value:"full_quran",label:"اختبار القرآن كامل"},{value:"periodic",label:"اختبار دوري"}];function Sv(e){const t=zm.find(r=>r.value===e);return t?t.label:"غير معروف"}function SD(e){switch(e){case"juz":return"bg-blue-500";case"half_quran":return"bg-purple-500";case"full_quran":return"bg-green-500";case"periodic":return"bg-amber-500";default:return"bg-gray-500"}}function kv(e){if(!e.from_surah||!e.to_surah)return"غير محدد";const t=aa.find(n=>n.number===e.from_surah),r=aa.find(n=>n.number===e.to_surah);return!t||!r?"غير محدد":t.number===r.number?`سورة ${t.name} (${e.from_ayah} - ${e.to_ayah})`:`من سورة ${t.name} آية ${e.from_ayah} إلى سورة ${r.name} آية ${e.to_ayah}`}function ld(e){return e==null?"غير محدد":`${e} / 100`}const aa=[{number:1,name:"الفاتحة",ayahs:7},{number:2,name:"البقرة",ayahs:286},{number:3,name:"آل عمران",ayahs:200},{number:4,name:"النساء",ayahs:176},{number:5,name:"المائدة",ayahs:120},{number:6,name:"الأنعام",ayahs:165},{number:7,name:"الأعراف",ayahs:206},{number:8,name:"الأنفال",ayahs:75},{number:9,name:"التوبة",ayahs:129},{number:10,name:"يونس",ayahs:109},{number:11,name:"هود",ayahs:123},{number:12,name:"يوسف",ayahs:111},{number:13,name:"الرعد",ayahs:43},{number:14,name:"إبراهيم",ayahs:52},{number:15,name:"الحجر",ayahs:99},{number:16,name:"النحل",ayahs:128},{number:17,name:"الإسراء",ayahs:111},{number:18,name:"الكهف",ayahs:110},{number:19,name:"مريم",ayahs:98},{number:20,name:"طه",ayahs:135},{number:21,name:"الأنبياء",ayahs:112},{number:22,name:"الحج",ayahs:78},{number:23,name:"المؤمنون",ayahs:118},{number:24,name:"النور",ayahs:64},{number:25,name:"الفرقان",ayahs:77},{number:26,name:"الشعراء",ayahs:227},{number:27,name:"النمل",ayahs:93},{number:28,name:"القصص",ayahs:88},{number:29,name:"العنكبوت",ayahs:69},{number:30,name:"الروم",ayahs:60},{number:31,name:"لقمان",ayahs:34},{number:32,name:"السجدة",ayahs:30},{number:33,name:"الأحزاب",ayahs:73},{number:34,name:"سبأ",ayahs:54},{number:35,name:"فاطر",ayahs:45},{number:36,name:"يس",ayahs:83},{number:37,name:"الصافات",ayahs:182},{number:38,name:"ص",ayahs:88},{number:39,name:"الزمر",ayahs:75},{number:40,name:"غافر",ayahs:85},{number:41,name:"فصلت",ayahs:54},{number:42,name:"الشورى",ayahs:53},{number:43,name:"الزخرف",ayahs:89},{number:44,name:"الدخان",ayahs:59},{number:45,name:"الجاثية",ayahs:37},{number:46,name:"الأحقاف",ayahs:35},{number:47,name:"محمد",ayahs:38},{number:48,name:"الفتح",ayahs:29},{number:49,name:"الحجرات",ayahs:18},{number:50,name:"ق",ayahs:45},{number:51,name:"الذاريات",ayahs:60},{number:52,name:"الطور",ayahs:49},{number:53,name:"النجم",ayahs:62},{number:54,name:"القمر",ayahs:55},{number:55,name:"الرحمن",ayahs:78},{number:56,name:"الواقعة",ayahs:96},{number:57,name:"الحديد",ayahs:29},{number:58,name:"المجادلة",ayahs:22},{number:59,name:"الحشر",ayahs:24},{number:60,name:"الممتحنة",ayahs:13},{number:61,name:"الصف",ayahs:14},{number:62,name:"الجمعة",ayahs:11},{number:63,name:"المنافقون",ayahs:11},{number:64,name:"التغابن",ayahs:18},{number:65,name:"الطلاق",ayahs:12},{number:66,name:"التحريم",ayahs:12},{number:67,name:"الملك",ayahs:30},{number:68,name:"القلم",ayahs:52},{number:69,name:"الحاقة",ayahs:52},{number:70,name:"المعارج",ayahs:44},{number:71,name:"نوح",ayahs:28},{number:72,name:"الجن",ayahs:28},{number:73,name:"المزمل",ayahs:20},{number:74,name:"المدثر",ayahs:56},{number:75,name:"القيامة",ayahs:40},{number:76,name:"الإنسان",ayahs:31},{number:77,name:"المرسلات",ayahs:50},{number:78,name:"النبأ",ayahs:40},{number:79,name:"النازعات",ayahs:46},{number:80,name:"عبس",ayahs:42},{number:81,name:"التكوير",ayahs:29},{number:82,name:"الانفطار",ayahs:19},{number:83,name:"المطففين",ayahs:36},{number:84,name:"الانشقاق",ayahs:25},{number:85,name:"البروج",ayahs:22},{number:86,name:"الطارق",ayahs:17},{number:87,name:"الأعلى",ayahs:19},{number:88,name:"الغاشية",ayahs:26},{number:89,name:"الفجر",ayahs:30},{number:90,name:"البلد",ayahs:20},{number:91,name:"الشمس",ayahs:15},{number:92,name:"الليل",ayahs:21},{number:93,name:"الضحى",ayahs:11},{number:94,name:"الشرح",ayahs:8},{number:95,name:"التين",ayahs:8},{number:96,name:"العلق",ayahs:19},{number:97,name:"القدر",ayahs:5},{number:98,name:"البينة",ayahs:8},{number:99,name:"الزلزلة",ayahs:8},{number:100,name:"العاديات",ayahs:11},{number:101,name:"القارعة",ayahs:11},{number:102,name:"التكاثر",ayahs:8},{number:103,name:"العصر",ayahs:3},{number:104,name:"الهمزة",ayahs:9},{number:105,name:"الفيل",ayahs:5},{number:106,name:"قريش",ayahs:4},{number:107,name:"الماعون",ayahs:7},{number:108,name:"الكوثر",ayahs:3},{number:109,name:"الكافرون",ayahs:6},{number:110,name:"النصر",ayahs:3},{number:111,name:"المسد",ayahs:5},{number:112,name:"الإخلاص",ayahs:4},{number:113,name:"الفلق",ayahs:5},{number:114,name:"الناس",ayahs:6}];function Cv(e){const t=aa.find(r=>r.number===e);return t?t.name:"غير معروف"}const kD=({onNavigate:e,currentUser:t})=>{var Qt,Ht,sr,$t,qt,Ve,ar,Ct;const[r,n]=h.useState([]),[a,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[m,v]=h.useState("all-students"),[x,g]=h.useState("all-teachers"),[b,y]=h.useState("all-circles"),[p,w]=h.useState(null),[S,C]=h.useState(!1),[T,O]=h.useState("all"),[$,Q]=h.useState(""),[K,A]=h.useState(!0),[_,I]=h.useState(t),[j,k]=h.useState((t==null?void 0:t.role)==="teacher"?"my-assessments":"all-assessments"),[D,z]=h.useState(!0),[M,B]=h.useState("cards"),[X,J]=h.useState(!1),[L,ne]=h.useState(null),{toast:ae}=_n(),[Z,se]=h.useState({student_id:"",date:new Date().toISOString().split("T")[0],type:"juz",from_surah:1,from_ayah:1,to_surah:1,to_ayah:1,tajweed_score:void 0,memorization_score:void 0,recitation_score:void 0,total_score:void 0,notes:"",recorded_by:""}),[re,ye]=h.useState({});h.useEffect(()=>{(async()=>{try{if(A(!0),!await Ys.testConnection()){z(!1),ae({title:"جدول تقييمات الطلاب غير موجود",description:"يرجى تنفيذ سكريبت إنشاء الجدول أولاً",variant:"destructive"}),A(!1);return}const ge=t;I(ge);const ze=new URLSearchParams(window.location.search).get("circle");if(ze&&y(ze),ge&&ge.role==="teacher"){console.log("StudentAssessments - Loading data for teacher role");const Se=await Fm(ge.id);l(Se);const pe=await Im(ge.id);f(pe),d([{id:ge.id,full_name:ge.full_name||"المعلم",role:"teacher"}]),g(ge.id);const Oe=await Ys.getAssessmentsByTeacher(ge.id);n(Oe),i(Oe)}else{console.log("StudentAssessments - Loading data for admin/superadmin role");const[Se,pe,Oe,N]=await Promise.all([Ro(),Lm(),Ys.getAllAssessments(),Ta()]);if(Se&&Se.length>0){console.log(`تم تحميل ${Se.length} طالب`);const E=Se.filter(Pe=>Pe.study_circle_id);console.log(`عدد الطلاب المرتبطين بحلقات: ${E.length} (${Math.round(E.length/Se.length*100)}%)`);const H=[...new Set(Se.map(Pe=>Pe.study_circle_id).filter(Boolean))];console.log(`معرفات الحلقات الفريدة في بيانات الطلاب: ${H.length}`,H);const ce=N.map(Pe=>Pe.id),Ne=H.filter(Pe=>ce.includes(Pe));console.log(`عدد معرفات الحلقات المطابقة: ${Ne.length} من أصل ${H.length}`),Ne.length<H.length&&console.warn("هناك معرفات حلقات في بيانات الطلاب غير موجودة في بيانات الحلقات!")}l(Se),d(pe),n(Oe),i(Oe),f(N)}A(!1)}catch(G){console.error("Error loading data for StudentAssessments:",G),ae({title:"خطأ في تحميل البيانات",description:"حدث خطأ أثناء تحميل البيانات، يرجى المحاولة مرة أخرى",variant:"destructive"}),A(!1)}})()},[t,ae]),h.useEffect(()=>{if(r.length===0)return;let R=[...r];if(x!=="all-teachers"&&(R=R.filter(G=>G.recorded_by===x)),m!=="all-students"&&(R=R.filter(G=>G.student_id===m)),b!=="all-circles"){const G=o.filter(ge=>ge.study_circle_id===b).map(ge=>ge.id);R=R.filter(ge=>G.includes(ge.student_id))}if(T!=="all"&&(R=R.filter(G=>G.type===T)),$.trim()){const G=$.toLowerCase();R=R.filter(ge=>{var H,ce,Ne,Pe,ct;const Me=o.find(st=>st.id===ge.student_id),ze=((H=Me==null?void 0:Me.full_name)==null?void 0:H.toLowerCase())||"",Se=c.find(st=>st.id===ge.recorded_by),pe=((ce=Se==null?void 0:Se.full_name)==null?void 0:ce.toLowerCase())||"",Oe=((Ne=Cv(ge.from_surah))==null?void 0:Ne.toLowerCase())||"",N=((Pe=Cv(ge.to_surah))==null?void 0:Pe.toLowerCase())||"",E=((ct=ge.notes)==null?void 0:ct.toLowerCase())||"";return ze.includes(G)||pe.includes(G)||Oe.includes(G)||N.includes(G)||E.includes(G)})}i(R)},[r,x,m,b,T,$,o,c]);const je=()=>{let R=[];if(Z.tajweed_score!==void 0&&R.push(Z.tajweed_score),Z.memorization_score!==void 0&&R.push(Z.memorization_score),Z.recitation_score!==void 0&&R.push(Z.recitation_score),R.length===0)return;const G=R.reduce((ge,Me)=>ge+Me,0)/R.length;return Math.round(G*100)/100},q=h.useMemo(()=>c.filter(R=>{if((_==null?void 0:_.role)==="teacher")return R.id===_.id;if(b!=="all-circles"){const G=u.find(ge=>ge.id===b);if(G)return G.teacher_id===R.id}return!0}),[c,_,b,u]),Y=h.useMemo(()=>{if(o.length===0)return console.log("لا توجد بيانات طلاب متاحة"),[];if(S){if(b!=="all-circles"){const G=o.filter(ge=>ge.study_circle_id===b);return console.log(`تم فلترة الطلاب للحلقة ${b} في وضع النموذج:`,G.length),G}if(x!=="all-teachers"){const G=o.filter(Se=>Se.teacher_id===x),ge=u.filter(Se=>Se.teacher_id===x).map(Se=>Se.id),Me=o.filter(Se=>Se.study_circle_id&&ge.includes(Se.study_circle_id)),ze=[...new Set([...G,...Me])];return console.log(`تم فلترة الطلاب للمعلم ${x} في وضع النموذج:`,ze.length),ze}return console.log("عرض جميع الطلاب في وضع النموذج:",o.length),o}const R=o.filter(G=>{if(x!=="all-teachers"){const ge=u.filter(Me=>Me.teacher_id===x).map(Me=>Me.id);if(G.teacher_id!==x&&!(G.study_circle_id&&ge.includes(G.study_circle_id)))return!1}return!(b!=="all-circles"&&G.study_circle_id!==b)});return console.log("تم فلترة الطلاب للعرض العادي:",{total:o.length,filtered:R.length,selectedTeacher:x,selectedCircle:b}),R},[o,x,b,S,u]),oe=h.useMemo(()=>u.filter(R=>x!=="all-teachers"?R.teacher_id===x:!0),[u,x]),De=R=>{if(se(G=>({...G,recorded_by:R})),x!==R&&R!=="all-teachers"){g(R);const G=u.filter(ge=>ge.teacher_id===R);G.length===1?W(G[0].id):G.length===0&&y("all-circles")}},W=R=>{if(y(R),R!=="all-circles"){const G=u.find(ge=>ge.id===R);G&&G.teacher_id&&G.teacher_id!==x&&(g(G.teacher_id),se(ge=>({...ge,recorded_by:G.teacher_id})))}},ie=(R,G)=>{se(ge=>{var pe;const Me={...ge,[R]:G},ze=R==="from_surah"?"from_ayah":"to_ayah",Se=((pe=aa.find(Oe=>Oe.number===G))==null?void 0:pe.ayahs)||1;return ge[ze]>Se&&(Me[ze]=1),Me})},Ae=()=>{w(null),se({student_id:"",date:new Date().toISOString().split("T")[0],type:"juz",from_surah:1,from_ayah:1,to_surah:1,to_ayah:1,tajweed_score:void 0,memorization_score:void 0,recitation_score:void 0,total_score:void 0,notes:"",recorded_by:_?_.id:""}),ye({}),C(!0)},Re=R=>{w(R),se({student_id:R.student_id,date:R.date.split("T")[0],type:R.type,from_surah:R.from_surah,from_ayah:R.from_ayah,to_surah:R.to_surah,to_ayah:R.to_ayah,tajweed_score:R.tajweed_score,memorization_score:R.memorization_score,recitation_score:R.recitation_score,total_score:R.total_score,notes:R.notes||"",recorded_by:R.recorded_by}),ye({}),C(!0)},It=()=>{const R={};return Z.student_id||(R.student_id="يرجى اختيار الطالب"),Z.recorded_by||(R.recorded_by="يرجى اختيار المعلم المسجل"),Z.from_surah>Z.to_surah?R.from_surah="يجب أن تكون سورة البداية قبل أو تساوي سورة النهاية":Z.from_surah===Z.to_surah&&Z.from_ayah>Z.to_ayah&&(R.from_ayah="في نفس السورة، يجب أن تكون آية البداية قبل أو تساوي آية النهاية"),Z.tajweed_score!==void 0&&(Z.tajweed_score<0||Z.tajweed_score>100)&&(R.tajweed_score="يجب أن تكون الدرجة بين 0 و 100"),Z.memorization_score!==void 0&&(Z.memorization_score<0||Z.memorization_score>100)&&(R.memorization_score="يجب أن تكون الدرجة بين 0 و 100"),Z.recitation_score!==void 0&&(Z.recitation_score<0||Z.recitation_score>100)&&(R.recitation_score="يجب أن تكون الدرجة بين 0 و 100"),ye(R),Object.keys(R).length===0},Xe=async()=>{if(It())try{A(!0);const R=je(),G={...Z,total_score:R};let ge;if(p){const Me={id:p.id,...G};try{await Ys.updateAssessment(Me),ae({title:"تم تحديث التقييم بنجاح",className:"bg-green-50 border-green-200"});const ze=r.map(Se=>Se.id===p.id?{...Se,...Me}:Se);n(ze),C(!1)}catch(ze){ae({title:"خطأ في تحديث التقييم",description:ze.message||"حدث خطأ غير متوقع",variant:"destructive"})}}else try{const Me=await Ys.createAssessment(G);if(Me&&Me.id){ae({title:"تم إضافة التقييم بنجاح",className:"bg-green-50 border-green-200"});const ze={id:Me.id,...G};n([ze,...r]),C(!1)}else throw new Error("فشل في إضافة التقييم")}catch(Me){ae({title:"خطأ في إضافة التقييم",description:Me.message||"حدث خطأ غير متوقع",variant:"destructive"})}}catch(R){console.error("Error saving assessment:",R),ae({title:"خطأ في حفظ التقييم",description:"حدث خطأ غير متوقع أثناء حفظ التقييم",variant:"destructive"})}finally{A(!1)}},pt=async R=>{ne(R),J(!0)},Mt=async()=>{if(L)try{A(!0),await Ys.deleteAssessment(L.id),ae({title:"تم حذف التقييم بنجاح",className:"bg-green-50 border-green-200"}),n(r.filter(R=>R.id!==L.id))}catch(R){console.error("Error deleting assessment:",R),ae({title:"خطأ في حذف التقييم",description:R.message||"حدث خطأ غير متوقع أثناء حذف التقييم",variant:"destructive"})}finally{A(!1)}},xt=R=>{var pe,Oe;const G=R.student,ge=o.find(N=>N.id===R.student_id),Me=G||ge,ze=c.find(N=>N.id===R.recorded_by);let Se;return(pe=Me==null?void 0:Me.guardian)!=null&&pe.full_name?Se=Me.guardian.full_name:(Oe=ge==null?void 0:ge.guardian)!=null&&Oe.full_name&&(Se=ge.guardian.full_name),{student:Me?Me.full_name:"طالب غير معروف",guardian:Se||"ولي أمر غير مسجل",hasGuardian:!!Se,teacher:ze?ze.full_name:"معلم غير معروف",type:Sv(R.type),typeColor:SD(R.type),range:kv(R),score:ld(R.total_score),date:new Date(R.date).toLocaleDateString("ar-SA")}};if(!D)return s.jsxs("div",{className:"container mx-auto py-6 text-center",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"تقييمات الطلاب"}),s.jsxs("div",{className:"p-6 bg-red-50 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-bold mb-2 text-red-700",children:"جدول تقييمات الطلاب غير موجود"}),s.jsx("p",{className:"mb-4",children:"يرجى التواصل مع مسؤول النظام لإنشاء الجدول المطلوب."}),s.jsx(V,{onClick:()=>e("/database-management"),children:"الذهاب إلى إدارة قاعدة البيانات"})]})]});const Ut=async()=>{try{if(A(!0),ae({title:"جاري تحديث البيانات...",description:"يرجى الانتظار"}),(_==null?void 0:_.role)==="teacher"){const R=await Fm(_.id);l(R);const G=await Im(_.id);f(G);const ge=await Ys.getAssessmentsByTeacher(_.id);n(ge),i(ge)}else{const[R,G,ge,Me]=await Promise.all([Ro(),Lm(),Ys.getAllAssessments(),Ta()]);l(R),d(G),n(ge),i(ge),f(Me)}ae({title:"تم تحديث البيانات بنجاح",className:"bg-green-50 border-green-200"})}catch(R){console.error("Error refreshing data:",R),ae({title:"خطأ في تحديث البيانات",description:"حدث خطأ أثناء تحديث البيانات، يرجى المحاولة مرة أخرى",variant:"destructive"})}finally{A(!1)}};return s.jsxs("div",{className:"container mx-auto py-6",dir:"rtl",children:[s.jsxs(nt,{className:"border border-green-300 shadow-xl rounded-2xl overflow-hidden",children:[s.jsx(ut,{className:"pb-3 bg-gradient-to-r from-green-800 via-green-700 to-green-600 border-b border-green-300 rounded-t-2xl shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(dt,{className:"text-xl md:text-2xl font-extrabold text-blue-50 flex items-center gap-2",children:[s.jsx(Mw,{className:"h-5 w-5 text-yellow-300"}),"تقييمات الطلاب"]}),s.jsx(Dt,{className:"text-xs md:text-sm text-blue-100",children:"هنا يمكنك عرض وتسجيل تقييمات الطلاب بشكل تفصيلي"})]}),s.jsxs(V,{variant:"outline",className:"flex items-center gap-2 rounded-3xl bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white shadow-lg hover:scale-105 transition-transform duration-200 px-4 py-1.5 font-semibold",onClick:Ut,children:[s.jsx(Un,{className:"h-4 w-4"}),"تحديث"]})]})}),s.jsx(Ze,{children:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 bg-white dark:bg-gray-900 p-4 rounded-2xl shadow-md border border-green-200 dark:border-green-700",children:[s.jsx("div",{className:"flex-1 min-w-[180px]",children:s.jsx(me,{placeholder:"🔍 بحث عن طالب أو ولي أمر أو سورة أو ملاحظات...",value:$,onChange:R=>Q(R.target.value),className:"w-full rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green focus:border-islamic-green text-sm text-gray-800 dark:text-gray-200 transition-all duration-200"})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(Qe,{value:x,onValueChange:R=>{g(R),y("all-circles"),v("all-students")},children:[s.jsx(qe,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(Je,{placeholder:"👨‍🏫 اختر معلماً"})}),s.jsxs(Ge,{children:[s.jsx(ve,{value:"all-teachers",children:"جميع المعلمين"}),q.length>0?q.map(R=>s.jsxs(ve,{value:R.id,children:[R.full_name??`المعلم ${R.id.slice(0,4)}`,R.role&&(R.role==="teacher"?" (معلم)":` (${R.role==="admin"?"مشرف":R.role})`)]},R.id)):s.jsx(ve,{disabled:!0,value:"__no__",children:"لا يوجد معلمين أو مشرفين"})]})]})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(Qe,{value:b,onValueChange:R=>{if(console.log("تم اختيار الحلقة:",R),y(R),v("all-students"),R!=="all-circles"){const G=o.filter(ge=>ge.study_circle_id===R);console.log(`الطلاب في الحلقة المحددة (${R}):`,G.length),console.log("معرفات الطلاب في الحلقة:",G.map(ge=>ge.id)),G.length===0&&(console.log("لا يوجد طلاب في هذه الحلقة!"),console.log("جميع معرفات الحلقات المتاحة في الطلاب:",[...new Set(o.map(ge=>ge.study_circle_id))].filter(Boolean).join(", ")))}},disabled:x==="all-teachers"&&oe.length===0,children:[s.jsx(qe,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(Je,{placeholder:x==="all-teachers"?"📚 جميع الحلقات":oe.length===0?"لا توجد حلقات":"اختر حلقة"})}),s.jsxs(Ge,{children:[s.jsx(ve,{value:"all-circles",children:"جميع الحلقات"}),oe.map(R=>s.jsxs(ve,{value:R.id,children:[R.name||`حلقة ${R.id}`," ",x==="all-teachers"&&R.teacher?` - ${R.teacher.full_name}`:""," (",R.students_count," طالب)"]},R.id))]})]})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(Qe,{value:m,onValueChange:R=>{if(console.log("تم اختيار الطالب:",R),v(R),R!=="all-students"){const G=o.find(ge=>ge.id===R);console.log("معلومات الطالب المحدد:",{id:G==null?void 0:G.id,name:G==null?void 0:G.full_name,study_circle_id:G==null?void 0:G.study_circle_id,teacher_id:G==null?void 0:G.teacher_id})}},disabled:Y.length===0,children:[s.jsx(qe,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(Je,{placeholder:Y.length===0?"لا يوجد طلاب":"👦 جميع الطلاب"})}),s.jsxs(Ge,{children:[s.jsx(ve,{value:"all-students",children:"جميع الطلاب"}),Y.map(R=>s.jsx(ve,{value:R.id,children:s.jsxs("div",{className:"flex flex-col text-sm",children:[s.jsx("span",{className:"font-medium",children:R.full_name}),R.guardian&&R.guardian.full_name&&s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ولي الأمر: ",R.guardian.full_name]})]})},R.id))]})]})}),s.jsx("div",{className:"min-w-[140px]",children:s.jsxs(Qe,{value:T,onValueChange:O,disabled:Y.length===0,children:[s.jsx(qe,{className:"rounded-xl border border-green-300 bg-green-50 shadow-sm focus:ring-2 focus:ring-islamic-green hover:scale-102 transition-transform duration-200 text-sm",children:s.jsx(Je,{placeholder:"اختر نوع التقييم"})}),s.jsxs(Ge,{children:[s.jsx(ve,{value:"all",children:"جميع الأنواع"}),zm.map(R=>s.jsx(ve,{value:R.value,children:R.label},R.value))]})]})}),s.jsxs(V,{onClick:Ae,className:"bg-green-600 hover:bg-green-700 text-white rounded-xl flex items-center gap-2 px-3 py-1.5 shadow-md hover:scale-105 transition-transform duration-200 text-sm font-semibold ring-1 ring-green-500/30 hover:ring-2 hover:ring-green-500/50 active:scale-95",children:[s.jsx(Pr,{className:"w-3 h-3"}),"إضافة سجل جديد"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 bg-white dark:bg-gray-900 p-4 rounded-2xl shadow-md border border-green-200 dark:border-green-700",children:[s.jsx(Do,{value:j,onValueChange:k,className:"w-full md:w-[420px] bg-green-50 rounded-xl shadow-inner p-1",children:s.jsxs(hi,{className:"grid w-full grid-cols-2 rounded-xl bg-white dark:bg-gray-900 shadow-sm ring-1 ring-green-300",children:[s.jsx(ur,{value:"all-records",className:`\r
                                flex items-center justify-center gap-2 text-sm font-medium\r
                                rounded-lg\r
                                text-green-800\r
                                hover:bg-green-100 hover:text-green-900\r
                                data-[state=active]:bg-islamic-green\r
                                data-[state=active]:text-white\r
                                transition-all duration-300\r
                              `,children:"📋 جميع السجلات"}),s.jsx(ur,{value:"my-records",className:`\r
                              flex items-center justify-center gap-2 text-sm font-medium\r
                              rounded-lg\r
                              text-green-800\r
                              hover:bg-green-100 hover:text-green-900\r
                              data-[state=active]:bg-islamic-green\r
                              data-[state=active]:text-white\r
                              transition-all duration-300\r
                            `,children:"👤 سجلاتي"})]})}),s.jsxs("div",{className:"flex items-center gap-2 border rounded-lg p-1 bg-green-50 dark:bg-green-900 shadow-sm",children:[s.jsx(V,{variant:M==="table"?"default":"ghost",size:"sm",onClick:()=>B("table"),className:"flex items-center justify-center w-10 h-10 p-0 rounded-lg hover:bg-green-100 hover:scale-105 transition-transform duration-200",title:"عرض جدول",children:s.jsx(Hw,{className:"w-5 h-5 text-green-800"})}),s.jsx(V,{variant:M==="cards"?"default":"ghost",size:"sm",onClick:()=>B("cards"),className:"flex items-center justify-center w-10 h-10 p-0 rounded-lg hover:bg-green-100 hover:scale-105 transition-transform duration-200",title:"عرض بطاقات",children:s.jsx(Bw,{className:"w-5 h-5 text-green-800"})})]})]}),K?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),s.jsx("p",{className:"mt-4",children:"جاري تحميل البيانات..."})]}):s.jsx(s.Fragment,{children:a.length===0?s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-xl text-gray-600",children:"لا توجد تقييمات متطابقة مع معايير التصفية"}),s.jsx(V,{variant:"outline",className:"mt-4",onClick:()=>{g((_==null?void 0:_.role)==="teacher"?_.id:"all-teachers"),v("all-students"),y("all-circles"),O("all"),Q("")},children:"إعادة تعيين الفلاتر"})]}):M==="table"?s.jsx("div",{className:"overflow-x-auto rounded-md border",children:s.jsxs(Rs,{children:[s.jsx(Is,{children:s.jsxs(nr,{children:[s.jsx(Be,{className:"text-right",children:"الطالب"}),s.jsx(Be,{className:"text-right",children:"المعلم"}),s.jsx(Be,{className:"text-right",children:"النوع"}),s.jsx(Be,{className:"text-right",children:"النطاق"}),s.jsx(Be,{className:"text-right",children:"الدرجة"}),s.jsx(Be,{className:"text-right",children:"التاريخ"}),s.jsx(Be,{className:"text-right",children:"الإجراءات"})]})}),s.jsx(Ms,{children:a.map(R=>{const G=xt(R);return s.jsxs(nr,{children:[s.jsx(Fe,{className:"font-medium",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:G.student}),G.hasGuardian&&s.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[s.jsx("span",{className:"font-medium text-blue-600",children:"ولي الأمر:"}),s.jsx("span",{children:G.guardian})]})]})}),s.jsx(Fe,{children:G.teacher}),s.jsx(Fe,{children:s.jsx(it,{className:`bg-${G.typeColor}-100 text-${G.typeColor}-800 border-${G.typeColor}-200`,children:G.type})}),s.jsx(Fe,{dir:"rtl",children:G.range}),s.jsx(Fe,{children:s.jsx(it,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:G.score})}),s.jsx(Fe,{children:G.date}),s.jsx(Fe,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>Re(R),children:s.jsx(lr,{className:"h-4 w-4"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>pt(R),children:s.jsx(Sr,{className:"h-4 w-4 text-red-500"})})]})})]},R.id)})})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(R=>{const G=xt(R);return o.find(ge=>ge.id===R.student_id),s.jsxs(nt,{className:"overflow-hidden border border-gray-200 hover:border-gray-300 transition-all duration-200",children:[s.jsxs(ut,{className:"pb-2",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx(it,{className:`bg-${G.typeColor}-100 text-${G.typeColor}-800 border-${G.typeColor}-200`,children:G.type}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>Re(R),className:"h-8 w-8",children:s.jsx(lr,{className:"h-4 w-4"})}),s.jsx(V,{variant:"ghost",size:"icon",onClick:()=>pt(R),className:"h-8 w-8",children:s.jsx(Sr,{className:"h-4 w-4 text-red-500"})})]})]}),s.jsx(dt,{className:"text-xl mt-1",children:G.student}),G.hasGuardian&&s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"font-medium text-blue-600",children:"ولي الأمر:"}),s.jsx("span",{children:G.guardian})]})]}),s.jsxs(Ze,{className:"pb-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"المعلم"}),s.jsx("p",{className:"font-medium",children:G.teacher})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"التاريخ"}),s.jsx("p",{className:"font-medium",children:G.date})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("p",{className:"text-gray-500",children:"النطاق"}),s.jsx("p",{className:"font-medium",dir:"rtl",children:G.range})]})]}),s.jsxs("div",{className:"mt-3 border-t pt-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(g4,{className:"w-5 h-5 text-yellow-500"}),s.jsx("span",{className:"font-semibold",children:"الدرجة الكلية"})]}),s.jsx(it,{className:"text-lg py-1 px-3 bg-yellow-100 text-yellow-800 border-yellow-200",children:G.score})]}),(R.tajweed_score!==void 0||R.memorization_score!==void 0||R.recitation_score!==void 0)&&s.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[R.tajweed_score!==void 0&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500",children:"التجويد"}),s.jsx("p",{className:"font-medium",children:ld(R.tajweed_score)})]}),R.memorization_score!==void 0&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500",children:"الحفظ"}),s.jsx("p",{className:"font-medium",children:ld(R.memorization_score)})]}),R.recitation_score!==void 0&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500",children:"التلاوة"}),s.jsx("p",{className:"font-medium",children:ld(R.recitation_score)})]})]})]}),R.notes&&s.jsxs("div",{className:"mt-3 border-t pt-3",children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"ملاحظات"}),s.jsx("p",{className:"text-sm mt-1 text-gray-700",children:R.notes})]})]})]},R.id)})})})]})})]}),s.jsx(St,{open:S,onOpenChange:R=>{if(!R){const G=(_==null?void 0:_.role)==="teacher"?_.id:"all-teachers";x!==G&&g(G),b!=="all-circles"&&y("all-circles")}C(R)},children:s.jsxs(yt,{dir:"rtl",className:"sm:max-w-[520px] w-full rounded-xl p-3 shadow-lg bg-gradient-to-r from-blue-50 to-green-50 border border-gray-100",children:[s.jsxs(Pt,{className:"pb-1",children:[s.jsx(Ot,{className:"text-xl font-bold text-center",children:s.jsx("h3",{className:"text-center leading-tight text-green-800 bg-gradient-to-r from-green-100 to-blue-100 py-2 px-3 rounded-lg",children:p?"✏️ تعديل تقييم الطالب":"✨ إضافة تقييم طالب جديد"})}),p&&Y.length>0&&s.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-100 rounded-md",children:s.jsxs("div",{className:"flex flex-col gap-1 text-center",children:[s.jsxs("span",{className:"text-sm font-medium",children:[s.jsx("span",{className:"text-blue-700",children:"الطالب:"})," ",(Qt=Y.find(R=>R.id===p.student_id))==null?void 0:Qt.full_name]}),s.jsxs("span",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"text-blue-700",children:"ولي الأمر:"})," ",((sr=(Ht=Y.find(R=>R.id===p.student_id))==null?void 0:Ht.guardian)==null?void 0:sr.full_name)||"لم يتم تسجيل بيانات ولي الأمر"]})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 md:p-4 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs(Do,{defaultValue:"basic",className:"w-full",children:[s.jsxs(hi,{className:"flex flex-row-reverse w-full mb-3 bg-gradient-to-r from-blue-100 to-green-100 p-1 rounded-lg",children:[s.jsx(ur,{value:"basic",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-green-800 data-[state=active]:shadow-sm",children:s.jsx("span",{className:"flex items-center justify-center gap-1",children:"📋 معلومات أساسية"})}),s.jsx(ur,{value:"range",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-green-800 data-[state=active]:shadow-sm",children:s.jsx("span",{className:"flex items-center justify-center gap-1",children:"📖 نطاق الاختبار"})}),s.jsx(ur,{value:"scores",className:"flex-1 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-green-800 data-[state=active]:shadow-sm",children:s.jsx("span",{className:"flex items-center justify-center gap-1",children:"🏆 الدرجات"})})]}),s.jsx(on,{value:"basic",className:"mt-0",children:s.jsxs("div",{className:"grid gap-3 py-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"grid gap-1 order-last ",children:[s.jsxs(ee,{htmlFor:"recorded_by",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["المسجل ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:Z.recorded_by||(_?_.id:""),onValueChange:De,children:[s.jsx(qe,{id:"recorded_by",className:"h-9 bg-white text-right",children:s.jsx(Je,{placeholder:"اختر المعلم"})}),s.jsx(Ge,{className:" text-right",children:q.length>0?q.map(R=>s.jsx(ve,{value:R.id,className:" text-right",children:s.jsx("div",{className:"flex flex-col text-right",children:s.jsx("span",{className:"font-medium",children:R.full_name??`المعلم ${R.id.slice(0,4)}`})})},R.id)):s.jsx(ve,{disabled:!0,value:"no-teachers",children:"لا يوجد معلمين متاحين"})})]}),re.recorded_by&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:re.recorded_by})]}),s.jsxs("div",{className:"grid gap-1 order-first",children:[s.jsx(ee,{htmlFor:"circle_info",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:"الحلقة"}),s.jsxs(Qe,{value:b!=="all-circles"?b:"",onValueChange:W,children:[s.jsx(qe,{id:"circle_info",className:"h-9 bg-white text-right",children:s.jsx(Je,{placeholder:"اختر الحلقة"})}),s.jsx(Ge,{className:" text-right",children:oe.length>0?oe.map(R=>s.jsx(ve,{value:R.id,className:" text-right",children:R.name||`حلقة ${R.id}`},R.id)):s.jsx(ve,{disabled:!0,value:"no-circles",children:"لا توجد حلقات متاحة"})})]})]})]}),s.jsxs("div",{className:"grid gap-1",children:[s.jsxs(ee,{htmlFor:"student_id",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["الطالب ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:Z.student_id,onValueChange:R=>se({...Z,student_id:R}),children:[s.jsx(qe,{id:"student_id",className:"h-9 bg-white text-right",children:s.jsx(Je,{placeholder:"اختر الطالب"})}),s.jsx(Ge,{className:"text-right max-h-[200px]",children:Y.length>0?Y.map(R=>{var G,ge;return s.jsx(ve,{value:R.id,className:"text-right",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:R.full_name}),s.jsxs("span",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"text-blue-700",children:"ولي الأمر:"})," ",((ge=(G=Y.find(Me=>Me.id===Z.student_id))==null?void 0:G.guardian)==null?void 0:ge.full_name)||"لم يتم تسجيل بيانات ولي الأمر"]})]})},R.id)}):s.jsx(ve,{disabled:!0,value:"no-students",children:b!=="all-circles"?"لا يوجد طلاب في هذه الحلقة":x!=="all-teachers"?"لا يوجد طلاب لهذا المعلم":"لا يوجد طلاب متاحين"})})]}),re.student_id&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:re.student_id})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"grid gap-1 order-last",children:[s.jsxs(ee,{htmlFor:"date",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["تاريخ الاختبار ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(me,{id:"date",type:"date",className:"h-9 bg-white text-right",value:Z.date,onChange:R=>se({...Z,date:R.target.value}),min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"grid gap-1 order-first",children:[s.jsxs(ee,{htmlFor:"type",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["نوع الاختبار ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:Z.type,onValueChange:R=>se({...Z,type:R}),children:[s.jsx(qe,{id:"type",className:"h-9 bg-white text-right",children:s.jsx(Je,{placeholder:"اختر النوع"})}),s.jsx(Ge,{className:" text-right",children:zm.map(R=>s.jsx(ve,{value:R.value,children:R.label},R.value))})]})]})]}),s.jsxs("div",{className:"grid gap-1",children:[s.jsx(ee,{htmlFor:"notes",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:"ملاحظات"}),s.jsx($s,{id:"notes",value:Z.notes||"",onChange:R=>se({...Z,notes:R.target.value}),placeholder:"أدخل ملاحظات إضافية",className:"min-h-[70px] bg-white text-right"})]})]})}),s.jsx(on,{value:"range",className:"mt-0",children:s.jsxs("div",{className:"grid gap-3 py-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"grid gap-1 order-last",children:[s.jsxs(ee,{htmlFor:"from_ayah",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["من آية ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(me,{id:"from_ayah",type:"number",className:"h-9 bg-white text-right",min:"1",max:(($t=aa.find(R=>R.number===Z.from_surah))==null?void 0:$t.ayahs)||1,value:Z.from_ayah,onChange:R=>se({...Z,from_ayah:parseInt(R.target.value)})}),re.from_ayah&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:re.from_ayah})]}),s.jsxs("div",{className:"grid gap-1 order-first",children:[s.jsxs(ee,{htmlFor:"from_surah",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["من سورة ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:(qt=Z.from_surah)==null?void 0:qt.toString(),onValueChange:R=>ie("from_surah",parseInt(R)),children:[s.jsx(qe,{id:"from_surah",className:"h-9 bg-white text-right",children:s.jsx(Je,{placeholder:"اختر السورة"})}),s.jsx(Ge,{className:" text-right max-h-[200px]",children:aa.map(R=>s.jsxs(ve,{value:R.number.toString(),children:[R.name," (",R.number,")"]},R.number))})]}),re.from_surah&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:re.from_surah})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"grid gap-1 order-last",children:[s.jsxs(ee,{htmlFor:"to_surah",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["إلى سورة ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(Qe,{value:(Ve=Z.to_surah)==null?void 0:Ve.toString(),onValueChange:R=>ie("to_surah",parseInt(R)),children:[s.jsx(qe,{id:"to_surah",className:"h-9 bg-white text-right",children:s.jsx(Je,{placeholder:"اختر السورة"})}),s.jsx(Ge,{className:" text-right max-h-[200px]",children:aa.map(R=>s.jsxs(ve,{value:R.number.toString(),children:[R.name," (",R.number,")"]},R.number))})]}),re.to_surah&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:re.to_surah})]}),s.jsxs("div",{className:"grid gap-1 order-first",children:[s.jsxs(ee,{htmlFor:"to_ayah",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:["إلى آية ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(me,{id:"to_ayah",type:"number",className:"h-9 bg-white text-right",min:"1",max:((ar=aa.find(R=>R.number===Z.to_surah))==null?void 0:ar.ayahs)||1,value:Z.to_ayah,onChange:R=>se({...Z,to_ayah:parseInt(R.target.value)})}),re.to_ayah&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:re.to_ayah})]})]}),s.jsx("div",{dir:"rtl",className:"py-3 px-4 mt-2 bg-blue-50 rounded-lg text-sm border border-blue-100",children:s.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[s.jsx("span",{children:"📖 نطاق الاختبار:"}),s.jsx("span",{className:"font-bold",children:Z.from_surah&&Z.to_surah?kv(Z):"غير محدد بعد"})]})})]})}),s.jsx(on,{value:"scores",className:"mt-0",children:s.jsxs("div",{className:"grid gap-3 py-2",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"grid gap-1 order-3",children:[s.jsx(ee,{htmlFor:"tajweed_score",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:s.jsx("span",{children:"درجة التجويد"})}),s.jsx(me,{id:"tajweed_score",type:"text",inputMode:"decimal",dir:"rtl",className:"h-9 bg-white text-right",value:Z.tajweed_score!==void 0?Z.tajweed_score:"",onChange:R=>{let G=parseFloat(R.target.value);isNaN(G)?G=void 0:G>100?G=100:G<0&&(G=0),se({...Z,tajweed_score:G})},placeholder:"0 - 100"}),re.tajweed_score&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:re.tajweed_score})]}),s.jsxs("div",{className:"grid gap-1 order-2",children:[s.jsx(ee,{htmlFor:"memorization_score",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:s.jsx("span",{children:"درجة الحفظ"})}),s.jsx(me,{id:"memorization_score",type:"text",inputMode:"decimal",dir:"rtl",className:"h-9 bg-white text-right",value:Z.memorization_score!==void 0?Z.memorization_score:"",onChange:R=>{let G=parseFloat(R.target.value);isNaN(G)?G=void 0:G>100?G=100:G<0&&(G=0),se({...Z,memorization_score:G})},placeholder:"0 - 100"}),re.memorization_score&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:re.memorization_score})]}),s.jsxs("div",{className:"grid gap-1 order-1",children:[s.jsx(ee,{htmlFor:"recitation_score",className:"text-xs font-medium text-gray-700 flex flex-row-reverse items-center gap-1",children:s.jsx("span",{children:"درجة التلاوة"})}),s.jsx(me,{id:"recitation_score",type:"text",inputMode:"decimal",dir:"rtl",className:"h-9 bg-white text-right",value:Z.recitation_score!==void 0?Z.recitation_score:"",onChange:R=>{let G=parseFloat(R.target.value);isNaN(G)?G=void 0:G>100?G=100:G<0&&(G=0),se({...Z,recitation_score:G})},placeholder:"0 - 100"}),re.recitation_score&&s.jsx("p",{className:"text-xs text-red-500 text-right",children:re.recitation_score})]})]}),s.jsxs("div",{dir:"rtl",className:"p-4 bg-gradient-to-r from-amber-50 to-yellow-50 rounded-lg mt-3 border border-amber-100",children:[s.jsxs("div",{className:"flex flex-row-reverse justify-between items-center",children:[s.jsx("span",{className:"text-lg font-bold text-amber-700 px-3 py-1 bg-white rounded-lg shadow-sm",children:je()!==void 0?je():"-"}),s.jsx(ee,{htmlFor:"total_score",className:"font-bold text-right text-sm text-amber-800",children:"الدرجة الكلية:"})]}),s.jsx("p",{className:"text-xs text-amber-700 mt-2 text-right",children:"(يتم حساب الدرجة الكلية تلقائيًا كمتوسط للدرجات المدخلة)"})]})]})})]}),s.jsxs(bt,{dir:"rtl",className:"flex space-x-2 rtl:space-x-reverse justify-end",children:[s.jsx(V,{type:"button",onClick:Xe,disabled:K,children:K?"جاري الحفظ...":p?"✓ تحديث التقييم":"✓ إضافة التقييم"}),s.jsx(V,{type:"button",variant:"secondary",onClick:()=>C(!1),children:"إلغاء"})]})]})]})}),s.jsx(yn,{isOpen:X,onOpenChange:J,onConfirm:Mt,isLoading:K,title:"تأكيد حذف التقييم",description:"هل أنت متأكد من رغبتك في حذف هذا التقييم؟",itemDetails:L?{الطالب:((Ct=L.student)==null?void 0:Ct.full_name)||"-",النوع:Sv(L.type),التاريخ:new Date(L.date).toLocaleDateString("ar-SA")}:null,detailsLabels:[{key:"الطالب",label:"الطالب"},{key:"النوع",label:"نوع التقييم"},{key:"التاريخ",label:"تاريخ التقييم"}],deleteButtonText:"نعم، احذف التقييم",cancelButtonText:"إلغاء"})]})};class Ev extends h.Component{constructor(){super(...arguments);Si(this,"state",{hasError:!1,error:null,errorInfo:null});Si(this,"handleReload",()=>{window.location.reload()});Si(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})})}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,n){console.error("Error boundary caught an error:",r,n),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?s.jsx("div",{className:"container mx-auto py-6 max-w-2xl",children:s.jsxs(nt,{className:"border-red-200",children:[s.jsx(ut,{children:s.jsx(dt,{className:"text-red-600 text-center",children:"حدث خطأ غير متوقع"})}),s.jsxs(Ze,{className:"space-y-4",children:[s.jsx("p",{className:"text-center text-gray-600",children:"عذراً، حدث خطأ في التطبيق. يرجى المحاولة مرة أخرى."}),this.state.error&&s.jsxs("div",{className:"bg-gray-100 p-4 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-sm mb-2",children:"تفاصيل الخطأ:"}),s.jsx("p",{className:"text-sm text-red-600 font-mono",children:this.state.error.message})]}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx(V,{onClick:this.handleReset,variant:"outline",children:"المحاولة مرة أخرى"}),s.jsx(V,{onClick:this.handleReload,children:"إعادة تحميل الصفحة"})]}),!1]})]})}):this.props.children}}const CD=new N3,ED=()=>{const[e,t]=h.useState("/"),[r,n]=h.useState(null),[a,i]=h.useState(null),[o,l]=h.useState(!1),c=()=>{l(!o)};h.useEffect(()=>{const v=()=>{const x=window.location.hash;if(x){const g=x.substring(1);t(g)}else t("/")};return v(),window.addEventListener("hashchange",v),()=>{window.removeEventListener("hashchange",v)}},[]),h.useEffect(()=>{const v=localStorage.getItem("currentUser"),x=localStorage.getItem("userRole");if(v&&x)try{const g=JSON.parse(v);i(g),n(x),console.log("App - Loaded user from localStorage:",{user:g,role:x,userRole:g.role}),g.role!==x&&console.warn("Warning: Role mismatch in localStorage:",{profileRole:g.role,storedRole:x})}catch(g){console.error("Error parsing stored user:",g)}},[]);const d=v=>{v.startsWith("/")?(t(v),v!=="/"?window.location.hash=v:history.pushState("",document.title,window.location.pathname+window.location.search)):window.location.href=v},u=async v=>{console.log("Login successful with user:",v);const x=["superadmin","admin","teacher"],g={id:v.id,full_name:v.full_name,role:x.includes(v.role)?v.role:"teacher",username:"",password_hash:""};localStorage.setItem("currentUser",JSON.stringify(g)),localStorage.setItem("userRole",v.role),console.log("Saving user to state:",{profile:g,role:v.role}),i(g),n(v.role),d("/")},f=()=>{localStorage.removeItem("currentUser"),localStorage.removeItem("userRole"),i(null),n(null),t("/"),history.pushState("",document.title,window.location.pathname+window.location.search)},m=()=>{switch(e){case"/":return s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/login":return s.jsx(fv,{onLogin:u,onNavigate:d});case"/parent-inquiry":return s.jsx(r7,{onNavigate:d});case"/students":return s.jsx(lD,{onNavigate:d,userRole:r,userId:a==null?void 0:a.id});case"/students-list":return r==="superadmin"||r==="admin"||r==="teacher"?s.jsx(cD,{onNavigate:d,userRole:r,userId:a==null?void 0:a.id}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/database-management":return r==="superadmin"||r==="admin"?s.jsx(w7,{onNavigate:d}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/user-management":return r==="superadmin"||r==="admin"?s.jsx(Z7,{onNavigate:d,userRole:r}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/guardians":case"/guardians-list":return r==="superadmin"||r==="admin"||r==="teacher"?s.jsx(sD,{onNavigate:d,userRole:r,userId:a==null?void 0:a.id}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/study-circles":return r==="superadmin"||r==="admin"||r==="teacher"?s.jsx(uD,{onNavigate:d,userRole:r,userId:a==null?void 0:a.id}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/study-circle-schedules":return r==="superadmin"||r==="admin"||r==="teacher"?s.jsx(hD,{onNavigate:d,userRole:r,userId:a==null?void 0:a.id}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/supabase-test":return r==="superadmin"||r==="admin"?s.jsx(j7,{onNavigate:d}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/profile":return a?s.jsx(fD,{onNavigate:d,currentUser:a}):s.jsx(fv,{onLogin:u,onNavigate:d});case"/teacher-sessions":return console.log("Route /teacher-sessions - User Role:",r),console.log("Route /teacher-sessions - Current User:",a),console.log("Route /teacher-sessions - Condition Check:",(r==="teacher"||r==="admin"||r==="superadmin")&&a),(r==="teacher"||r==="admin"||r==="superadmin")&&a?s.jsx(bD,{onNavigate:d,currentUser:a}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/attendance-record":return(r==="teacher"||r==="admin"||r==="superadmin")&&a?s.jsx(_D,{onNavigate:d,currentUser:a}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/memorization-records":return(r==="teacher"||r==="admin"||r==="superadmin")&&a?s.jsx(Ev,{children:s.jsx(ND,{onNavigate:d,currentUser:a})}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});case"/student-assessments":return(r==="teacher"||r==="admin"||r==="superadmin")&&a?s.jsx(Ev,{children:s.jsx(kD,{onNavigate:d,currentUser:a})}):s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f});default:return setTimeout(()=>d("/"),0),s.jsx(Jr,{onNavigate:d,userRole:r,currentUser:a,onLogout:f})}};return console.log("App rendering with:",{userRole:r,currentUser:a}),s.jsx(k3,{client:CD,children:s.jsxs(t3,{children:[s.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",dir:"rtl",children:[s.jsx(t6,{currentPath:e,onNavigate:d,userRole:r,currentUser:a,onLogout:f,onSidebarToggle:c}),s.jsxs("div",{className:"flex flex-1 relative pt-16",children:[r&&s.jsx(l8,{userRole:r,onNavigate:d,onLogout:f,isOpen:o,setIsOpen:l}),s.jsx("main",{className:`flex-1 ${r?o?"mr-64":"mr-16":""}`,children:m()})]}),s.jsx(c8,{})]}),s.jsx(Z4,{}),s.jsx(E5,{})]})})};const Tv="550e8400-e29b-41d4-a716-446655440000",af="superadmin",TD="$2a$10$0lnhiRBBZs4o8HsV5fWAR.ZsqR09MK0YO6iqpqFRhLfBGgw7gaJXq",PD="المسؤول الرئيسي",OD=async()=>{try{const e=await p0(Tv),t=await hv(af);if(e){console.log("المستخدم المسؤول الرئيسي موجود بالفعل بواسطة المعرف:",e.username);return}if(t){console.log("المستخدم المسؤول الرئيسي موجود بالفعل بواسطة اسم المستخدم:",t.username);return}const r={id:Tv,full_name:PD,role:"superadmin",username:af,password_hash:TD};console.log("جاري إنشاء المستخدم المسؤول الرئيسي باستخدام كلمة المرور المشفرة...");const n=await iA(r);n.success?console.log("تم إنشاء المستخدم المسؤول الرئيسي بنجاح:",n.id):console.error("فشل في إنشاء المستخدم المسؤول الرئيسي:",n.message)}catch(e){console.error("خطأ في إعداد المستخدم المسؤول الرئيسي:",e)}try{const e=await hv(af);e?console.log("تم التحقق من وجود المستخدم المسؤول الرئيسي بعد الإنشاء:",e.username):console.error("لم يتم العثور على المستخدم المسؤول الرئيسي بعد محاولة الإنشاء!")}catch(e){console.error("خطأ في التحقق من المستخدم المسؤول الرئيسي بعد الإنشاء:",e)}},AD=async()=>{console.log("جاري تهيئة التطبيق...");try{await OD(),console.log("تم تهيئة التطبيق بنجاح")}catch(e){console.error("خطأ في تهيئة التطبيق:",e)}};AD();const DD=async e=>{try{const t=await bc(e);return console.log("كلمة المرور الأصلية:",e),console.log("كلمة المرور المشفرة:",t),t}catch(t){console.error("حدث خطأ أثناء تشفير كلمة المرور:",t);return}};DD("Ketama@Admin2025");ew(document.getElementById("root")).render(s.jsx(Zk,{basename:{}.PUBLIC_URL,children:s.jsx(ED,{})}));export{Ln as _,qx as s};
